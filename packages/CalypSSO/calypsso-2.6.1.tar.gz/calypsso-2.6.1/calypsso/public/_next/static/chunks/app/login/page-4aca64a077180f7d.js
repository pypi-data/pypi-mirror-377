(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4477:function(e,r,n){Promise.resolve().then(n.bind(n,3842))},3842:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return _}});var t=n(7821),o=n(3153),a=n(1736),l=n(7558),i=n(7211);function s(e){let{className:r,...n}=e;return(0,t.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",r),...n})}var d=n(8504),u=n(8078);let c=e=>{let{form:r,label:n,name:o,render:a,displayError:i}=e,c=(0,d.useSearchParams)();return(0,u.useEffect)(()=>{c.get("credentials_error")&&void 0===r.watch(o)&&r.setError(o,{message:"Combinaison email / mot de passe invalide"})},[i,r,o,c]),(0,t.jsx)(u.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}),(0,t.jsx)(s,{className:"flex h-10 w-full border-none bg-background rounded-md px-3 py-2 text-sm file:border-0 file:bg-transparent \n            file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-ring focus-visible:ring-offset-2\n            focus-visible:outline-none focus-visible:ring-[2px]  \n            disabled:cursor-not-allowed disabled:opacity-50\n            dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]\n            group-hover/input:shadow-none transition duration-400\n            "})]}),children:(0,t.jsx)(l.Wi,{control:r.control,name:o,render:e=>{let{field:r}=e;return(0,t.jsxs)(l.xJ,{className:"grid gap-2",children:[(0,t.jsx)(l.lX,{children:n}),(0,t.jsx)(l.NI,{children:a(r)}),i&&(0,t.jsx)(l.zG,{})]})}})})},f=e=>{let{...r}=e;return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}),(0,t.jsx)(s,{className:"flex h-10 w-full border-none bg-background rounded-md px-3 py-2 text-sm file:border-0 file:bg-transparent \n            file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-ring focus-visible:ring-offset-2\n            focus-visible:outline-none focus-visible:ring-[2px]  \n            disabled:cursor-not-allowed disabled:opacity-50\n            dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]\n            group-hover/input:shadow-none transition duration-400\n            "})]}),children:(0,t.jsx)(c,{...r})})};var m=n(8676),p=n(6447),x=n(615),g=n(5231),v=n(4089),h=n(4542),b=n(746),y=n(9912),j=n(2949),_=()=>{var e;let{projectName:r,entityName:n,emailPlaceholder:i}=(0,u.useContext)(x.c),s=y.z.object({password:y.z.string({required_error:"Veuillez renseigner un mot de passe"}),email:y.z.string({required_error:"Veuillez renseigner votre adresse email"}),response_type:y.z.string().optional(),redirect_uri:y.z.string().optional(),client_id:y.z.string(),scope:y.z.string().optional(),state:y.z.string().optional(),nonce:y.z.string().optional(),code_challenge:y.z.string().optional(),code_challenge_method:y.z.string().optional()}),d=(0,b.cI)({resolver:(0,v.F)(s)});return(0,t.jsx)(o.G,{title:r,description:"Portail de connexion pour les services propos\xe9 par ".concat(n),children:(0,t.jsx)(l.l0,{...d,children:(0,t.jsx)("form",{method:"POST",action:"".concat(j.env.NEXT_PUBLIC_OVERRIDE_HYPERION_URL||(null===(e=window)||void 0===e?void 0:e.location.origin),"/auth/authorization-flow/authorize-validation"),children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)(f,{form:d,name:"email",label:"Email",render:e=>(0,t.jsx)(g.I,{type:"email",autoFocus:!0,placeholder:i,required:!0,...e})}),(0,t.jsx)(f,{form:d,name:"password",label:"Mot de passe",render:e=>(0,t.jsx)(m.W,{required:!0,...e}),displayError:!0}),(0,t.jsx)(p.D,{form:d,name:"response_type",queryParam:"response_type",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"redirect_uri",queryParam:"redirect_uri",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"client_id",queryParam:"client_id"}),(0,t.jsx)(p.D,{form:d,name:"scope",queryParam:"scope",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"state",queryParam:"state",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"nonce",queryParam:"nonce",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"code_challenge",queryParam:"code_challenge",optional:!0}),(0,t.jsx)(p.D,{form:d,name:"code_challenge_method",queryParam:"code_challenge_method",optional:!0}),(0,t.jsx)(a.f,{type:"submit",className:"mt-2 w-full",label:"Se connecter",isLoading:!1}),(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsx)(h.default,{href:"/register",target:"_blank",rel:"noopener noreferrer",children:"Cr\xe9er un compte"}),(0,t.jsx)(h.default,{href:"/recover",target:"_blank",rel:"noopener noreferrer",children:"Mot de passe oubli\xe9 ?"})]})]})})})})}},3153:function(e,r,n){"use strict";n.d(r,{G:function(){return a}});var t=n(7821),o=n(8006);let a=e=>{let{title:r,description:n,children:a}=e;return(0,t.jsx)("div",{className:"m-4 flex h-screen [&>div]:w-full",children:(0,t.jsxs)(o.Zb,{className:"m-auto rounded-xl border bg-white bg-opacity-80 shadow backdrop-blur",children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{className:"text-xl",children:r}),(0,t.jsx)(o.SZ,{children:n})]}),(0,t.jsx)(o.aY,{className:"w-full lg:w-[700px]",children:a})]})})}},1736:function(e,r,n){"use strict";n.d(r,{f:function(){return l}});var t=n(7821),o=n(8140),a=n(7857);let l=e=>{let{isLoading:r,type:n,onClick:l,label:i,className:s,disabled:d,variant:u="default"}=e;return(0,t.jsx)(o.z,{variant:u,type:n,onClick:l,className:s,disabled:r||d,children:r?(0,t.jsx)(a.BGW,{className:"h-4 w-4 animate-spin"}):i})}},8676:function(e,r,n){"use strict";n.d(r,{W:function(){return s}});var t=n(7821),o=n(5231),a=n(7211),l=n(8078),i=n(6963);let s=l.forwardRef((e,r)=>{let{className:n,...s}=e,[d,u]=l.useState(!1),c=()=>u(!d);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.I,{type:d?"text":"password",className:(0,a.cn)(n),ref:r,...s}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-gray-400 hover:text-[hsl(var(--primary))]",children:d?(0,t.jsx)(i.Rbo,{className:"h-4 w-4",onClick:c}):(0,t.jsx)(i.MBb,{className:"h-4 w-4",onClick:c})})]})});s.displayName="PasswordInput"},9686:function(e,r,n){"use strict";n.d(r,{F:function(){return a}});var t=n(7821),o=n(8078);let a=e=>{let{children:r}=e;return(0,t.jsx)(o.Suspense,{fallback:(0,t.jsx)(t.Fragment,{}),children:r})}},6447:function(e,r,n){"use strict";n.d(r,{D:function(){return d}});var t=n(7821),o=n(7558),a=n(8504),l=n(8078);let i=e=>{let{form:r,queryParam:n,name:i,optional:s=!1}=e,d=(0,a.useSearchParams)().get(n),u=(0,a.useRouter)();return(0,l.useEffect)(()=>{s||d?d&&r.setValue(i,d):(console.error("Missing required query parameter: ".concat(n)),u.push(encodeURI("/message?type=missing_query_param")))}),(0,t.jsx)(o.Wi,{control:r.control,name:i,render:e=>{let{field:r}=e;return(0,t.jsx)("input",{type:"hidden",...r})}})};var s=n(9686);let d=e=>{let{form:r,queryParam:n,name:o,optional:a=!1}=e;return(0,t.jsx)(s.F,{children:(0,t.jsx)(i,{form:r,name:o,queryParam:n,optional:a})})}},615:function(e,r,n){"use strict";n.d(r,{c:function(){return l},default:function(){return i}});var t=n(7821),o=n(9164),a=n(8078);let l=(0,a.createContext)({projectName:"",entityName:"",emailPlaceholder:"",studentEmailRegex:"",staffEmailRegex:null,formerStudentEmailRegex:null,mainActivationForm:{fields:[],floorChoices:[],promotionOffset:0},appStoreUrl:null,playStoreUrl:null});function i(e){let{children:r}=e,[n,i]=(0,a.useState)(!0),[s,d]=(0,a.useState)("MyECL"),[u,c]=(0,a.useState)("\xc9CLAIR"),[f,m]=(0,a.useState)("prenom.nom@etu.ec-lyon.fr"),[p,x]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),[h,b]=(0,a.useState)(null),[y,j]=(0,a.useState)({fields:[],floorChoices:[],promotionOffset:0}),[_,w]=(0,a.useState)(null),[N,C]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){try{var e,r,n;let{data:t}=await (0,o.ngE)();d((null==t?void 0:t.name)||"MyECL"),c((null==t?void 0:t.entity_name)||"\xc9CLAIR"),m((null==t?void 0:t.email_placeholder)||"prenom.nom@etu.ec-lyon.fr"),x((null==t?void 0:null===(e=t.student_email_regex)||void 0===e?void 0:e.replaceAll("\\\\","\\"))||"^[\\w\\-.]*@(((etu(-enise)?|enise)\\.)?ec-lyon\\.fr|centraliens-lyon\\.net)$"),v((null==t?void 0:null===(r=t.staff_email_regex)||void 0===r?void 0:r.replaceAll("\\\\","\\"))||null),b((null==t?void 0:null===(n=t.former_student_email_regex)||void 0===n?void 0:n.replaceAll("\\\\","\\"))||null),j({fields:(null==t?void 0:t.main_activation_form.fields)||[],floorChoices:(null==t?void 0:t.main_activation_form.floor_choices)||[],promotionOffset:(null==t?void 0:t.main_activation_form.promotion_offset)||0}),w((null==t?void 0:t.app_store_url)||null),C((null==t?void 0:t.play_store_url)||null),(null==t?void 0:t.primary_color)&&(document.documentElement.style.setProperty("--primary",t.primary_color),document.documentElement.style.setProperty("--ring",t.primary_color))}catch(e){console.error("Error loading settings:",e)}finally{i(!1)}})()},[]),(0,t.jsx)(l.Provider,{value:{projectName:s,entityName:u,emailPlaceholder:f,studentEmailRegex:p,staffEmailRegex:g,formerStudentEmailRegex:h,mainActivationForm:y,appStoreUrl:_,playStoreUrl:N},children:n?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("title",{children:s}),r]})})}},8140:function(e,r,n){"use strict";n.d(r,{d:function(){return s},z:function(){return d}});var t=n(7821),o=n(7211),a=n(7917),l=n(898),i=n(8078);let s=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:opacity-90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,r)=>{let{className:n,variant:l,size:i,asChild:d=!1,...u}=e,c=d?a.g7:"button";return(0,t.jsx)(c,{className:(0,o.cn)(s({variant:l,size:i,className:n})),ref:r,...u})});d.displayName="Button"},8006:function(e,r,n){"use strict";n.d(r,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return u},eW:function(){return c},ll:function(){return s}});var t=n(7821),o=n(8078),a=n(7211);let l=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...o})});l.displayName="Card";let i=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...o})});i.displayName="CardHeader";let s=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...o})});s.displayName="CardTitle";let d=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",n),...o})});d.displayName="CardDescription";let u=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",n),...o})});u.displayName="CardContent";let c=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",n),...o})});c.displayName="CardFooter"},7558:function(e,r,n){"use strict";n.d(r,{l0:function(){return c},NI:function(){return h},Wi:function(){return m},xJ:function(){return g},lX:function(){return v},zG:function(){return b}});var t=n(7821),o=n(8078),a=n(7917),l=n(746),i=n(7211),s=n(5641);let d=(0,n(898).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef((e,r)=>{let{className:n,...o}=e;return(0,t.jsx)(s.f,{ref:r,className:(0,i.cn)(d(),n),...o})});u.displayName=s.f.displayName;let c=l.RV,f=o.createContext({}),m=e=>{let{...r}=e;return(0,t.jsx)(f.Provider,{value:{name:r.name},children:(0,t.jsx)(l.Qr,{...r})})},p=()=>{let e=o.useContext(f),r=o.useContext(x),{getFieldState:n,formState:t}=(0,l.Gc)(),a=n(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},x=o.createContext({}),g=o.forwardRef((e,r)=>{let{className:n,...a}=e,l=o.useId();return(0,t.jsx)(x.Provider,{value:{id:l},children:(0,t.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",n),...a})})});g.displayName="FormItem";let v=o.forwardRef((e,r)=>{let{className:n,...o}=e,{error:a,formItemId:l}=p();return(0,t.jsx)(u,{ref:r,className:(0,i.cn)(a&&"text-destructive",n),htmlFor:l,...o})});v.displayName="FormLabel";let h=o.forwardRef((e,r)=>{let{...n}=e,{error:o,formItemId:l,formDescriptionId:i,formMessageId:s}=p();return(0,t.jsx)(a.g7,{ref:r,id:l,"aria-describedby":o?"".concat(i," ").concat(s):"".concat(i),"aria-invalid":!!o,...n})});h.displayName="FormControl",o.forwardRef((e,r)=>{let{className:n,...o}=e,{formDescriptionId:a}=p();return(0,t.jsx)("p",{ref:r,id:a,className:(0,i.cn)("text-sm text-muted-foreground",n),...o})}).displayName="FormDescription";let b=o.forwardRef((e,r)=>{let{className:n,children:o,...a}=e,{error:l,formMessageId:s}=p(),d=l?String(null==l?void 0:l.message):o;return d?(0,t.jsx)("p",{ref:r,id:s,className:(0,i.cn)("text-sm font-medium text-destructive",n),...a,children:d}):null});b.displayName="FormMessage"},5231:function(e,r,n){"use strict";n.d(r,{I:function(){return c}});var t=n(3620),o=n(7821),a=n(8078),l=n(8657),i=n(474),s=n(1992),d=n(7211);function u(){let e=(0,t._)(["\n        radial-gradient(\n          "," circle at ","px ","px,\n          hsl(var(--ring)),\n          transparent 80%\n        )\n      "]);return u=function(){return e},e}let c=a.forwardRef((e,r)=>{let{className:n,type:t,...c}=e,[f,m]=a.useState(!1),p=(0,l.c)(0),x=(0,l.c)(0);return(0,o.jsx)(i.E.div,{style:{background:(0,s.Y)(u(),f?"100px":"0px",p,x)},onMouseMove:function(e){let{currentTarget:r,clientX:n,clientY:t}=e,{left:o,top:a}=r.getBoundingClientRect();p.set(n-o),x.set(t-a)},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:"p-[2px] rounded-lg transition duration-300 group/input",children:(0,o.jsx)("input",{type:t,className:(0,d.cn)("flex h-10 w-full border-none bg-background rounded-md px-3 py-2 text-sm file:border-0 file:bg-transparent \n          file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-ring focus-visible:ring-offset-2\n          focus-visible:outline-none focus-visible:ring-[2px]  \n           disabled:cursor-not-allowed disabled:opacity-50\n           dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]\n           group-hover/input:shadow-none transition duration-400\n           ",n),ref:r,...c})})});c.displayName="Input"}},function(e){e.O(0,[322,382,390,305,340,415,517,115,364,744],function(){return e(e.s=4477)}),_N_E=e.O()}]);
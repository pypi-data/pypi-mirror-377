# MCP Feedback Enhanced å‘å¸ƒæµç¨‹æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† `mcp-feedback-enhanced` é¡¹ç›®çš„å®Œæ•´å‘å¸ƒæµç¨‹ï¼ŒåŒ…æ‹¬æœ¬åœ°å‘å¸ƒå’Œè‡ªåŠ¨åŒ–å‘å¸ƒä¸¤ç§æ–¹å¼ã€‚

## ğŸ“‹ ç›®å½•

- [å‘å¸ƒå‰å‡†å¤‡](#å‘å¸ƒå‰å‡†å¤‡)
- [ç‰ˆæœ¬ç®¡ç†ç­–ç•¥](#ç‰ˆæœ¬ç®¡ç†ç­–ç•¥)
- [å‘å¸ƒæ–¹å¼](#å‘å¸ƒæ–¹å¼)
  - [æ–¹å¼1: GitHub Actionsè‡ªåŠ¨å‘å¸ƒ (æ¨è)](#æ–¹å¼1-github-actionsè‡ªåŠ¨å‘å¸ƒ-æ¨è)
  - [æ–¹å¼2: æœ¬åœ°æ‰‹åŠ¨å‘å¸ƒ](#æ–¹å¼2-æœ¬åœ°æ‰‹åŠ¨å‘å¸ƒ)
- [å‘å¸ƒåéªŒè¯](#å‘å¸ƒåéªŒè¯)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## ğŸš€ å‘å¸ƒå‰å‡†å¤‡

### 1. ç¯å¢ƒæ£€æŸ¥

ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒå·²æ­£ç¡®é…ç½®ï¼š

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬ (éœ€è¦ >= 3.11)
python --version

# æ£€æŸ¥ uv å·¥å…·
uv --version

# æ£€æŸ¥é¡¹ç›®ä¾èµ–
uv sync --dev
```

### 2. ä»£ç è´¨é‡æ£€æŸ¥

```bash
# è¿è¡Œä»£ç æ ¼å¼åŒ–
uv run ruff format

# è¿è¡Œä»£ç æ£€æŸ¥
uv run ruff check

# è¿è¡Œç±»å‹æ£€æŸ¥
uv run mypy src

# è¿è¡Œæµ‹è¯•
uv run pytest
```

### 3. æ›´æ–°æ–‡æ¡£

- æ›´æ–° `CHANGELOG.md` æ–‡ä»¶ï¼Œè®°å½•æ–°ç‰ˆæœ¬çš„å˜æ›´
- æ›´æ–° `README.md` ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰
- ç¡®ä¿æ‰€æœ‰æ–‡æ¡£ä¸ä»£ç åŒæ­¥

### 4. æ¡Œé¢åº”ç”¨æ„å»ºï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœåŒ…å«æ¡Œé¢åº”ç”¨åŠŸèƒ½çš„æ›´æ–°ï¼š

```bash
# æœ¬åœ°æµ‹è¯•æ¡Œé¢åº”ç”¨æ„å»º
python scripts/build_desktop.py --release

# æ£€æŸ¥æ„å»ºäº§ç‰©
ls -la src/mcp_feedback_enhanced/desktop_release/
```

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

é¡¹ç›®é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (Semantic Versioning)ï¼š

- **MAJOR.MINOR.PATCH** (å¦‚: 2.6.0)
- **æ—¥æœŸç‰ˆæœ¬** (å¦‚: 2025.0720.01)

### ç‰ˆæœ¬ç±»å‹è¯´æ˜

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `patch` | Bugä¿®å¤ã€æ–‡æ¡£æ›´æ–°ã€å°æ”¹è¿› | 2.6.0 â†’ 2.6.1 |
| `minor` | æ–°åŠŸèƒ½ã€å‘åå…¼å®¹çš„æ”¹è¿› | 2.6.0 â†’ 2.7.0 |
| `major` | é‡å¤§æ›´æ”¹ã€APIç ´åæ€§å˜æ›´ | 2.6.0 â†’ 3.0.0 |
| `custom` | è‡ªå®šä¹‰ç‰ˆæœ¬å· | 2025.0720.01 |

## ğŸš€ å‘å¸ƒæ–¹å¼

### æ–¹å¼1: GitHub Actionsè‡ªåŠ¨å‘å¸ƒ (æ¨è)

è¿™æ˜¯æœ€ç®€å•ã€æœ€å¯é çš„å‘å¸ƒæ–¹å¼ã€‚

#### æ­¥éª¤1: é…ç½®PyPI Token

1. è®¿é—® [PyPI Account Settings](https://pypi.org/manage/account/token/)
2. åˆ›å»ºæ–°çš„API Token
3. åœ¨GitHubä»“åº“ä¸­æ·»åŠ Secret:
   - åç§°: `PYPI_API_TOKEN`
   - å€¼: æ‚¨çš„PyPI Token

#### æ­¥éª¤2: æ‰§è¡Œè‡ªåŠ¨å‘å¸ƒ

1. **è®¿é—®GitHub Actionsé¡µé¢**:
   ```
   https://github.com/jayzqj/mcp-feedback-enhanced/actions/workflows/publish.yml
   ```

2. **ç‚¹å‡» "Run workflow" æŒ‰é’®**

3. **é…ç½®å‘å¸ƒå‚æ•°**:
   - **Version Type**: é€‰æ‹© `patch`/`minor`/`major`
   - **Custom Version**: å¯é€‰ï¼Œå¦‚ `2025.0720.01` (ä¼šè¦†ç›–Version Type)
   - **Include Desktop**: é€‰æ‹©æ˜¯å¦åŒ…å«æ¡Œé¢åº”ç”¨
   - **Desktop Build Run ID**: å¯é€‰ï¼ŒæŒ‡å®šç‰¹å®šçš„æ¡Œé¢åº”ç”¨æ„å»º

4. **ç‚¹å‡» "Run workflow" å¼€å§‹å‘å¸ƒ**

#### è‡ªåŠ¨åŒ–æµç¨‹è¯´æ˜

å·¥ä½œæµç¨‹å°†è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. âœ… **ç¯å¢ƒå‡†å¤‡**: å®‰è£…ä¾èµ–å’Œå·¥å…·
2. âœ… **ç‰ˆæœ¬æ›´æ–°**: è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·
3. âœ… **æ¡Œé¢åº”ç”¨æ£€æŸ¥**: éªŒè¯æ¡Œé¢åº”ç”¨äºŒè¿›åˆ¶æ–‡ä»¶
4. âœ… **åŒ…æ„å»º**: æ„å»ºPythonåŒ…
5. âœ… **åŒ…éªŒè¯**: ä½¿ç”¨twineæ£€æŸ¥åŒ…
6. âœ… **PyPIå‘å¸ƒ**: å‘å¸ƒåˆ°PyPI
7. âœ… **GitHub Release**: åˆ›å»ºGitHubå‘å¸ƒé¡µé¢
8. âœ… **æ ‡ç­¾æ¨é€**: æ¨é€ç‰ˆæœ¬æ ‡ç­¾

### æ–¹å¼2: æœ¬åœ°æ‰‹åŠ¨å‘å¸ƒ

é€‚ç”¨äºéœ€è¦æ›´å¤šæ§åˆ¶çš„æƒ…å†µã€‚

#### æ­¥éª¤1: ç‰ˆæœ¬æ›´æ–°

```bash
# ä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„å‘å¸ƒè„šæœ¬
python scripts/release.py patch   # 2.6.0 -> 2.6.1
python scripts/release.py minor   # 2.6.0 -> 2.7.0
python scripts/release.py major   # 2.6.0 -> 3.0.0

# æˆ–æ‰‹åŠ¨ç¼–è¾‘ç‰ˆæœ¬å·
# ç¼–è¾‘ pyproject.toml ä¸­çš„ version å­—æ®µ
# ç¼–è¾‘ src/mcp_feedback_enhanced/__init__.py ä¸­çš„ __version__
```

#### æ­¥éª¤2: æ¸…ç†å’Œæ„å»º

```bash
# æ¸…ç†ç¼“å­˜
python scripts/cleanup_cache.py --clean

# æ„å»ºåŒ…
uv build

# éªŒè¯åŒ…
uv run twine check dist/*
```

#### æ­¥éª¤3: å‘å¸ƒåˆ°PyPI

```bash
# æ–¹å¼A: ä½¿ç”¨API Token (æ¨è)
uv publish --token your-pypi-token

# æ–¹å¼B: ä½¿ç”¨ç”¨æˆ·åå¯†ç 
uv publish --username your-username --password your-password

# æ–¹å¼C: å…ˆå‘å¸ƒåˆ°æµ‹è¯•PyPIéªŒè¯
uv publish --repository testpypi --token your-test-token
```

#### æ­¥éª¤4: åˆ›å»ºGitæ ‡ç­¾

```bash
# è·å–å½“å‰ç‰ˆæœ¬
VERSION=$(grep '^version =' pyproject.toml | cut -d'"' -f2)

# æäº¤æ›´æ”¹
git add .
git commit -m "Release v${VERSION}"

# åˆ›å»ºæ ‡ç­¾
git tag "v${VERSION}"

# æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin "v${VERSION}"
```

## âœ… å‘å¸ƒåéªŒè¯

### 1. PyPIéªŒè¯

```bash
# æ£€æŸ¥PyPIé¡µé¢
# https://pypi.org/project/ai-interactive-feedback/

# æµ‹è¯•å®‰è£…
uvx ai-interactive-feedback@latest --help

# æµ‹è¯•ç‰¹å®šç‰ˆæœ¬
uvx ai-interactive-feedback@2025.0720.01 --help
```

### 2. åŠŸèƒ½æµ‹è¯•

```bash
# æµ‹è¯•Webæ¨¡å¼
uvx ai-interactive-feedback@latest test --web

# æµ‹è¯•æ¡Œé¢æ¨¡å¼ (å¦‚æœåŒ…å«)
uvx ai-interactive-feedback@latest test --desktop

# æµ‹è¯•MCPæœåŠ¡å™¨
uvx ai-interactive-feedback@latest server
```

### 3. é…ç½®æµ‹è¯•

åˆ›å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ï¼š

```json
{
  "mcpServers": {
    "ai-interactive-feedback": {
      "command": "uvx",
      "args": ["ai-interactive-feedback@latest"],
      "env": {
        "MCP_DESKTOP_MODE": "true",
        "MCP_WEB_PORT": "8765",
        "MCP_DEBUG": "false"
      }
    }
  }
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. PyPIå‘å¸ƒå¤±è´¥

**é”™è¯¯**: `403 Forbidden` æˆ–è®¤è¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®
# ç¡®ä¿Tokenæœ‰ä¸Šä¼ æƒé™
# æ£€æŸ¥åŒ…åæ˜¯å¦å·²è¢«å ç”¨
```

#### 2. ç‰ˆæœ¬å†²çª

**é”™è¯¯**: `File already exists`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ›´æ–°ç‰ˆæœ¬å·
python scripts/release.py patch

# æˆ–æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬
# ç¼–è¾‘ pyproject.toml å’Œ __init__.py
```

#### 3. æ¡Œé¢åº”ç”¨ç¼ºå¤±

**é”™è¯¯**: æ¡Œé¢æ¨¡å¼æ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°æ„å»ºæ¡Œé¢åº”ç”¨
python scripts/build_desktop.py --release

# æˆ–åœ¨GitHub Actionsä¸­è®¾ç½® include_desktop: false
```

#### 4. ä¾èµ–é—®é¢˜

**é”™è¯¯**: åŒ…å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬
uv tree

# æ›´æ–°ä¾èµ–
uv sync --upgrade

# æ£€æŸ¥Pythonç‰ˆæœ¬å…¼å®¹æ€§
```

### è°ƒè¯•æŠ€å·§

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export MCP_DEBUG=true

# æ£€æŸ¥åŒ…å†…å®¹
uv run python -c "import ai_interactive_feedback; print(ai_interactive_feedback.__file__)"

# éªŒè¯åŒ…ç»“æ„
unzip -l dist/ai_interactive_feedback-*.whl
```

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### PyPI Tokenç®¡ç†

1. **Tokenæƒé™**: ä½¿ç”¨æœ€å°æƒé™åŸåˆ™
   ```bash
   # æ¨è: é¡¹ç›®ç‰¹å®šToken
   # é¿å…: å…¨å±€è´¦æˆ·Token
   ```

2. **Tokenè½®æ¢**: å®šæœŸæ›´æ–°PyPI Token
3. **ç¯å¢ƒéš”ç¦»**: æµ‹è¯•å’Œç”Ÿäº§ä½¿ç”¨ä¸åŒToken

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

- âœ… ä½¿ç”¨GitHub Secretså­˜å‚¨Token
- âœ… é¿å…åœ¨æ—¥å¿—ä¸­æš´éœ²æ•æ„Ÿä¿¡æ¯
- âœ… å®šæœŸå®¡æŸ¥è®¿é—®æƒé™

## ğŸ“Š å‘å¸ƒç»Ÿè®¡å’Œç›‘æ§

### å‘å¸ƒæŒ‡æ ‡

```bash
# æ£€æŸ¥åŒ…ä¸‹è½½ç»Ÿè®¡
# https://pypistats.org/packages/ai-interactive-feedback

# ç›‘æ§åŒ…å¤§å°
ls -lh dist/

# æ£€æŸ¥ä¾èµ–æ ‘
uv tree
```

### ç‰ˆæœ¬å…¼å®¹æ€§çŸ©é˜µ

| Pythonç‰ˆæœ¬ | æ”¯æŒçŠ¶æ€ | æµ‹è¯•çŠ¶æ€ |
|------------|----------|----------|
| 3.11       | âœ… æ”¯æŒ  | âœ… æµ‹è¯•  |
| 3.12       | âœ… æ”¯æŒ  | âœ… æµ‹è¯•  |
| 3.13       | âœ… æ”¯æŒ  | âš ï¸ éƒ¨åˆ†  |

### å¹³å°æ”¯æŒ

| å¹³å° | Webæ¨¡å¼ | æ¡Œé¢æ¨¡å¼ | çŠ¶æ€ |
|------|---------|----------|------|
| Windows x64 | âœ… | âœ… | å®Œå…¨æ”¯æŒ |
| macOS Intel | âœ… | âœ… | å®Œå…¨æ”¯æŒ |
| macOS ARM64 | âœ… | âœ… | å®Œå…¨æ”¯æŒ |
| Linux x64 | âœ… | âœ… | å®Œå…¨æ”¯æŒ |

## ğŸš€ é«˜çº§å‘å¸ƒåœºæ™¯

### çƒ­ä¿®å¤å‘å¸ƒ

ç´§æ€¥ä¿®å¤çš„å¿«é€Ÿå‘å¸ƒæµç¨‹ï¼š

```bash
# 1. åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
git checkout -b hotfix/critical-fix

# 2. ä¿®å¤é—®é¢˜
# ... è¿›è¡Œå¿…è¦çš„ä¿®å¤

# 3. å¿«é€Ÿæµ‹è¯•
uv run pytest tests/critical/

# 4. å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬
python scripts/release.py patch

# 5. åˆå¹¶å›ä¸»åˆ†æ”¯
git checkout main
git merge hotfix/critical-fix
```

### é¢„å‘å¸ƒç‰ˆæœ¬

å‘å¸ƒæµ‹è¯•ç‰ˆæœ¬ï¼š

```bash
# ä½¿ç”¨é¢„å‘å¸ƒç‰ˆæœ¬å·
# ä¾‹å¦‚: 2.7.0-alpha.1, 2.7.0-beta.1, 2.7.0-rc.1

# æ‰‹åŠ¨è®¾ç½®ç‰ˆæœ¬
sed -i 's/version = ".*"/version = "2.7.0-alpha.1"/' pyproject.toml

# å‘å¸ƒåˆ°æµ‹è¯•PyPI
uv publish --repository testpypi
```

### å›æ»šç­–ç•¥

å¦‚æœå‘å¸ƒå‡ºç°é—®é¢˜ï¼š

```bash
# 1. ä»PyPIæ’¤å›ç‰ˆæœ¬ (ä»…é™24å°æ—¶å†…)
# è®¿é—® PyPI ç®¡ç†é¡µé¢æ‰‹åŠ¨æ’¤å›

# 2. å‘å¸ƒä¿®å¤ç‰ˆæœ¬
python scripts/release.py patch

# 3. é€šçŸ¥ç”¨æˆ·å‡çº§
# æ›´æ–°æ–‡æ¡£å’Œé€šçŸ¥æ¸ é“
```

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰æ£€æŸ¥ âœ…

- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡ (`ruff`, `mypy`)
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (`pytest`)
- [ ] æ–‡æ¡£å·²æ›´æ–° (`CHANGELOG.md`, `README.md`)
- [ ] ç‰ˆæœ¬å·å·²ç¡®å®š
- [ ] æ¡Œé¢åº”ç”¨æ„å»ºæˆåŠŸ (å¦‚éœ€è¦)
- [ ] æœ¬åœ°åŠŸèƒ½æµ‹è¯•é€šè¿‡

### å‘å¸ƒè¿‡ç¨‹æ£€æŸ¥ âœ…

- [ ] GitHub Actionså·¥ä½œæµç¨‹æˆåŠŸ
- [ ] PyPIåŒ…å·²å‘å¸ƒ
- [ ] GitHub Releaseå·²åˆ›å»º
- [ ] ç‰ˆæœ¬æ ‡ç­¾å·²æ¨é€

### å‘å¸ƒåæ£€æŸ¥ âœ…

- [ ] PyPIé¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] åŒ…å¯ä»¥æ­£å¸¸å®‰è£… (`uvx ai-interactive-feedback@latest`)
- [ ] åŸºæœ¬åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£é“¾æ¥æ­£å¸¸
- [ ] ç¤¾åŒºé€šçŸ¥å·²å‘é€

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actionså·¥ä½œæµç¨‹](./WORKFLOWS.md)
- [æ¡Œé¢åº”ç”¨æ„å»ºæŒ‡å—](./DESKTOP_BUILD.md)
- [é¡¹ç›®æ¶æ„æ–‡æ¡£](./architecture/README.md)
- [ç¼“å­˜ç®¡ç†æŒ‡å—](./zh-CN/cache-management.md)

## ğŸ¯ æœ€ä½³å®è·µ

1. **å‘å¸ƒå‰æµ‹è¯•**: å§‹ç»ˆåœ¨æœ¬åœ°æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
2. **ç‰ˆæœ¬è§„åˆ’**: éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
3. **æ–‡æ¡£åŒæ­¥**: ç¡®ä¿æ–‡æ¡£ä¸ä»£ç ç‰ˆæœ¬ä¸€è‡´
4. **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨GitHub Actionsè‡ªåŠ¨å‘å¸ƒ
5. **å¤‡ä»½ç­–ç•¥**: ä¿ç•™é‡è¦ç‰ˆæœ¬çš„æ„å»ºäº§ç‰©
6. **ç›‘æ§å‘å¸ƒ**: å‘å¸ƒååŠæ—¶éªŒè¯åŠŸèƒ½æ­£å¸¸
7. **ç¤¾åŒºæ²Ÿé€š**: åŠæ—¶é€šçŸ¥é‡è¦æ›´æ–°
8. **å®‰å…¨ç¬¬ä¸€**: ä¿æŠ¤æ•æ„Ÿä¿¡æ¯å’Œè®¿é—®æƒé™

## ğŸ†˜ ç´§æ€¥è”ç³»

å¦‚æœå‘å¸ƒè¿‡ç¨‹ä¸­é‡åˆ°ä¸¥é‡é—®é¢˜ï¼š

1. **ç«‹å³åœæ­¢**: åœæ­¢æ­£åœ¨è¿›è¡Œçš„å‘å¸ƒæµç¨‹
2. **è¯„ä¼°å½±å“**: ç¡®å®šé—®é¢˜çš„å½±å“èŒƒå›´
3. **å›æ»šè®¡åˆ’**: å‡†å¤‡å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬
4. **ä¿®å¤é—®é¢˜**: å¿«é€Ÿä¿®å¤å¹¶é‡æ–°å‘å¸ƒ
5. **äº‹åæ€»ç»“**: åˆ†æé—®é¢˜åŸå› å¹¶æ”¹è¿›æµç¨‹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-07-20
**ç»´æŠ¤è€…**: Minidoracat
**ä½¿ç”¨æ¨¡å‹**: Claude Sonnet 4

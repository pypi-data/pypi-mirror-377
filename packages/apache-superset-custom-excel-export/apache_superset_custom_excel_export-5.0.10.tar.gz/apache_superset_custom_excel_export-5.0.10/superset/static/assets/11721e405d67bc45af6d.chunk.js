(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3608],{31746:(e,l,t)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function a(e){if(!t.o(n,e))return Promise.resolve().then((()=>{var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}));var l=n[e],a=l[0];return Promise.all(l.slice(1).map(t.e)).then((()=>t(a)))}a.keys=()=>Object.keys(n),a.id=31746,e.exports=a},33608:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>g,extractTreePathInfo:()=>u});var n=t(2445),a=t(96540),r=t(7349),o=t(32142),s=t(86444),c=t(85867),i=t(71194);const u=e=>(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));function g(e){const{height:l,width:t,echartOptions:g,setDataMask:h,labelMap:d,selectedValues:f,formData:p,onContextMenu:m,refs:v,emitCrossFilters:y,coltypeMapping:j}=e,{columns:x}=p,S=(0,a.useCallback)((e=>{const l=u(e),t=l.join(","),n=Object.values(f);let a;a=n.includes(t)?n.filter((e=>e!==t)):[t];const r=a.map((e=>d[e]));return{dataMask:{extraFormData:{filters:0!==a.length&&x?x.slice(0,l.length).map(((e,l)=>{const t=r.map((e=>e[l]));return null==t?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:t}})):[]},filterState:{value:r.length?r:null,selectedValues:a.length?a:null}},isCurrentValueSelected:n.includes(t)}}),[x,d,f]),b=(0,a.useCallback)((e=>{y&&null!=x&&x.length&&h(S(e).dataMask)}),[y,h,S]),T={click:e=>{const{treePathInfo:l}=e;b(l)},contextmenu:async e=>{if(m){e.event.stop();const{data:l,treePathInfo:t}=e,{records:n}=l,a=u(e.treePathInfo),c=e.event.event,g=[],h=[];if(null!=x&&x.length){a.forEach(((e,l)=>g.push({col:x[l],op:"==",val:n[l],formattedVal:e})));const e=a[a.length-1];h.push({col:x[a.length-1],op:"==",val:e,formattedVal:(0,i.Wy)(e,{timeFormatter:(0,r.mo)(p.dateFormat),numberFormatter:(0,o.gV)(p.numberFormat),coltype:null==j?void 0:j[(0,s.A)(x[a.length-1])]})})}m(c.clientX,c.clientY,{drillToDetail:g,crossFilter:null!=x&&x.length?S(t):void 0,drillBy:{filters:h,groupbyFieldName:"columns"}})}}};return(0,n.Y)(c.A,{refs:v,height:l,width:t,echartOptions:g,eventHandlers:T,selectedValues:f})}},85867:(e,l,t)=>{"use strict";t.d(l,{A:()=>Z});var n=t(55364),a=t.n(n),r=t(2445),o=t(96540),s=t(61225),c=t(72234),i=t(3087),u=t(53080),g=t(92351),h=t(42900),d=t(51719),f=t(17979),p=t(74508),m=t(61030),v=t(45567),y=t(49714),j=t(11734),x=t(80491),S=t(25652),b=t(73900),T=t(32003),E=t(22329),I=t(31441),w=t(12458),F=t(39539),O=t(5553),k=t(45967),A=t(40830),C=t(45620),L=t(39838),R=t(42998),P=t(69380),V=t(25384),H=t(6641),U=t(74064),N=t(28540),D=t(35278),M=t(51536);const K=c.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function Y({width:e,height:l,echartOptions:n,eventHandlers:i,zrEventHandlers:h,selectedValues:d={},refs:f},p){const m=(0,o.useRef)(null);f&&(f.divRef=m);const[v,y]=(0,o.useState)(!1),j=(0,o.useRef)(),x=(0,o.useMemo)((()=>Object.keys(d)||[]),[d]),S=(0,o.useRef)([]);(0,o.useImperativeHandle)(p,(()=>({getEchartInstance:()=>j.current})));const b=(0,s.d4)((e=>{var l,t;return null!=(l=null==e||null==(t=e.common)?void 0:t.locale)?l:M.Xn})).toUpperCase(),T=(0,o.useCallback)((({width:e,height:l})=>{j.current&&j.current.resize({width:e,height:l})}),[]);return(0,o.useEffect)((()=>{(async e=>{var l;let n;try{n=await t(31746)(`./lang${e}`)}catch(l){console.error(`Locale ${e} not supported in ECharts`,l)}return null==(l=n)?void 0:l.default})(b).then((e=>{e&&(0,u.E)(b,e),m.current&&(j.current||(j.current=(0,g.Ts)(m.current,null,{locale:b})),y(!0))}))}),[b]),(0,o.useEffect)((()=>{if(v){var t;Object.entries(i||{}).forEach((([e,l])=>{var t,n;null==(t=j.current)||t.off(e),null==(n=j.current)||n.on(e,l)})),Object.entries(h||{}).forEach((([e,l])=>{var t,n;null==(t=j.current)||t.getZr().off(e),null==(n=j.current)||n.getZr().on(e,l)}));const r=a()({},(e=>{const l=c.vP.theme,t={textStyle:{color:l.colorText,fontFamily:l.fontFamily},title:{textStyle:{color:l.colorText}},legend:{textStyle:{color:l.colorTextSecondary}},tooltip:{backgroundColor:l.colorBgContainer,textStyle:{color:l.colorText}},axisPointer:{lineStyle:{color:l.colorPrimary},label:{color:l.colorText}}};return null!=e&&e.xAxis&&(t.xAxis={axisLine:{lineStyle:{color:l.colorSplit}},axisLabel:{color:l.colorTextSecondary},splitLine:{lineStyle:{color:l.colorSplit}}}),null!=e&&e.yAxis&&(t.yAxis={axisLine:{lineStyle:{color:l.colorSplit}},axisLabel:{color:l.colorTextSecondary},splitLine:{lineStyle:{color:l.colorSplit}}}),t})(n),n);null==(t=j.current)||t.setOption(r,!0),T({width:e,height:l})}}),[v,n,i,h]),(0,o.useEffect)((()=>()=>{var e;return null==(e=j.current)?void 0:e.dispose()}),[]),(0,o.useEffect)((()=>{j.current&&(j.current.dispatchAction({type:"downplay",dataIndex:S.current.filter((e=>!x.includes(e)))}),x.length&&j.current.dispatchAction({type:"highlight",dataIndex:x}),S.current=x)}),[x,j.current]),(0,o.useLayoutEffect)((()=>{T({width:e,height:l})}),[e,l,T]),(0,r.Y)(K,{ref:m,height:l,width:e})}(0,i.Y)([F.a,h.a,d.a,f.a,p.a,m.a,v.a,y.a,j.a,x.a,S.a,b.a,T.a,E.a,I.a,w.a,O.a,k.a,A.a,C.a,L.a,R.a,P.a,V.a,H.a,U.a,N.a,D._]);const Z=(0,o.forwardRef)(Y)}}]);
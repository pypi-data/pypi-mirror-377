(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1459],{31746:(e,t,l)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function a(e){if(!l.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return Promise.all(t.slice(1).map(l.e)).then((()=>l(a)))}a.keys=()=>Object.keys(n),a.id=31746,e.exports=a},61459:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>S});var n=l(2445),a=l(96540),r=l(62952),o=l(58863),s=l(96627),c=l(7349),u=l(32142),i=l(86444),g=l(85867),d=l(71194),f=l(72234),h=l(9203),p=l(51536);const{RadioButtonControl:m}=h.A,v=f.I4.div`
  text-align: center;
`;function x({formData:e,setControlValue:t}){const{extraControlsOptions:l,extraControlsHandler:r,extraValue:o}=function({formData:e,setControlValue:t}){const{stack:l,area:n}=e,[r,o]=(0,a.useState)(null!=l?l:void 0);return(0,a.useEffect)((()=>{o(l)}),[l]),{extraControlsOptions:(0,a.useMemo)((()=>n?p.RC:[]),[n]),extraControlsHandler:(0,a.useCallback)((e=>{n&&t&&(t("stack",e),o(e))}),[n,t]),extraValue:r}}({formData:e,setControlValue:t});return e.showExtraControls?(0,n.Y)(v,{children:(0,n.Y)(m,{options:l,onChange:r,value:o})}):null}const y=300;function S({formData:e,height:t,width:l,echartOptions:f,groupby:h,labelMap:p,selectedValues:m,setDataMask:v,setControlValue:S,legendData:C=[],onContextMenu:b,onLegendStateChanged:j,onFocusedSeries:E,xValueFormatter:T,xAxis:k,refs:w,emitCrossFilters:F,coltypeMapping:R,onLegendScroll:V}){const{stack:A}=e,I=(0,a.useRef)(null);w.echartRef=I;const O=(0,a.useRef)(),L=(0,a.useRef)(null),[D,H]=(0,a.useState)(0);(0,a.useEffect)((()=>{var e;const t=(null==(e=L.current)?void 0:e.offsetHeight)||0;H(t)}),[e.showExtraControls]);const N=(0,r.A)(h).length>0,M=(0,a.useCallback)((e=>{const t=Object.values(m);let l;l=t.includes(e)?t.filter((t=>t!==e)):[e];const n=l.map((e=>p[e]));return{dataMask:{extraFormData:{filters:0===l.length?[]:h.map(((e,t)=>{const l=n.map((e=>e[t]));return null==l?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:l}}))},filterState:{label:n.length?n:void 0,value:n.length?n:null,selectedValues:l.length?l:null}},isCurrentValueSelected:t.includes(e)}}),[h,p,m]),P=(0,a.useCallback)((e=>{F&&v(M(e).dataMask)}),[F,v,M]),U={click:e=>{N&&(O.current&&clearTimeout(O.current),O.current=setTimeout((()=>{const{seriesName:t}=e;P(t)}),y))},mouseout:()=>{E(null)},mouseover:e=>{E(e.seriesName)},legendscroll:e=>{null==V||V(e.scrollDataIndex)},legendselectchanged:e=>{null==j||j(e.selected)},legendselectall:e=>{null==j||j(e.selected)},legendinverseselect:e=>{null==j||j(e.selected)},contextmenu:async t=>{if(b){var l;t.event.stop();const{data:n,seriesName:a}=t,g=[],f=[],h=t.event.event,m=[...t.name?[t.name]:[],...null!=(l=p[a])?l:[]],v=(0,r.A)(e.groupby);n&&k.type===o.Gw.Time&&g.push({col:k.label===s.Tf?e.granularitySqla:k.label,grain:e.timeGrainSqla,op:"==",val:n[0],formattedVal:T(n[0])}),[...k.type===o.Gw.Category&&n?[k.label]:[],...v].forEach(((e,t)=>g.push({col:e,op:"==",val:m[t],formattedVal:String(m[t])}))),v.forEach(((t,l)=>{var n;const r=null!=(n=p[a])?n:[],o=r[r.length-v.length+l];f.push({col:t,op:"==",val:o,formattedVal:(0,d.Wy)(o,{timeFormatter:(0,c.mo)(e.dateFormat),numberFormatter:(0,u.gV)(e.numberFormat),coltype:null==R?void 0:R[(0,i.A)(t)]})})})),b(h.clientX,h.clientY,{drillToDetail:g,drillBy:{filters:f,groupbyFieldName:"groupby"},crossFilter:N?M(a):void 0})}}},Y={dblclick:e=>{var t;O.current&&clearTimeout(O.current);const l=[e.offsetX,e.offsetY],n=null==(t=I.current)?void 0:t.getEchartInstance();if(null!=n&&n.containPixel("grid",l)){var a;if(!A&&"ec-polygon"===(null==(a=e.target)?void 0:a.type))return;const t=n.getModel(),l=((e,t)=>{let l=e,n=null;for(;l;){const e=l.__ecComponentInfo;if(null!=e){n=t.getComponent(e.mainType,e.index);break}l=l.parent}return n})(e.target,t);if(l){const{name:e}=l,t=C.reduce(((t,l)=>({...t,[l]:l===e})),{});null==j||j(t)}}}};return(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{ref:L,children:(0,n.Y)(x,{formData:e,setControlValue:S})}),(0,n.Y)(g.A,{ref:I,refs:w,height:t-D,width:l,echartOptions:f,eventHandlers:U,zrEventHandlers:Y,selectedValues:m})]})}},85867:(e,t,l)=>{"use strict";l.d(t,{A:()=>_});var n=l(55364),a=l.n(n),r=l(2445),o=l(96540),s=l(61225),c=l(72234),u=l(3087),i=l(53080),g=l(92351),d=l(42900),f=l(51719),h=l(17979),p=l(74508),m=l(61030),v=l(45567),x=l(49714),y=l(11734),S=l(80491),C=l(25652),b=l(73900),j=l(32003),E=l(22329),T=l(31441),k=l(12458),w=l(39539),F=l(5553),R=l(45967),V=l(40830),A=l(45620),I=l(39838),O=l(42998),L=l(69380),D=l(25384),H=l(6641),N=l(74064),M=l(28540),P=l(35278),U=l(51536);const Y=c.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function K({width:e,height:t,echartOptions:n,eventHandlers:u,zrEventHandlers:d,selectedValues:f={},refs:h},p){const m=(0,o.useRef)(null);h&&(h.divRef=m);const[v,x]=(0,o.useState)(!1),y=(0,o.useRef)(),S=(0,o.useMemo)((()=>Object.keys(f)||[]),[f]),C=(0,o.useRef)([]);(0,o.useImperativeHandle)(p,(()=>({getEchartInstance:()=>y.current})));const b=(0,s.d4)((e=>{var t,l;return null!=(t=null==e||null==(l=e.common)?void 0:l.locale)?t:U.Xn})).toUpperCase(),j=(0,o.useCallback)((({width:e,height:t})=>{y.current&&y.current.resize({width:e,height:t})}),[]);return(0,o.useEffect)((()=>{(async e=>{var t;let n;try{n=await l(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=n)?void 0:t.default})(b).then((e=>{e&&(0,i.E)(b,e),m.current&&(y.current||(y.current=(0,g.Ts)(m.current,null,{locale:b})),x(!0))}))}),[b]),(0,o.useEffect)((()=>{if(v){var l;Object.entries(u||{}).forEach((([e,t])=>{var l,n;null==(l=y.current)||l.off(e),null==(n=y.current)||n.on(e,t)})),Object.entries(d||{}).forEach((([e,t])=>{var l,n;null==(l=y.current)||l.getZr().off(e),null==(n=y.current)||n.getZr().on(e,t)}));const r=a()({},(e=>{const t=c.vP.theme,l={textStyle:{color:t.colorText,fontFamily:t.fontFamily},title:{textStyle:{color:t.colorText}},legend:{textStyle:{color:t.colorTextSecondary}},tooltip:{backgroundColor:t.colorBgContainer,textStyle:{color:t.colorText}},axisPointer:{lineStyle:{color:t.colorPrimary},label:{color:t.colorText}}};return null!=e&&e.xAxis&&(l.xAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),null!=e&&e.yAxis&&(l.yAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),l})(n),n);null==(l=y.current)||l.setOption(r,!0),j({width:e,height:t})}}),[v,n,u,d]),(0,o.useEffect)((()=>()=>{var e;return null==(e=y.current)?void 0:e.dispose()}),[]),(0,o.useEffect)((()=>{y.current&&(y.current.dispatchAction({type:"downplay",dataIndex:C.current.filter((e=>!S.includes(e)))}),S.length&&y.current.dispatchAction({type:"highlight",dataIndex:S}),C.current=S)}),[S,y.current]),(0,o.useLayoutEffect)((()=>{j({width:e,height:t})}),[e,t,j]),(0,r.Y)(Y,{ref:m,height:t,width:e})}(0,u.Y)([w.a,d.a,f.a,h.a,p.a,m.a,v.a,x.a,y.a,S.a,C.a,b.a,j.a,E.a,T.a,k.a,F.a,R.a,V.a,A.a,I.a,O.a,L.a,D.a,H.a,N.a,M.a,P._]);const _=(0,o.forwardRef)(K)}}]);
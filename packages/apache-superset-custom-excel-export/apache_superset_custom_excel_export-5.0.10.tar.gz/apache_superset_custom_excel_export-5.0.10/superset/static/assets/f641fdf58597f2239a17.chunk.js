(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2991],{2511:(e,n,t)=>{"use strict";var l,i;t.d(n,{A:()=>l,v:()=>i}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(i||(i={}))},5815:(e,n,t)=>{"use strict";t.d(n,{SO:()=>s,Sg:()=>o,pA:()=>a});var l=t(87903),i=t(15151),r=t(2511);const a=(e,n,t=!1,l=!1)=>{const i={};return t?i.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=n&&0!==n.length&&(i.filters=[{col:e,op:l?"NOT IN":"IN",val:n}]),i},s=(e,n,t)=>{const l=[];return null!=n&&n!==t&&l.push({col:e,op:">=",val:n}),null!=t&&t!==n&&l.push({col:e,op:"<=",val:t}),null!=t&&null!=n&&t===n&&l.push({col:e,op:"==",val:t}),l.length?{filters:l}:{}};function o({timeFormatter:e,numberFormatter:n}={}){return(t,r)=>{if(null==t)return i.mu;if("boolean"==typeof t)return t?i.PU:i.qC;if(r===l.s.Boolean)try{return JSON.parse(String(t).toLowerCase())?i.PU:i.qC}catch{return i.qC}return"string"==typeof t?t:"bigint"==typeof t?String(t):e&&r===l.s.Temporal?e(t):n&&"number"==typeof t&&r===l.s.Numeric?n(t):String(t)}}},22991:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>k});var l=t(98023),i=t.n(l),r=t(2445),a=t(72234),s=t(32142),o=t(53682),u=t(95579),d=t(62952),c=t(86444),m=t(65482),p=t(96540),v=t(10504),h=t(2020),f=t(49826),g=t(97470),x=t(38380),y=t(56268),b=t(58904),S=t(67874),M=t(5815),$=t(23876);const w=a.I4.span`
  margin: 0 ${({theme:e})=>3*e.sizeUnit}px;
  color: ${({theme:e})=>e.colorSplit};
  font-weight: ${({theme:e})=>e.fontWeightStrong};
  font-size: ${({theme:e})=>e.fontSize}px;
  align-content: center;
`,A=a.I4.div`
  display: flex;
  justify-content: space-between;
  width: 100%;

  .ant-input-number {
    min-width: 80px;
    position: relative;
  }
`,I=a.I4.div`
  ${({theme:e})=>`\n    margin: ${4*e.sizeUnit}px 0;\n    padding: 0 ${e.sizeUnit}px;\n  `}
`,F=a.I4.div`
  ${({theme:e})=>`\n    position: absolute;\n    top: -${10*e.sizeUnit}px;\n    right: 0px;\n    z-index: 100;\n    display: flex;\n    align-items: center;\n\n    .tooltip-icon {\n      margin-left: ${2*e.sizeUnit}px;\n    }\n  `}
`,Y=a.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    flex-direction: column;\n    gap: ${4*e.sizeUnit}px;\n    width: 100%;\n\n    .controls-container {\n      display: flex;\n      align-items: center;\n      gap: ${4*e.sizeUnit}px;\n      width: 100%;\n\n      .slider-wrapper {\n        display: flex;\n        align-items: center;\n        flex: 2;\n      }\n\n      .slider-container {\n        flex: 1;\n        min-width: 180px;\n      }\n\n      .inputs-container {\n        min-width: 160px;\n        max-width: 200px;\n      }\n\n    }\n\n    .message-container {\n      width: 100%;\n      text-align: center;\n      padding-top: ${2*e.sizeUnit}px;\n    }\n  `}
`,N=(0,s.gV)(o.A.SMART_NUMBER),C=(e,n,t=!1)=>t&&null!==e||null!==e&&e===n?`x = ${N(e)}`:null!==e&&null!==n?`${N(e)} ≤ x ≤ ${N(n)}`:null!==e?`x ≥ ${N(e)}`:null!==n?`x ≤ ${N(n)}`:"",z=(e,n,t,l,r)=>{const[a,s]=e,o=(0,u.t)("Please provide a valid min or max value"),d=(0,u.t)("Min value cannot be greater than max value"),c=(0,u.t)("Numbers must be within %(min)s and %(max)s",{min:n,max:t});if(void 0!==r){const e=r===$.y.Minimum||r===$.y.Exact?a:s;return i()(e)?i()(e)&&(e<n||e>t)?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!1,errorMessage:o}}return l||null!==a||null!==s?l&&null===a&&null===s?{isValid:!1,errorMessage:o}:null!==a&&null!==s&&a>s?{isValid:!1,errorMessage:d}:null!==a&&a<n||null!==s&&s>t?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!0,errorMessage:null}};function k(e){const n=(0,a.DP)(),{data:t,formData:l,height:i,width:s,setDataMask:o,setFocusedFilter:k,unsetFocusedFilter:E,setHoveredFilter:V,unsetHoveredFilter:D,setFilterActive:U,filterState:q,inputRef:O,filterBarOrientation:H=v.QI.Vertical,isOverflowingFilterBar:T}=e,[B]=t,{min:P,max:R}=B,{groupby:j,enableSingleValue:L,enableEmptyFilter:Q,defaultValue:W}=l,K=(null==l?void 0:l.rangeDisplayMode)||b.l.SliderAndInput,J=L===$.y.Exact,[X=""]=(0,d.A)(j).map(c.A),[_,G]=(0,p.useState)(q.value||W||[null,null]),[Z,ee]=(0,p.useState)(null),ne=(0,p.useMemo)((()=>{const[e,n]=_;return L===$.y.Minimum||L===$.y.Exact?null!==e?e:P:L===$.y.Maximum?null!==n?n:R:[null!==e?e:P,null!==n?n:R]}),[_,P,R,L]),te=(0,p.useCallback)((e=>{o({extraFormData:{},filterState:{value:null,label:"",validateStatus:"error",validateMessage:e||""}})}),[o]),le=(0,p.useCallback)((e=>{const[n,t]=e;o({extraFormData:(0,M.SO)(X,n,t),filterState:{value:J?[n,n]:[n,t],label:C(n,t,J),validateStatus:void 0,validateMessage:""}})}),[o]);(0,p.useEffect)((()=>{if(void 0!==(null==B?void 0:B.min)||void 0!==(null==B?void 0:B.max))if("error"!==q.validateStatus){if(void 0===q.value&&!q.validateStatus)return G([null,null]),void le([null,null]);(0,m.A)(W,_)?le(W):q.value&&!q.validateStatus&&(G(q.value),le(q.value))}else if(ee(q.validateMessage),Z!==q.validateMessage){const{isValid:e,errorMessage:n}=z(_,P,R,Q,L);e?(ee(null),le(_)):(ee(n),te(n))}}),[JSON.stringify(q.value)]);const ie=(0,p.useMemo)((()=>{switch(L){case $.y.Minimum:return(0,u.t)("Filters for values greater than or equal.");case $.y.Maximum:return(0,u.t)("Filters for values less than or equal.");case $.y.Exact:return(0,u.t)("Filters for values equal to this exact value.");default:return null}}),[L]),re=(0,p.useRef)(!1),ae=e=>{re.current=!!/^[0-9]$/.test(e.key)},se=(0,p.useCallback)(((e,n)=>{if(void 0===(null==B?void 0:B.min)&&void 0===(null==B?void 0:B.max))return;let t=e;null!==e&&null===_[n]&&(re.current?(t=e,re.current=!1):0===n&&1===e?t=P+1:0===n&&-1===e?t=P-1:1===n&&1===e?t=R+1:1===n&&-1===e&&(t=R-1));const l=0===n?[t,_[1]]:[_[0],t];G(l);const{isValid:i,errorMessage:r}=z(l,P,R,Q,L);if(!i)return ee(r),void te(r);ee(null),le(l)}),[P,R,Q,L,te,le,_]),oe=(0,p.useCallback)((e=>{let n;if(void 0!==L){const t="number"==typeof e?e:Array.isArray(e)&&e.length>0?e[0]:(P+R)/2;n=L===$.y.Minimum?[t,null]:L===$.y.Maximum?[null,t]:[t,t]}else{const t=Array.isArray(e)?e:[P,R],[l,i]=t.length>=2?[t[0],t[1]]:[P,R];n=[l,i]}G(n),ee(null),le(n)}),[P,R,L,le]),ue=(0,p.useCallback)((()=>{const e=(0,u.t)("Choose numbers between %(min)s and %(max)s",{min:P,max:R});return Z?{message:Z,status:"error"}:void 0!==L&&ie?{message:ie,status:"help"}:{message:e,status:"help"}}),[Z,P,R,L,ie]),de=(0,p.useCallback)((()=>{const{message:e,status:n}=ue();return H===v.QI.Vertical?(0,r.Y)(S.Mo,{status:n,children:e}):null}),[ue,H]),ce=(0,p.useCallback)((()=>{const{message:e,status:t}=ue();return(0,r.Y)(g.m,{title:e,placement:"top",children:(0,r.Y)(x.F.InfoCircleOutlined,{iconSize:"m",iconColor:"error"===t?n.colors.error.base:n.colors.grayscale.base,className:"tooltip-icon"})})}),[ue]);(0,p.useEffect)((()=>{if(void 0!==L)switch(L){case $.y.Minimum:case $.y.Exact:null!==_[1]&&se(null,1);break;case $.y.Maximum:null!==_[0]&&se(null,0)}o({extraFormData:{},filterState:{value:null,label:""}})}),[L]);const me=()=>void 0!==L?(0,r.Y)(I,{children:(0,r.Y)(f.A,{min:P,max:R,value:Array.isArray(ne)?ne[0]:ne,onChange:oe,tooltip:{formatter:e=>null!==e?N(e):""}})}):(0,r.Y)(I,{"data-test":"range-filter-slider",children:(0,r.Y)(f.A,{min:P,max:R,range:!0,value:Array.isArray(ne)?ne:[P,ne],onChange:oe,tooltip:{formatter:e=>null!==e?N(e):""}})}),pe=()=>(0,r.FD)(A,{tabIndex:-1,ref:O,onFocus:k,onBlur:E,onMouseEnter:V,onMouseLeave:D,onMouseDown:()=>U(!0),onMouseUp:()=>U(!1),children:[(void 0===L||L===$.y.Minimum||L===$.y.Exact)&&(0,r.Y)(h.A,{value:_[0],onChange:e=>se(e,0),onKeyDown:ae,placeholder:`${P}`,style:{width:"100%"},status:q.validateStatus,"data-test":"range-filter-from-input"}),void 0===L&&(0,r.Y)(w,{children:"-"}),(void 0===L||L===$.y.Maximum)&&(0,r.Y)(h.A,{value:_[1],onChange:e=>se(e,1),onKeyDown:ae,placeholder:`${R}`,style:{width:"100%"},"data-test":"range-filter-to-input",status:q.validateStatus})]});return(0,r.Y)(S.j3,{height:i,width:s,children:Number.isNaN(Number(P))||Number.isNaN(Number(R))?(0,r.Y)("h4",{children:(0,u.t)("Chosen non-numeric column")}):(0,r.Y)(y.e,{"aria-labelledby":`filter-name-${l.nativeFilterId}`,children:H!==v.QI.Horizontal||T?(0,r.Y)(r.FK,{children:(0,r.FD)("div",{style:{position:"relative"},children:[T&&(0,r.Y)(F,{children:(0,r.Y)(ce,{})}),(K===b.l.Slider||K===b.l.SliderAndInput)&&me(),(K===b.l.Input||K===b.l.SliderAndInput)&&pe(),(0,r.Y)(de,{})]})}):(0,r.Y)(Y,{children:(0,r.FD)("div",{className:"controls-container",children:[(0,r.Y)(ce,{}),(K===b.l.Slider||K===b.l.SliderAndInput)&&(0,r.Y)("div",{className:"slider-wrapper",children:(0,r.Y)("div",{className:"slider-container",children:me()})}),(K===b.l.Input||K===b.l.SliderAndInput)&&(0,r.Y)("div",{className:"inputs-container",children:pe()})]})})})})}},49826:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});var l=t(2445),i=t(6531);function r(e){return(0,l.Y)(i.A,{...e})}},56268:(e,n,t)=>{"use strict";t.d(n,{e:()=>i});var l=t(89467);const i=(0,t(72234).I4)(l.A.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`},58904:(e,n,t)=>{"use strict";var l;t.d(n,{l:()=>l}),function(e){e.Slider="slider",e.Input="input",e.SliderAndInput="slider-and-input"}(l||(l={}))},67874:(e,n,t)=>{"use strict";t.d(n,{Mo:()=>s,YH:()=>r,j3:()=>a});var l=t(72234),i=t(56268);const r=0,a=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,s=((0,l.I4)(i.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:n="error"})=>{var t;return"help"===n?e.colors.grayscale.light1:null==(t=e.colors[n])?void 0:t.base}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)},98023:(e,n,t)=>{var l=t(72552),i=t(40346);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==l(e)}}}]);
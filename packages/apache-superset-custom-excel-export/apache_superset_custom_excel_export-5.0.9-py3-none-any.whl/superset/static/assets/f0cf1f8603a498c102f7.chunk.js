(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9242],{2511:(e,t,n)=>{"use strict";var l,a;n.d(t,{A:()=>l,v:()=>a}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(a||(a={}))},5815:(e,t,n)=>{"use strict";n.d(t,{SO:()=>o,Sg:()=>s,pA:()=>i});var l=n(87903),a=n(15151),r=n(2511);const i=(e,t,n=!1,l=!1)=>{const a={};return n?a.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(a.filters=[{col:e,op:l?"NOT IN":"IN",val:t}]),a},o=(e,t,n)=>{const l=[];return null!=t&&t!==n&&l.push({col:e,op:">=",val:t}),null!=n&&n!==t&&l.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&l.push({col:e,op:"==",val:n}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(n,r)=>{if(null==n)return a.mu;if("boolean"==typeof n)return n?a.PU:a.qC;if(r===l.s.Boolean)try{return JSON.parse(String(n).toLowerCase())?a.PU:a.qC}catch{return a.qC}return"string"==typeof n?n:"bigint"==typeof n?String(n):e&&r===l.s.Temporal?e(n):t&&"number"==typeof n&&r===l.s.Numeric?t(n):String(n)}}},56268:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var l=n(89467);const a=(0,n(72234).I4)(l.A.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`},62216:e=>{e.exports=function(e){return void 0===e}},64687:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,e:()=>r});var l=n(1932),a=n(96540);function r(e){var t=(0,a.useState)((function(){return(0,l.CN)("function"==typeof e?e():e,!0)})),n=t[1];return[t[0],(0,a.useCallback)((function(e){n("function"==typeof e?(0,l.jM)(e):(0,l.CN)(e))}),[])]}function i(e,t,n){var r=(0,a.useMemo)((function(){return(0,l.jM)(e)}),[e]);return(0,a.useReducer)(r,t,n)}},66861:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var l=n(62216),a=n.n(l),r=n(38221),i=n.n(r),o=n(2445),s=n(96540),u=n(72234),c=n(62952),f=n(86444),d=n(94465),p=n(95579),m=n(58863),h=n(64687),v=n(28392),S=n(87843),g=n(56268),b=n(71781),F=n(23758),w=n(10504),y=n(5815),M=n(67874);function x(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return JSON.stringify(e.extraFormData)!==JSON.stringify(t.extraFormData)&&(e.extraFormData=t.extraFormData),JSON.stringify(e.filterState)!==JSON.stringify(t.filterState)&&(e.filterState={...e.filterState,...t.filterState}),e;default:return e}}const C=(0,u.I4)(v.A)`
  display: flex;
  align-items: center;
  width: 100%;

  .exclude-select {
    width: 80px;
    flex-shrink: 0;
  }

  &.ant-space {
    .ant-space-item {
      width: ${({inverseSelection:e})=>e?"auto":"100%"};
    }
  }
`,A=new Map;function N(e){const{coltypeMap:t,data:n,filterState:l,formData:r,height:u,isRefreshing:v,width:N,setDataMask:O,setHoveredFilter:$,unsetHoveredFilter:I,setFocusedFilter:E,unsetFocusedFilter:D,setFilterActive:Y,appSection:k,showOverflow:H,parentRef:q,inputRef:z,filterBarOrientation:L,clearAllTrigger:T,onClearAllComplete:V}=e,{enableEmptyFilter:J,creatable:R,multiSelect:j,showSearch:U,inverseSelection:B,defaultToFirstItem:P,searchAllOptions:W}=r,_=(0,s.useMemo)((()=>(0,c.A)(r.groupby).map(f.A)),[r.groupby]),[Q]=_,[X]=(0,s.useState)(t),[G,K]=(0,s.useState)(""),[Z,ee]=(0,h.A)(x,{extraFormData:{},filterState:l}),te=t[Q],ne=(0,s.useMemo)((()=>(0,y.Sg)({timeFormatter:(0,d.A)(n.map((e=>e[Q])))})),[n,Q]),[le,ae]=(0,s.useState)(!!a()(null==l?void 0:l.excludeFilterValues)||(null==l?void 0:l.excludeFilterValues)),re=(0,s.useRef)(le),ie=(0,s.useRef)(!1);(0,s.useEffect)((()=>{const e=A.get(r.nativeFilterId);ie.current=void 0!==e&&e!==L,L&&A.set(r.nativeFilterId,L)}),[L]);const oe=(0,s.useCallback)((e=>{const t=J&&!B&&!(null!=e&&e.length),n=B&&null!=e&&e.length?(0,p.t)(" (excluded)"):"";ee({type:"filterState",extraFormData:(0,y.pA)(Q,e,t,le&&B),filterState:{...l,label:null!=e&&e.length?`${(e||[]).map((e=>ne(e,te))).join(", ")}${n}`:void 0,value:k===m.$s.FilterConfigModal&&P?void 0:e,excludeFilterValues:le}})}),[k,Q,te,P,ee,J,B,le,JSON.stringify(l),ne]),se=k===m.$s.FilterConfigModal&&P,ue=(0,s.useMemo)((()=>i()((e=>{K(e),W&&ee({type:"ownState",ownState:{coltypeMap:X,search:e}})}),S.Y.SLOW_DEBOUNCE)),[ee,X,W]),ce=(0,s.useCallback)((()=>{D(),ue("")}),[ue,D]),fe=(0,s.useCallback)((e=>{const t=null===e?[null]:(0,c.A)(e);0===t.length?oe(null):oe(t)}),[oe,r.nativeFilterId,T]),de=0===n.length?(0,p.t)("No data"):(0,p.tn)("%s option","%s options",n.length,n.length),pe=(0,s.useMemo)((()=>{if(l.validateMessage)return(0,o.Y)(M.Mo,{status:l.validateStatus,children:l.validateMessage})}),[l.validateMessage,l.validateStatus]),me=(0,s.useMemo)((()=>[...new Set([...n.map((e=>e[Q]))])].map((e=>({label:ne(e,te),value:e,isNewOption:!1})))),[n,te,Q,ne]),he=(0,s.useMemo)((()=>(!G||j||(0,F.Kz)(G,me,!0)||me.unshift({label:G,value:G,isNewOption:!0}),me)),[j,G,me]),ve=(0,s.useCallback)(((e,t)=>{const n=(0,F.qw)("label");return r.sortAscending?n(e,t):n(t,e)}),[r.sortAscending]);return(0,s.useEffect)((()=>{if(!ie.current)if(se)oe(null);else if(void 0===l.value)if(P){const e=n[0]?_.map((e=>n[0][e])):null;void 0!==(null==e?void 0:e[0])&&oe(e)}else null!=r&&r.defaultValue&&oe(r.defaultValue);else oe(l.value)}),[se,J,P,null==r?void 0:r.defaultValue,n,_,Q,B]),(0,s.useEffect)((()=>{O(Z)}),[JSON.stringify(Z)]),(0,s.useEffect)((()=>{T&&(ee({type:"filterState",extraFormData:{},filterState:{value:void 0,label:void 0}}),oe(null),K(""),null==V||V(r.nativeFilterId))}),[T,V,oe]),(0,s.useEffect)((()=>{var e;re.current!==le&&(ee({type:"filterState",extraFormData:(0,y.pA)(Q,l.value,!(null!=(e=l.value)&&e.length),le&&B),filterState:{...l,excludeFilterValues:le}}),re.current=le)}),[le]),(0,o.Y)(M.j3,{height:u,width:N,children:(0,o.Y)(g.e,{validateStatus:l.validateStatus,extra:pe,children:(0,o.FD)(C,{appSection:k,inverseSelection:B,children:[k!==m.$s.FilterConfigModal&&B&&(0,o.Y)(b.A,{className:"exclude-select",value:`${le}`,options:[{value:"true",label:(0,p.t)("is not")},{value:"false",label:(0,p.t)("is")}],onChange:e=>{ae("true"===e)}}),(0,o.Y)(b.A,{name:r.nativeFilterId,allowClear:!0,allowNewOptions:!W&&!1!==R,allowSelectAll:!W,value:l.value||[],disabled:se,getPopupContainer:H?()=>(null==q?void 0:q.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body,showSearch:U,mode:j?"multiple":"single",placeholder:de,onClear:()=>ue(""),onSearch:ue,onBlur:ce,onFocus:E,onMouseEnter:$,onMouseLeave:I,onChange:fe,ref:z,loading:v,oneLine:L===w.QI.Horizontal,invertSelection:B&&le,options:he,sortComparator:ve,onOpenChange:Y,className:"select-container"})]})})})}},67874:(e,t,n)=>{"use strict";n.d(t,{Mo:()=>o,YH:()=>r,j3:()=>i});var l=n(72234),a=n(56268);const r=0,i=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,o=((0,l.I4)(a.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:t="error"})=>{var n;return"help"===t?e.colors.grayscale.light1:null==(n=e.colors[t])?void 0:n.base}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)},94465:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var l=n(53705),a=n(94387),r=n(73091);function i(e,t=!1){const n=t?l.DC:l.aL,i=n("%Y-%m-%d %H:%M:%S.%L"),o=n("%Y-%m-%d %H:%M:%S"),s=n("%Y-%m-%d %H:%M"),u=n("%Y-%m-%d %H:%M"),c=n("%Y-%m-%d"),f=n("%Y-%m-%d"),d=n("%Y"),{hasMillisecond:p,hasSecond:m,hasMinute:h,hasHour:v,isNotFirstDayOfMonth:S,isNotFirstMonth:g}=t?a.m:a.w;let b=d;return e.forEach((e=>{"bigint"!=typeof e&&(b===d&&g(e)&&(b=f),b===f&&S(e)&&(b=c),b===c&&v(e)&&(b=u),b===u&&h(e)&&(b=s),b===s&&m(e)&&(b=o),b===o&&p(e)&&(b=i))})),new r.A({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:b,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}}}]);
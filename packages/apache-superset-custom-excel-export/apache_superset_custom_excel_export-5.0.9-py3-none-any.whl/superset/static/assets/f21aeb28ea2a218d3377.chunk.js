(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3574],{17861:(t,o,e)=>{"use strict";e.r(o),e.d(o,{default:()=>w,getLayer:()=>b,getPoints:()=>_});var r=e(2445),l=e(96540),a=e(63947),s=e(25879),i=e.n(s),n=e(70957),u=e(49443),p=e(25564),d=e(68291),c=e(32548),f=e(95490);const C={fillColor:"fillColor",color:"fillColor",fill:"fillColor","fill-color":"fillColor",strokeColor:"strokeColor","stroke-color":"strokeColor","stroke-width":"strokeWidth"},k=(t,o)=>{const e={};return Object.keys(t).forEach((o=>{o in C?e[C[o]]=t[o]:e[o]=t[o]})),"string"==typeof t.fillColor&&(e.fillColor=(0,u.hexToRGB)(t.fillColor)),"string"==typeof t.strokeColor&&(e.strokeColor=(0,u.hexToRGB)(t.strokeColor)),{...e,...o}};let h=[];const m=(t,o,e)=>{if(null!=t&&t.features&&t.features.forEach((r=>{m(r,o,t.extraProps||e)})),null!=t&&t.geometry){const r={...t,properties:k(t.properties,o)};r.extraProps||(r.extraProps=e),h.push(r)}};function g(t){var o;return(null==(o=t.object)?void 0:o.extraProps)&&(0,r.Y)("div",{className:"deckgl-tooltip",children:Object.keys(t.object.extraProps).map(((o,e)=>{var l;return(0,r.Y)(c.A,{label:`${o}: `,value:`${null==(l=t.object.extraProps)?void 0:l[o]}`},`prop-${e}`)}))})}const v=t=>{var o;return null==t||null==(o=t.properties)?void 0:o.fillColor},x=t=>{var o;return null==t||null==(o=t.properties)?void 0:o.strokeColor},b=function({formData:t,onContextMenu:o,filterState:e,setDataMask:r,payload:l,setTooltip:s,emitCrossFilters:i}){const n=t,u=n.fill_color_picker,c=n.stroke_color_picker,f=[u.r,u.g,u.b,255*u.a],C=[c.r,c.g,c.b,255*c.a],k={};f[3]>0&&(k.fillColor=f),C[3]>0&&(k.strokeColor=C),h=[],m(l.data,k);let b=h;return n.js_data_mutator&&(b=(0,p.A)(n.js_data_mutator)(h)),new a.A({id:`geojson-layer-${n.slice_id}`,data:b,extruded:n.extruded,filled:n.filled,stroked:n.stroked,getFillColor:v,getLineColor:x,getLineWidth:n.line_width||1,pointRadiusScale:n.point_radius_scale,lineWidthUnits:n.line_width_unit,...(0,d.T$)({formData:n,setTooltip:s,setTooltipContent:g,setDataMask:r,filterState:e,onContextMenu:o,emitCrossFilters:i})})};function _(t){return t.reduce(((t,o)=>{const e=i()(o);return e?[...t,[e[0],e[1]],[e[2],e[3]]]:t}),[])}const y=t=>{var o;const e=(0,l.useRef)(),a=(0,l.useCallback)((t=>{const{current:o}=e;o&&o.setTooltip(t)}),[]),{formData:s,payload:i,setControlValue:u,onAddFilter:p,height:d,width:c}=t,C=(0,l.useMemo)((()=>s.autozoom&&(_(i.data.features)||[]).length?(0,f.A)(t.viewport,{width:c,height:d,points:_(i.data.features)||[]}):t.viewport),[s.autozoom,d,null==i||null==(o=i.data)?void 0:o.features,t.viewport,c]),k=b({onContextMenu:t.onContextMenu,filterState:t.filterState,setDataMask:t.setDataMask,setTooltip:a,onAddFilter:p,payload:i,formData:s});return(0,r.Y)(n.S,{ref:e,mapboxApiAccessToken:i.data.mapboxApiKey,viewport:C,layers:[k],mapStyle:s.mapbox_style,setControlValue:u,height:d,width:c})},w=(0,l.memo)(y)},42634:()=>{}}]);
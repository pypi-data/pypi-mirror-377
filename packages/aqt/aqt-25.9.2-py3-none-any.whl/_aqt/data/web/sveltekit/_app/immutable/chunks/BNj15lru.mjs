import"./BbkoyQuY.mjs";import{i as L}from"./-ESH3Vzs.mjs";import{p as j,l as H,k as u,a as G,e as V,f as R,c as h,d as Q,g as t,m as z,s as P,h as B,i as x,Y as D,r as v,b as F,j as E,u as T,b6 as _t,n as X,t as at}from"./D0Kcqh4a.mjs";import{p as C,i as U,a as yt,s as xt}from"./8hkm7YIM.mjs";import{q as et,U as K,I as W,bh as wt,u as Z,bi as kt,bj as $t,bk as St,bl as Tt,bm as tt,bn as ct,bo as It,bp as ut,bq as mt,br as Nt,bs as Pt,bt as Ct,bu as Bt,bv as zt,bw as Dt,bx as qt,ak as Et,by as Ft,bz as Mt,bA as Ot,bB as At,bC as Rt,bD as Ht}from"./Ch7ZtZmv.mjs";import{s as Y,p as ot,v as Ut,w as Lt}from"./BfDh-mSI.mjs";import{b as jt}from"./B0hvKUPm.mjs";import{s as A,e as vt,c as Qt,o as Wt}from"./CAm1qXYJ.mjs";import{r as Vt}from"./BW3LlYa9.mjs";import{p as Yt,e as pt,R as nt,i as Gt}from"./B9FzK2Aa.mjs";import{C as ft}from"./BLIdLdeN.mjs";import{S as Jt,g as it}from"./Dg4D5_bH.mjs";import{B as Kt}from"./eu2iBpjS.mjs";import{S as Xt,L as Zt}from"./CQ-9KGf5.mjs";import{T as lt}from"./BYOoq_0E.mjs";import{b as st}from"./Dm-VOW7A.mjs";import{n as te,g as ee,u as se,h as re,a as gt,i as ae,I as oe}from"./pYEVaWiA.mjs";import{I as ne}from"./dMMBExsa.mjs";import{W as ie}from"./DYn6QD_Z.mjs";var le=B('<div class="progress svelte-z9dt5x"><div><div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div> <div class="svelte-z9dt5x"></div></div> <div id="label" class="svelte-z9dt5x"> </div></div>');function de(o,s){j(s,!1);const[e,a]=yt(),n=()=>xt(Yt,"$pageTheme",e);let l=C(s,"task",8),m=C(s,"result",12),b=C(s,"error",12),p=z("");function i(r){r.value.value&&r.value.case!=="none"&&t(p)!==r.value.value.toString()&&P(p,r.value.value.toString())}H(()=>(u(m()),u(b()),u(l())),()=>{(async()=>{if(!m()&&!b())try{m(await Vt(l(),i))}catch(r){if(r instanceof Error)b(r);else throw r}})()}),G(),L();var w=V(),k=R(w);{var d=r=>{var c=le(),g=x(c);let I;var y=D(g,2),$=x(y,!0);v(y),v(c),F(N=>{I=et(g,1,"spinner svelte-z9dt5x",null,I,N),A($,t(p))},[()=>({nightMode:n().isDark})],E),h(r,c)};U(k,r=>{m()||r(d)})}h(o,w),Q(),a()}var ce=B('<div class="message svelte-1ebpei3"> </div>');function ue(o,s){j(s,!1);let e=C(s,"error",8);L();var a=ce(),n=x(a,!0);v(a),F(()=>A(n,(u(e()),T(()=>e().message)))),h(o,a),Q()}var me=B('<div class="import svelte-zco36t"> </div>'),ve=B('<div class="filename svelte-zco36t"> </div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),pe=B('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function fe(o,s){j(s,!1);let e=C(s,"path",8),a=C(s,"onImport",8);const n="Control+Enter";function l(p){return p.split(/[\\/]/).pop()}L();var m=pe(),b=R(m);K(b,()=>({"--gutter-block":"0.5rem","--gutter-inline":"0.25rem","--sticky-borders":"0 0 1px"})),Xt(b.lastChild,{breakpoint:"sm",children:(p,i)=>{Kt(p,{class:"justify-content-between",wrap:!1,children:(w,k)=>{var d=ve(),r=R(d),c=x(r,!0);v(r);var g=D(r,2);const I=E(()=>(u(it),T(()=>it(n))));K(g,()=>({"--border-left-radius":"5px","--border-right-radius":"5px"})),Zt(g.lastChild,{primary:!0,get tooltip(){return t(I)},$$events:{click(...$){var N;(N=a())==null||N.apply(this,$)}},children:($,N)=>{var O=me(),q=x(O,!0);v(O),F(S=>A(q,S),[()=>(u(W),T(()=>wt()))],E),h($,O)},$$slots:{default:!0}}),v(g);var y=D(g,2);Jt(y,{keyCombination:n,$$events:{action(...$){var N;(N=a())==null||N.apply(this,$)}}}),F($=>A(c,$),[()=>(u(e()),T(()=>l(e())))],E),h(w,d)},$$slots:{default:!0}})},$$slots:{default:!0}}),v(b),h(o,m),Q()}var ge=B("<tr><td></td></tr>"),he=B("<tr><td></td></tr>"),be=B('<div class="outer svelte-1c3gv3l"><table tabindex="-1"><thead><!></thead><tbody><!><!><!></tbody></table></div>');function _e(o,s){j(s,!1);const e=z(),a=z(),n=z(),l=z(),m=z();let b=C(s,"class",8,""),p=C(s,"itemsCount",8,0),i=C(s,"itemHeight",8),w=C(s,"bottomOffset",8,0),k=z(),d=z(0);window.addEventListener("resize",()=>{P(e,t(e))}),H(()=>(t(k),u(w()),u(i())),()=>{P(e,t(k)?Math.floor((document.documentElement.clientHeight-t(k).offsetTop-w())/i())*i():0)}),H(()=>(t(e),u(i())),()=>{P(a,Math.ceil(t(e)/i()))}),H(()=>(t(d),u(i())),()=>{P(n,Math.floor(t(d)/i()))}),H(()=>(t(n),t(a),u(p())),()=>{P(l,Math.min(t(n)+t(a),p()))}),H(()=>(t(l),t(n)),()=>{P(m,new Array(t(l)-t(n)).fill(0).map((_,f)=>t(n)+f))}),G(),L();var r=be(),c=x(r),g=x(c),I=x(g);Y(I,s,"headers",{}),v(g);var y=D(g),$=x(y);{var N=_=>{var f=ge(),M=x(f);v(f),F(()=>Z(M,`height: ${i()*t(n)}px;`)),h(_,f)};U($,_=>{i()*t(n)>0&&_(N)})}var O=D($);pt(O,1,()=>t(m),_=>_,(_,f)=>{var M=V(),J=R(M);Y(J,s,"row",{get index(){return t(f)}}),h(_,M)});var q=D(O);{var S=_=>{var f=he(),M=x(f);v(f),F(()=>Z(M,`height: ${i()*p()-i()*t(l)}px;`)),h(_,f)};U(q,_=>{i()*p()-i()*t(l)>0&&_(S)})}v(y),v(c),v(r),st(r,_=>P(k,_),()=>t(k)),F(()=>{var _,f;Z(r,`--container-height: ${(_=t(e))!=null?_:""}px`),et(c,1,`table ${(f=b())!=null?f:""}`,"svelte-1c3gv3l")}),vt("scroll",r,()=>P(d,t(k).scrollTop)),h(o,r),Q()}function ye(o){let s,e;o.dupeResolution===ot.DUPLICATE?(s=Dt(),e=qt()):o.dupeResolution===ot.PRESERVE?(s=ct(),e=tt()):(s=mt(),e=ut());const a={reason:s,notes:o.firstFieldMatch};return{action:e,queue:a}}function xe(o){const s=[{queues:[{notes:o.new,reason:St()}],action:$t(),summaryTemplate:kt,canBrowse:!0,icon:te},{queues:[{notes:o.duplicate,reason:ct()}],action:tt(),summaryTemplate:Tt,canBrowse:!0,icon:ee},{queues:[{notes:o.updated,reason:mt()}],action:ut(),summaryTemplate:It,canBrowse:!0,icon:se},{queues:[{notes:o.conflicting,reason:Pt()},{notes:o.missingNotetype,reason:Ct()},{notes:o.missingDeck,reason:Bt()},{notes:o.emptyFirstField,reason:zt()}],action:tt(),summaryTemplate:Nt,canBrowse:!1,icon:re}],e=ye(o);for(const a of s)if(a.action===e.action){a.queues.push(e.queue);break}return s}function we(o){const s=[];for(const e of o)for(const a of e.queues)if(a.notes)for(const n of a.notes)s.push({summary:e,queue:a,note:n});return s}function ht(o){Ut({filter:{case:"nids",value:{ids:o.map(s=>s.id.nid)}}})}var ke=B("<td><!></td>");function $e(o,s){j(s,!1);let e=C(s,"class",8,"");const a=Qt();let n=z();Wt(async()=>{a("mount",{element:t(n)})}),L();var l=ke(),m=x(l);Y(m,s,"default",{}),v(l),st(l,b=>P(n,b),()=>t(n)),F(()=>et(l,1,Et(e()))),h(o,l),Q()}function dt(o,s){let e=C(s,"class",8,""),a=C(s,"tooltip",8);ie(o,{get tooltip(){return a()},children:_t,$$slots:{default:(n,l)=>{const m=E(()=>l.createTooltip);$e(n,{get class(){return e()},$$events:{mount:b=>t(m)(b.detail.element)},children:(b,p)=>{var i=V(),w=R(i);Y(w,s,"default",{}),h(b,i)},$$slots:{default:!0}})}}})}var Se=B('<tr slot="headers" class="svelte-1blptr9"><th>#</th><th> </th><th> </th><th></th></tr>'),Te=B('<tr class="svelte-1blptr9"><td class="index-cell svelte-1blptr9"> </td><!><!><td class="search-cell"><!></td></tr>'),Ie=B("<div><!></div>");function Ne(o,s){j(s,!1);const e=z();let a=C(s,"summaries",8),n=C(s,"bottomOffset",8,0),l=z();H(()=>u(a()),()=>{P(e,we(a()))}),G(),L();var m=Ie(),b=x(m);{var p=i=>{_e(i,{class:"details-table",itemHeight:40,get itemsCount(){return t(e),T(()=>t(e).length)},get bottomOffset(){return n()},$$slots:{headers:(w,k)=>{var d=Se(),r=D(x(d)),c=x(r,!0);v(r);var g=D(r),I=x(g,!0);v(g),X(),v(d),F((y,$)=>{A(c,y),A(I,$)},[()=>(u(W),T(()=>Ft())),()=>(u(W),T(()=>Mt()))],E),h(w,d)},row:(w,k)=>{const d=E(()=>k.index);var r=Te(),c=x(r),g=x(c,!0);v(c);var I=D(c);dt(I,{class:"status-cell",get tooltip(){return t(e),u(t(d)),T(()=>t(e)[t(d)].queue.reason)},children:(S,_)=>{X();var f=at();F(()=>A(f,(t(e),u(t(d)),T(()=>t(e)[t(d)].summary.action)))),h(S,f)},$$slots:{default:!0}});var y=D(I);const $=E(()=>(t(e),u(t(d)),T(()=>t(e)[t(d)].note.fields.join(","))));dt(y,{class:"contents-cell",get tooltip(){return t($)},children:(S,_)=>{X();var f=at();F(M=>A(f,M),[()=>(t(e),u(t(d)),T(()=>t(e)[t(d)].note.fields.join(",")))],E),h(S,f)},$$slots:{default:!0}});var N=D(y),O=x(N);const q=E(()=>(t(e),u(t(d)),T(()=>!t(e)[t(d)].summary.canBrowse)));ne(O,{class:"search-icon",iconSize:100,active:!1,get disabled(){return t(q)},$$events:{click:()=>{ht([t(e)[t(d)].note])}},children:(S,_)=>{gt(S,{get icon(){return ae}})},$$slots:{default:!0}}),v(N),v(r),F(()=>A(g,t(d)+1)),h(w,r)}}})};U(b,i=>{t(l)&&i(p)})}v(m),st(m,i=>P(l,i),()=>t(l)),h(o,m),Q()}var Pe=B('<button class="desktop-only"> </button>'),Ce=B('<li class="svelte-ohwq2k"><!> <!></li>');function Be(o,s){j(s,!1);const e=z();let a=C(s,"summary",8);function n(p){ht(t(e)),p.preventDefault()}H(()=>u(a()),()=>{P(e,a().queues.map(p=>p.notes).flat())}),G(),L();var l=V(),m=R(l);{var b=p=>{var i=Ce(),w=x(i);oe(w,{children:(c,g)=>{gt(c,{get icon(){return u(a()),T(()=>a().icon)}})},$$slots:{default:!0}});var k=D(w),d=D(k);{var r=c=>{var g=Pe(),I=x(g,!0);v(g),F(y=>A(I,y),[()=>(u(W),T(()=>Ot()))],E),vt("click",g,n),h(c,g)};U(d,c=>{u(a()),T(()=>a().canBrowse)&&c(r)})}v(i),F(c=>A(k,` ${c!=null?c:""} `),[()=>(u(a()),t(e),T(()=>a().summaryTemplate({count:t(e).length})))],E),h(p,i)};U(m,p=>{t(e),T(()=>t(e).length)&&p(b)})}h(o,l),Q()}var ze=B("<p> </p> <ul></ul>",1),De=B("<!> <!>",1),qe=B('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Ee(o,s){j(s,!1);const e=z(),a=z();let n=C(s,"response",8);const l=.5,m=getComputedStyle(document.documentElement),b=parseInt(m.fontSize),p=(3*l+.75)*b;H(()=>u(n()),()=>{P(e,xe(n().log))}),H(()=>u(n()),()=>{var k,d;P(a,(d=(k=n().log)==null?void 0:k.foundNotes)!=null?d:0)}),G(),L();var i=qe(),w=R(i);K(w,()=>({"--gutter-inline":"0.25rem","--gutter-block":`${l}rem`})),ft(w.lastChild,{breakpoint:"sm",children:(k,d)=>{var r=De(),c=R(r);nt(c,{children:(I,y)=>{const $=E(()=>(u(W),T(()=>Rt())));lt(I,{get title(){return t($)},children:(N,O)=>{var q=ze(),S=R(q),_=x(S,!0);v(S);var f=D(S,2);pt(f,5,()=>t(e),Gt,(M,J)=>{Be(M,{get summary(){return t(J)}})}),v(f),F(M=>A(_,M),[()=>(u(W),t(a),T(()=>At({notes:t(a)})))],E),h(N,q)},$$slots:{default:!0}})},$$slots:{default:!0}});var g=D(c,2);nt(g,{children:(I,y)=>{const $=E(()=>(u(W),T(()=>Ht())));lt(I,{get title(){return t($)},children:(N,O)=>{Ne(N,{get summaries(){return t(e)},get bottomOffset(){return p}})},$$slots:{default:!0}})},$$slots:{default:!0}}),h(k,r)},$$slots:{default:!0}}),v(w),h(o,i),Q()}var Fe=B('<div class="pre-import-page svelte-1rmka3z"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function ss(o,s){j(s,!1);let e=C(s,"path",8),a=C(s,"importer",8);const n=!1;let l=z(void 0),m=z(void 0),b=z(n);async function p(){const r=await a().doImport();return await Lt({}),P(b,!1),r}L();var i=V(),w=R(i);{var k=r=>{ue(r,{get error(){return t(m)}})},d=(r,c)=>{{var g=y=>{Ee(y,{get response(){return t(l)}})},I=(y,$)=>{{var N=q=>{de(q,{task:p,get result(){return t(l)},set result(S){P(l,S)},get error(){return t(m)},set error(S){P(m,S)},$$legacy:!0})},O=q=>{var S=Fe(),_=x(S);fe(_,{get path(){return e()},onImport:()=>P(b,!0)});var f=D(_,2);K(f,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.5rem"})),ft(f.lastChild,{breakpoint:"sm",class:"container-columns",children:(M,J)=>{var rt=V(),bt=R(rt);Y(bt,s,"default",{}),h(M,rt)},$$slots:{default:!0}}),v(f),v(S),h(q,S)};U(y,q=>{t(b)?q(N):q(O,!1)},$)}};U(r,y=>{t(l)?y(g):y(I,!1)},c)}};U(w,r=>{t(m)?r(k):r(d,!1)})}return h(o,i),jt(s,"noOptions",n),Q({noOptions:n})}export{ss as I};

var fa=Object.defineProperty;var ga=(n,e,a)=>e in n?fa(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var _e=(n,e,a)=>ga(n,typeof e!="symbol"?e+"":e,a);import{L as va,M as $a,N as pa,O as ma,P as ha,s as Tt,Q as ya,S as Os,T as mr,U as Rt,V as ht,W as as,X as ct,Y as Ht,Z as ls,_ as zr,$ as Ca,a0 as wa,a1 as _a,a2 as ka,a3 as Pa,a4 as xa,a5 as Rs,a6 as ba,a7 as Sa,a8 as Oa,a9 as Ra,aa as Ta}from"../chunks/BfDh-mSI.mjs";import{e as Da,f as Ia,c as Aa,b as La}from"../chunks/CtwPNh8B.mjs";import{s as f,bc as pn,g as s,Q as mn,u as r,C as Ea,aL as Bt,G as Ts,F as Ds,am as Is,bd as Ma,as as As,p as Se,e as ot,f as le,c as $,d as Oe,aZ as Na,aY as vs,al as Fa,h as te,i as q,Y as v,r as E,b as j,n as oe,j as W,k as m,l as ce,m as R,a as Ke,b7 as It,t as Z,aM as Va,be as za}from"../chunks/D0Kcqh4a.mjs";import{d as Qe,g as Ue,v as Ha,r as hn,y as Ba,z as Ga,s as N,x as yn,e as be,c as Cn,o as $s,t as ja}from"../chunks/CAm1qXYJ.mjs";import{c as Fr}from"../chunks/BgpSSuxP.mjs";import{b as ps,i as Ls,S as Wa}from"../chunks/5xkFRAct.mjs";import"../chunks/BbkoyQuY.mjs";import{i as Re}from"../chunks/-ESH3Vzs.mjs";import{b as Jt}from"../chunks/Dm-VOW7A.mjs";import{p as G,i as Ie,s as ye,a as je,e as wn,b as xt,m as Gt,c as se,d as qa}from"../chunks/8hkm7YIM.mjs";import{e4 as _n,t as at,e5 as Hr,I as B,aw as nt,e6 as Ua,cc as ms,u as Qa,e7 as Ya,e8 as Ka,q as dt,U as Ze,e9 as Xa,ea as Za,eb as Ja,ec as eo,ed as to,ee as ro,ef as so,eg as no,eh as ao,ei as oo,ej as io,ek as lo,el as uo,em as Es,en as co,eo as Ms,ep as fo,eq as kn,er as go,es as vo,et as Ns,eu as $o,ev as po,ew as mo,ex as ho,ey as Fs,ez as yo,eA as Co,eB as wo,eC as _o,eD as ko,eE as Po,eF as xo,eG as bo,eH as So,eI as Oo,eJ as Ro,eK as To,eL as Do,eM as Io,eN as Ao,eO as Lo,eP as Eo,eQ as Pn,eR as Mo,eS as No,eT as Fo,eU as Vo,eV as zo,eW as Ho,eX as Bo,eY as Go,eZ as jo,e_ as Wo,e$ as qo,f0 as Uo,f1 as Qo,f2 as Yo,f3 as Ko,f4 as Xo,f5 as Zo,f6 as Jo,f7 as ei,f8 as ti,f9 as ri,fa as si,fb as ni,fc as ai,fd as oi,fe as ii,ff as li,fg as ui,fh as ci,fi as di,fj as Vs,fk as fi,fl as gi,fm as vi,fn as $i,fo as pi,fp as mi,fq as hi,fr as zs,fs as yi,ft as xn,fu as bn,fv as Sn,fw as Ci,fx as wi,fy as _i,fz as ki,fA as Pi,fB as xi,fC as bi,fD as Si,fE as Oi,fF as Ri,fG as Ti,fH as Di,fI as yr,fJ as us,fK as Hs,fL as Ii,fM as On,fN as Ai,fO as Rn,fP as Li,fQ as Tn,fR as Ei,fS as Bs,fT as Mi,fU as Ni,fV as Dn,fW as Fi,fX as Vi,fY as zi,fZ as Hi,f_ as Bi,f$ as Gi,g0 as ji,g1 as Wi,g2 as Gs,g3 as qi,g4 as In,cZ as An,dt as Ui,g5 as Qi,cI as Ln,g6 as jr,cq as Yi,cp as Ki,co as Xi,g7 as Zi,g8 as Ji,g9 as el,ga as tl,gb as rl,gc as sl,gd as nl,ge as al,gf as ol,gg as il,gh as ll,gi as ul,gj as cl,gk as dl,gl as js,dC as Ws,gm as qs,gn as fl,go as En,gp as gl,gq as vl,gr as $l,gs as pl,gt as ml,gu as hl,gv as yl,gw as Cl,gx as Mn,gy as Nn,gz as cs,gA as wl,gB as _l,gC as kl,gD as Pl,gE as xl,gF as Fn,gG as Vn,gH as bl,gI as zn,gJ as Sl,gK as Ol,gL as Rl,gM as Tl,gN as Dl,gO as Il,gP as Us,gQ as Al,gR as Ll,gS as El,gT as Ml,gU as Nl,gV as Fl,gW as Vl,gX as zl,gY as Hl,gZ as Bl,g_ as Gl,g$ as jl,h0 as Wl,h1 as ql,h2 as Ul,h3 as Ql,h4 as Yl,h5 as Kl,h6 as Xl,V as Zl,h7 as Jl,h8 as eu,h9 as tu,ha as ru,hb as su,hc as nu,hd as au,he as ou,hf as Hn,hg as Qs,hh as iu,hi as lu,hj as uu,hk as cu,hl as du,hm as fu,hn as gu,ho as vu,hp as $u,hq as pu,hr as mu,hs as Ys,ht as hu,hu as yu,hv as Cu,hw as wu,hx as _u,hy as ku,hz as Pu,hA as Ks,hB as xu,hC as bu,hD as Su}from"../chunks/Ch7ZtZmv.mjs";import{b as et}from"../chunks/B0hvKUPm.mjs";import{C as Ou}from"../chunks/BLIdLdeN.mjs";import{e as _r,i as Wr,R as qe,p as Ru}from"../chunks/B9FzK2Aa.mjs";import{c as ds}from"../chunks/jkNgFhw5.mjs";import{T as ft}from"../chunks/BYOoq_0E.mjs";import{b as rt,H as he,a as bt,M as Bn}from"../chunks/CmYyQsAK.mjs";import{d as kr,M as Gn,S as Tu,k as Du,l as Iu,m as Au,p as Lu,a as jn,W as Eu,P as Mu,D as hr}from"../chunks/D3ZK_B5Q.mjs";import{a as Nu}from"../chunks/CcaWrs5J.mjs";import{C as Wt,R as Pr,a as ae,S as Je,E as Pt}from"../chunks/CPuIZvQd.mjs";import{c as xr,b as Vt}from"../chunks/dPqBMmTD.mjs";import{a as Br,j as Fu,I as Xs,c as Wn,$ as Vu}from"../chunks/pYEVaWiA.mjs";import{C as At}from"../chunks/BfZOIeoG.mjs";import{j as Zs,S as zu,g as Js,p as Hu}from"../chunks/Dg4D5_bH.mjs";import{W as Ye}from"../chunks/DDmBsGOt.mjs";import{m as qn}from"../chunks/Dbye-yJ_.mjs";import{L as Bu,S as Gu}from"../chunks/CQ-9KGf5.mjs";import{I as ju}from"../chunks/dMMBExsa.mjs";import{r as Wu}from"../chunks/xV9jLUMk.mjs";import{r as Cr}from"../chunks/BW3LlYa9.mjs";import{k as qu}from"../chunks/_2ytY-Gb.mjs";import{ac as hs,B as Un,A as Qn,y as en,z as tn,C as Uu,D as Qu,E as Yu,H as rn,F as Ku,b as Xu,G as Yn,I as Zu,M as Ju,L as ec,J as tc,K as rc,N as sc}from"../chunks/6_pb3DgZ.mjs";import{I as nc,i as ac,c as oc,C as ic,T as lc}from"../chunks/BBdNGqKw.mjs";import{t as wr,T as yt,c as uc,a as cc,e as dc}from"../chunks/C4xCUJvN.mjs";import{t as fc}from"../chunks/CE2Et6Mj.mjs";import{S as sn,a as gc}from"../chunks/DB8w6JNV.mjs";function vc(n){f(n,n.v+1)}function $c(n){let e=0,a=Ea(0),i;return()=>{pn()&&(s(a),mn(()=>(e===0&&(i=r(()=>n(()=>vc(a)))),e+=1,()=>{Bt().then(()=>{e-=1,e===0&&(i==null||i(),i=void 0)})})))}}function pc(n,e){var a=Is,i=As,t=n();const o=Qe(t,h=>{var y=t!==n(),c,u=As,g=Is;Ts(i),Ds(a);try{c=Ma(()=>{mn(()=>{const x=n();y&&h(x)})})}finally{Ts(u),Ds(g)}return y=!0,c});return e?{set:e,update:h=>e(h(n())),subscribe:o.subscribe}:{subscribe:o.subscribe}}function mc(n){let e;const a=$c(t=>{let o=!1;const h=n.subscribe(y=>{e=y,o&&t()});return o=!0,h});function i(){return pn()?(a(),e):Ue(n)}return"set"in n?{get current(){return i()},set current(t){n.set(t)}}:{get current(){return i()}}}const hc=Object.freeze(Object.defineProperty({__proto__:null,derived:Ha,fromStore:mc,get:Ue,readable:hn,readonly:Ba,toStore:pc,writable:Qe},Symbol.toStringTag,{value:"Module"}));function yc(n,e,...a){return Cc(n,ac,e,a)}function Cc(n,e,a,i){return function t(o,h){if(h>=i.length)return a(o);const y=new nc,c=i[h++];let u=-1;for(const g of o){const x=c(g,++u,o),C=y.get(x);C?C.push(g):y.set(x,[g])}for(const[g,x]of y)y.set(g,t(x,h));return e(y)}(n,0)}const wc=oc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function _c(n,e){for(var a=-1,i=n==null?0:n.length,t=Array(i);++a<i;)t[a]=e(n[a],a,n);return t}var nn=sn?sn.prototype:void 0,an=nn?nn.toString:void 0;function Kn(n){if(typeof n=="string")return n;if(kr(n))return _c(n,Kn)+"";if(hs(n))return an?an.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function kc(n){return n}var Pc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xc=/^\w*$/;function ys(n,e){if(kr(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||hs(n)?!0:xc.test(n)||!Pc.test(n)||e!=null&&n in Object(e)}var bc="Expected a function";function Cs(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(bc);var a=function(){var i=arguments,t=e?e.apply(this,i):i[0],o=a.cache;if(o.has(t))return o.get(t);var h=n.apply(this,i);return a.cache=o.set(t,h)||o,h};return a.cache=new(Cs.Cache||Gn),a}Cs.Cache=Gn;var Sc=500;function Oc(n){var e=Cs(n,function(i){return a.size===Sc&&a.clear(),i}),a=e.cache;return e}var Rc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tc=/\\(\\)?/g,Dc=Oc(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Rc,function(a,i,t,o){e.push(t?o.replace(Tc,"$1"):i||a)}),e});function Ic(n){return n==null?"":Kn(n)}function Xn(n,e){return kr(n)?n:ys(n,e)?[n]:Dc(Ic(n))}function qr(n){if(typeof n=="string"||hs(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Zn(n,e){e=Xn(e,n);for(var a=0,i=e.length;n!=null&&a<i;)n=n[qr(e[a++])];return a&&a==i?n:void 0}function Ac(n,e,a){var i=n==null?void 0:Zn(n,e);return i===void 0?a:i}var Lc=1,Ec=2;function Mc(n,e,a,i){var t=a.length,o=t;if(n==null)return!o;for(n=Object(n);t--;){var h=a[t];if(h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++t<o;){h=a[t];var y=h[0],c=n[y],u=h[1];if(h[2]){if(c===void 0&&!(y in n))return!1}else{var g=new Tu,x;if(!(x===void 0?ps(u,c,Lc|Ec,i,g):x))return!1}}return!0}function Jn(n){return n===n&&!gc(n)}function Nc(n){for(var e=Du(n),a=e.length;a--;){var i=e[a],t=n[i];e[a]=[i,t,Jn(t)]}return e}function ea(n,e){return function(a){return a==null?!1:a[n]===e&&(e!==void 0||n in Object(a))}}function Fc(n){var e=Nc(n);return e.length==1&&e[0][2]?ea(e[0][0],e[0][1]):function(a){return a===n||Mc(a,n,e)}}function Vc(n,e){return n!=null&&e in Object(n)}function zc(n,e,a){e=Xn(e,n);for(var i=-1,t=e.length,o=!1;++i<t;){var h=qr(e[i]);if(!(o=n!=null&&a(n,h)))break;n=n[h]}return o||++i!=t?o:(t=n==null?0:n.length,!!t&&Iu(t)&&Au(h,t)&&(kr(n)||Lu(n)))}function Hc(n,e){return n!=null&&zc(n,e,Vc)}var Bc=1,Gc=2;function jc(n,e){return ys(n)&&Jn(e)?ea(qr(n),e):function(a){var i=Ac(a,n);return i===void 0&&i===e?Hc(a,n):ps(e,i,Bc|Gc)}}function Wc(n){return function(e){return e==null?void 0:e[n]}}function qc(n){return function(e){return Zn(e,n)}}function Uc(n){return ys(n)?Wc(qr(n)):qc(n)}function Qc(n){return typeof n=="function"?n:n==null?kc:typeof n=="object"?kr(n)?jc(n[0],n[1]):Fc(n):Uc(n)}function Yc(n,e,a){a=typeof a=="function"?a:void 0;var i=a?a(n,e):void 0;return i===void 0?ps(n,e,void 0,a):!!i}function Kc(n,e){for(var a,i=-1,t=n.length;++i<t;){var o=e(n[i]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function Xc(n,e){return n&&n.length?Kc(n,Qc(e)):0}function fs(){let n;return[new Promise(a=>n=a),n]}class Zc{constructor(e,a){_e(this,"currentConfig");_e(this,"currentAuxData");_e(this,"configList");_e(this,"cardStateCustomizer");_e(this,"currentDeck");_e(this,"deckLimits");_e(this,"defaults");_e(this,"addonComponents");_e(this,"newCardsIgnoreReviewLimit");_e(this,"applyAllParentLimits");_e(this,"fsrs");_e(this,"fsrsReschedule",Qe(!1));_e(this,"fsrsHealthCheck");_e(this,"legacyEvaluate");_e(this,"daysSinceLastOptimization");_e(this,"currentPresetName");_e(this,"originalConfigsPromise");_e(this,"originalConfigsResolve");_e(this,"targetDeckId");_e(this,"configs");_e(this,"selectedIdx");_e(this,"configListSetter");_e(this,"modifiedConfigs",new Set);_e(this,"removedConfigs",[]);_e(this,"schemaModified");_e(this,"_presetAssignmentsChanged",!1);_e(this,"loadedPresets",new Set);var i,t;this.targetDeckId=e,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Qe(a.cardStateCustomizer),this.deckLimits=Qe((t=(i=a.currentDeck)==null?void 0:i.limits)!=null?t:ed()),this.newCardsIgnoreReviewLimit=Qe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Qe(a.applyAllParentLimits),this.fsrs=Qe(a.fsrs),this.fsrsHealthCheck=Qe(a.fsrsHealthCheck),this.legacyEvaluate=a.fsrsLegacyEvaluate,this.daysSinceLastOptimization=Qe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Qe(this.getCurrentConfig()),this.currentAuxData=Qe(this.getCurrentAuxData()),this.currentPresetName=Qe(this.configs[this.selectedIdx].config.name),this.configList=hn(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=Qe([]),Ue(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=fs()}async markCurrentPresetAsLoaded(){const e=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(e&&!a.has(e)){a.add(e);const i=await this.originalConfigsPromise,t=i.configs.findIndex(o=>o.id===e);t!==-1&&(i.configs[t]=Fr(this.configs[this.selectedIdx].config))}}setCurrentIndex(e){this.selectedIdx=e,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),Bt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(e){if(this.configs[this.selectedIdx].config.name===e)return;const a=this.ensureNewNameUnique(e),i=this.configs[this.selectedIdx].config;i.name=a,i.id&&this.modifiedConfigs.add(i.id),this.sortConfigs(),this.updateConfigList()}addConfig(e){this.addConfigFrom(e,this.defaults)}cloneConfig(e){this.addConfigFrom(e,this.configs[this.selectedIdx].config.config)}addConfigFrom(e,a){const i=this.ensureNewNameUnique(e),o={config:new va({id:0n,name:i,config:new $a(Fr(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const e=this.configs[this.selectedIdx].config.id;if(e===1n)throw Error("can't remove default config");e!==0n&&(this.removedConfigs.push(e),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(e){const i=[...this.configs.map(t=>t.config).filter((t,o)=>o!==this.selectedIdx&&(t.id===0n||this.modifiedConfigs.has(t.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:i,mode:e,cardStateCustomizer:Ue(this.cardStateCustomizer),limits:Ue(this.deckLimits),newCardsIgnoreReviewLimit:Ue(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ue(this.applyAllParentLimits),fsrs:Ue(this.fsrs),fsrsReschedule:Ue(this.fsrsReschedule),fsrsHealthCheck:Ue(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(e){await pa(this.dataForSaving(e))}onCurrentConfigChanged(e){const a=this.configs[this.selectedIdx].config;Ls(e,a.config)||(a.config=e,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(e){const a=this.getCurrentAuxData();Ls(a,e)||this.currentConfig.update(i=>{const t=new TextEncoder().encode(JSON.stringify(e));return i.other=t,i})}ensureNewNameUnique(e){return this.configs.findIndex(i=>i.config.name===e)!==-1?e+(new Date().getTime()/1e3).toFixed(0):e}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var e;(e=this.configListSetter)==null||e.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Fr(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const e=this.configs[this.selectedIdx].config.config;return Jc(e.other)}sortConfigs(){const e=this.configs[this.selectedIdx].config.name;this.configs.sort((a,i)=>Da(a.config.name,i.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==e)}getConfigList(){return this.configs.map((a,i)=>{const t=a.useCount+(i===this.selectedIdx?1:0);return{name:a.config.name,current:i===this.selectedIdx,idx:i,useCount:t}})}getAllConfigs(){return Fr({configs:this.configs.map(e=>e.config),cardStateCustomizer:Ue(this.cardStateCustomizer),limits:Ue(this.deckLimits),newCardsIgnoreReviewLimit:Ue(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ue(this.applyAllParentLimits),fsrs:Ue(this.fsrs),fsrsReschedule:Ue(this.fsrsReschedule),currentConfig:Ue(this.currentConfig)})}async isModified(){const e=await this.originalConfigsPromise,a=this.getAllConfigs();return!Yc(e,a,(i,t)=>{if(typeof i=="number"&&typeof t=="number")return Math.fround(i)===Math.fround(t)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function Jc(n){if(!n.length)return{};let e;try{e=JSON.parse(new TextDecoder().decode(n))}catch{return console.log("invalid json in deck config"),{}}return e.constructor!==Object?(console.log("invalid object in deck config"),{}):e}function ed(){return new ma({})}class _t{constructor(e,a,i,t,o){_e(this,"title");_e(this,"value");_e(this,"setter");_e(this,"disabledValue");_e(this,"startValue");_e(this,"initialValue");this.title=e,this.value=this.initialValue=a,this.setter=i,this.disabledValue=t,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(e){var a,i;this.value=(i=(a=this.value)!=null?a:this.startValue)!=null?i:e,this.setter(this.value)}setValue(e){this.value=e,this.setter(e)}}async function ws(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Bt()}function zt(n){return n.fsrsParams6?n.fsrsParams6:n.fsrsParams5?n.fsrsParams5:n.fsrsParams4}const td=async({params:n})=>{const e=Number(n.deckId),a=BigInt(e),i=await ha({did:a});return{state:new Zc(BigInt(a),i)}},Vg=Object.freeze(Object.defineProperty({__proto__:null,load:td},Symbol.toStringTag,{value:"Module"}));_n("svelte",Ga);_n("svelte/store",hc);function rd(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(y,"$components",a),o=()=>ye(c,"$auxData",a);let h=G(e,"state",8);const y=h().addonComponents,c=h().currentAuxData;Re();var u=ot(),g=le(u);{var x=C=>{ft(C,{title:"Add-ons",children:(l,_)=>{var p=ot(),d=le(p);_r(d,1,t,Wr,(O,k)=>{var L=ot(),z=le(L);ds(z,()=>s(k).component,(T,H)=>{H(T,wn(()=>s(k),{get data(){return Gt(),o()},set data(w){xt(c,w)},$$legacy:!0}))}),$(O,L)}),$(l,p)},$$slots:{default:!0}})};Ie(g,C=>{t(),r(()=>t().length)&&C(x)})}$(n,u),Oe(),i()}function os(n,e){let a,i;if(e instanceof Element){if(a=e,i=Array.prototype.indexOf.call(n,a),i<0)return null}else if(typeof e=="string"){const t=n.namedItem(e);if(!t||(a=t,i=Array.prototype.indexOf.call(n,a),i<0))return null}else if(e<0){i=n.length+e;const t=n.item(i);if(!t)return null;a=t}else{i=e;const t=n.item(i);if(!t)return null;a=t}return[a,i]}class sd{constructor(e){_e(this,"parent");this.parent=e}insertElement(e,a){const i=os(this.parent.children,a);if(!i)return-1;const[t,o]=i;return this.parent.insertBefore(e,t[0]),o}appendElement(e,a){var y;const i=os(this.parent.children,a);if(!i)return-1;const[t,o]=i,h=(y=t.nextElementSibling)!=null?y:null;return this.parent.insertBefore(e,h),o+1}updateElement(e,a){const i=os(this.parent.children,a);return i?(e(...i),!0):!1}}function nd(n){return new sd(n)}function ad(n){return n.nodeType===Node.ELEMENT_NODE}function od(n){function e(i){Fa(n,i)}return[{get(){return vs(n)},available(){return Na(n)}},e]}function id(n,e,a,i){const t=Qe([]);t.subscribe(e);function o(_,p){t.update(d=>(d.splice(_,0,p),d))}const[h,y]=fs(),c=h.then(nd),u=Qe([]);async function g(_,p){const[d,O]=fs(),k=await c,L=n();function z(D){return!_.id||D.id===_.id}async function T(D,I){for(const F of D)for(const b of F.addedNodes){if(!ad(b)||!z(b))continue;const M=p(b,k);return M>=0&&o(M,L),O(void 0),I.disconnect()}}new MutationObserver(T).observe(k.parent,{childList:!0});const w={component:_,hostProps:L};return u.update(D=>(D.push(w),D)),await d,{destroy(){u.update(D=>(Nu(D,w),D))}}}async function x(_,p){return(await c).updateElement((O,k)=>{t.update(L=>(L[k]=_(L[k]),L))},p)}const C=i({addComponent:g,updateProps:x});function l(){const _=n();return t.update(p=>(p.push(_),p)),_}return a({getProps:l}),{dynamicSlotted:u,resolveSlotContainer:y,slotsInterface:C}}function ld(){return{detach:Qe(!1)}}function ud({addComponent:n,updateProps:e}){function a(y,c=0){return n(y,(u,g)=>g.insertElement(u,c))}function i(y,c=-1){return n(y,(u,g)=>g.appendElement(u,c))}function t(y){return e(c=>(c.detach.set(!1),c),y)}function o(y){return e(c=>(c.detach.set(!0),c),y)}function h(y){return e(c=>(c.detach.update(u=>!u),c),y)}return{insert:a,append:i,show:t,hide:o,toggle:h}}const cd=Symbol("dynamicSlotting"),[on,dd]=od(cd);var fd=te('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function gt(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(l,"$dynamicSlotted",a);function o(k){return k}let h=G(e,"slotHost",8),y=G(e,"createProps",8,ld),c=G(e,"updatePropsList",8,o),u=G(e,"setSlotHostContext",8,dd),g=G(e,"createInterface",8,ud);const{slotsInterface:x,resolveSlotContainer:C,dynamicSlotted:l}=id(y(),c(),u(),g());let _=G(e,"api",8);Object.assign(_(),x),Re();var p=fd(),d=q(p);Tt(d,e,"default",{});var O=v(d,2);_r(O,1,t,({component:k,hostProps:L})=>k.id,(k,L)=>{let z=()=>s(L).component,T=()=>s(L).hostProps;var H=ot(),w=le(H);ds(w,h,(D,I)=>{I(D,{get id(){return z(),r(()=>z().id)},get hostProps(){return T()},children:(F,b)=>{var S=ot(),M=le(S);ds(M,()=>z().component,(Y,Q)=>{Q(Y,wn(()=>z().props))}),$(F,S)},$$slots:{default:!0}})}),$(k,H)}),E(p),jn(p,k=>C==null?void 0:C(k)),$(n,p),Oe(),i()}var gd=te('<div class="item svelte-u5rx4p"><!></div>');function J(n,e){var x;Se(e,!1);const[a,i]=je(),t=()=>ye(y,"$detach",a);let o=G(e,"id",8,void 0),h=G(e,"hostProps",8,void 0);on.available()||console.log("Item: should always have a slotHostContext");const{detach:y}=(x=h())!=null?x:on.get().getProps();Re();var c=gd(),u=q(c);{var g=C=>{var l=ot(),_=le(l);Tt(_,e,"default",{}),$(C,l)};Ie(u,C=>{t()||C(g)})}E(c),j(()=>at(c,"id",o())),$(n,c),Oe(),i()}var vd=te(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function jt(n,e){Se(e,!1);let a=G(e,"title",8);Re(),oe();var i=vd(),t=le(i),o=v(t),h=q(o);Br(h,{get icon(){return Fu}}),E(o),j(y=>{var c;N(t,`${(c=a())!=null?c:""} `),at(o,"title",y)},[()=>(m(B),r(()=>Hr()))],W),$(n,i),Oe()}var $d=te('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),pd=te('<div class="m-2"><!></div>');function md(n,e){let a=G(e,"value",12),i=G(e,"title",8);var t=pd(),o=q(t);Wt(o,{children:(h,y)=>{var c=$d(),u=q(c),g=q(u);jt(g,{get title(){return i()}}),E(u);var x=v(u,2),C=q(x);yn(C),E(x),E(c),xr(C,a),$(h,c)},$$slots:{default:!0,revert:(h,y)=>{Pr(h,{slot:"revert",defaultValue:"",get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),E(t),$(n,t)}var hd=te('<span class="invisible svelte-xwrhci"> </span>'),yd=te('<span class="suffix svelte-xwrhci"></span>'),Cd=te('<div tabindex="-1" role="button"><!></div> <div tabindex="-1" role="button"><!></div>',1),wd=te('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"/> <!> <!></div>');function ta(n,e){Se(e,!1);const a=R();let i=G(e,"value",12),t=G(e,"step",8,1),o=G(e,"min",8,1),h=G(e,"max",8,9999),y=G(e,"percentage",8,!1),c=R(),u=G(e,"focused",12,!1),g=R();function x(A){Number.isNaN(A)||i(Math.min(h(),Math.max(o(),A))),Bt().then(()=>{It(c,s(c).value=s(l)),L(s(l))})}function C(A){if(Math.floor(A)===A)return 0;const K=A.toString().split(".")[1].length||0,U=y()?K-2:K;return Math.max(0,U)}let l=R();function _(){x(parseFloat(this.value)/s(g))}function p(A){u()&&(x(i()+(A.deltaY<0?t():-t())),A.preventDefault())}function d(A){x(i()+A),s(H)&&setTimeout(()=>d(A),w)}const O=[1500,1250,1e3,750,500,250];async function k(A){f(H,!0),w=128,f(D,setTimeout(A,250));for(const K of O)w=await new Promise(U=>setTimeout(()=>U(s(H)?w/2:128),K))}function L(A){f(T,Ua({pct:A}).replaceAll("%","-%-").split("-"))}function z(){L(s(c).value)}let T=R(),H=R(!1),w,D=R();ce(()=>m(y()),()=>{f(g,y()?100:1)}),ce(()=>(m(i()),s(g),m(t())),()=>{f(l,(i()*s(g)).toFixed(C(t())))}),ce(()=>s(l),()=>{L(s(l))}),ce(()=>(m(y()),s(T)),()=>{f(a,y()&&!s(T)[0]?"2.2ch":void 0)}),Ke(),Re();var I=wd(),F=q(I);nt(F);let b;Jt(F,A=>f(c,A),()=>s(c));var S=v(F,2);{var M=A=>{var K=yd();_r(K,5,()=>s(T),Wr,(U,ne)=>{var re=ot(),$e=le(re);{var X=ie=>{var ve=Z("%");$(ie,ve)},Le=ie=>{var ve=hd(),xe=q(ve,!0);E(ve),j(()=>N(xe,s(ne))),$(ie,ve)};Ie($e,ie=>{s(ne)=="%"?ie(X):ie(Le,!1)})}$(U,re)}),E(K),$(A,K)};Ie(S,A=>{y()&&A(M)})}var Y=v(S,2);{var Q=A=>{var K=Cd(),U=le(K);let ne;var re=q(U);Xs(re,{children:(ie,ve)=>{Br(ie,{get icon(){return Wn}})},$$slots:{default:!0}}),E(U);var $e=v(U,2);let X;var Le=q($e);Xs(Le,{children:(ie,ve)=>{Br(ie,{get icon(){return Vu}})},$$slots:{default:!0}}),E($e),j((ie,ve,xe,Fe)=>{ne=dt(U,1,"spinner decrement svelte-xwrhci",null,ne,ie),at(U,"title",ve),X=dt($e,1,"spinner increment svelte-xwrhci",null,X,xe),at($e,"title",Fe)},[()=>({active:i()>o()}),()=>(m(B),r(()=>Ya())),()=>({active:i()<h()}),()=>(m(B),r(()=>Ka()))],W),be("click",U,()=>{s(c).focus(),i()>o()&&d(-t())}),be("mousedown",U,()=>k(()=>{i()>o()&&d(-t())})),be("mouseup",U,()=>{clearTimeout(s(D)),f(H,!1)}),be("click",$e,()=>{s(c).focus(),i()<h()&&d(t())}),be("mousedown",$e,()=>k(()=>{i()<h()&&d(t())})),be("mouseup",$e,()=>{clearTimeout(s(D)),f(H,!1)}),$(A,K)};Ie(Y,A=>{m(Zs),r(Zs)&&A(Q)})}E(I),j(()=>{at(F,"min",o()*s(g)),at(F,"max",h()*s(g)),at(F,"step",t()*s(g)),ms(F,s(l)),b=Qa(F,"",b,{"padding-left":s(a)})}),be("blur",F,_),be("change",F,_),be("input",F,z),be("focusin",F,()=>u(!0)),be("focusout",F,()=>u(!1)),be("wheel",I,p),$(n,I),Oe()}var _d=te("<!> <!>",1),kd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function kt(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999),h=G(e,"step",8,.01),y=G(e,"percentage",8,!1),c=G(e,"focused",12,!1);var u=Pd(),g=le(u);Ze(g,()=>({"--cols":13})),qe(g.lastChild,{children:(x,C)=>{var l=kd(),_=le(l);Ze(_,()=>({"--col-size":7})),At(_.lastChild,{breakpoint:"xs",children:(d,O)=>{var k=ot(),L=le(k);Tt(L,e,"default",{}),$(d,k)},$$slots:{default:!0}}),E(_);var p=v(_,2);Ze(p,()=>({"--col-size":6})),At(p.lastChild,{breakpoint:"xs",children:(d,O)=>{qe(d,{class:"flex-grow-1",children:(k,L)=>{var z=_d(),T=le(z);Tt(T,e,"tabs",{});var H=v(T,2);Wt(H,{children:(w,D)=>{ta(w,{get min(){return t()},get max(){return o()},get step(){return h()},get percentage(){return y()},get value(){return a()},set value(I){a(I)},get focused(){return c()},set focused(I){c(I)},$$legacy:!0})},$$slots:{default:!0,revert:(w,D)=>{Pr(w,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(I){a(I)},$$legacy:!0})}}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0}}),E(p),$(x,l)},$$slots:{default:!0}}),E(g),$(n,u)}var xd=te("<!> <!>",1),bd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Sd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function st(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999);var h=Sd(),y=le(h);Ze(y,()=>({"--cols":13})),qe(y.lastChild,{children:(c,u)=>{var g=bd(),x=le(g);Ze(x,()=>({"--col-size":7})),At(x.lastChild,{breakpoint:"xs",children:(l,_)=>{var p=ot(),d=le(p);Tt(d,e,"default",{}),$(l,p)},$$slots:{default:!0}}),E(x);var C=v(x,2);Ze(C,()=>({"--col-size":6})),At(C.lastChild,{breakpoint:"xs",children:(l,_)=>{qe(l,{class:"flex-grow-1",children:(p,d)=>{var O=xd(),k=le(O);Tt(k,e,"tabs",{});var L=v(k,2);Wt(L,{children:(z,T)=>{ta(z,{get min(){return t()},get max(){return o()},get value(){return a()},set value(H){a(H)},$$legacy:!0})},$$slots:{default:!0,revert:(z,T)=>{Pr(z,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(H){a(H)},$$legacy:!0})}}}),$(p,O)},$$slots:{default:!0}})},$$slots:{default:!0}}),E(C),$(c,g)},$$slots:{default:!0}}),E(y),$(n,h)}var Od=te('<input type="date" class="svelte-67zife"/>'),Rd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Td=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Dd=te("<div><!></div>");function Id(n,e){Se(e,!1);let a=G(e,"date",12);ce(()=>m(a()),()=>{a(a()?a():"1970-01-01")}),Ke();var i=Dd(),t=q(i);Wt(t,{children:(o,h)=>{var y=Td(),c=le(y);Ze(c,()=>({"--cols":13})),qe(c.lastChild,{children:(u,g)=>{var x=Rd(),C=le(x);Ze(C,()=>({"--col-size":7})),At(C.lastChild,{breakpoint:"xs",children:(_,p)=>{var d=ot(),O=le(d);Tt(O,e,"default",{}),$(_,d)},$$slots:{default:!0}}),E(C);var l=v(C,2);Ze(l,()=>({"--col-size":6})),At(l.lastChild,{breakpoint:"xs",children:(_,p)=>{var d=Od();nt(d),xr(d,a),$(_,d)},$$slots:{default:!0}}),E(l),$(u,x)},$$slots:{default:!0}}),E(c),$(o,y)},$$slots:{default:!0}}),E(i),$(n,i),Oe()}var Ad=te("<!> <!> <!> <!> <!>",1),Ld=te("<!> <!> <!>",1),Ed=te("<!> <!> <!> <!>",1);function Md(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(C,"$config",a),o=()=>ye(p,"$fsrs",a),h=()=>ye(_,"$cardStateCustomizer",a),y=R(),c=R(),u=R();let g=G(e,"state",8),x=G(e,"api",8);const C=g().currentConfig,l=g().defaults,_=g().cardStateCustomizer,p=g().fsrs,d={maximumInterval:{title:kn(),help:fo(),url:he.DeckOptions.maximumInterval},historicalRetention:{title:Ms(),help:co(),sched:rt.FSRS},ignoreRevlogsBeforeMs:{title:Es(),help:uo(),sched:rt.FSRS},startingEase:{title:lo(),help:io(),url:he.DeckOptions.startingEase,sched:rt.SM2},easyBonus:{title:oo(),help:ao(),url:he.DeckOptions.easyBonus,sched:rt.SM2},intervalModifier:{title:no(),help:so(),url:he.DeckOptions.intervalModifier,sched:rt.SM2},hardInterval:{title:ro(),help:to(),url:he.DeckOptions.hardInterval,sched:rt.SM2},newInterval:{title:eo(),help:Ja(),url:he.DeckOptions.newInterval,sched:rt.SM2},customScheduling:{title:Za(),help:Xa(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling",global:!0}},O=Object.values(d);let k=R(null),L="";function z(M){L!=M&&(H&&M&&M!="1970-01-01"?(L=M,ya({search:t().paramSearch||`preset:"${g().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:M}).then(Y=>{f(k,Y)})):f(k,null),H=!0)}let T=R(void 0),H=!0;const w=1e3;let D=R("alert-warning"),I=R(),F=R();function b(M){s(I).show(),s(F).to(M)}ce(()=>t(),()=>{f(y,t().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ce(()=>(t(),B),()=>{f(c,t().maximumReviewInterval<180?go():"")}),ce(()=>(s(T),t()),()=>{clearTimeout(s(T)),f(T,setTimeout(()=>{z(t().ignoreRevlogsBeforeDate)},w))}),ce(()=>s(k),()=>{s(k)&&(Number(s(k).included)/Number(s(k).total)<.1?f(D,"alert-danger"):s(k).included!=s(k).total?f(D,"alert-warning"):f(D,"alert-info"))}),ce(()=>(s(k),B),()=>{f(u,s(k)?vo({included:s(k).included.toString(),totalCards:s(k).total.toString()}):"")}),Ke(),Re();const S=W(()=>(m(B),r(()=>Ns())));ft(n,{get title(){return s(S)},children:(M,Y)=>{gt(M,{get slotHost(){return J},get api(){return x()},children:(Q,A)=>{var K=Ed(),U=le(K);J(U,{children:(ie,ve)=>{st(ie,{get defaultValue(){return r(()=>l.maximumReviewInterval)},min:1,max:365*100,get value(){return t().maximumReviewInterval},set value(xe){se(C,r(t).maximumReviewInterval=xe,r(t))},children:(xe,Fe)=>{ae(xe,{$$events:{click:()=>b(Object.keys(d).indexOf("maximumInterval"))},children:(de,Pe)=>{oe();var He=Z();j(()=>N(He,r(()=>d.maximumInterval.title))),$(de,He)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ne=v(U,2);J(ne,{children:(ie,ve)=>{Ye(ie,{get warning(){return s(c)},get className(){return s(y)}})},$$slots:{default:!0}});var re=v(ne,2);{var $e=ie=>{var ve=Ad(),xe=le(ve);J(xe,{children:(Ve,Ee)=>{kt(Ve,{get defaultValue(){return r(()=>l.initialEase)},min:1.31,max:5,get value(){return t().initialEase},set value(Ce){se(C,r(t).initialEase=Ce,r(t))},children:(Ce,ke)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("startingEase"))},children:(Me,Ne)=>{oe();var Ae=Z();j(()=>N(Ae,r(()=>d.startingEase.title))),$(Me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Fe=v(xe,2);J(Fe,{children:(Ve,Ee)=>{kt(Ve,{get defaultValue(){return r(()=>l.easyMultiplier)},min:1,max:5,get value(){return t().easyMultiplier},set value(Ce){se(C,r(t).easyMultiplier=Ce,r(t))},children:(Ce,ke)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("easyBonus"))},children:(Me,Ne)=>{oe();var Ae=Z();j(()=>N(Ae,r(()=>d.easyBonus.title))),$(Me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var de=v(Fe,2);J(de,{children:(Ve,Ee)=>{kt(Ve,{get defaultValue(){return r(()=>l.intervalMultiplier)},min:.5,max:2,get value(){return t().intervalMultiplier},set value(Ce){se(C,r(t).intervalMultiplier=Ce,r(t))},children:(Ce,ke)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("intervalModifier"))},children:(Me,Ne)=>{oe();var Ae=Z();j(()=>N(Ae,r(()=>d.intervalModifier.title))),$(Me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Pe=v(de,2);J(Pe,{children:(Ve,Ee)=>{kt(Ve,{get defaultValue(){return r(()=>l.hardMultiplier)},min:.5,max:1.3,get value(){return t().hardMultiplier},set value(Ce){se(C,r(t).hardMultiplier=Ce,r(t))},children:(Ce,ke)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("hardInterval"))},children:(Me,Ne)=>{oe();var Ae=Z();j(()=>N(Ae,r(()=>d.hardInterval.title))),$(Me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var He=v(Pe,2);J(He,{children:(Ve,Ee)=>{kt(Ve,{get defaultValue(){return r(()=>l.lapseMultiplier)},max:1,get value(){return t().lapseMultiplier},set value(Ce){se(C,r(t).lapseMultiplier=Ce,r(t))},children:(Ce,ke)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(d).indexOf("newInterval"))},children:(Me,Ne)=>{oe();var Ae=Z();j(()=>N(Ae,r(()=>d.newInterval.title))),$(Me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(ie,ve)},X=ie=>{var ve=Ld(),xe=le(ve);kt(xe,{get defaultValue(){return r(()=>l.historicalRetention)},min:.5,max:1,percentage:!0,get value(){return t().historicalRetention},set value(Pe){se(C,r(t).historicalRetention=Pe,r(t))},children:(Pe,He)=>{ae(Pe,{$$events:{click:()=>b(Object.keys(d).indexOf("historicalRetention"))},children:(Ve,Ee)=>{oe();var Ce=Z();j(ke=>N(Ce,ke),[()=>(m(B),r(()=>Ms()))],W),$(Ve,Ce)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Fe=v(xe,2);J(Fe,{children:(Pe,He)=>{Id(Pe,{get date(){return t().ignoreRevlogsBeforeDate},set date(Ve){se(C,r(t).ignoreRevlogsBeforeDate=Ve,r(t))},children:(Ve,Ee)=>{ae(Ve,{$$events:{click:()=>b(Object.keys(d).indexOf("ignoreRevlogsBeforeMs"))},children:(Ce,ke)=>{oe();var Me=Z();j(Ne=>N(Me,Ne),[()=>(m(B),r(()=>Es()))],W),$(Ce,Me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var de=v(Fe,2);J(de,{children:(Pe,He)=>{Ye(Pe,{get warning(){return s(u)},get className(){return s(D)}})},$$slots:{default:!0}}),$(ie,ve)};Ie(re,ie=>{o()?ie(X,!1):ie($e)})}var Le=v(re,2);J(Le,{children:(ie,ve)=>{md(ie,{get title(){return r(()=>d.customScheduling.title)},get value(){return Gt(),h()},set value(xe){xt(_,xe)},$$events:{click:()=>b(Object.keys(d).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),$(Q,K)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(M,Y)=>{const Q=W(()=>(m(B),r(()=>Ns())));bt(M,{get title(){return s(Q)},get url(){return m(he),r(()=>he.DeckOptions.advanced)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return O},$$events:{mount:A=>{f(I,A.detail.modal),f(F,A.detail.carousel)}}})}}}),Oe(),i()}var Nd=te("<!> <!>",1);function Fd(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u={disableAutoplay:{title:ho(),help:mo()},skipQuestionWhenReplaying:{title:po(),help:$o()}},g=Object.values(u);let x=R(),C=R();function l(p){s(x).show(),s(C).to(p)}Re();const _=W(()=>(m(B),r(()=>Fs())));ft(n,{get title(){return s(_)},children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=Nd(),z=le(L);J(z,{children:(H,w)=>{Je(H,{get defaultValue(){return r(()=>c.disableAutoplay)},get value(){return t().disableAutoplay},set value(D){se(y,r(t).disableAutoplay=D,r(t))},children:(D,I)=>{ae(D,{$$events:{click:()=>l(Object.keys(u).indexOf("disableAutoplay"))},children:(F,b)=>{oe();var S=Z();j(()=>N(S,r(()=>u.disableAutoplay.title))),$(F,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);J(T,{children:(H,w)=>{Je(H,{get defaultValue(){return r(()=>c.skipQuestionWhenReplayingAnswer)},get value(){return t().skipQuestionWhenReplayingAnswer},set value(D){se(y,r(t).skipQuestionWhenReplayingAnswer=D,r(t))},children:(D,I)=>{ae(D,{$$events:{click:()=>l(Object.keys(u).indexOf("skipQuestionWhenReplaying"))},children:(F,b)=>{oe();var S=Z();j(()=>N(S,r(()=>u.skipQuestionWhenReplaying.title))),$(F,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{const O=W(()=>(m(B),r(()=>Fs())));bt(p,{get title(){return s(O)},get url(){return m(he),r(()=>he.DeckOptions.audio)},slot:"tooltip",get helpSections(){return g},$$events:{mount:k=>{f(x,k.detail.modal),f(C,k.detail.carousel)}}})}}}),Oe(),i()}function ln(){return[{label:bo(),value:Rt.DECK},{label:So(),value:Rt.DECK_THEN_RANDOM_NOTES},{label:Oo(),value:Rt.LOWEST_POSITION},{label:Ro(),value:Rt.HIGHEST_POSITION},{label:To(),value:Rt.RANDOM_NOTES},{label:Do(),value:Rt.RANDOM_CARDS}]}function un(){return[{label:Io(),value:ht.TEMPLATE},{label:Ao(),value:ht.NO_SORT},{label:Lo(),value:ht.TEMPLATE_THEN_RANDOM},{label:Eo(),value:ht.RANDOM_NOTE_THEN_TEMPLATE},{label:Pn(),value:ht.RANDOM_CARD}]}function Gr(n){return[{label:Vo(),value:ct.DAY},{label:zo(),value:ct.DAY_THEN_DECK},{label:Ho(),value:ct.DECK_THEN_DAY},{label:Bo(),value:ct.INTERVALS_ASCENDING},{label:Go(),value:ct.INTERVALS_DESCENDING},...Vd(n),{label:jo(),value:ct.RETRIEVABILITY_ASCENDING},{label:Wo(),value:ct.RETRIEVABILITY_DESCENDING},{label:Pn(),value:ct.RANDOM},{label:qo(),value:ct.ADDED},{label:Uo(),value:ct.REVERSE_ADDED}]}function Vr(){return[{label:Mo(),value:as.MIX_WITH_REVIEWS},{label:No(),value:as.AFTER_REVIEWS},{label:Fo(),value:as.BEFORE_REVIEWS}]}function cn(){return[{label:Zo(),value:Ht.SUSPEND},{label:Jo(),value:Ht.TAG_ONLY}]}function dn(){return[{label:ei(),value:ls.DUE},{label:ti(),value:ls.RANDOM}]}function fn(){return[{label:wo(),value:mr.BURY_CARD},{label:_o(),value:mr.ANSWER_AGAIN},{label:ko(),value:mr.ANSWER_GOOD},{label:Po(),value:mr.ANSWER_HARD},{label:xo(),value:mr.SHOW_REMINDER}]}function gn(){return[{label:yo(),value:Os.SHOW_ANSWER},{label:Co(),value:Os.SHOW_REMINDER}]}function Vd(n){const e=[{label:n?Qo():Yo(),value:ct.EASE_ASCENDING},{label:n?Ko():Xo(),value:ct.EASE_DESCENDING}];return n&&e.reverse(),e}var zd=te("<!> <!> <!> <!> <!>",1);function Hd(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u={secondsToShowQuestion:{title:di(),help:ci()},secondsToShowAnswer:{title:ui(),help:li()},waitForAudio:{title:ii(),help:oi()},questionAction:{title:ai(),help:ni()},answerAction:{title:si(),help:ri()}},g=Object.values(u);let x=R(),C=R();function l(p){s(x).show(),s(C).to(p)}Re();const _=W(()=>(m(B),r(()=>Vs())));ft(n,{get title(){return s(_)},children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=zd(),z=le(L);J(z,{children:(I,F)=>{kt(I,{get defaultValue(){return r(()=>c.secondsToShowQuestion)},step:.1,get value(){return t().secondsToShowQuestion},set value(b){se(y,r(t).secondsToShowQuestion=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("secondsToShowQuestion"))},children:(M,Y)=>{oe();var Q=Z();j(()=>N(Q,r(()=>u.secondsToShowQuestion.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);J(T,{children:(I,F)=>{kt(I,{get defaultValue(){return r(()=>c.secondsToShowAnswer)},step:.1,get value(){return t().secondsToShowAnswer},set value(b){se(y,r(t).secondsToShowAnswer=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("secondsToShowAnswer"))},children:(M,Y)=>{oe();var Q=Z();j(()=>N(Q,r(()=>u.secondsToShowAnswer.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(I,F)=>{Je(I,{get defaultValue(){return r(()=>c.waitForAudio)},get value(){return t().waitForAudio},set value(b){se(y,r(t).waitForAudio=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>l(Object.keys(u).indexOf("waitForAudio"))},children:(M,Y)=>{oe();var Q=Z();j(()=>N(Q,r(()=>u.waitForAudio.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(I,F)=>{const b=W(()=>(m(gn),r(gn)));Pt(I,{get defaultValue(){return r(()=>c.questionAction)},get choices(){return s(b)},get value(){return t().questionAction},set value(S){se(y,r(t).questionAction=S,r(t))},children:(S,M)=>{ae(S,{$$events:{click:()=>l(Object.keys(u).indexOf("questionAction"))},children:(Y,Q)=>{oe();var A=Z();j(()=>N(A,r(()=>u.questionAction.title))),$(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=v(w,2);J(D,{children:(I,F)=>{const b=W(()=>(m(fn),r(fn)));Pt(I,{get defaultValue(){return r(()=>c.answerAction)},get choices(){return s(b)},get value(){return t().answerAction},set value(S){se(y,r(t).answerAction=S,r(t))},children:(S,M)=>{ae(S,{$$events:{click:()=>l(Object.keys(u).indexOf("answerAction"))},children:(Y,Q)=>{oe();var A=Z();j(()=>N(A,r(()=>u.answerAction.title))),$(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{const O=W(()=>(m(B),r(()=>Vs())));bt(p,{get title(){return s(O)},get url(){return m(he),r(()=>he.DeckOptions.autoAdvance)},slot:"tooltip",get helpSections(){return g},$$events:{mount:k=>{f(x,k.detail.modal),f(C,k.detail.carousel)}}})}}}),Oe(),i()}var Bd=te("<!> <!> <!>",1);function Gd(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,c=o().defaults,u=`

`+fi(),g={buryNewSiblings:{title:hi(),help:mi()+u},buryReviewSiblings:{title:pi(),help:$i()+u},buryInterdayLearningSiblings:{title:vi(),help:gi()+u}},x=Object.values(g);let C=R(),l=R();function _(d){s(C).show(),s(l).to(d)}Re();const p=W(()=>(m(B),r(()=>zs())));ft(n,{get title(){return s(p)},children:(d,O)=>{gt(d,{get slotHost(){return J},get api(){return h()},children:(k,L)=>{var z=Bd(),T=le(z);J(T,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryNew)},get value(){return t().buryNew},set value(F){se(y,r(t).buryNew=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryNewSiblings"))},children:(S,M)=>{oe();var Y=Z();j(()=>N(Y,r(()=>g.buryNewSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryReviews)},get value(){return t().buryReviews},set value(F){se(y,r(t).buryReviews=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryReviewSiblings"))},children:(S,M)=>{oe();var Y=Z();j(()=>N(Y,r(()=>g.buryReviewSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(D,I)=>{Je(D,{get defaultValue(){return r(()=>c.buryInterdayLearning)},get value(){return t().buryInterdayLearning},set value(F){se(y,r(t).buryInterdayLearning=F,r(t))},children:(F,b)=>{ae(F,{$$events:{click:()=>_(Object.keys(g).indexOf("buryInterdayLearningSiblings"))},children:(S,M)=>{oe();var Y=Z();j(()=>N(Y,r(()=>g.buryInterdayLearningSiblings.title))),$(S,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,O)=>{const k=W(()=>(m(B),r(()=>zs())));bt(d,{get title(){return s(k)},get url(){return m(he),r(()=>he.Studying.siblingsAndBurying)},slot:"tooltip",get helpSections(){return x},$$events:{mount:L=>{f(C,L.detail.modal),f(l,L.detail.carousel)}}})}}}),Oe(),i()}function jd(){}var Wd=te('<hr class="dropdown-divider"/>');function qd(n){var e=Wd();$(n,e)}var Ud=te('<div class="save svelte-ymxw35"> </div>'),Qd=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yd=te("<!> <!> <!> <!> <!> <!>",1),Kd=te('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Xd(n,e){Se(e,!1);const a=window.getComputedStyle(document.body).direction=="rtl",i=Cn();let t=G(e,"state",8);async function o(){if(await Bt(),t().defaultConfigSelected()){alert(_i());return}const _=(t().removalWilLForceFullSync()?ki()+" ":"")+Pi({name:t().getCurrentName()});if(confirm(Ia(_)))try{t().removeCurrentConfig(),i("remove")}catch(p){alert(p)}}async function h(_){await ws(),t().save(_)}const y="Control+Enter";let c=R(!1);Re();var u=Kd(),g=q(u);const x=W(()=>(m(Js),r(()=>Js(y))));Ze(g,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Bu(g.lastChild,{primary:!0,get tooltip(){return s(x)},$$events:{click:()=>h(zr.NORMAL)},children:(_,p)=>{var d=Ud(),O=q(d,!0);E(d),j(k=>N(O,k),[()=>(m(B),r(()=>yi()))],W),$(_,d)},$$slots:{default:!0}}),E(g);var C=v(g,2);zu(C,{keyCombination:y,$$events:{action:()=>h(zr.NORMAL)}});var l=v(C,2);Eu(l,{get show(){return s(c)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>f(c,!1)},$$slots:{reference:(_,p)=>{var d=Qd(),O=le(d);Ze(O,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),ju(O.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>f(c,!s(c))},children:(k,L)=>{Br(k,{get icon(){return Wn}})},$$slots:{default:!0}}),E(O),$(_,d)},floating:(_,p)=>{Mu(_,{slot:"floating",children:(d,O)=>{var k=Yd(),L=le(k);hr(L,{$$events:{click:()=>i("add")},children:(I,F)=>{oe();var b=Z();j(S=>N(b,S),[()=>(m(B),r(()=>xn()))],W),$(I,b)},$$slots:{default:!0}});var z=v(L,2);hr(z,{$$events:{click:()=>i("clone")},children:(I,F)=>{oe();var b=Z();j(S=>N(b,S),[()=>(m(B),r(()=>bn()))],W),$(I,b)},$$slots:{default:!0}});var T=v(z,2);hr(T,{$$events:{click:()=>i("rename")},children:(I,F)=>{oe();var b=Z();j(S=>N(b,S),[()=>(m(B),r(()=>Sn()))],W),$(I,b)},$$slots:{default:!0}});var H=v(T,2);hr(H,{$$events:{click:o},children:(I,F)=>{oe();var b=Z();j(S=>N(b,S),[()=>(m(B),r(()=>Ci()))],W),$(I,b)},$$slots:{default:!0}});var w=v(H,2);qd(w);var D=v(w,2);hr(D,{$$events:{click:()=>h(zr.APPLY_TO_CHILDREN)},children:(I,F)=>{oe();var b=Z();j(S=>N(b,S),[()=>(m(B),r(()=>wi()))],W),$(I,b)},$$slots:{default:!0}}),$(d,k)},$$slots:{default:!0}})}}}),E(u),$(n,u),Oe()}var Zd=te('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text"/></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Jd(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(Ru,"$pageTheme",a),o=R();let h=G(e,"title",8),y=G(e,"prompt",8),c=G(e,"initialValue",8,""),u=G(e,"onOk",8);const g=Math.random().toString(36).substring(2),x=vs(qn);let C=R(),l,_=R();function p(){u()(s(_).value),l.hide(),f(o,c())}function d(){l.hide(),f(o,c())}function O(){s(_).focus(),L(!0)}function k(){L(!1)}const{set:L,remove:z}=Wu(d);$s(()=>{s(C).addEventListener("shown.bs.modal",O),s(C).addEventListener("hidden.bs.modal",k),l=new Bn(s(C),{keyboard:!1}),x.set(g,l)}),ja(()=>{z(),s(C).removeEventListener("shown.bs.modal",O),s(C).removeEventListener("hidden.bs.modal",k)}),ce(()=>m(c()),()=>{f(o,c())}),Ke(),Re();var T=Zd(),H=q(T),w=q(H);let D;var I=q(w),F=q(I),b=q(F,!0);E(F);var S=v(F,2);let M;E(I);var Y=v(I,2),Q=q(Y),A=q(Q),K=q(A),U=q(K);E(K);var ne=v(K,2);nt(ne);let re;Jt(ne,ve=>f(_,ve),()=>s(_)),E(A),E(Q),E(Y);var $e=v(Y,2),X=q($e),Le=v(X,2);E($e),E(w),E(H),E(T),Jt(T,ve=>f(C,ve),()=>s(C)),j((ve,xe,Fe)=>{var de;D=dt(w,1,"modal-content svelte-18qg9px",null,D,ve),N(b,h()),M=dt(S,1,"btn-close svelte-18qg9px",null,M,xe),N(U,`${(de=y())!=null?de:""}:`),re=dt(ne,1,"form-control svelte-18qg9px",null,re,Fe)},[()=>({"default-colors":t().isDark}),()=>({invert:t().isDark}),()=>({nightMode:t().isDark})],W),xr(ne,()=>s(o),ve=>f(o,ve)),be("submit",Q,Hu(p)),be("click",X,d),be("click",Le,p),$(n,T),et(e,"modalKey",g);var ie=Oe({modalKey:g});return i(),ie}var ef=te('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),tf=te('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function rf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(c,"$configList",a),o=R(),h=R();let y=G(e,"state",8);const c=y().configList,u=Cn(),g=()=>u("presetchange");function x(S){const M=xi({decks:S.useCount});return`${S.name} (${M})`}function C(S){y().setCurrentIndex(S.detail.value),g()}function l(S){const M=S.trim();M.length&&(y().addConfig(M),g())}function _(S){const M=S.trim();M.length&&(y().cloneConfig(M),g())}function p(S){y().setCurrentName(S)}const d=vs(qn);let O=R(),k=R(""),L=R(""),z=R(jd);function T(){f(L,xn()),f(z,l),f(k,""),d.get(s(O)).show()}function H(){f(L,bn()),f(z,_),f(k,y().getCurrentName()),d.get(s(O)).show()}function w(){f(L,Sn()),f(z,p),f(k,y().getCurrentName()),d.get(s(O)).show()}ce(()=>t(),()=>{f(o,t().findIndex(S=>S.current))}),ce(()=>(t(),s(o)),()=>{f(h,x(t()[s(o)]))}),Ke(),Re();var D=tf(),I=le(D);const F=W(()=>(m(B),r(()=>bi())));Jd(I,{get title(){return s(L)},get prompt(){return s(F)},get initialValue(){return s(k)},get onOk(){return s(z)},get modalKey(){return s(O)},set modalKey(S){f(O,S)},$$legacy:!0});var b=v(I,2);Ze(b,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Gu(b.lastChild,{breakpoint:"sm",children:(S,M)=>{var Y=ef(),Q=q(Y);Wa(Q,{class:"flex-grow-1 mr1",get label(){return s(h)},get list(){return t()},parser:K=>({content:x(K),value:K.idx}),get value(){return s(o)},set value(K){f(o,K)},$$events:{change:C},$$legacy:!0});var A=v(Q,2);Xd(A,{get state(){return y()},$$events:{add:T,clone:H,rename:w,remove:g}}),E(Y),$(S,Y)},$$slots:{default:!0}}),E(b),$(n,D),Oe(),i()}var sf=te('<li><button class="svelte-kyz7n1"> </button></li>'),nf=te('<ul class="svelte-kyz7n1"></ul>');function gs(n,e){Se(e,!1);let a=G(e,"tabs",8),i=G(e,"value",12),t=R(o());function o(){const u=a().slice().reverse().findIndex(g=>g.value!==null);return u===-1?0:a().length-u-1}function h(u){for(const[g,x]of a().entries())u===g?x.enable(i()):u>g?x.reset():x.disable()}const y=u=>()=>f(t,u);ce(()=>s(t),()=>{h(s(t))}),ce(()=>(m(a()),s(t)),()=>{var u;i((u=a()[s(t)].value)!=null?u:0)}),ce(()=>(m(a()),s(t),m(i())),()=>{a()[s(t)].setValue(i())}),Ke(),Re();var c=nf();_r(c,5,a,Wr,(u,g,x)=>{var C=sf();let l;var _=q(C),p=Va(()=>y(x)),d=q(_,!0);E(_),E(C),j(O=>{l=dt(C,1,"svelte-kyz7n1",null,l,O),N(d,(s(g),r(()=>s(g).title)))},[()=>({active:s(t)===x})],W),be("click",_,function(...O){var k;(k=s(p))==null||k.apply(this,O)}),$(u,C)}),E(c),$(n,c),Oe()}var af=te("<!> <!> <!> <!> <!>",1);function of(n,e){var A,K,U,ne,re,$e;Se(e,!1);const[a,i]=je(),t=()=>ye(C,"$config",a),o=()=>ye(l,"$limits",a),h=()=>ye(p,"$newCardsIgnoreReviewLimit",a),y=()=>ye(d,"$applyAllParentLimits",a),c=R();let u=G(e,"state",8),g=G(e,"api",8);function x(){It(T,s(T)[0]=new _t(yr(),t().newPerDay,X=>se(C,r(t).newPerDay=X,r(t)),t().newPerDay,null)),It(H,s(H)[0]=new _t(yr(),t().reviewsPerDay,X=>se(C,r(t).reviewsPerDay=X,r(t)),t().reviewsPerDay,null))}const C=u().currentConfig,l=u().deckLimits,_=u().defaults,p=u().newCardsIgnoreReviewLimit,d=u().applyAllParentLimits,O=`

`+Si()+`

`+Oi(),k=`

`+Ri()+O,L=Hr()+`

`+Ti(),z=Hr()+`

`+Di(),T=R([new _t(yr(),t().newPerDay,X=>se(C,r(t).newPerDay=X,r(t)),t().newPerDay,null),new _t(us(),(A=o().new)!=null?A:null,X=>se(l,r(o).new=X!=null?X:void 0,r(o)),null,null),new _t(Hs(),o().newTodayActive&&(K=o().newToday)!=null?K:null,X=>se(l,r(o).newToday=X!=null?X:void 0,r(o)),null,(U=o().newToday)!=null?U:null)]),H=R([new _t(yr(),t().reviewsPerDay,X=>se(C,r(t).reviewsPerDay=X,r(t)),t().reviewsPerDay,null),new _t(us(),(ne=o().review)!=null?ne:null,X=>se(l,r(o).review=X!=null?X:void 0,r(o)),null,null),new _t(Hs(),o().reviewTodayActive&&(re=o().reviewToday)!=null?re:null,X=>se(l,r(o).reviewToday=X!=null?X:void 0,r(o)),null,($e=o().reviewToday)!=null?$e:null)]);let w=R(0),D=R(0);const I={newLimit:{title:Tn(),help:Li()+O,url:he.DeckOptions.newCardsday},reviewLimit:{title:Rn(),help:Ai()+k,url:he.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:On(),help:L,url:he.DeckOptions.newCardsday,global:!0},applyAllParentLimits:{title:Ii(),help:z,url:he.DeckOptions.limitsFromTop,global:!0}},F=Object.values(I);let b=R(),S=R();function M(X){s(b).show(),s(S).to(X)}ce(()=>(s(w),s(D),B),()=>{f(c,Math.min(9999,s(w)*10)>s(D)?Ei({cards:s(w),expected:Math.min(9999,s(w)*10)}):"")}),Ke(),Re();const Y=W(()=>(m(B),r(()=>Bs())));ft(n,{get title(){return s(Y)},children:(X,Le)=>{gt(X,{get slotHost(){return J},get api(){return g()},children:(ie,ve)=>{var xe=af(),Fe=le(xe);J(Fe,{children:(Ee,Ce)=>{st(Ee,{get defaultValue(){return r(()=>_.newPerDay)},get value(){return s(w)},set value(ke){f(w,ke)},children:(ke,Me)=>{ae(ke,{$$events:{click:()=>M(Object.keys(I).indexOf("newLimit"))},children:(Ne,Ae)=>{oe();var it=Z();j(()=>N(it,r(()=>I.newLimit.title))),$(Ne,it)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Me)=>{gs(ke,{slot:"tabs",get tabs(){return s(T)},get value(){return s(w)},set value(Ne){f(w,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var de=v(Fe,2);J(de,{children:(Ee,Ce)=>{st(Ee,{get defaultValue(){return r(()=>_.reviewsPerDay)},get value(){return s(D)},set value(ke){f(D,ke)},children:(ke,Me)=>{ae(ke,{$$events:{click:()=>M(Object.keys(I).indexOf("reviewLimit"))},children:(Ne,Ae)=>{oe();var it=Z();j(()=>N(it,r(()=>I.reviewLimit.title))),$(Ne,it)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Me)=>{gs(ke,{slot:"tabs",get tabs(){return s(H)},get value(){return s(D)},set value(Ne){f(D,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var Pe=v(de,2);J(Pe,{children:(Ee,Ce)=>{Ye(Ee,{get warning(){return s(c)}})},$$slots:{default:!0}});var He=v(Pe,2);J(He,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return Gt(),h()},set value(ke){xt(p,ke)},children:(ke,Me)=>{ae(ke,{$$events:{click:()=>M(Object.keys(I).indexOf("newCardsIgnoreReviewLimit"))},children:(Ne,Ae)=>{jt(Ne,{get title(){return r(()=>I.newCardsIgnoreReviewLimit.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ve=v(He,2);J(Ve,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return Gt(),y()},set value(ke){xt(d,ke)},children:(ke,Me)=>{ae(ke,{$$events:{click:()=>M(Object.keys(I).indexOf("applyAllParentLimits"))},children:(Ne,Ae)=>{jt(Ne,{get title(){return r(()=>I.applyAllParentLimits.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(ie,xe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(X,Le)=>{const ie=W(()=>(m(B),r(()=>Bs())));bt(X,{get title(){return s(ie)},get url(){return m(he),r(()=>he.DeckOptions.dailyLimits)},slot:"tooltip",get helpSections(){return F},$$events:{mount:ve=>{f(b,ve.detail.modal),f(S,ve.detail.carousel)}}})}}}),et(e,"onPresetChange",x);var Q=Oe({onPresetChange:x});return i(),Q}var lf=te("<!> <!> <!> <!> <!>",1);function uf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(c,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",8);const c=h().currentConfig,u=h().defaults,g=h().fsrs,x=`

`+Mi();let C=R([]);const l={newGatherPriority:{title:Wi(),help:ji()+x},newCardSortOrder:{title:Gi(),help:Bi()+x},newReviewPriority:{title:Hi(),help:zi()+x},interdayStepPriority:{title:Vi(),help:Fi()+x},reviewSortOrder:{title:Dn(),help:Ni()+x}},_=Object.values(l);let p=R(),d=R();function O(L){s(p).show(),s(d).to(L)}ce(()=>(t(),s(C),Rt),()=>{switch(t().newCardGatherPriority){case Rt.RANDOM_NOTES:f(C,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE]);break;case Rt.RANDOM_CARDS:f(C,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE,ht.RANDOM_CARD]);break;default:f(C,[]);break}s(C).includes(t().newCardSortOrder)&&se(c,r(t).newCardSortOrder=0,r(t)),t().newCardSortOrder in ht||se(c,r(t).newCardSortOrder=0,r(t))}),Ke(),Re();const k=W(()=>(m(B),r(()=>Gs())));ft(n,{get title(){return s(k)},children:(L,z)=>{gt(L,{get slotHost(){return J},get api(){return y()},children:(T,H)=>{var w=lf(),D=le(w);J(D,{children:(M,Y)=>{const Q=W(()=>(m(ln),r(ln)));Pt(M,{get defaultValue(){return r(()=>u.newCardGatherPriority)},get choices(){return s(Q)},get value(){return t().newCardGatherPriority},set value(A){se(c,r(t).newCardGatherPriority=A,r(t))},children:(A,K)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newGatherPriority"))},children:(U,ne)=>{oe();var re=Z();j(()=>N(re,r(()=>l.newGatherPriority.title))),$(U,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(D,2);J(I,{children:(M,Y)=>{const Q=W(()=>(m(un),r(un)));Pt(M,{get defaultValue(){return r(()=>u.newCardSortOrder)},get choices(){return s(Q)},get disabledChoices(){return s(C)},get value(){return t().newCardSortOrder},set value(A){se(c,r(t).newCardSortOrder=A,r(t))},children:(A,K)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newCardSortOrder"))},children:(U,ne)=>{oe();var re=Z();j(()=>N(re,r(()=>l.newCardSortOrder.title))),$(U,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var F=v(I,2);J(F,{children:(M,Y)=>{const Q=W(()=>(m(Vr),r(Vr)));Pt(M,{get defaultValue(){return r(()=>u.newMix)},get choices(){return s(Q)},get value(){return t().newMix},set value(A){se(c,r(t).newMix=A,r(t))},children:(A,K)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("newReviewPriority"))},children:(U,ne)=>{oe();var re=Z();j(()=>N(re,r(()=>l.newReviewPriority.title))),$(U,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(M,Y)=>{const Q=W(()=>(m(Vr),r(Vr)));Pt(M,{get defaultValue(){return r(()=>u.interdayLearningMix)},get choices(){return s(Q)},get value(){return t().interdayLearningMix},set value(A){se(c,r(t).interdayLearningMix=A,r(t))},children:(A,K)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("interdayStepPriority"))},children:(U,ne)=>{oe();var re=Z();j(()=>N(re,r(()=>l.interdayStepPriority.title))),$(U,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=v(b,2);J(S,{children:(M,Y)=>{const Q=W(()=>(m(Gr),o(),r(()=>Gr(o()))));Pt(M,{get defaultValue(){return r(()=>u.reviewOrder)},get choices(){return s(Q)},get value(){return t().reviewOrder},set value(A){se(c,r(t).reviewOrder=A,r(t))},children:(A,K)=>{ae(A,{$$events:{click:()=>O(Object.keys(l).indexOf("reviewSortOrder"))},children:(U,ne)=>{oe();var re=Z();j(()=>N(re,r(()=>l.reviewSortOrder.title))),$(U,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(T,w)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(L,z)=>{const T=W(()=>(m(B),r(()=>Gs())));bt(L,{get title(){return s(T)},get url(){return m(he),r(()=>he.DeckOptions.displayOrder)},slot:"tooltip",get helpSections(){return _},$$events:{mount:H=>{f(p,H.detail.modal),f(d,H.detail.carousel)}}})}}}),Oe(),i()}var cf=te('<textarea class="w-100 svelte-29jwoy"></textarea>');function df(n,e){Se(e,!1);let a=G(e,"value",12),i=G(e,"defaults",8),t=R(),o=R();function h(){s(o)&&(It(o,s(o).style.height="auto"),It(o,s(o).style.height=`${s(o).scrollHeight+2}px`))}function y(x){return x.map(C=>C.toFixed(4)).join(", ")}const c=[0,17,19,21];function u(x){const C=x.target,l=C.value.replace(/ /g,"").split(",").filter(_=>_).map(_=>Number(_));c.includes(l.length)?a(l):(alert(qi()),C.value=s(t))}ce(()=>(m(a()),Bt),()=>{f(t,y(a())),Bt().then(h)}),Ke(),Re();var g=cf();be("resize",za,h),yn(g),Jt(g,x=>f(o,x),()=>s(o)),j(x=>{ms(g,s(t)),at(g,"placeholder",x)},[()=>(m(i()),r(()=>y(i())))],W),be("blur",g,u),$(n,g),Oe()}var ff=te("<!> <!>",1);function gf(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"defaults",8);var o=ff(),h=le(o);Tt(h,e,"default",{});var y=v(h,2);Wt(y,{children:(c,u)=>{df(c,{get defaults(){return t()},get value(){return a()},set value(g){a(g)},$$legacy:!0})},$$slots:{default:!0,revert:(c,u)=>{Pr(c,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(g){a(g)},$$legacy:!0})}}}),$(n,o)}var vf=te('<input type="text" class="w-100 mb-1"/>');function $f(n,e){let a=G(e,"value",12),i=G(e,"placeholder",8);Wt(n,{children:(t,o)=>{var h=vf();nt(h),j(()=>at(h,"placeholder",i())),xr(h,a),$(t,h)},$$slots:{default:!0}})}var Be=(n=>(n[n.time=0]="time",n[n.count=1]="count",n[n.memorized=2]="memorized",n))(Be||{}),Te=(n=>(n[n.ratio=0]="ratio",n[n.time=1]="time",n[n.count=2]="count",n[n.memorized=3]="memorized",n))(Te||{});function vn(n,e,a,i){const h=Un().domain([70,99]).range([e.marginLeft,e.width-e.marginRight]),y={0:a.map(l=>({...l,y:l.timeCost/l.memorized})),1:a.map(l=>({...l,y:l.timeCost/l.learnSpan})),2:a.map(l=>({...l,y:l.count/l.learnSpan})),3:a.map(l=>({...l,y:l.memorized}))}[i],c=l=>i==1||i==0?wr(l,!0):l.toString(),u=Aa({style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}),g=l=>u.format(l/100),x={0:l=>Qi({time:wr(l)}),1:l=>Ui({count:parseFloat((l/60).toPrecision(2))}),2:l=>An({count:Math.round(l)}),3:l=>In({memorized:Math.round(l).toFixed(0)})}[i];function C(l){return`${jr()}: ${g(l)}<br>`}return ra(n,e,y,h,x,C,(l,_)=>{},c,g)}function is(n,e,a,i){const t=new Date,o=a.map(p=>({...p,x:new Date(t.getTime()+p.x*24*60*60*1e3)})),h={1:o.map(p=>({...p,y:p.count})),0:o.map(p=>({...p,y:p.timeCost})),2:o.map(p=>({...p,y:p.memorized}))}[i],y=t,c=Qn(h,p=>p.x),u=fc().domain([y,c]).range([e.marginLeft,e.width-e.marginRight]),g=p=>i==0?wr(p,!0):p.toString(),x={0:wr,1:p=>Ln({reviews:Math.round(p)}),2:p=>In({memorized:Math.round(p).toFixed(0)})}[i],C={1:An,0:({count:p})=>wr(p),2:Ki}[i];function l(p,d){const O=h.filter(z=>z.label==d),k=i==2?O[O.length-1].memorized-O[0].memorized:Xc(O,z=>z.y),L=k/((O==null?void 0:O.length)||1);Yn(`#${d}:<br/>
                ${Yi()}: ${C({count:L})}<br/>
                ${Xi()}: ${x(k)}`,p.pageX,p.pageY)}function _(p){const d=+((p.getTime()-Date.now())/864e5).toFixed();return`Date: ${La(p)}<br>In ${d} Days<br>`}return ra(n,e,h,u,x,_,l,g,void 0)}function ra(n,e,a,i,t,o,h,y,c){const u=en(n);if(u.selectAll(".lines").remove(),u.selectAll(".hover-columns").remove(),u.selectAll(".focus-line").remove(),u.selectAll(".legend").remove(),a.length==0)return tn(u,!1),[];const g=u.transition().duration(600);u.select(".x-ticks").call(w=>w.transition(g).call(Uu(i).ticks(7).tickSizeOuter(0).tickFormat(c))).attr("direction","ltr");const x=Qn(a,w=>w.y),C=Un().range([e.height-e.marginBottom,e.marginTop]).domain([0,x]).nice();u.select(".y-ticks").call(w=>w.transition(g).call(Qu(C).ticks(e.height/50).tickSizeOuter(0).tickFormat(y))).attr("direction","ltr"),u.select(".y-ticks .y-axis-title").remove(),u.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-e.marginLeft).attr("x",0-e.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const l=a.map(w=>[i(w.x),C(w.y),w.label]),_=yc(l,w=>Object.assign(w,{z:w[0][2]}),w=>w[2]),p=wc;u.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(_.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(w,D)=>p[D%p.length]).attr("d",w=>Yu()(w[1].map(D=>[D[0],D[1]]))).attr("data-group",w=>w[0]);const d=u.append("line").attr("class","focus-line").attr("y1",e.marginTop).attr("y2",e.height-e.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),O=Array.from(_.values()).reduce((w,D)=>w.length>D.length?w:D),k=e.width/O.length;u.append("g").attr("class","hover-columns").selectAll("rect").data(O).join("rect").attr("x",w=>w[0]-k/2).attr("y",e.marginTop).attr("width",k).attr("height",e.height-e.marginTop-e.marginBottom).attr("fill","transparent").on("mousemove",L).on("mouseout",()=>{d.style("opacity",0),rn()});function L(w,D){Ku(w,document.body);const I=i.invert(D[0]),F={};_.forEach((S,M)=>{const Y=Xu(K=>i.invert(K[0])).left,Q=Y(S,I),A=S[Q];A&&(F[M]=C.invert(A[1]))}),d.attr("x1",D[0]).attr("x2",D[0]).style("opacity",1);let b=o(I);for(const[S,M]of Object.entries(F))u.select(`path[data-group="${S}"]`).classed("hidden")||(b+=`<span style="color:${p[(parseInt(S)-1)%p.length]}">■</span> #${S}: ${t(M)}<br>`);Yn(b,w.pageX,w.pageY)}const z=u.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(_.keys())).join("g").attr("transform",(w,D)=>`translate(0,${D*20})`).attr("cursor","pointer").on("click",(w,D)=>T(w,D)).on("mousemove",h).on("mouseout",rn);z.append("rect").attr("x",e.width-e.marginRight+36).attr("width",12).attr("height",12).attr("fill",(w,D)=>p[D%p.length]),z.append("text").attr("x",e.width-e.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(w=>`#${w}`);const T=(w,D)=>{const I=D,F=u.select(`path[data-group="${I}"]`),b=F.classed("hidden"),S=w.currentTarget;F.classed("hidden",!b),F.style("display",()=>b?null:"none"),en(S).select("rect").style("opacity",b?1:.5)};return tn(u,!0),[]}var pf=te('<span class="day svelte-4k9s7n"> </span> <div class="input-container svelte-4k9s7n"><input type="range" list="easy_day_steplist" class="svelte-4k9s7n"/></div>',1),mf=te('<div class="container svelte-4k9s7n"><div class="easy-days-settings svelte-4k9s7n"><span class="svelte-4k9s7n"></span> <span class="header min-col svelte-4k9s7n"> </span> <span class="header svelte-4k9s7n"> </span> <span class="header normal-col svelte-4k9s7n"> </span> <!></div></div>');function sa(n,e){Se(e,!1);const a=[Zi(),Ji(),el(),tl(),rl(),sl(),nl()];let i=G(e,"values",28,()=>[0,0,0,0,0,0,0]);Re(),J(n,{children:(t,o)=>{var h=mf(),y=q(h),c=v(q(y),2),u=q(c,!0);E(c);var g=v(c,2),x=q(g,!0);E(g);var C=v(g,2),l=q(C,!0);E(C);var _=v(C,2);_r(_,1,()=>a,Wr,(p,d,O)=>{var k=pf(),L=le(k),z=q(L,!0);E(L);var T=v(L,2),H=q(T);nt(H),at(H,"step",.5),at(H,"max",1),at(H,"min",0),E(T),j(()=>N(z,s(d))),xr(H,()=>i()[O],w=>i(i()[O]=w,!0)),$(p,k)}),E(y),E(h),j((p,d,O)=>{N(u,p),N(x,d),N(l,O)},[()=>(m(B),r(()=>al())),()=>(m(B),r(()=>ol())),()=>(m(B),r(()=>il()))],W),$(t,h)},$$slots:{default:!0}}),Oe()}var hf=te(" <!>",1),yf=te("<div> </div>"),Cf=te('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),wf=te('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),_f=te('<div class="radio-group svelte-v4wvzr"><!></div> <div class="svg-container svelte-v4wvzr"><svg class="svelte-v4wvzr"><!><!><!><!></svg></div> <!>',1),kf=te('<div class="modal svelte-v4wvzr" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-v4wvzr"><h5 class="modal-title"><!></h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-v4wvzr"> </summary> <!></details> <details><summary class="svelte-v4wvzr"> </summary> <!> <!> <!> <!> <!> <!></details> <div style="display:none;"><details><summary class="svelte-v4wvzr"> </summary> <button><!></button> <!> <!></details></div> <div><button> </button> <button> </button> <button> </button> <!></div> <!></div></div></div></div>');function $n(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(T,"$config",a),o=()=>ye(Q,"$newCardsIgnoreReviewLimit",a),h=()=>ye(F,"$fsrs",a),y=R(),c=R(),u=R(),g=R(),x=R(),C=R(),l=[],_=[];let p=G(e,"state",8),d=G(e,"simulateFsrsRequest",12),O=G(e,"computing",8),k=G(e,"openHelpModal",8),L=G(e,"onPresetChange",8),z=G(e,"workload",8,!1);const T=p().currentConfig;let H=R(Be.count),w=R(Te.ratio),D=R([]),I=R(!1);const F=p().fsrs,b=rc();let S=R(null),M=0,Y=R([]);const Q=p().newCardsIgnoreReviewLimit;let A=R(!0),K=R(t().leechAction==Ht.SUSPEND),U=R(t().leechThreshold),ne=R(null),re=R(!1),$e=R(void 0);function X(P,ee){const ue=[];for(let me=0;me<P.length;me++){let fe=0,pe=0;for(let Xe=Math.max(0,me-ee+1);Xe<=me;Xe++)fe+=P[Xe],pe++;ue.push(fe/pe)}return ue}function Le(P,ee){return P.map((ue,me)=>ue+ee[me])}function ie(P){return P?kl({num:P.toFixed(2)}):""}function ve(){d(d().daysToSimulate=s(y),!0),d(d().deckSize=s(c),!0),d(d().suspendAfterLapseCount=s(K)?s(U):void 0,!0),d(d().easyDaysPercentages=s(C),!0)}function xe(P){return P?hl({count:P.current}):""}async function Fe(){let P;ve();try{await Cr(async()=>{f(re,!0),P=await Ca(d())},ee=>{ee.value.case==="computeRetention"&&f($e,ee.value.value)})}finally{f(re,!1),P&&f(ne,P.optimalRetention)}}async function de(){let P;ve();try{await Cr(async()=>{f(I,!0),P=await wa(d())},()=>{})}finally{if(f(I,!1),P){M+=1;const ee=Le(P.dailyReviewCount,P.dailyNewCount),ue=P.accumulatedKnowledgeAcquisition;f(Y,s(Y).concat(P.dailyTimeCost.map((me,fe)=>({x:fe,timeCost:me,count:ee[fe],memorized:ue[fe],label:M})))),f(D,is(s(S),b,s(Y),s(H)))}}}async function Pe(){let P;ve();try{await Cr(async()=>{f(I,!0),P=await _a(d())},()=>{})}finally{f(I,!1),P&&(M+=1,f(Y,s(Y).concat(Object.entries(P.memorized).map(([ee,ue])=>({x:parseInt(ee),timeCost:P.cost[ee],memorized:ue,count:P.reviewCount[ee],label:M,learnSpan:d().daysToSimulate})))),f(D,vn(s(S),b,s(Y),s(w))))}}function He(){f(Y,s(Y).filter(P=>P.label!==M)),M=Math.max(0,M-1),f(D,is(s(S),b,s(Y),s(H)))}function Ve(){confirm(yl())&&(se(T,r(t).newPerDay=d().newLimit,r(t)),se(T,r(t).reviewsPerDay=d().reviewLimit,r(t)),se(T,r(t).maximumReviewInterval=d().maxInterval,r(t)),z()||se(T,r(t).desiredRetention=d().desiredRetention,r(t)),xt(Q,d().newCardsIgnoreReviewLimit),se(T,r(t).reviewOrder=d().reviewOrder,r(t)),se(T,r(t).leechAction=s(K)?Ht.SUSPEND:Ht.TAG_ONLY,r(t)),se(T,r(t).leechThreshold=s(U),r(t)),se(T,r(t).easyDaysPercentages=[...s(C)],r(t)),L()())}let Ee=G(e,"modal",12,null);function Ce(P){return Ee(new Bn(P)),{destroy(){var ee;(ee=Ee())==null||ee.dispose(),Ee(null)}}}ce(()=>{},()=>{f(y,365)}),ce(()=>{},()=>{f(c,0)}),ce(()=>s(y),()=>{f(u,Math.ceil(s(y)/365))}),ce(()=>(s(I),s(re)),()=>{f(g,s(I)||s(re))}),ce(()=>s($e),()=>{f(x,xe(s($e)))}),ce(()=>(s(S),s(Y),s(A),s(u),m(z()),s(w),s(H)),()=>{if(s(S)){let P=s(Y);if(s(A)){const ue=s(Y).reduce((me,fe)=>(me[fe.label]=me[fe.label]||[],me[fe.label].push(fe),me),{});P=Object.values(ue).flatMap(me=>{const fe=X(me.map(wt=>wt.timeCost),s(u)),pe=X(me.map(wt=>wt.count),s(u)),Xe=X(me.map(wt=>wt.memorized),s(u));return me.map((wt,Qt)=>({...wt,timeCost:fe[Qt],count:pe[Qt],memorized:Xe[Qt]}))})}const ee=z()?vn:is;f(D,ee(s(S),b,P,z()?s(w):s(H)))}}),ce(()=>t(),()=>{f(C,[...t().easyDaysPercentages])}),Ke(),Re();var ke=kf(),Me=q(ke),Ne=q(Me),Ae=q(Ne),it=q(Ae),er=q(it);{var tr=P=>{var ee=Z();j(ue=>N(ee,ue),[()=>(m(B),r(()=>Cl()))],W),$(P,ee)},br=P=>{var ee=Z();j(ue=>N(ee,ue),[()=>(m(B),r(()=>Mn()))],W),$(P,ee)};Ie(er,P=>{z()?P(tr):P(br,!1)})}E(it);var Sr=v(it,2);E(Ae);var Lt=v(Ae,2),Or=q(Lt);st(Or,{defaultValue:365,min:1,max:3650,get value(){return s(y)},set value(P){f(y,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>ll()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rr=v(Or,2);st(rr,{defaultValue:0,min:0,max:1e5,get value(){return s(c)},set value(P){f(c,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>ul()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var sr=v(rr,2);{var nr=P=>{kt(P,{get defaultValue(){return t(),r(()=>t().desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return d().desiredRetention},set value(ee){d(d().desiredRetention=ee,!0)},children:(ee,ue)=>{ae(ee,{$$events:{click:()=>k()("desiredRetention")},children:(me,fe)=>{oe();var pe=Z();j(Xe=>N(pe,Xe),[()=>(m(B),r(()=>jr()))],W),$(me,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Ie(sr,P=>{z()||P(nr)})}var ar=v(sr,2);st(ar,{get defaultValue(){return t(),r(()=>t().newPerDay)},min:0,max:9999,get value(){return d().newLimit},set value(P){d(d().newLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("newLimit")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>Tn()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var or=v(ar,2);st(or,{get defaultValue(){return t(),r(()=>t().reviewsPerDay)},min:0,max:9999,get value(){return d().reviewLimit},set value(P){d(d().reviewLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("reviewLimit")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>Rn()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var qt=v(or,2),Ut=q(qt),Ur=q(Ut,!0);E(Ut);var Rr=v(Ut,2);qu(Rr,()=>s(C),P=>{sa(P,{get values(){return s(C)},set values(ee){f(C,ee)},$$legacy:!0})}),E(qt);var Ct=v(qt,2),ir=q(Ct),Qr=q(ir,!0);E(ir);var Tr=v(ir,2);st(Tr,{get defaultValue(){return t(),r(()=>t().maximumReviewInterval)},min:1,max:36500,get value(){return d().maxInterval},set value(P){d(d().maxInterval=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("maximumInterval")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>kn()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var lr=v(Tr,2);const Yr=W(()=>(m(Gr),h(),r(()=>Gr(h()))));Pt(lr,{get defaultValue(){return t(),r(()=>t().reviewOrder)},get choices(){return s(Yr)},get value(){return d().reviewOrder},set value(P){d(d().reviewOrder=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("reviewSortOrder")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>Dn()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ur=v(lr,2);Je(ur,{get defaultValue(){return o()},get value(){return d().newCardsIgnoreReviewLimit},set value(P){d(d().newCardsIgnoreReviewLimit=P,!0)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("newCardsIgnoreReviewLimit")},children:(ue,me)=>{const fe=W(()=>(m(B),r(()=>On())));jt(ue,{get title(){return s(fe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Dr=v(ur,2);Je(Dr,{defaultValue:!0,get value(){return s(A)},set value(P){f(A,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("simulateFsrsReview")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>cl()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ir=v(Dr,2);const Kr=W(()=>(t(),m(Ht),r(()=>t().leechAction==Ht.SUSPEND)));Je(Ir,{get defaultValue(){return s(Kr)},get value(){return s(K)},set value(P){f(K,P)},children:(P,ee)=>{ae(P,{$$events:{click:()=>k()("leechAction")},children:(ue,me)=>{oe();var fe=Z();j(pe=>N(fe,pe),[()=>(m(B),r(()=>dl()))],W),$(ue,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var cr=v(Ir,2);{var Ar=P=>{st(P,{get defaultValue(){return t(),r(()=>t().leechThreshold)},min:1,max:9999,get value(){return s(U)},set value(ee){f(U,ee)},children:(ee,ue)=>{ae(ee,{$$events:{click:()=>k()("leechThreshold")},children:(me,fe)=>{oe();var pe=Z();j(Xe=>N(pe,Xe),[()=>(m(B),r(()=>Nn()))],W),$(me,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Ie(cr,P=>{s(K)&&P(Ar)})}E(Ct);var Et=v(Ct,2),Lr=q(Et),Mt=q(Lr),dr=q(Mt,!0);E(Mt);var Dt=v(Mt,2),Er=q(Dt);{var Xr=P=>{var ee=Z();j(ue=>N(ee,ue),[()=>(m(B),r(()=>cs()))],W),$(P,ee)},Mr=P=>{var ee=Z();j(ue=>N(ee,ue),[()=>(m(B),r(()=>wl()))],W),$(P,ee)};Ie(Er,P=>{s(re)?P(Xr):P(Mr,!1)})}E(Dt);var fr=v(Dt,2);{var V=P=>{var ee=hf(),ue=le(ee),me=v(ue);{var fe=pe=>{const Xe=W(()=>(m(B),r(()=>Pl())));Ye(pe,{get warning(){return s(Xe)},className:"alert-warning"})};Ie(me,pe=>{s(ne),t(),r(()=>s(ne)-t().desiredRetention>=.01)&&pe(fe)})}j(pe=>N(ue,`${pe!=null?pe:""} `),[()=>(s(ne),r(()=>ie(s(ne))))],W),$(P,ee)};Ie(fr,P=>{s(ne)&&P(V)})}var ge=v(fr,2);{var De=P=>{var ee=yf(),ue=q(ee,!0);E(ee),j(()=>N(ue,s(x))),$(P,ee)};Ie(ge,P=>{s(re)&&P(De)})}E(Lr),E(Et);var We=v(Et,2),we=q(We),Ge=q(we,!0);E(we);var ze=v(we,2),St=q(ze,!0);E(ze);var lt=v(ze,2),vt=q(lt,!0);E(lt);var Zr=v(lt,2);{var aa=P=>{var ee=Z();j(ue=>N(ee,ue),[()=>(m(B),r(()=>_l()))],W),$(P,ee)};Ie(Zr,P=>{s(g)&&P(aa)})}E(We);var oa=v(We,2);Zu(oa,{children:(P,ee)=>{var ue=_f(),me=le(ue),fe=q(me);Ju(fe,{children:(Jr,tg)=>{var ks=ot(),ua=le(ks);{var ca=Yt=>{var gr=Cf(),Nt=le(gr),$t=q(Nt);nt($t);var vr,es=v($t);E(Nt);var Ft=v(Nt,2),pt=q(Ft);nt(pt);var $r,ts=v(pt);E(Ft);var Kt=v(Ft,2),mt=q(Kt);nt(mt);var pr,rs=v(mt);E(Kt),j((ut,Ot,Xt)=>{var Nr,tt,Zt;vr!==(vr=(m(Be),r(()=>Be.count)))&&($t.value=(Nr=$t.__value=(m(Be),r(()=>Be.count)))!=null?Nr:""),N(es,` ${ut!=null?ut:""}`),$r!==($r=(m(Be),r(()=>Be.time)))&&(pt.value=(tt=pt.__value=(m(Be),r(()=>Be.time)))!=null?tt:""),N(ts,` ${Ot!=null?Ot:""}`),pr!==(pr=(m(Be),r(()=>Be.memorized)))&&(mt.value=(Zt=mt.__value=(m(Be),r(()=>Be.memorized)))!=null?Zt:""),N(rs,` ${Xt!=null?Xt:""}`)},[()=>(m(B),r(()=>js())),()=>(m(B),r(()=>Ws())),()=>(m(B),r(()=>qs()))],W),Vt(l,[],$t,()=>(m(Be),r(()=>Be.count),s(H)),ut=>f(H,ut)),Vt(l,[],pt,()=>(m(Be),r(()=>Be.time),s(H)),ut=>f(H,ut)),Vt(l,[],mt,()=>(m(Be),r(()=>Be.memorized),s(H)),ut=>f(H,ut)),$(Yt,gr)},da=Yt=>{var gr=wf(),Nt=le(gr),$t=q(Nt);nt($t);var vr,es=v($t);E(Nt);var Ft=v(Nt,2),pt=q(Ft);nt(pt);var $r,ts=v(pt);E(Ft);var Kt=v(Ft,2),mt=q(Kt);nt(mt);var pr,rs=v(mt);E(Kt);var ut=v(Kt,2),Ot=q(ut);nt(Ot);var Xt,Nr=v(Ot);E(ut),j((tt,Zt,ss,ns)=>{var Ps,xs,bs,Ss;vr!==(vr=(m(Te),r(()=>Te.ratio)))&&($t.value=(Ps=$t.__value=(m(Te),r(()=>Te.ratio)))!=null?Ps:""),N(es,` ${tt!=null?tt:""}`),$r!==($r=(m(Te),r(()=>Te.count)))&&(pt.value=(xs=pt.__value=(m(Te),r(()=>Te.count)))!=null?xs:""),N(ts,` ${Zt!=null?Zt:""}`),pr!==(pr=(m(Te),r(()=>Te.time)))&&(mt.value=(bs=mt.__value=(m(Te),r(()=>Te.time)))!=null?bs:""),N(rs,` ${ss!=null?ss:""}`),Xt!==(Xt=(m(Te),r(()=>Te.memorized)))&&(Ot.value=(Ss=Ot.__value=(m(Te),r(()=>Te.memorized)))!=null?Ss:""),N(Nr,` ${ns!=null?ns:""}`)},[()=>(m(B),r(()=>fl())),()=>(m(B),r(()=>js())),()=>(m(B),r(()=>Ws())),()=>(m(B),r(()=>qs()))],W),Vt(_,[],$t,()=>(m(Te),r(()=>Te.ratio),s(w)),tt=>f(w,tt)),Vt(_,[],pt,()=>(m(Te),r(()=>Te.count),s(w)),tt=>f(w,tt)),Vt(_,[],mt,()=>(m(Te),r(()=>Te.time),s(w)),tt=>f(w,tt)),Vt(_,[],Ot,()=>(m(Te),r(()=>Te.memorized),s(w)),tt=>f(w,tt)),$(Yt,gr)};Ie(ua,Yt=>{z()?Yt(da,!1):Yt(ca)})}$(Jr,ks)},$$slots:{default:!0}}),E(me);var pe=v(me,2),Xe=q(pe),wt=q(Xe);ic(wt);var Qt=v(wt);ec(Qt);var _s=v(Qt);tc(_s,{get bounds(){return b}});var ia=v(_s);sc(ia,{get bounds(){return b}}),E(Xe),Jt(Xe,Jr=>f(S,Jr),()=>s(S)),E(pe);var la=v(pe,2);lc(la,{get tableData(){return s(D)}}),j(()=>at(Xe,"viewBox",r(()=>`0 0 ${b.width} ${b.height}`))),$(P,ue)},$$slots:{default:!0}}),E(Lt),E(Ne),E(Me),E(ke),jn(ke,P=>Ce==null?void 0:Ce(P)),j((P,ee,ue,me,fe,pe)=>{N(Ur,P),N(Qr,ee),N(dr,ue),dt(Dt,1,`btn ${s(re)?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),Dt.disabled=!s(re)&&O(),dt(we,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),we.disabled=O(),N(Ge,me),dt(ze,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),ze.disabled=O(),N(St,fe),dt(lt,1,`btn ${O()?"btn-warning":"btn-primary"}`,"svelte-v4wvzr"),lt.disabled=O(),N(vt,pe)},[()=>(m(B),r(()=>En())),()=>(m(B),r(()=>gl())),()=>(m(B),r(()=>vl())),()=>(m(B),r(()=>$l())),()=>(m(B),r(()=>pl())),()=>(m(B),r(()=>ml()))],W),be("click",Sr,()=>{var P;return(P=Ee())==null?void 0:P.hide()}),be("click",Dt,()=>Fe()),be("click",we,function(...P){var ee;(ee=z()?Pe:de)==null||ee.apply(this,P)}),be("click",ze,He),be("click",lt,Ve),$(n,ke),Oe(),i()}var Pf=te("<button><!></button>"),xf=te('<!> <button class="btn btn-primary svelte-1oyy9sz"> </button> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"/> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!> <!>',1);function bf(n,e){var Mr,fr;Se(e,!1);const[a,i]=je(),t=()=>ye(S,"$daysSinceLastOptimization",a),o=()=>ye(I,"$config",a),h=()=>ye(M,"$limits",a),y=()=>ye(s(O),"$newCardsIgnoreReviewLimit",a),c=()=>ye($e,"$healthCheck",a),u=()=>ye(b,"$fsrsReschedule",a),g=R(),x=R(),C=R(),l=R(),_=R(),p=R(),d=R(),O=R(),k=R(),L=R(),z=R();let T=G(e,"state",8),H=G(e,"openHelpModal",8),w=G(e,"onPresetChange",8),D=G(e,"newlyEnabled",8,!1);const I=T().currentConfig,F=T().defaults,b=T().fsrsReschedule,S=T().daysSinceLastOptimization,M=T().deckLimits;let Y=R(!1),Q=R(!1),A=R(!1);const K=[...zt(o())];let U=R(),ne=R(!1),re=R(!1);const $e=T().fsrsHealthCheck;let X=R("");const Le=[new _t(yr(),o().desiredRetention,V=>se(I,r(o).desiredRetention=V,r(o)),o().desiredRetention,null),new _t(us(),(Mr=h().desiredRetention)!=null?Mr:null,V=>se(M,r(h).desiredRetention=V!=null?V:void 0,r(h)),null,null)];let ie=R((fr=h().desiredRetention)!=null?fr:o().desiredRetention);const ve=s(ie).toFixed(2),xe=.8,Fe=.95;function de(V){return V<xe?Rl():V>Fe?Tl():""}let Pe,He=[...zt(o())];async function Ve(V,ge){if(+ve==s(_)){f(X,Dl());return}if(!Pe||He.toString()!==ge.toString()){const ze=new Pa({w:ge,search:s(l)});He=[...ge],Pe=xa(ze)}const De=+ve*100,We=V*100,we=await Pe,Ge=we.costs[We]/we.costs[De];f(X,Il({factor:Ge.toFixed(2),previousDr:De.toString()}))}function Ee(V){return V<.7||V>.97?"alert-danger":V<xe||V>Fe?"alert-warning":"alert-info"}function Ce(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function ke(){if(s(ne)){await Rs({});return}if(T().presetAssignmentsChanged()){alert(Us());return}f(ne,!0),f(U,void 0);try{await Cr(async()=>{const V=zt(o()),ge=o().relearnSteps;let De=0,We=0;for(let vt=0;vt<ge.length&&(We+=ge[vt],!(We>=1440));vt++)De++;const we=await ba({search:o().paramSearch?o().paramSearch:s(l),ignoreRevlogsBeforeMs:Ce(),currentParams:V,numOfRelearningSteps:De,healthCheck:c()}),Ge=V.length&&V.every((vt,Zr)=>vt.toFixed(4)===we.params[Zr].toFixed(4))||we.params.length===0;let ze="";we.healthCheckPassed!==void 0&&(ze=we.healthCheckPassed?Al():Ll());let St="";Ge&&(St=we.fsrsItems?El():Ml());const lt=[St,ze].filter(vt=>vt).join(`

`);lt&&setTimeout(()=>alert(lt),200),Ge||(se(I,r(o).fsrsParams6=we.params,r(o)),setTimeout(()=>{f(A,!0)},201)),s(U)&&It(U,s(U).current=s(U).total)},V=>{V.value.case==="computeParams"&&f(U,V.value.value)})}finally{f(ne,!1)}}async function Me(){if(s(re)){await Rs({});return}if(T().presetAssignmentsChanged()){alert(Us());return}f(re,!0),f(U,void 0);try{await Cr(async()=>{const V=o().paramSearch?o().paramSearch:s(l),ge=await Oa({search:V,ignoreRevlogsBeforeMs:Ce(),params:zt(o())});s(U)&&It(U,s(U).current=s(U).total),setTimeout(()=>alert(`Log loss: ${ge.logLoss.toFixed(4)}, RMSE(bins): ${(ge.rmseBins*100).toFixed(2)}%. ${Bl()}`),200)},V=>{V.value.case==="computeParams"&&f(U,V.value.value)})}finally{f(re,!1)}}function Ne(V){if(!V||!V.total)return"";const ge=(V.current/V.total*100).toFixed(1);return V instanceof Sa?`${ge}%`:V.current===V.total?Nl():Fl({pct:ge,reviews:V.reviews})}async function Ae(){await ws(),T().save(zr.COMPUTE_ALL_PARAMS)}function it(V){zt(o()).toString()===K.toString()?V==null||V.show():alert(Vl())}let er=R(),tr=R();ce(()=>(t(),B),()=>{f(g,t()>30?xl():"")}),ce(()=>s(Y),()=>{s(Y)&&f(Q,!0)}),ce(()=>(m(D()),s(Q),s(A)),()=>{f(x,D()||s(Q)||s(A))}),ce(()=>(s(ne),s(re)),()=>{f(C,s(ne)||s(re))}),ce(()=>m(T()),()=>{f(l,`preset:"${T().getCurrentNameForSearch()}" -is:suspended`)}),ce(()=>s(ie),()=>{f(_,Number(s(ie).toFixed(2)))}),ce(()=>s(_),()=>{f(p,de(s(_)))}),ce(()=>(s(x),s(_),o()),()=>{s(x)&&Ve(s(_),zt(o()))}),ce(()=>s(_),()=>{f(d,Ee(s(_)))}),ce(()=>m(T()),()=>{qa(f(O,T().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ce(()=>(o(),m(T()),y()),()=>{f(k,new ka({params:zt(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${T().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:y(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder,historicalRetention:o().historicalRetention,learningStepCount:o().learnSteps.length,relearningStepCount:o().relearnSteps.length}))}),ce(()=>s(U),()=>{f(L,Ne(s(U)))}),ce(()=>s(U),()=>{var V,ge;f(z,(ge=(V=s(U))==null?void 0:V.reviews)!=null?ge:void 0)}),Ke(),Re();var br=xf(),Sr=le(br);gt(Sr,{get slotHost(){return J},api:{},children:(V,ge)=>{J(V,{children:(De,We)=>{kt(De,{get defaultValue(){return r(()=>F.desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return s(ie)},set value(we){f(ie,we)},get focused(){return s(Y)},set focused(we){f(Y,we)},children:(we,Ge)=>{ae(we,{$$events:{click:()=>H()("desiredRetention")},children:(ze,St)=>{oe();var lt=Z();j(vt=>N(lt,vt),[()=>(m(B),r(()=>jr()))],W),$(ze,lt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(we,Ge)=>{gs(we,{slot:"tabs",get tabs(){return Le},get value(){return s(ie)},set value(ze){f(ie,ze)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}})},$$slots:{default:!0}});var Lt=v(Sr,2),Or=q(Lt,!0);E(Lt);var rr=v(Lt,2);Ye(rr,{get warning(){return s(X)},className:"alert-info two-line"});var sr=v(rr,2);Ye(sr,{get warning(){return s(p)},get className(){return s(d)}});var nr=v(sr,2),ar=q(nr);gf(ar,{defaultValue:[],get defaults(){return r(()=>F.fsrsParams6)},get value(){return o().fsrsParams6},set value(V){se(I,r(o).fsrsParams6=V,r(o))},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("modelParams")},children:(De,We)=>{oe();var we=Z();j(Ge=>N(we,Ge),[()=>(m(B),r(()=>Fn()))],W),$(De,we)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var or=v(ar,2);$f(or,{get placeholder(){return s(l)},get value(){return o().paramSearch},set value(V){se(I,r(o).paramSearch=V,r(o))},$$legacy:!0});var qt=v(or,2);Je(qt,{defaultValue:!1,get value(){return Gt(),u()},set value(V){xt(b,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("rescheduleCardsOnChange")},children:(De,We)=>{const we=W(()=>(m(B),r(()=>Vn())));jt(De,{get title(){return s(we)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ut=v(qt,2);{var Ur=V=>{const ge=W(()=>(m(B),r(()=>Hl())));Ye(V,{get warning(){return s(ge)}})};Ie(Ut,V=>{u()&&V(Ur)})}var Rr=v(Ut,2);Je(Rr,{defaultValue:!1,get value(){return Gt(),c()},set value(V){xt($e,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>H()("healthCheck")},children:(De,We)=>{const we=W(()=>(m(B),r(()=>bl({text:zn()}))));jt(De,{get title(){return s(we)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ct=v(Rr,2),ir=q(Ct);{var Qr=V=>{var ge=Z();j(De=>N(ge,De),[()=>(m(B),r(()=>cs()))],W),$(V,ge)},Tr=V=>{var ge=Z();j(De=>N(ge,De),[()=>(m(B),r(()=>zl()))],W),$(V,ge)};Ie(ir,V=>{s(ne)?V(Qr):V(Tr,!1)})}E(Ct);var lr=v(Ct,2);{var Yr=V=>{var ge=Pf(),De=q(ge);{var We=Ge=>{var ze=Z();j(St=>N(ze,St),[()=>(m(B),r(()=>cs()))],W),$(Ge,ze)},we=Ge=>{var ze=Z();j(St=>N(ze,St),[()=>(m(B),r(()=>Gl()))],W),$(Ge,ze)};Ie(De,Ge=>{s(re)?Ge(We):Ge(we,!1)})}E(ge),j(()=>{dt(ge,1,`btn ${s(re)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),ge.disabled=!s(re)&&s(C)}),be("click",ge,()=>Me()),$(V,ge)};Ie(lr,V=>{m(T()),r(()=>T().legacyEvaluate)&&V(Yr)})}var ur=v(lr,2),Dr=q(ur);{var Ir=V=>{var ge=Z();j(()=>N(ge,s(L))),$(V,ge)},Kr=(V,ge)=>{{var De=We=>{var we=Z();j(Ge=>N(we,Ge),[()=>(m(B),s(z),r(()=>Ln({reviews:s(z)})))],W),$(We,we)};Ie(V,We=>{s(z)!==void 0&&We(De)},ge)}};Ie(Dr,V=>{s(ne)||s(re)?V(Ir):V(Kr,!1)})}E(ur),E(nr);var cr=v(nr,2),Ar=q(cr);Ye(Ar,{get warning(){return s(g)},className:"alert-warning"});var Et=v(Ar,2),Lr=q(Et,!0);E(Et),E(cr);var Mt=v(cr,4),dr=q(Mt),Dt=q(dr,!0);E(dr),E(Mt);var Er=v(Mt,2);$n(Er,{get state(){return T()},get simulateFsrsRequest(){return s(k)},get computing(){return s(C)},get openHelpModal(){return H()},get onPresetChange(){return w()},get modal(){return s(er)},set modal(V){f(er,V)},$$legacy:!0});var Xr=v(Er,2);$n(Xr,{workload:!0,get state(){return T()},get simulateFsrsRequest(){return s(k)},get computing(){return s(C)},get openHelpModal(){return H()},get onPresetChange(){return w()},get modal(){return s(tr)},set modal(V){f(tr,V)},$$legacy:!0}),j((V,ge,De)=>{N(Or,V),dt(Ct,1,`btn ${s(ne)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),Ct.disabled=!s(ne)&&s(C),N(Lr,ge),N(Dt,De)},[()=>(m(B),r(()=>Sl())),()=>(m(B),r(()=>Ol())),()=>(m(B),r(()=>Mn()))],W),be("click",Lt,()=>{It(k,s(k).reviewLimit=9999),it(s(tr))}),be("click",Ct,()=>ke()),be("click",Et,()=>Ae()),be("click",dr,()=>it(s(er))),$(n,br),Oe(),i()}var Sf=te("<!> <!>",1);function Of(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(c,"$fsrs",a);let o=G(e,"state",8),h=G(e,"api",8),y=G(e,"onPresetChange",8);const c=o().fsrs;let u=R(!1);const g={fsrs:{title:"FSRS",help:Xl(),url:he.DeckOptions.fsrs,global:!0},desiredRetention:{title:jr(),help:Yl()+`

`+Kl(),sched:rt.FSRS},modelParams:{title:Fn(),help:Ul()+`

`+Ql(),sched:rt.FSRS},rescheduleCardsOnChange:{title:Vn(),help:ql(),sched:rt.FSRS,global:!0},healthCheck:{title:zn(),help:Hr()+`

`+jl()+`

`+Wl(),sched:rt.FSRS,global:!0}},x=Object.values(g);let C=R(),l=R();function _(p){s(C).show(),s(l).to(p)}ce(()=>t(),()=>{t()||f(u,!0)}),Ke(),Re(),ft(n,{title:"FSRS",children:(p,d)=>{gt(p,{get slotHost(){return J},get api(){return h()},children:(O,k)=>{var L=Sf(),z=le(L);J(z,{children:(w,D)=>{Je(w,{defaultValue:!1,get value(){return Gt(),t()},set value(I){xt(c,I)},children:(I,F)=>{ae(I,{$$events:{click:()=>_(Object.keys(g).indexOf("fsrs"))},children:(b,S)=>{jt(b,{get title(){return r(()=>g.fsrs.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=v(z,2);{var H=w=>{bf(w,{get state(){return o()},get newlyEnabled(){return s(u)},openHelpModal:D=>_(Object.keys(g).indexOf(D)),get onPresetChange(){return y()}})};Ie(T,w=>{t()&&w(H)})}$(O,L)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(p,d)=>{bt(p,{title:"FSRS",get url(){return m(he),r(()=>he.DeckOptions.fsrs)},slot:"tooltip",get fsrs(){return t()},get helpSections(){return x},$$events:{mount:O=>{f(C,O.detail.modal),f(l,O.detail.carousel)}}})}}}),Oe(),i()}function Rf(n,e){Se(e,!1);let a=G(e,"html",8),i=G(e,"mounted",8);$s(i()),Re();var t=ot(),o=le(t);Zl(o,a),$(n,t),Oe()}function Tf(n){switch(n){case yt.Seconds:return"s";case yt.Minutes:return"m";case yt.Hours:return"h";case yt.Days:return"d";default:return""}}function Df(n){switch(n){case"s":return yt.Seconds;case"h":return yt.Hours;case"d":return yt.Days;default:return yt.Minutes}}function If(n){const e=n*60;let a=uc(e);return[yt.Months,yt.Years].includes(a)&&(a=yt.Days),`${Math.round(cc(a,e))}${Tf(a)}`}function Af(n){const e=n.match(/(\d+)(.*)/);if(e){const[a,i,t]=e,o=Df(t),h=dc(o)*parseInt(i,10);return Math.min(h,2**31)/60}else return 0}function Lf(n){return n.map(If).join(" ")}function Ef(n){return n.split(" ").map(Af).filter(e=>e)}var Mf=te('<input type="text" class="svelte-f5c9s0"/>');function Nf(n,e){Se(e,!1);let a=G(e,"value",12),i=R();function t(){a(Ef(this.value))}ce(()=>m(a()),()=>{f(i,Lf(a()))}),Ke(),Re();var o=Mf();nt(o),j(()=>ms(o,s(i))),be("blur",o,t),$(n,o),Oe()}var Ff=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vf=te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function na(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8);var t=Vf(),o=le(t);Ze(o,()=>({"--cols":13})),qe(o.lastChild,{children:(h,y)=>{var c=Ff(),u=le(c);Ze(u,()=>({"--col-size":7})),At(u.lastChild,{breakpoint:"xs",children:(x,C)=>{var l=ot(),_=le(l);Tt(_,e,"default",{}),$(x,l)},$$slots:{default:!0}}),E(u);var g=v(u,2);Ze(g,()=>({"--col-size":6})),At(g.lastChild,{breakpoint:"xs",children:(x,C)=>{Wt(x,{children:(l,_)=>{Nf(l,{get value(){return a()},set value(p){a(p)},$$legacy:!0})},$$slots:{default:!0,revert:(l,_)=>{Pr(l,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(p){a(p)},$$legacy:!0})}}})},$$slots:{default:!0}}),E(g),$(h,c)},$$slots:{default:!0}}),E(o),$(n,t)}var zf=te("<!> <!> <!> <!> <!> <!>",1);function Hf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(c,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",24,()=>({}));const c=h().currentConfig,u=h().defaults,g=h().fsrs;let x=R(),C=R();const l={relearningSteps:{title:au(),help:nu(),url:he.DeckOptions.relearningSteps},minimumInterval:{title:su(),help:ru(),url:he.DeckOptions.minimumInterval,sched:rt.SM2},leechThreshold:{title:Nn(),help:tu(),url:he.Leeches.leeches},leechAction:{title:eu(),help:Jl(),url:he.Leeches.waiting}},_=Object.values(l);let p=R(),d=R();function O(L){s(p).show(),s(d).to(L)}ce(()=>(t(),o(),B),()=>{const L=t().relearnSteps.length?t().relearnSteps[t().relearnSteps.length-1]/60/24:0;f(x,!o()&&L>t().minimumLapseInterval?ou():""),f(C,o()&&L>=1?Hn():"")}),Ke(),Re();const k=W(()=>(m(B),r(()=>Qs())));ft(n,{get title(){return s(k)},children:(L,z)=>{gt(L,{get slotHost(){return J},get api(){return y()},children:(T,H)=>{var w=zf(),D=le(w);J(D,{children:(Q,A)=>{na(Q,{get defaultValue(){return r(()=>u.relearnSteps)},get value(){return t().relearnSteps},set value(K){se(c,r(t).relearnSteps=K,r(t))},children:(K,U)=>{ae(K,{$$events:{click:()=>O(Object.keys(l).indexOf("relearningSteps"))},children:(ne,re)=>{oe();var $e=Z();j(()=>N($e,r(()=>l.relearningSteps.title))),$(ne,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=v(D,2);J(I,{children:(Q,A)=>{Ye(Q,{get warning(){return s(C)}})},$$slots:{default:!0}});var F=v(I,2);{var b=Q=>{J(Q,{children:(A,K)=>{st(A,{get defaultValue(){return r(()=>u.minimumLapseInterval)},min:1,get value(){return t().minimumLapseInterval},set value(U){se(c,r(t).minimumLapseInterval=U,r(t))},children:(U,ne)=>{ae(U,{$$events:{click:()=>O(Object.keys(l).indexOf("minimumInterval"))},children:(re,$e)=>{oe();var X=Z();j(()=>N(X,r(()=>l.minimumInterval.title))),$(re,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Ie(F,Q=>{o()||Q(b)})}var S=v(F,2);J(S,{children:(Q,A)=>{Ye(Q,{get warning(){return s(x)}})},$$slots:{default:!0}});var M=v(S,2);J(M,{children:(Q,A)=>{st(Q,{get defaultValue(){return r(()=>u.leechThreshold)},min:1,get value(){return t().leechThreshold},set value(K){se(c,r(t).leechThreshold=K,r(t))},children:(K,U)=>{ae(K,{$$events:{click:()=>O(Object.keys(l).indexOf("leechThreshold"))},children:(ne,re)=>{oe();var $e=Z();j(()=>N($e,r(()=>l.leechThreshold.title))),$(ne,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=v(M,2);J(Y,{children:(Q,A)=>{const K=W(()=>(m(cn),r(cn)));Pt(Q,{get defaultValue(){return r(()=>u.leechAction)},get choices(){return s(K)},breakpoint:"md",get value(){return t().leechAction},set value(U){se(c,r(t).leechAction=U,r(t))},children:(U,ne)=>{ae(U,{$$events:{click:()=>O(Object.keys(l).indexOf("leechAction"))},children:(re,$e)=>{oe();var X=Z();j(()=>N(X,r(()=>l.leechAction.title))),$(re,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),$(T,w)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(L,z)=>{const T=W(()=>(m(B),r(()=>Qs())));bt(L,{get title(){return s(T)},get url(){return m(he),r(()=>he.DeckOptions.lapses)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return _},$$events:{mount:H=>{f(p,H.detail.modal),f(d,H.detail.carousel)}}})}}}),Oe(),i()}var Bf=te("<!> <!> <!> <!>",1),Gf=te("<!> <!> <!> <!> <!>",1);function jf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(g,"$config",a),o=()=>ye(C,"$fsrs",a),h=R(),y=R();let c=G(e,"state",8),u=G(e,"api",24,()=>({}));const g=c().currentConfig,x=c().defaults,C=c().fsrs;let l=R(),_=R();const p={learningSteps:{title:vu(),help:gu(),url:he.DeckOptions.learningSteps},graduatingInterval:{title:fu(),help:du(),url:he.DeckOptions.graduatingInterval,sched:rt.SM2},easyInterval:{title:cu(),help:uu(),url:he.DeckOptions.easyInterval,sched:rt.SM2},insertionOrder:{title:lu(),help:iu(),url:he.DeckOptions.insertionOrder}},d=Object.values(p);let O=R(),k=R();function L(T){s(O).show(),s(k).to(T)}ce(()=>(t(),o()),()=>{const T=t().learnSteps.length?t().learnSteps[t().learnSteps.length-1]/60/24:0;f(l,T>t().graduatingIntervalGood?$u():""),f(_,o()&&T>=1?Hn():"")}),ce(()=>(t(),B),()=>{f(h,t().graduatingIntervalGood>t().graduatingIntervalEasy?pu():"")}),ce(()=>(t(),B),()=>{f(y,t().newCardInsertOrder==ls.RANDOM?mu():"")}),Ke(),Re();const z=W(()=>(m(B),r(()=>Ys())));ft(n,{get title(){return s(z)},children:(T,H)=>{gt(T,{get slotHost(){return J},get api(){return u()},children:(w,D)=>{var I=Gf(),F=le(I);J(F,{children:(A,K)=>{na(A,{get defaultValue(){return r(()=>x.learnSteps)},get value(){return t().learnSteps},set value(U){se(g,r(t).learnSteps=U,r(t))},children:(U,ne)=>{ae(U,{$$events:{click:()=>L(Object.keys(p).indexOf("learningSteps"))},children:(re,$e)=>{oe();var X=Z();j(()=>N(X,r(()=>p.learningSteps.title))),$(re,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(A,K)=>{Ye(A,{get warning(){return s(_)}})},$$slots:{default:!0}});var S=v(b,2);{var M=A=>{var K=Bf(),U=le(K);J(U,{children:(X,Le)=>{st(X,{get defaultValue(){return r(()=>x.graduatingIntervalGood)},get value(){return t().graduatingIntervalGood},set value(ie){se(g,r(t).graduatingIntervalGood=ie,r(t))},children:(ie,ve)=>{ae(ie,{$$events:{click:()=>L(Object.keys(p).indexOf("graduatingInterval"))},children:(xe,Fe)=>{oe();var de=Z();j(()=>N(de,r(()=>p.graduatingInterval.title))),$(xe,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ne=v(U,2);J(ne,{children:(X,Le)=>{Ye(X,{get warning(){return s(l)}})},$$slots:{default:!0}});var re=v(ne,2);J(re,{children:(X,Le)=>{st(X,{get defaultValue(){return r(()=>x.graduatingIntervalEasy)},get value(){return t().graduatingIntervalEasy},set value(ie){se(g,r(t).graduatingIntervalEasy=ie,r(t))},children:(ie,ve)=>{ae(ie,{$$events:{click:()=>L(Object.keys(p).indexOf("easyInterval"))},children:(xe,Fe)=>{oe();var de=Z();j(()=>N(de,r(()=>p.easyInterval.title))),$(xe,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=v(re,2);J($e,{children:(X,Le)=>{Ye(X,{get warning(){return s(h)}})},$$slots:{default:!0}}),$(A,K)};Ie(S,A=>{o()||A(M)})}var Y=v(S,2);J(Y,{children:(A,K)=>{const U=W(()=>(m(dn),r(dn)));Pt(A,{get defaultValue(){return r(()=>x.newCardInsertOrder)},get choices(){return s(U)},breakpoint:"md",get value(){return t().newCardInsertOrder},set value(ne){se(g,r(t).newCardInsertOrder=ne,r(t))},children:(ne,re)=>{ae(ne,{$$events:{click:()=>L(Object.keys(p).indexOf("insertionOrder"))},children:($e,X)=>{oe();var Le=Z();j(()=>N(Le,r(()=>p.insertionOrder.title))),$($e,Le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Q=v(Y,2);J(Q,{children:(A,K)=>{Ye(A,{get warning(){return s(y)}})},$$slots:{default:!0}}),$(w,I)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(T,H)=>{const w=W(()=>(m(B),r(()=>Ys())));bt(T,{get title(){return s(w)},get url(){return m(he),r(()=>he.DeckOptions.newCards)},slot:"tooltip",get helpSections(){return d},get fsrs(){return o()},$$events:{mount:D=>{f(O,D.detail.modal),f(k,D.detail.carousel)}}})}}}),Oe(),i()}var Wf=te('<div class="show-timer-switch" style="display: contents;"><!></div>'),qf=te('<div class="show-timer-switch" style="display: contents;"><!></div>'),Uf=te("<!> <!> <!> <!>",1);function Qf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(c,"$config",a),o=R();let h=G(e,"state",8),y=G(e,"api",8);const c=h().currentConfig,u=h().defaults,g={maximumAnswerSecs:{title:ku(),help:_u()},showAnswerTimer:{title:wu(),help:Cu()},stopTimerOnAnswer:{title:yu(),help:hu()}},x=Object.values(g);let C=R(),l=R();function _(d){s(C).show(),s(l).to(d)}ce(()=>(t(),B),()=>{f(o,t().capAnswerTimeToSecs>600?Pu():"")}),Ke(),Re();const p=W(()=>(m(B),r(()=>Ks())));ft(n,{get title(){return s(p)},children:(d,O)=>{gt(d,{get slotHost(){return J},get api(){return y()},children:(k,L)=>{var z=Uf(),T=le(z);J(T,{children:(I,F)=>{st(I,{get defaultValue(){return r(()=>u.capAnswerTimeToSecs)},min:1,max:7200,get value(){return t().capAnswerTimeToSecs},set value(b){se(c,r(t).capAnswerTimeToSecs=b,r(t))},children:(b,S)=>{ae(b,{$$events:{click:()=>_(Object.keys(g).indexOf("maximumAnswerSecs"))},children:(M,Y)=>{oe();var Q=Z();j(()=>N(Q,r(()=>g.maximumAnswerSecs.title))),$(M,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=v(T,2);J(H,{children:(I,F)=>{Ye(I,{get warning(){return s(o)}})},$$slots:{default:!0}});var w=v(H,2);J(w,{children:(I,F)=>{var b=Wf(),S=q(b);Je(S,{get defaultValue(){return r(()=>u.showTimer)},get value(){return t().showTimer},set value(M){se(c,r(t).showTimer=M,r(t))},children:(M,Y)=>{ae(M,{$$events:{click:()=>_(Object.keys(g).indexOf("showAnswerTimer"))},children:(Q,A)=>{oe();var K=Z();j(()=>N(K,r(()=>g.showAnswerTimer.title))),$(Q,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),E(b),$(I,b)},$$slots:{default:!0}});var D=v(w,2);J(D,{children:(I,F)=>{var b=qf(),S=q(b);Je(S,{get defaultValue(){return r(()=>u.stopTimerOnAnswer)},get value(){return t().stopTimerOnAnswer},set value(M){se(c,r(t).stopTimerOnAnswer=M,r(t))},children:(M,Y)=>{ae(M,{$$events:{click:()=>_(Object.keys(g).indexOf("stopTimerOnAnswer"))},children:(Q,A)=>{oe();var K=Z();j(()=>N(K,r(()=>g.stopTimerOnAnswer.title))),$(Q,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),E(b),$(I,b)},$$slots:{default:!0}}),$(k,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,O)=>{const k=W(()=>(m(B),r(()=>Ks())));bt(d,{get title(){return s(k)},get url(){return m(he),r(()=>he.DeckOptions.timer)},slot:"tooltip",get helpSections(){return x},$$events:{mount:L=>{f(C,L.detail.modal),f(l,L.detail.carousel)}}})}}}),Oe(),i()}var Yf=te("<!> <!> <!>",1),Kf=te('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function Xf(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(_,"$config",a),o=()=>ye(C,"$fsrsEnabled",a),h=()=>ye(l,"$reschedule",a),y=R(),c=R(),u=R();let g=G(e,"state",8),x=G(e,"api",8);const C=g().fsrs,l=g().fsrsReschedule,_=g().currentConfig,p=g().defaults,d=t().easyDaysPercentages.slice();ce(()=>t(),()=>{t().easyDaysPercentages.length!==7&&se(_,r(t).easyDaysPercentages=p.easyDaysPercentages.slice(),r(t))}),ce(()=>t(),()=>{f(y,t().easyDaysPercentages.some((z,T)=>z!==d[T]))}),ce(()=>(t(),B),()=>{f(c,t().easyDaysPercentages.some(z=>z===1)?"":xu())}),ce(()=>(s(y),o(),h(),B),()=>{f(u,s(y)&&!(o()&&h())?bu():"")}),Ke(),Re();var O=Kf(),k=v(le(O),2);const L=W(()=>(m(B),r(()=>En())));ft(k,{get title(){return s(L)},children:(z,T)=>{gt(z,{get slotHost(){return J},get api(){return x()},children:(H,w)=>{var D=Yf(),I=le(D);sa(I,{get values(){return t().easyDaysPercentages},set values(S){se(_,r(t).easyDaysPercentages=S,r(t))},$$legacy:!0});var F=v(I,2);J(F,{children:(S,M)=>{Ye(S,{get warning(){return s(c)}})},$$slots:{default:!0}});var b=v(F,2);J(b,{children:(S,M)=>{Ye(S,{get warning(){return s(u)}})},$$slots:{default:!0}}),$(H,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),$(n,O),Oe(),i()}var Zf=te("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Jf=te('<!> <div class="deck-options-page svelte-1d6j35w"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function eg(n,e){Se(e,!1);const[a,i]=je(),t=()=>ye(h,"$addons",a);let o=G(e,"state",8);const h=o().addonComponents;function y(){return o().currentAuxData}function c(F){xt(h,[...t(),F])}function u(F,b){xt(h,[...t(),{component:Rf,html:F,mounted:b}])}const g={},x={},C={},l={},_={},p={},d={},O={},k={},L={};let z=R();Re();var T=Jf(),H=le(T);rf(H,{get state(){return o()},$$events:{presetchange(...F){var b;(b=s(z))==null||b.apply(this,F)}}});var w=v(H,2),D=q(w);Ze(D,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Ou(D.lastChild,{breakpoint:"sm",class:"container-columns",children:(F,b)=>{var S=Zf(),M=le(S),Y=q(M);qe(Y,{class:"row-columns",children:(de,Pe)=>{of(de,{get state(){return o()},get api(){return x},get onPresetChange(){return s(z)},set onPresetChange(He){f(z,He)},$$legacy:!0})},$$slots:{default:!0}});var Q=v(Y,2);qe(Q,{class:"row-columns",children:(de,Pe)=>{jf(de,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var A=v(Q,2);qe(A,{class:"row-columns",children:(de,Pe)=>{Hf(de,{get state(){return o()},get api(){return l}})},$$slots:{default:!0}});var K=v(A,2);qe(K,{class:"row-columns",children:(de,Pe)=>{uf(de,{get state(){return o()},get api(){return p}})},$$slots:{default:!0}});var U=v(K,2);qe(U,{class:"row-columns",children:(de,Pe)=>{Of(de,{get state(){return o()},api:{},get onPresetChange(){return s(z)},set onPresetChange(He){f(z,He)},$$legacy:!0})},$$slots:{default:!0}}),E(M);var ne=v(M,2),re=q(ne);qe(re,{class:"row-columns",children:(de,Pe)=>{Gd(de,{get state(){return o()},get api(){return _}})},$$slots:{default:!0}});var $e=v(re,2);qe($e,{class:"row-columns",children:(de,Pe)=>{Fd(de,{get state(){return o()},get api(){return O}})},$$slots:{default:!0}});var X=v($e,2);qe(X,{class:"row-columns",children:(de,Pe)=>{Qf(de,{get state(){return o()},get api(){return d}})},$$slots:{default:!0}});var Le=v(X,2);qe(Le,{class:"row-columns",children:(de,Pe)=>{Hd(de,{get state(){return o()},get api(){return d}})},$$slots:{default:!0}});var ie=v(Le,2);{var ve=de=>{qe(de,{class:"row-columns",children:(Pe,He)=>{rd(Pe,{get state(){return o()}})},$$slots:{default:!0}})};Ie(ie,de=>{t(),r(()=>t().length)&&de(ve)})}var xe=v(ie,2);qe(xe,{class:"row-columns",children:(de,Pe)=>{Xf(de,{get state(){return o()},get api(){return L}})},$$slots:{default:!0}});var Fe=v(xe,2);qe(Fe,{class:"row-columns",children:(de,Pe)=>{Md(de,{get state(){return o()},get api(){return k}})},$$slots:{default:!0}}),E(ne),$(F,S)},$$slots:{default:!0}}),E(D),E(w),$(n,T),et(e,"auxData",y),et(e,"addSvelteAddon",c),et(e,"addHtmlAddon",u),et(e,"options",g),et(e,"dailyLimits",x),et(e,"newOptions",C),et(e,"lapseOptions",l),et(e,"buryOptions",_),et(e,"displayOrder",p),et(e,"timerOptions",d),et(e,"audioOptions",O),et(e,"advancedOptions",k),et(e,"easyDays",L);var I=Oe({auxData:y,addSvelteAddon:c,addHtmlAddon:u,options:g,dailyLimits:x,newOptions:C,lapseOptions:l,buryOptions:_,displayOrder:p,timerOptions:d,audioOptions:O,advancedOptions:k,easyDays:L});return i(),I}function zg(n,e){Se(e,!1);let a=G(e,"data",8),i=R();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await ws(),(!await a().state.isModified()||confirm(Su()))&&Ra({})},$s(()=>{globalThis.$deckOptions=new Promise((t,o)=>{t(s(i))}),a().state.resolveOriginalConfigs(),Ta({})}),Re(),Jt(eg(n,{get state(){return m(a()),r(()=>a().state)},$$legacy:!0}),t=>f(i,t),()=>s(i)),Oe()}export{zg as component,Vg as universal};

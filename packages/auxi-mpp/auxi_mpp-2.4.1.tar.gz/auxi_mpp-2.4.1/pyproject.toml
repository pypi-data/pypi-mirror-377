[project]
name = "auxi-mpp"
version = "2.4.1"
authors = [
    { name = "Johan Zietsman", email = "johan.zietsman@ex-mente.co.za" },
    { name = "Hanno Muire", email = "hanno.muire@ex-mente.co.za" },
    { name = "Stefan Koning", email = "stefan.koning@ex-mente.co.za" },
]
maintainers = [
    { name = "Stefan van der Merwe", email = "stefan.vandermerwe@ex-mente.co.za" },
    { name = "Thys Nortje", email = "thys.nortje@ex-mente.co.za" },
]
license-files = ["LICENSE.md"]
readme = "README.md"
description = """`auxi` provides tools to help users do calculations for metallurgical process engineering. `auxi-mpp` provides tools for calculating material physical properties."""
requires-python = ">=3.12"
dependencies = [
    "auxi-chemistry>=2.7.0",
    "polars>=1.21.0",
    "pytest>=8.3.5",
    "pyyaml>=6.0.2",
    "sphinx-design>=0.6.1",
    "sphinx-tabs>=3.4.7",
]
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Programming Language :: Python :: 3",
    "Operating System :: POSIX :: Linux",
    "Environment :: Console",
]


[build-system]
requires = ["setuptools", "setuptools-scm"]
build-backend = "setuptools.build_meta"


[tool.setuptools.packages.find]
where = ["src"]
include = ["auxi.mpp", "auxi.mpp.*"]

[tool.setuptools.package-data]
"auxi.mpp" = ["py.typed"]


[tool.semantic_release]
build_command = "uv build"
version_toml = ["pyproject.toml:project.version"]
version_variables = ["src/auxi/mpp/__init__.py:__version__"]

[tool.semantic_release.remote]
name = "origin"
type = "gitlab"
ignore_token_for_push = false

[tool.semantic_release.remote.token]
env = "GITLAB_TOKEN"


[tool.ruff]
line-length = 120
lint.extend-select = ["UP", "D", "I", "PERF", "W", "PL", "RUF"]
lint.ignore = [
    "D200", # One-line docstring should fit on one line
    "D212", # Multi-line docstring summary should start at the first line
    "D203", # 1 blank line required before class docstring
    # "D211", # No blank lines allowed before class docstring
    "D413",    # Missing blank line after last section
    "PLR2004", # Magic value used in comparison
    "PLC2401", # Variable name contains non-ASCII character
    "RUF001",  # Ambigious unicode string
    "RUF002",  # Ambigious in docstring
]


[tool.ruff.lint.isort]
force-wrap-aliases = true
combine-as-imports = true
lines-after-imports = 2


[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"
docstring-code-format = true
skip-magic-trailing-comma = false


[tool.pyright]
typeCheckingMode = "strict"
include = ["src"]
exclude = ["**/__pycache__"]
strict = ["src"]
venvPath = "."
venv = ".venv"

pythonVersion = "3.12"
pythonPlatform = "Linux"

[tool.pytest.ini_options]
pythonpath = ["src"]

[tool.uv]
prerelease = "allow"

[dependency-groups]
dev = [
    # pin to a specific version to avoid breaking changes in the pipelines
    "python-semantic-release==10.4.1",

    "coverage>=7.6.10",
    "pre-commit>=4.1.0",
    "pyright>=1.1.393",
    "pytest>=8.3.4",
    "pytest-cov>=6.0.0",
    "ruff>=0.9.4",
    "scipy-stubs>=1.15.2.1",
    "sphinx>=8.2.3",
    "sphinx-rtd-theme>=3.0.2",
    "sphinx-subfigure>=0.2.4",
    "sphinxcontrib-bibtex>=2.6.3",
]

"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{97500:function(e,t,l){async function i(e,t){let{arg:l}=t,i=localStorage.getItem("auth"),a={"Content-Type":"application/json"};i&&(a.Authorization="Basic ".concat(i));let r=await fetch(""+e,{method:"POST",headers:a,body:JSON.stringify(l)});if(!(r.status>=200&&r.status<300))throw Error(await r.text());let n=await r.json();if(!r.ok)throw Error(n.message);return n}l.d(t,{_i:function(){return a},gz:function(){return s},hw:function(){return n},sj:function(){return r},wG:function(){return i}});let a=async function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];let i=localStorage.getItem("auth"),a=t[1]||{},r=a.headers||{};if(i){let e={};r instanceof Headers?r.forEach((t,l)=>{e[l]=t}):e=Array.isArray(r)?Object.fromEntries(r):{...r},e.Authorization="Basic ".concat(i);let l=await fetch(""+t[0],{...a,headers:e});if(!l.ok)throw Error(await l.text());return l.json()}let n=await fetch(""+t[0],{...a,headers:r});if(!n.ok)throw Error(await n.text());return n.json()},r=async(e,t)=>{let l=localStorage.getItem("auth"),i=t||{},a=i.headers||{};if(l){let t={};a instanceof Headers?a.forEach((e,l)=>{t[l]=e}):t=Array.isArray(a)?Object.fromEntries(a):{...a},t.Authorization="Basic ".concat(l);let r=await fetch(""+e,{...i,headers:t});if(!r.ok)throw Error(await r.text());return r}let r=await fetch(""+e,{...i,headers:a});if(!r.ok)throw Error(await r.text());return r};async function n(e,t){let{arg:l}=t,i=localStorage.getItem("auth"),a={};i&&(a.Authorization="Basic ".concat(i));let r=await fetch("".concat("").concat(e,"/").concat(l),{method:"DELETE",headers:a});if(!r.ok)throw Error(await r.text());return r}async function s(e,t){let{arg:l}=t,i=localStorage.getItem("auth"),a={"Content-Type":"application/json"};i&&(a.Authorization="Basic ".concat(i));let r=await fetch("".concat("").concat(e),{method:"PUT",headers:a,body:JSON.stringify(l)});if(!r.ok)throw Error(await r.text());return r}},21659:function(e,t,l){l.d(t,{Bf:function(){return s},JB:function(){return o},ZP:function(){return n}});var i=l(85323),a=l(97500),r=l(2265);function n(){let{data:e,error:t,isLoading:l}=(0,i.ZP)("/v1/streamers",a._i);return{isLoading:l,streamers:e}}function s(){let{data:e,error:t,isLoading:l}=(0,i.ZP)("/v1/users",a._i),[n,s]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{var t;let l=await (0,a._i)("/bili/space/myinfo?user=".concat(e.value),void 0),i=await (0,a.sj)("/bili/proxy?url=".concat(null===(t=l.data)||void 0===t?void 0:t.face)),r=await i.blob();return{...e,name:l.data.name,face:URL.createObjectURL(r)}}catch(i){console.error(i);let t=await (0,a.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),l=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(l)}}};Promise.all(e.map(t)).then(s)},[e]),{isLoading:l,isError:t,biliUsers:n}}function o(){var e;let{data:t,error:l,isLoading:r}=(0,i.ZP)("/bili/archive/pre",a._i);return{isLoading:r,isError:l,typeTree:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}))}}},1371:function(e,t,l){l.d(t,{j:function(){return p},ZP:function(){return m}});var i=l(57437),a=l(2265),r=l(76301),n=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"哔哩哔哩",itemKey:"bilibili",children:[(0,i.jsxs)(r.Form.Select,{allowCreate:!0,filter:!0,field:"bili_qn",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["哔哩哔哩自选画质。默认原画。",(0,i.jsx)("br",{}),"刚开播如果无选择的画质，会先录制原画， 后续视频分段时，如果下载插件为非 stream-gears，会切换到选择的画质。",(0,i.jsx)("br",{}),"如果选择的画质没有提供，会使用次档画质中最接近的画质，免登录原画会使用最高画质。"]}),label:"画质等级（bili_qn）",placeholder:"10000（原画）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},rules:[{pattern:/^\d*$/,message:"请仅输入纯数字"}],showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:3e4,children:"30000（杜比）"}),(0,i.jsx)(r.Ph.Option,{value:2e4,children:"20000（4k）"}),(0,i.jsx)(r.Ph.Option,{value:1e4,children:"10000（原画）"}),(0,i.jsx)(r.Ph.Option,{value:401,children:"401（蓝光-杜比）"}),(0,i.jsx)(r.Ph.Option,{value:400,children:"400（蓝光）"}),(0,i.jsx)(r.Ph.Option,{value:250,children:"250（超清）"}),(0,i.jsx)(r.Ph.Option,{value:150,children:"150（高清）"}),(0,i.jsx)(r.Ph.Option,{value:80,children:"80（流畅）"}),(0,i.jsx)(r.Ph.Option,{value:0,children:"0（最低画质）"})]}),(0,i.jsx)(r.Form.Switch,{field:"bilibili_danmaku",extraText:"录制哔哩哔哩弹幕，目前不支持视频按时长分段下的弹幕文件自动分段。仅限下载插件为非 stream-gears 时生效，默认关闭。",label:"录制弹幕（bilibili_danmaku）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"bilibili_danmaku_detail",extraText:"录制的弹幕信息中包含发送者昵称、用户UID，同时保存醒目留言、上舰、礼物信息。仅 bilibili_danmaku 开启时生效，默认关闭（实验性质：可能与弹幕转ass工具不兼容）",label:"录制详细弹幕（bilibili_danmaku_detail）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"bilibili_danmaku_raw",extraText:"录制B站服务器返回的原始弹幕信息，方便有技术能力的用户对主播弹幕数据进行统计。仅 bilibili_danmaku 开启时生效，默认关闭，开启后弹幕文件会每隔5分钟写入一次（实验性质：可能导致弹幕文件巨大）",label:"录制完整弹幕（bilibili_danmaku_raw）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.bili_cookie",extraText:(0,i.jsxs)("div",{className:"semi-form-field-extra",children:["根据格式填入cookie。推荐使用「",(0,i.jsx)("a",{href:"https://github.com/biliup/biliup-rs",title:"「biliup-rs」 Github 项目主页",target:"_blank",children:"biliup-rs"}),"」来获取。",(0,i.jsx)("br",{})]}),placeholder:"SESSDATA=none;bili_jct=none;DedeUserID__ckMd5=none;DedeUserID=none;",label:"哔哩哔哩 Cookie 文本（bili_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Select,{field:"user.bili_cookie_file",label:"哔哩哔哩 Cookie 文件（bili_cookie_file）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},optionList:l,extraText:"只支持「biliup-rs」生成的文件。与 Cookie 文本 同时存在时，优先使用文件。",showClear:!0}),(0,i.jsxs)(r.Form.Select,{field:"bili_protocol",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["哔哩哔哩直播流协议。",(0,i.jsx)("br",{}),"该设置项遵循 hls_fmp4 转码等待时间（bili_hls_transcode_timeout）。",(0,i.jsx)("br",{}),"stream-gears 尚未支持 hls_fmp4，请切换为 ffmpeg 或 streamlink 来录制。"]}),label:"直播流协议（bili_protocol）",placeholder:"stream（flv，默认）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"stream",children:"stream（flv，默认）"}),(0,i.jsx)(r.Ph.Option,{value:"hls_fmp4",children:"hls_fmp4"})]}),(0,i.jsx)(r.Form.Input,{field:"bili_liveapi",extraText:"自定义哔哩哔哩直播主要 API，用于获取指定区域（大陆或海外）的直播流链接，默认使用官方 API。",label:"哔哩哔哩直播主要API（bili_liveapi）",style:{width:"100%"},placeholder:"https://api.live.bilibili.com",fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,rules:[{pattern:/^https?:\/\/(?:[\w-]+(?::[\w-]+)?@)?([\w-]+\.)+[\w-]+(?::\d+)?(?:\/[\w-/.]*)?$/,message:"请输入有效的API地址，必须以 http:// 或 https:// 开头"}]}),(0,i.jsx)(r.Form.Input,{field:"bili_fallback_api",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["上方的主要 API 不可用或受到区域限制时，回退使用的 API。默认使用官方 API。",(0,i.jsx)("br",{}),"海外机器玩法：哔哩哔哩直播API（bili_liveapi）设置为能获取大陆直播流的 API，并将哔哩哔哩直播回退API（bili_fallback_api）设置为官方 API，然后优选「fmp4」流并使用「streamlink」下载插件（downloader）， 最后设置优选「cn-gotcha204,ov-gotcha05」两个节点。 这样大主播可以使用 cn204 的 fmp4 流稳定录制。"]}),label:"哔哩哔哩直播回退API（bili_fallback_api）",style:{width:"100%"},placeholder:"https://api.live.bilibili.com",fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,rules:[{pattern:/^https?:\/\/(?:[\w-]+(?::[\w-]+)?@)?([\w-]+\.)+[\w-]+(?::\d+)?(?:\/[\w-/.]*)?$/,message:"请输入有效的API地址，必须以 http:// 或 https:// 开头"}]}),(0,i.jsx)(r.Form.TagInput,{field:"bili_cdn",extraText:"哔哩哔哩直播CDN，默认无。",label:"直播CDN（bili_cdn）",placeholder:"例: cn-gotcha204,ov-gotcha05。用英文逗号分隔以批量输入，失焦/Enter保存",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,rules:[{validator:(e,t)=>Array.isArray(t=null!=t?t:[])&&t.every(e=>/^(cn|ov)-gotcha\d+$/.test(e)),message:"例: cn-gotcha204,ov-gotcha05"}]}),(0,i.jsx)(r.Form.Switch,{field:"bili_cdn_fallback",extraText:"CDN 回退（Fallback），默认为关闭。例如海外机器优选 ov05 之后，如果 ov05 流一直无法下载，将会自动回退到 ov07 进行下载。仅限相同流协议。",label:"CDN 回退（bili_cdn_fallback）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"bili_anonymous_origin",extraText:"使用自定义API获取 master playlist 内的 hls_fmp4 原画流，无法录制特殊直播。默认关闭。",label:"免登录原画（bili_anonymous_origin）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.InputNumber,{field:"bili_hls_transcode_timeout",extraText:"hls_fmp4 转码等待时间，超时后回退到 flv 流。默认 60 秒。",label:"hls_fmp4 转码等待时间（bili_hls_transcode_timeout）",style:{width:"100%"},placeholder:"60",fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0})]})})},s=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.UO.Panel,{header:"CC",itemKey:"cc",children:(0,i.jsxs)(r.Form.Select,{field:"cc_protocol",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["CC直播流协议。",(0,i.jsx)("br",{}),"如果录制经常分段，尝试切换。"]}),label:"直播流协议（cc_protocol）",placeholder:"hls（默认）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"flv",children:"flv"}),(0,i.jsx)(r.Ph.Option,{value:"hls",children:"hls（默认）"})]})})})},o=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"抖音",itemKey:"douyin",children:[(0,i.jsxs)(r.Form.Select,{field:"douyin_quality",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["抖音自选画质，没有选中的画质则会自动选择相近的画质优先低清晰度。",(0,i.jsx)("br",{}),"刚开播可能没有除了原画之外的画质，会先录制原画。当使用 ffmpeg 或 streamlink 时，后续视频分段将会录制设置的画质。"]}),label:"画质等级（douyin_quality）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"origin",children:"原画（origin）"}),(0,i.jsx)(r.Ph.Option,{value:"uhd",children:"蓝光（uhd）"}),(0,i.jsx)(r.Ph.Option,{value:"hd",children:"超清（hd）"}),(0,i.jsx)(r.Ph.Option,{value:"sd",children:"高清（sd）"}),(0,i.jsx)(r.Ph.Option,{value:"ld",children:"标清（ld）"}),(0,i.jsx)(r.Ph.Option,{value:"md",children:"流畅（md）"})]}),(0,i.jsx)(r.Form.Switch,{field:"douyin_danmaku",extraText:"录制抖音弹幕，默认关闭。",label:"录制弹幕（douyin_danmaku）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"douyin_danmaku_detail",extraText:"录制的弹幕信息中包含发送者昵称、用户UID、礼物信息。仅 douyin_danmaku 开启时生效，默认关闭（实验性质：可能与弹幕转ass工具不兼容）",label:"录制详细弹幕（douyin_danmaku_detail）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.douyin_cookie",extraText:(0,i.jsxs)("div",{className:"semi-form-field-extra",children:["如需要录制抖音 www.douyin.com/user/ 类型链接，或遭到风控，请在此填入 Cookie。",(0,i.jsx)("br",{}),"需要__ac_nonce、__ac_signature、sessionid的值，请不要将所有 Cookie 填入。"]}),placeholder:"__ac_nonce=none;__ac_signature=none;sessionid=none;",label:"抖音 Cookie（douyin_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0}),(0,i.jsxs)(r.Form.Select,{field:"douyin_protocol",extraText:"hls 仅供测试，请谨慎切换。",label:"直播流协议（douyin_protocol）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"flv",children:"flv（默认）"}),(0,i.jsx)(r.Ph.Option,{value:"hls",children:"hls"})]}),(0,i.jsx)(r.Form.Switch,{field:"douyin_double_screen",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["是否录制抖音双屏直播的原像素拼接流，默认关闭。",(0,i.jsx)("br",{}),"关闭时录制 横像素不变的 缩放拼接流，可能存在画质损失；开启时录制 纵像素不变的 raw 双屏拼接流。"]}),label:"双屏直播录制方式（douyin_double_screen）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"douyin_true_origin",extraText:"仅限直播流协议为 FLV 时生效，默认关闭。开启后可能录制到 HEVC 编码，而 stream-gears（默认下载器）暂不支持，请切换下载器后录制。",label:"抖音真原画（douyin_true_origin）",fieldStyle:{alignSelf:"stretch",padding:0}})]})})},d=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"斗鱼",itemKey:"douyu",children:[(0,i.jsxs)(r.Form.Select,{allowCreate:!0,filter:!0,field:"douyu_rate",extraText:"刚开播可能没有除了原画之外的画质 会先录制原画 后续视频分段(仅ffmpeg streamlink)时录制设置的画质 0 原画,8 蓝光8M,4 蓝光4m,3 超清,2 高清",label:"画质等级（douyu_rate）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},rules:[{pattern:/^\d*$/,message:"请仅输入纯数字"}],showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:0,children:"最高画质（0）"}),(0,i.jsx)(r.Ph.Option,{value:8,children:"蓝光8M（8）"}),(0,i.jsx)(r.Ph.Option,{value:4,children:"蓝光4M（4）"}),(0,i.jsx)(r.Ph.Option,{value:3,children:"超清（3）"}),(0,i.jsx)(r.Ph.Option,{value:2,children:"高清（2）"})]}),(0,i.jsx)(r.Form.Switch,{field:"douyu_danmaku",extraText:"录制斗鱼弹幕，默认关闭",label:"录制弹幕（douyu_danmaku）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsxs)(r.Form.Select,{allowCreate:!0,filter:!0,field:"douyu_cdn",extraText:"如遇到斗鱼录制卡顿可以尝试切换线路。可选以下线路 tctc-h5（线路4）, tct-h5（线路5）, ali-h5（线路6）, hw-h5（线路7）, hs-h5（线路13）",label:"访问线路（douyu_cdn）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"tctc-h5",children:"线路4（tctc-h5）"}),(0,i.jsx)(r.Ph.Option,{value:"tct-h5",children:"线路5（tct-h5）"}),(0,i.jsx)(r.Ph.Option,{value:"ali-h5",children:"线路6（ali-h5）"}),(0,i.jsx)(r.Ph.Option,{value:"hw-h5",children:"线路7（hw-h5）"}),(0,i.jsx)(r.Ph.Option,{value:"hs-h5",children:"线路13（hs-h5）"})]}),(0,i.jsx)(r.Form.Switch,{field:"douyu_disable_interactive_game",extraText:"当主播运行了互动游戏，下个分段拒绝录制。小窗运行互动游戏也算入在内，请谨慎开启。",label:"斗鱼拒绝互动游戏（douyu_disable_interactive_game）",fieldStyle:{alignSelf:"stretch",padding:0}})]})})},c=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"虎牙",itemKey:"huya",children:[(0,i.jsxs)(r.Form.Select,{allowCreate:!0,filter:!0,field:"huya_max_ratio",extraText:"虎牙自选录制码率 可以避免录制如20M的码率，每小时8G左右大小，上传及转码耗时过长。 20000（蓝光20M）, 10000（蓝光10M）, 8000（蓝光8M）, 2000（超清）, 500（流畅） 设置为10000则录制小于等于蓝光10M的画质",label:"画质等级（huya_max_ratio）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},rules:[{pattern:/^\d*$/,message:"请输入纯数字"}],showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:0,children:"原画（0）"}),(0,i.jsx)(r.Ph.Option,{value:2e4,children:"蓝光20M（20000）"}),(0,i.jsx)(r.Ph.Option,{value:1e4,children:"蓝光10M（10000）"}),(0,i.jsx)(r.Ph.Option,{value:8e3,children:"蓝光8M（8000）"}),(0,i.jsx)(r.Ph.Option,{value:2e3,children:"超清（2000）"}),(0,i.jsx)(r.Ph.Option,{value:500,children:"流畅（500）"})]}),(0,i.jsx)(r.Form.Switch,{field:"huya_danmaku",extraText:"录制虎牙弹幕，默认关闭",label:"录制弹幕（huya_danmaku）"}),(0,i.jsxs)(r.Form.Select,{allowCreate:!0,filter:!0,field:"huya_cdn",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["如遇到虎牙录制卡顿可以尝试切换线路。可选以下线路",(0,i.jsx)("br",{}),"AL（阿里云 - 直播线路3）, TX（腾讯云 - 直播线路5）, HW（华为云 - 直播线路6）, WS（网宿）, HS（火山引擎 - 直播线路14）, AL13（阿里云）, TX15（腾讯云）, HW16（华为云）",(0,i.jsx)("br",{}),"HY、HYZJ(虎牙自建 - 直播线路66) 已屏蔽。如设置，将切换为首个可用线路。"]}),label:"访问线路（huya_cdn）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"AL",children:"直播线路3（AL）"}),(0,i.jsx)(r.Ph.Option,{value:"TX",children:"直播线路5（TX）"}),(0,i.jsx)(r.Ph.Option,{value:"AL13",children:"直播线路13（AL13）"}),(0,i.jsx)(r.Ph.Option,{value:"HS",children:"直播线路14（HS）"}),(0,i.jsx)(r.Ph.Option,{value:"TX15",children:"直播线路15（TX15）"})]}),(0,i.jsx)(r.Form.Switch,{field:"huya_cdn_fallback",extraText:"当访问线路（huya_cdn）不可用时，尝试其他线路（huya_cdn_fallback）",label:"CDN 回退（huya_cdn_fallback）"}),(0,i.jsxs)(r.Form.Select,{field:"huya_protocol",extraText:"Hls 仅供测试，请谨慎切换。",label:"直播流协议（huya_protocol）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"Flv",children:"Flv（默认）"}),(0,i.jsx)(r.Ph.Option,{value:"Hls",children:"Hls"})]}),(0,i.jsx)(r.Form.Switch,{field:"huya_imgplus",extraText:"是否录制二次编码的直播流。默认为启用，关闭后可能无法下载。部分直播间的分辨率超分（如2k/4k）和HDR画质依赖于二次编码，请谨慎关闭。",label:"虎牙二次编码（huya_imgplus）",initValue:null==t||!t.hasOwnProperty("huya_imgplus")||t.huya_imgplus,fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"huya_mobile_api",extraText:"移动端 API 请求直播间信息，可能解决部分直播分区 2 分钟分段问题",label:"使用移动端 API（huya_mobile_api）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{field:"huya_use_wup",extraText:"使用 WUP 协议获取直播流，可能解决部分直播分区 2 分钟分段问题",label:"使用 WUP 协议（huya_use_wup）",initValue:null==t||!t.hasOwnProperty("huya_use_wup")||t.huya_use_wup,fieldStyle:{alignSelf:"stretch",padding:0}})]})})},h=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.UO.Panel,{header:"克拉克拉",itemKey:"kilakila",children:(0,i.jsxs)(r.Form.Select,{field:"kila_protocol",extraText:"直播流协议，默认hls",label:"直播流协议(kila_protocol)",placeholder:"hls",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"hls",children:"hls"}),(0,i.jsx)(r.Ph.Option,{value:"flv",children:"flv"})]})})})},u=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"TwitCasting",itemKey:"twitcasting",children:[(0,i.jsxs)(r.Form.Select,{field:"twitcasting_quality",extraText:(0,i.jsx)("div",{style:{fontSize:"14px"},children:"TwitCasting自选画质，没有选中的画质则会自动选择更低级别清晰度，如更低级别画质依旧没有则选择最清晰的。"}),label:"画质等级（twitcasting_quality）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0},showClear:!0,children:[(0,i.jsx)(r.Ph.Option,{value:"high",children:"高画质（high）"}),(0,i.jsx)(r.Ph.Option,{value:"medium",children:"中画质（medium）"}),(0,i.jsx)(r.Ph.Option,{value:"low",children:"低画质（low）"})]}),(0,i.jsx)(r.Form.Switch,{field:"twitcasting_danmaku",extraText:"录制TwitCasting弹幕，默认关闭",label:"录制弹幕（twitcasting_danmaku）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.twitcasting_cookie",extraText:(0,i.jsxs)("div",{className:"semi-form-field-extra",children:["Cookie格式:",(0,i.jsx)("br",{}),(0,i.jsx)("code",{style:{color:"blue"},children:"tc_id=xxxxxxx; tc_ss=xxxxxxx;"})]}),label:"TwitCasting Cookie（twitcasting_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"twitcasting_password",label:"TwitCasting直播间密码（twitcasting_password）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}})]})})},f=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"Twitch",itemKey:"twitch",children:[(0,i.jsx)(r.Form.Switch,{field:"twitch_danmaku",extraText:"录制Twitch弹幕，默认关闭",label:"录制弹幕（twitch_danmaku）"}),(0,i.jsx)(r.Form.Switch,{initValue:null==t||!t.hasOwnProperty("twitch_disable_ads")||t.twitch_disable_ads,field:"twitch_disable_ads",extraText:"去除Twitch广告功能，默认开启 这个功能会导致Twitch录播分段，因为遇到广告就自动断开了，这就是去广告。若需要录播完整一整段可以关闭这个，但是关了之后就会有紫色屏幕的CommercialTime 还有一个办法是去花钱开一个Turbo会员，然后下面的user里把twitch的cookie填上，也能去除广告",label:"去除广告（twitch_disable_ads）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.twitch_cookie",extraText:(0,i.jsxs)("div",{className:"semi-form-field-extra",children:["【仅限Turbo会员】如录制Twitch时遇见视频流中广告过多的情况，可尝试在此填入cookie，可以大幅减少视频流中的twitch广告",(0,i.jsx)("br",{}),"该 Cookie 存在过期风险，Cookie过期后会在日志输出警告，请注意及时更换。",(0,i.jsx)("br",{}),"当 Cookie 失效，录制时将忽略 Cookie。（经作者个人测试，可保持未过期状态四个月以上）",(0,i.jsx)("br",{}),"twitch_cookie 获取方式：在浏览器中打开 twitch.tv ， F12 调出控制台，在控制台中执行如下代码：",(0,i.jsx)("br",{}),(0,i.jsx)("code",{style:{color:"blue"},children:'document.cookie.split("; ").find(item => item.startsWith("auth-token="))?.split("=")[1]'}),(0,i.jsx)("br",{}),'twitch_cookie\xa0需要在\xa0downloader= "ffmpeg"\xa0时候才会生效。']}),label:"Twitch Cookie（twitch_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}})]})})},x=e=>{let{entity:t,list:l,initValues:n}=e,s=(0,r.XQ)();return(0,a.useEffect)(()=>{n&&Object.entries(n).forEach(e=>{let[t,l]=e;s.setValue(t,l)})},[n,s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"YouTube",itemKey:"youtube",children:[(0,i.jsx)(r.Form.Input,{field:"user.youtube_cookie",extraText:(0,i.jsxs)("div",{style:{fontSize:"14px"},children:["使用Cookies登陆YouTube帐号，可用于下载会限、私享等未登录账号无法访问的内容。",(0,i.jsx)("br",{}),(0,i.jsx)("style",{}),"可以使用 Chrome 插件「Get cookies.txt」来生成txt文件，请使用 Netscape 格式的 Cookies 文本路径。"]}),label:"YouTube Cookie（youtube_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{initValue:null==t||!t.hasOwnProperty("youtube_enable_download_live")||t.youtube_enable_download_live,field:"youtube_enable_download_live",extraText:"### 是否下载直播 默认开启 关闭后将忽略直播下载（可以下载回放） 避免网络被风控(有些网络只能下载回放无法下载直播)的时候还会尝试下载直播 大量下载时极易风控 如对实时性要求不高推荐关闭 一个人同时开启多个直播只能录制最新录制的那个 如果正在录制直播将无法下载回放 例如录制https://www.youtube.com/@NeneAmanoCh/streams，关闭后将忽略正在直播 ",label:"下载直播（youtube_enable_download_live）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Switch,{initValue:null==t||!t.hasOwnProperty("youtube_enable_download_playback")||t.youtube_enable_download_playback,field:"youtube_enable_download_playback",extraText:"是否下载直播回放 默认开启 关闭后将忽略直播下载回放(不会影响正常的视频下载) 只想录制直播的可以开启 如果正在下载回放将无法录制直播 例如录制https://www.youtube.com/@NeneAmanoCh/streams，关闭后将忽略直播回放 ",label:"下载回放（youtube_enable_download_playback）",fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"youtube_after_date",extraText:"仅下载该日期之后的视频,默认不限制",label:"下载起始日期（youtube_after_date）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"youtube_before_date",extraText:"仅下载该日期之前的视频（可与上面的youtube_after_date配合使用，构成指定下载范围区间）默认不限制",label:"下载截止日期（youtube_before_date）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"youtube_max_videosize",extraText:"限制单个视频的最大大小 默认不限制 直播无此功能 注意：此参数优先级高于分辨率设置，并且不包括音频部分的大小，仅仅只是视频部分的大小。 此功能在一部分视频上无法使用 推荐使用画质限制不开启此功能",label:"视频大小上限（youtube_max_videosize）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.InputNumber,{field:"youtube_max_resolution",extraText:"设置偏好的YouTube下载最高纵向分辨率 默认不限制 可以用此限制画质 例如设置为1080最高只会下载1080P画质",label:"视频分辨率上限（youtube_max_resolution）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"youtube_prefer_vcodec",label:"偏好视频封装格式（youtube_prefer_vcodec）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"youtube_prefer_acodec",extraText:"设置偏好的YouTube下载封装格式 默认不限制 请务必记得安装ffmpeg 如无特殊需求不建议筛选封装格式 特别是录制直播时 多数直播mp4都是不可用的 bilibili支持 mp4 mkv webm 无需筛选也能上传 支持同时添加多个编码，自动优选指定编码格式里最好的画质/音质版本。 视频：其中avc编码最高可以下载到1080p的内容，vp9最高可以下载到4k以及很少部分8k内容，av01画质不是所有视频都有，但是大部分8k视频的8k画质只有av01编码。 音频：其中opus编码最高48KHz采样，mp4a（AAC）最高44.1KHz采样，理论上来说opus音质会更好一些。 如需指定封装格式，请按以下推荐设置。mp4：avc+mp4a;av01+mp4a. mkv:vp9+mp4a,avc+opus. webm:av01+opus;vp9+opus.",label:"偏好音频封装格式（youtube_prefer_acodec）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}})]})})};let p={"https?://(b23.tv|live.bilibili.com)":n,"https?://(cc.163.com)":s,"https?://(?:(?:www|m|live|v).)?douyin.com":o,"https?://(?:(?:www|m).)?douyu.com":d,"https?://(?:(?:www|m).)?huya.com":c,"https?://(live.kilakila.cn|www.hongdoufm.com)":h,"https?://twitcasting.tv":u,"https?://(?:(?:www|go|m).)?twitch.tv":f,"https?://(?:(?:www|m).)?youtube.com":x};var m={Bilibili:n,CC:s,Cookie:e=>(e.entity,e.list,(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.UO.Panel,{header:"用户 Cookie",itemKey:"user",children:[(0,i.jsx)(r.Form.Input,{field:"user.kuaishou_cookie",extraText:(0,i.jsx)("div",{className:"semi-form-field-extra",children:"填入 Cookie 降低风控风险。 需要 client_key,kuaishou.live.bfb1s,kuaishou.live.web_st,kuaishou.live.web_ph,userId 的值， 请不要将所有 Cookie 填入。"}),placeholder:"client_key=none;kuaishou.live.bfb1s=none;kuaishou.live.web_st=none;kuaishou.live.web_ph=none;userId=none;",label:"快手 Cookie（kuaishou_cookie）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.niconico-email",extraText:"与您的 Niconico 账户相关联的电子邮件或电话号码。",label:"ニコニコ動画 用户名（niconico-email）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.niconico-password",mode:"password",extraText:"您的 Niconico 账户的密码。",label:"ニコニコ動画 密码（niconico-password）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.niconico-user-session",extraText:"用户会话令牌的值，可作为提供密码的替代方法。",label:"ニコニコ動画 用户会话令牌（niconico-user-session）",mode:"password",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.niconico-purge-credentials",extraText:"清除缓存的 Niconico 凭证，以启动一个新的会话并重新认证。",label:"ニコニコ動画 清除凭证缓存（niconico-purge-credentials）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.afreecatv_username",extraText:"您的 AfreecaTV 用户名。",label:"AfreecaTV 用户名（afreecatv_username）",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}}),(0,i.jsx)(r.Form.Input,{field:"user.afreecatv_password",extraText:"您的 AfreecaTV 密码。",label:"AfreecaTV 密码（afreecatv_password）",mode:"password",style:{width:"100%"},fieldStyle:{alignSelf:"stretch",padding:0}})]})})),Douyin:o,Douyu:d,Huya:c,Kilakila:h,Twitcasting:u,Twitch:f,Youtube:x}},62146:function(e,t,l){var i=l(2265);let a=(0,l(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm7-11.12a1.5 1.5 0 0 1-1.47 1.52l-4 .07.07 4a1.5 1.5 0 0 1-3 .06l-.07-4-4 .07a1.5 1.5 0 0 1-.06-3l4-.07-.07-4a1.5 1.5 0 1 1 3-.06l.07 4 4-.07A1.5 1.5 0 0 1 19 11.88Z",fill:"currentColor"}))},"plus_circle");t.Z=a},65582:function(e,t,l){l.d(t,{Z:function(){return d}});var i=l(2265),a=l(62827),r=l(85323),n=l(60951);let s=n.I?e=>{e()}:i.startTransition,o=e=>{let[,t]=(0,i.useState)({}),l=(0,i.useRef)(!1),a=(0,i.useRef)(e),r=(0,i.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,i.useCallback)(e=>{let i=!1,n=a.current;for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&n[t]!==e[t]&&(n[t]=e[t],r.current[t]&&(i=!0));i&&!l.current&&t({})},[]);return(0,n.v)(()=>(l.current=!1,()=>{l.current=!0})),[a,r.current,s]},d=(0,a.xD)(r.ZP,()=>(e,t,l={})=>{let{mutate:r}=(0,a.kY)(),d=(0,i.useRef)(e),c=(0,i.useRef)(t),h=(0,i.useRef)(l),u=(0,i.useRef)(0),[f,x,p]=o({data:n.U,error:n.U,isMutating:!1}),m=f.current,b=(0,i.useCallback)(async(e,t)=>{let[l,i]=(0,n.s)(d.current);if(!c.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!l)throw Error("Can’t trigger the mutation: missing key.");let a=(0,n.m)((0,n.m)({populateCache:!1,throwOnError:!0},h.current),t),o=(0,n.p)();u.current=o,p({isMutating:!0});try{let t=await r(l,c.current(i,{arg:e}),(0,n.m)(a,{throwOnError:!0}));return u.current<=o&&(s(()=>p({data:t,isMutating:!1,error:void 0})),null==a.onSuccess||a.onSuccess.call(a,t,l,a)),t}catch(e){if(u.current<=o&&(s(()=>p({error:e,isMutating:!1})),null==a.onError||a.onError.call(a,e,l,a),a.throwOnError))throw e}},[]),y=(0,i.useCallback)(()=>{u.current=(0,n.p)(),p({data:n.U,error:n.U,isMutating:!1})},[]);return(0,n.v)(()=>{d.current=e,c.current=t,h.current=l}),{trigger:b,reset:y,get data(){return x.data=!0,m.data},get error(){return x.error=!0,m.error},get isMutating(){return x.isMutating=!0,m.isMutating}}})}}]);
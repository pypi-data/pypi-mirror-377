(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{26535:function(e,t,r){Promise.resolve().then(r.bind(r,44374))},44374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(57437);r(47960);var i=r(2265),o=r(27648),s=r(99376),n=r(64711),d=r(9247),l=r(20604),c=r(94731),u=r(70787),m=r(67050),h=r(36699),f=r(50196),g=r(35901);function x(e){let{children:t}=e,{Sider:r}=n.Layout,x=(0,s.usePathname)(),[b,y]=(0,i.useState)([]),[v,p]=(0,i.useState)([x.slice(1)]),{width:w}=(0,f.Z)(),[j,k]=(0,i.useState)(w<=640),[E,S]=(0,i.useState)(localStorage.getItem("mode")||"auto"),C=(0,h.K4)();return(0,h.Fg)(E,C),(0,i.useEffect)(()=>{w<=640&&k(!0)},[w]),(0,i.useEffect)(()=>{p([x.slice(1)])},[x]),(0,i.useMemo)(()=>[{itemKey:"streamers",text:"直播管理",icon:(0,a.jsx)("div",{style:{backgroundColor:"#ffaa00ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,a.jsx)(d.Z,{size:"small"})})},{itemKey:"upload-manager",text:"投稿管理",icon:(0,a.jsx)("div",{style:{backgroundColor:"#885bd2ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,a.jsx)(l.Z,{size:"small"})})},{itemKey:"dashboard",text:"空间配置",icon:(0,a.jsx)("div",{style:{backgroundColor:"#6b6c75ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,a.jsx)(c.Z,{size:"small"})})},{text:"实时日志",icon:(0,a.jsx)("div",{style:{backgroundColor:"rgba(var(--semi-blue-4), 1)",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,a.jsx)(u.Z,{size:"small"})}),itemKey:"logViewer"},{itemKey:"history",text:"历史记录",icon:(0,a.jsx)("div",{style:{backgroundColor:"#5ac262ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,a.jsx)(m.Z,{size:"small"})})}].map(e=>(e.text=(0,a.jsx)("div",{style:{color:v.some(t=>e.itemKey===t)||v.some(e=>b.some(t=>{var r;return null===(r=({manager:["streamers","history"]})[t])||void 0===r?void 0:r.includes(e)}))&&b.some(t=>e.itemKey===t)?"var(--semi-color-text-0)":"var(--semi-color-text-2)",fontWeight:600},children:e.text}),e)),[b,v]),(0,i.useCallback)(e=>{let{itemElement:t,isSubNav:r,isInSubNav:i,props:s}=e,n={history:"/history",dashboard:"/dashboard",streamers:"/streamers","upload-manager":"/upload-manager",job:"/job",status:"/status",logViewer:"/logviewer"};return n[s.itemKey]?(0,a.jsx)(o.default,{style:{textDecoration:"none",fontWeight:"600 !important"},href:n[s.itemKey],children:t}):t},[]),(0,i.useCallback)(()=>{k(!j)},[j]),(0,a.jsx)("html",{lang:"zh-Hans",children:(0,a.jsx)("body",{style:{width:"100%"},children:(0,a.jsx)(g.H,{children:(0,a.jsx)(n.Layout,{className:"components-layout-demo semi-light-scrollbar",children:(0,a.jsx)(n.Layout,{style:{height:"100vh"},children:t})})})})})}},35901:function(e,t,r){"use strict";r.d(t,{H:function(){return n},a:function(){return d}});var a=r(57437),i=r(2265),o=r(99376);let s=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,i.useState)(!1),d=(0,o.useRouter)();(0,i.useEffect)(()=>{let e=localStorage.getItem("auth");e?c(e).then(e=>{n(e),e||localStorage.removeItem("auth")}):l().then(e=>{e||n(!0)})},[]);let l=async()=>{try{let e=localStorage.getItem("auth"),t=await fetch("/api/basic",{headers:{Authorization:"Basic ".concat(e)}});return 401===t.status}catch(e){return!0}},c=async e=>{try{return(await fetch("/api/basic",{headers:{Authorization:"Basic ".concat(e)}})).ok}catch(e){return!1}},u=async(e,t)=>{try{let r=btoa("".concat(e,":").concat(t));if(await c(r))return localStorage.setItem("auth",r),n(!0),!0;return!1}catch(e){return!1}};return(0,a.jsx)(s.Provider,{value:{isAuthenticated:r,login:u,logout:()=>{localStorage.removeItem("auth"),n(!1),l().then(e=>{e?d.push("/login"):d.push("/")})}},children:t})}function d(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},36699:function(e,t,r){"use strict";r.d(t,{Fg:function(){return d},K4:function(){return n},cE:function(){return s},f:function(){return i},ql:function(){return o}});var a=r(2265);let i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},o=(e,t)=>{let{match:r,unmatch:a,callInInit:i=!0}=t;{let t=window.matchMedia(e),o=function(e){e.matches?r&&r(e):a&&a(e)};return(i&&o(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",o),()=>t.removeEventListener("change",o)):(t.addListener(o),()=>t.removeListener(o))}},s=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-"),n=()=>{let[e,t]=(0,a.useState)("light");return(0,a.useEffect)(()=>{let e=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t(e);let r=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>t(e);return r.addEventListener("change",a),()=>r.removeEventListener("change",a)},[]),e},d=(e,t)=>{(0,a.useEffect)(()=>{switch(localStorage.setItem("mode",e),e){case"light":document.body.setAttribute("theme-mode","light");break;case"dark":document.body.setAttribute("theme-mode","dark");break;default:document.body.setAttribute("theme-mode",t)}},[e,t])}},47960:function(){}},function(e){e.O(0,[587,290,737,326,25,971,117,744],function(){return e(e.s=26535)}),_N_E=e.O()}]);
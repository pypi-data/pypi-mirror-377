<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CedarBackup3.cli &#8212; cedar-backup3 3.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=ec641305" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../_static/documentation_options.js?v=f8d09eac"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="CedarBackup3.config" href="../config/index.html" />
    <link rel="prev" title="CedarBackup3.actions.validate" href="../actions/validate/index.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-CedarBackup3.cli">
<span id="cedarbackup3-cli"></span><h1>CedarBackup3.cli<a class="headerlink" href="#module-CedarBackup3.cli" title="Link to this heading">¶</a></h1>
<p>Provides command-line interface implementation for the cback3 script.</p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>The functionality in this module encapsulates the command-line interface for
the cback3 script.  The cback3 script itself is very short, basically just an
invokation of one function implemented here.  That, in turn, makes it
simpler to validate the command line interface (for instance, it’s easier to
run pychecker against a module, and unit tests are easier, too).</p>
<p>The objects and functions implemented in this module are probably not useful
to any code external to Cedar Backup.   Anyone else implementing their own
command-line interface would have to reimplement (or at least enhance) all
of this anyway.</p>
</div></blockquote>
</section>
<section id="backwards-compatibility">
<h2>Backwards Compatibility<a class="headerlink" href="#backwards-compatibility" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>The command line interface has changed between Cedar Backup 1.x and Cedar
Backup 2.x.  Some new switches have been added, and the actions have become
simple arguments rather than switches (which is a much more standard command
line format).  Old 1.x command lines are generally no longer valid.</p>
</div></blockquote>
</section>
<section id="module-attributes">
<h2>Module Attributes<a class="headerlink" href="#module-attributes" title="Link to this heading">¶</a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.DEFAULT_CONFIG">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_CONFIG</span></span><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_CONFIG" title="Link to this definition">¶</a></dt>
<dd><p>The default configuration file</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.DEFAULT_LOGFILE">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_LOGFILE</span></span><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_LOGFILE" title="Link to this definition">¶</a></dt>
<dd><p>The default log file path</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.DEFAULT_OWNERSHIP">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_OWNERSHIP</span></span><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_OWNERSHIP" title="Link to this definition">¶</a></dt>
<dd><p>Default ownership for the logfile</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.DEFAULT_MODE">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_MODE</span></span><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_MODE" title="Link to this definition">¶</a></dt>
<dd><p>Default file permissions mode on the logfile</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.VALID_ACTIONS">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">VALID_ACTIONS</span></span><a class="headerlink" href="#CedarBackup3.cli.VALID_ACTIONS" title="Link to this definition">¶</a></dt>
<dd><p>List of valid actions</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.COMBINE_ACTIONS">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">COMBINE_ACTIONS</span></span><a class="headerlink" href="#CedarBackup3.cli.COMBINE_ACTIONS" title="Link to this definition">¶</a></dt>
<dd><p>List of actions which can be combined with other actions</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.NONCOMBINE_ACTIONS">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">NONCOMBINE_ACTIONS</span></span><a class="headerlink" href="#CedarBackup3.cli.NONCOMBINE_ACTIONS" title="Link to this definition">¶</a></dt>
<dd><p>List of actions which cannot be combined with other actions</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
</dd>
</dl>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.logger">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#CedarBackup3.cli.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.DISK_LOG_FORMAT">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DISK_LOG_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(asctime)s</span> <span class="pre">--&gt;</span> <span class="pre">[%(levelname)-7s]</span> <span class="pre">%(message)s'</span></em><a class="headerlink" href="#CedarBackup3.cli.DISK_LOG_FORMAT" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.DISK_OUTPUT_FORMAT">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DISK_OUTPUT_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(message)s'</span></em><a class="headerlink" href="#CedarBackup3.cli.DISK_OUTPUT_FORMAT" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.SCREEN_LOG_FORMAT">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">SCREEN_LOG_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(message)s'</span></em><a class="headerlink" href="#CedarBackup3.cli.SCREEN_LOG_FORMAT" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.SCREEN_LOG_STREAM">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">SCREEN_LOG_STREAM</span></span><a class="headerlink" href="#CedarBackup3.cli.SCREEN_LOG_STREAM" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.DATE_FORMAT">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DATE_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%Y-%m-%dT%H:%M:%S</span> <span class="pre">%Z'</span></em><a class="headerlink" href="#CedarBackup3.cli.DATE_FORMAT" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_CONFIG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/etc/cback3.conf'</span></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id1">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_LOGFILE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/var/log/cback3.log'</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id2">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_OWNERSHIP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['root',</span> <span class="pre">'adm']</span></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id3">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">DEFAULT_MODE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">416</span></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.REBUILD_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">REBUILD_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#CedarBackup3.cli.REBUILD_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.VALIDATE_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">VALIDATE_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#CedarBackup3.cli.VALIDATE_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.INITIALIZE_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">INITIALIZE_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#CedarBackup3.cli.INITIALIZE_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.COLLECT_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">COLLECT_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#CedarBackup3.cli.COLLECT_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.STAGE_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">STAGE_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">200</span></em><a class="headerlink" href="#CedarBackup3.cli.STAGE_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.STORE_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">STORE_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">300</span></em><a class="headerlink" href="#CedarBackup3.cli.STORE_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.PURGE_INDEX">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">PURGE_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">400</span></em><a class="headerlink" href="#CedarBackup3.cli.PURGE_INDEX" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id4">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">VALID_ACTIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['collect',</span> <span class="pre">'stage',</span> <span class="pre">'store',</span> <span class="pre">'purge',</span> <span class="pre">'rebuild',</span> <span class="pre">'validate',</span> <span class="pre">'initialize',</span> <span class="pre">'all']</span></em><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id5">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">COMBINE_ACTIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['collect',</span> <span class="pre">'stage',</span> <span class="pre">'store',</span> <span class="pre">'purge']</span></em><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id6">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">NONCOMBINE_ACTIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['rebuild',</span> <span class="pre">'validate',</span> <span class="pre">'initialize',</span> <span class="pre">'all']</span></em><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.SHORT_SWITCHES">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">SHORT_SWITCHES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'hVbqc:fMNl:o:m:OdsD'</span></em><a class="headerlink" href="#CedarBackup3.cli.SHORT_SWITCHES" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.LONG_SWITCHES">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">LONG_SWITCHES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['help',</span> <span class="pre">'version',</span> <span class="pre">'verbose',</span> <span class="pre">'quiet',</span> <span class="pre">'config=',</span> <span class="pre">'full',</span> <span class="pre">'managed',</span> <span class="pre">'managed-only',...</span></em><a class="headerlink" href="#CedarBackup3.cli.LONG_SWITCHES" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.cli.cli">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">cli</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.cli" title="Link to this definition">¶</a></dt>
<dd><p>Implements the command-line interface for the <code class="docutils literal notranslate"><span class="pre">cback3</span></code> script.</p>
<p>Essentially, this is the “main routine” for the cback3 script.  It does all
of the argument processing for the script, and then sets about executing the
indicated actions.</p>
<p>As a general rule, only the actions indicated on the command line will be
executed.   We will accept any of the built-in actions and any of the
configured extended actions (which makes action list verification a two-
step process).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">'all'</span></code> action has a special meaning: it means that the built-in set of
actions (collect, stage, store, purge) will all be executed, in that order.
Extended actions will be ignored as part of the <code class="docutils literal notranslate"><span class="pre">'all'</span></code> action.</p>
<p>Raised exceptions always result in an immediate return.  Otherwise, we
generally return when all specified actions have been completed.  Actions
are ignored if the help, version or validate flags are set.</p>
<p>A different error code is returned for each type of failure:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>: The Python interpreter version is not supported</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>: Error processing command-line arguments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code>: Error configuring logging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span></code>: Error parsing indicated configuration file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code>: Backup was interrupted with a CTRL-C or similar</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">6</span></code>: Error executing specified backup actions</p></li>
</ul>
</div></blockquote>
<p><em>Note:</em> This function contains a good amount of logging at the INFO level,
because this is the right place to document high-level flow of control (i.e.
what the command-line options were, what config file was being used, etc.)</p>
<p><em>Note:</em> We assume that anything that <em>must</em> be seen on the screen is logged
at the ERROR level.  Errors that occur before logging can be configured are
written to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Error code as described above</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.cli.setupLogging">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">setupLogging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.setupLogging" title="Link to this definition">¶</a></dt>
<dd><p>Set up logging based on command-line options.</p>
<p>There are two kinds of logging: flow logging and output logging.  Output
logging contains information about system commands executed by Cedar Backup,
for instance the calls to <code class="docutils literal notranslate"><span class="pre">mkisofs</span></code> or <code class="docutils literal notranslate"><span class="pre">mount</span></code>, etc.  Flow logging
contains error and informational messages used to understand program flow.
Flow log messages and output log messages are written to two different
loggers target (<code class="docutils literal notranslate"><span class="pre">CedarBackup3.log</span></code> and <code class="docutils literal notranslate"><span class="pre">CedarBackup3.output</span></code>).  Flow log
messages are written at the ERROR, INFO and DEBUG log levels, while output
log messages are generally only written at the INFO log level.</p>
<p>By default, output logging is disabled.  When the <code class="docutils literal notranslate"><span class="pre">options.output</span></code> or
<code class="docutils literal notranslate"><span class="pre">options.debug</span></code> flags are set, output logging will be written to the
configured logfile.  Output logging is never written to the screen.</p>
<p>By default, flow logging is enabled at the ERROR level to the screen and at
the INFO level to the configured logfile.  If the <code class="docutils literal notranslate"><span class="pre">options.quiet</span></code> flag is
set, flow logging is enabled at the INFO level to the configured logfile
only (i.e. no output will be sent to the screen).  If the <code class="docutils literal notranslate"><span class="pre">options.verbose</span></code>
flag is set, flow logging is enabled at the INFO level to both the screen
and the configured logfile.  If the <code class="docutils literal notranslate"><span class="pre">options.debug</span></code> flag is set, flow
logging is enabled at the DEBUG level to both the screen and the configured
logfile.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>options</strong> (<a class="reference internal" href="#CedarBackup3.cli.Options" title="CedarBackup3.cli.Options"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Options</span></code></a> object) – Command-line options</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to logfile on disk</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.cli.setupPathResolver">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">setupPathResolver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.setupPathResolver" title="Link to this definition">¶</a></dt>
<dd><p>Set up the path resolver singleton based on configuration.</p>
<p>Cedar Backup’s path resolver is implemented in terms of a singleton, the
<a class="reference internal" href="../util/index.html#CedarBackup3.util.PathResolverSingleton" title="CedarBackup3.util.PathResolverSingleton"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PathResolverSingleton</span></code></a> class.  This function takes options configuration,
converts it into the dictionary form needed by the singleton, and then
initializes the singleton.  After that, any function that needs to resolve
the path of a command can use the singleton.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="../config/index.html#CedarBackup3.config.Config" title="CedarBackup3.config.Config"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object) – Configuration</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">Options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argumentList</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argumentString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options" title="Link to this definition">¶</a></dt>
<dd><p>Class representing command-line options for the cback3 script.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Options</span></code> class is a Python object representation of the command-line
options of the cback3 script.</p>
<p>The object representation is two-way: a command line string or a list of
command line arguments can be used to create an <code class="docutils literal notranslate"><span class="pre">Options</span></code> object, and then
changes to the object can be propogated back to a list of command-line
arguments or to a command-line string.  An <code class="docutils literal notranslate"><span class="pre">Options</span></code> object can even be
created from scratch programmatically (if you have a need for that).</p>
<p>There are two main levels of validation in the <code class="docutils literal notranslate"><span class="pre">Options</span></code> class.  The first
is field-level validation.  Field-level validation comes into play when a
given field in an object is assigned to or updated.  We use Python’s
<code class="docutils literal notranslate"><span class="pre">property</span></code> functionality to enforce specific validations on field values,
and in some places we even use customized list classes to enforce
validations on list members.  You should expect to catch a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
exception when making assignments to fields if you are programmatically
filling an object.</p>
<p>The second level of validation is post-completion validation.  Certain
validations don’t make sense until an object representation of options is
fully “complete”.  We don’t want these validations to apply all of the time,
because it would make building up a valid object from scratch a real pain.
For instance, we might have to do things in the right order to keep from
throwing exceptions, etc.</p>
<p>All of these post-completion validations are encapsulated in the
<a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Options.validate</span></code></a> method.  This method can be called at any time by a
client, and will always be called immediately after creating a <code class="docutils literal notranslate"><span class="pre">Options</span></code>
object from a command line and before exporting a <code class="docutils literal notranslate"><span class="pre">Options</span></code> object back to
a command line.  This way, we get acceptable ease-of-use but we also don’t
accept or emit invalid command lines.</p>
<p><em>Note:</em> Lists within this class are “unordered” for equality comparisons.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.actions">
<span class="sig-name descname"><span class="pre">actions</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#CedarBackup3.cli.Options.actions" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__repr__" title="Link to this definition">¶</a></dt>
<dd><p>Official string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__eq__" title="Link to this definition">¶</a></dt>
<dd><p>Equals operator, implemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__lt__" title="Link to this definition">¶</a></dt>
<dd><p>Less-than operator, implemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__gt__" title="Link to this definition">¶</a></dt>
<dd><p>Greater-than operator, implemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.__cmp__">
<span class="sig-name descname"><span class="pre">__cmp__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.__cmp__" title="Link to this definition">¶</a></dt>
<dd><p>Original Python 2 comparison operator.
Lists within this class are “unordered” for equality comparisons.
:param other: Other object to compare to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>-1/0/1 depending on whether self is <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> other</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.help">
<span class="sig-name descname"><span class="pre">help</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.help" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.version">
<span class="sig-name descname"><span class="pre">version</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.version" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.verbose" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.quiet">
<span class="sig-name descname"><span class="pre">quiet</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.quiet" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.config">
<span class="sig-name descname"><span class="pre">config</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.config" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.full">
<span class="sig-name descname"><span class="pre">full</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.full" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.managed">
<span class="sig-name descname"><span class="pre">managed</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.managed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.managedOnly">
<span class="sig-name descname"><span class="pre">managedOnly</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.managedOnly" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.logfile">
<span class="sig-name descname"><span class="pre">logfile</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.logfile" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.owner">
<span class="sig-name descname"><span class="pre">owner</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.owner" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.mode">
<span class="sig-name descname"><span class="pre">mode</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.output">
<span class="sig-name descname"><span class="pre">output</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.output" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.debug" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.stacktrace">
<span class="sig-name descname"><span class="pre">stacktrace</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.stacktrace" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.diagnostics">
<span class="sig-name descname"><span class="pre">diagnostics</span></span><a class="headerlink" href="#CedarBackup3.cli.Options.diagnostics" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.validate" title="Link to this definition">¶</a></dt>
<dd><p>Validates command-line options represented by the object.</p>
<p>Unless <code class="docutils literal notranslate"><span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">--version</span></code> are supplied, at least one action must
be specified.  Other validations (as for allowed values for particular
options) will be taken care of at assignment time by the properties
functionality.</p>
<p><em>Note:</em> The command line format is specified by the <code class="docutils literal notranslate"><span class="pre">_usage</span></code> function.
Call <code class="docutils literal notranslate"><span class="pre">_usage</span></code> to see a usage statement for the cback3 script.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If one of the validations fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.buildArgumentList">
<span class="sig-name descname"><span class="pre">buildArgumentList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.buildArgumentList" title="Link to this definition">¶</a></dt>
<dd><p>Extracts options into a list of command line arguments.</p>
<p>The original order of the various arguments (if, indeed, the object was
initialized with a command-line) is not preserved in this generated
argument list.   Besides that, the argument list is normalized to use the
long option names (i.e. –version rather than -V).  The resulting list
will be suitable for passing back to the constructor in the
<code class="docutils literal notranslate"><span class="pre">argumentList</span></code> parameter.  Unlike <a class="reference internal" href="#CedarBackup3.cli.Options.buildArgumentString" title="CedarBackup3.cli.Options.buildArgumentString"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">buildArgumentString</span></code></a>, string
arguments are not quoted here, because there is no need for it.</p>
<p>Unless the <code class="docutils literal notranslate"><span class="pre">validate</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Options.validate</span></code></a>
method will be called (with its default arguments) against the
options before extracting the command line.  If the options are not valid,
then an argument list will not be extracted.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal notranslate"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default) unless there is a specific need to extract an
invalid command line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>validate</strong> (<em>Boolean true/false</em>) – Validate the options before extracting the command line</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List representation of command-line arguments</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If options within the object are invalid</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.cli.Options.buildArgumentString">
<span class="sig-name descname"><span class="pre">buildArgumentString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.cli.Options.buildArgumentString" title="Link to this definition">¶</a></dt>
<dd><p>Extracts options into a string of command-line arguments.</p>
<p>The original order of the various arguments (if, indeed, the object was
initialized with a command-line) is not preserved in this generated
argument string.   Besides that, the argument string is normalized to use
the long option names (i.e. –version rather than -V) and to quote all
string arguments with double quotes (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>).  The resulting string will be
suitable for passing back to the constructor in the <code class="docutils literal notranslate"><span class="pre">argumentString</span></code>
parameter.</p>
<p>Unless the <code class="docutils literal notranslate"><span class="pre">validate</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Options.validate</span></code></a>
method will be called (with its default arguments) against the options
before extracting the command line.  If the options are not valid, then
an argument string will not be extracted.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal notranslate"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default) unless there is a specific need to extract an
invalid command line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>validate</strong> (<em>Boolean true/false</em>) – Validate the options before extracting the command line</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>String representation of command-line arguments</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If options within the object are invalid</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.cli.result">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.cli.</span></span><span class="sig-name descname"><span class="pre">result</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#CedarBackup3.cli.result" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">cedar-backup3</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pronovic&repo=cedar-backup3&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">API Reference</a><ul>
  <li><a href="../index.html">CedarBackup3</a><ul>
      <li>Previous: <a href="../actions/validate/index.html" title="previous chapter">CedarBackup3.actions.validate</a></li>
      <li>Next: <a href="../config/index.html" title="next chapter">CedarBackup3.config</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;(c) Kenneth J. Pronovici.
      
    </div>

    
    <a href="https://github.com/pronovic/cedar-backup3" class="github">
        <img src="../../../_static/github-banner.svg" alt="Fork me on GitHub" class="github"/>
    </a>
    

    
  </body>
</html>
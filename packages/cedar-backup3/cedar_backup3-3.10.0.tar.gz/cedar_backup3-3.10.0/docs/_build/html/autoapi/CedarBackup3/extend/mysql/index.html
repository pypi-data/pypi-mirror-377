<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CedarBackup3.extend.mysql &#8212; cedar-backup3 3.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=ec641305" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../../_static/documentation_options.js?v=f8d09eac"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="CedarBackup3.extend.postgresql" href="../postgresql/index.html" />
    <link rel="prev" title="CedarBackup3.extend.mbox" href="../mbox/index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-CedarBackup3.extend.mysql">
<span id="cedarbackup3-extend-mysql"></span><h1>CedarBackup3.extend.mysql<a class="headerlink" href="#module-CedarBackup3.extend.mysql" title="Link to this heading">¶</a></h1>
<p>Provides an extension to back up MySQL databases.</p>
<p>This is a Cedar Backup extension used to back up MySQL databases via the Cedar
Backup command line.  It requires a new configuration section &lt;mysql&gt; and is
intended to be run either immediately before or immediately after the standard
collect action.  Aside from its own configuration, it requires the options and
collect configuration sections in the standard Cedar Backup configuration file.</p>
<p>The backup is done via the <code class="docutils literal notranslate"><span class="pre">mysqldump</span></code> command included with the MySQL
product.  Output can be compressed using <code class="docutils literal notranslate"><span class="pre">gzip</span></code> or <code class="docutils literal notranslate"><span class="pre">bzip2</span></code>.  Administrators
can configure the extension either to back up all databases or to back up only
specific databases.  Note that this code always produces a full backup.  There
is currently no facility for making incremental backups.  If/when someone has a
need for this and can describe how to do it, I’ll update this extension or
provide another.</p>
<p>The extension assumes that all configured databases can be backed up by a
single user.  Often, the “root” database user will be used.  An alternative is
to create a separate MySQL “backup” user and grant that user rights to read
(but not write) various databases as needed.  This second option is probably
the best choice.</p>
<p>The extension accepts a username and password in configuration.  However, you
probably do not want to provide those values in Cedar Backup configuration.
This is because Cedar Backup will provide these values to <code class="docutils literal notranslate"><span class="pre">mysqldump</span></code> via the
command-line <code class="docutils literal notranslate"><span class="pre">--user</span></code> and <code class="docutils literal notranslate"><span class="pre">--password</span></code> switches, which will be visible to
other users in the process listing.</p>
<p>Instead, you should configure the username and password in one of MySQL’s
configuration files.  Typically, that would be done by putting a stanza like
this in <code class="docutils literal notranslate"><span class="pre">/root/.my.cnf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mysqldump</span><span class="p">]</span>
<span class="n">user</span>     <span class="o">=</span> <span class="n">root</span>
<span class="n">password</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">secret</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Regardless of whether you are using <code class="docutils literal notranslate"><span class="pre">~/.my.cnf</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc/cback3.conf</span></code> to store
database login and password information, you should be careful about who is
allowed to view that information.  Typically, this means locking down
permissions so that only the file owner can read the file contents (i.e. use
mode <code class="docutils literal notranslate"><span class="pre">0600</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
</dd>
</dl>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.logger">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#CedarBackup3.extend.mysql.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MYSQLDUMP_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">MYSQLDUMP_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['mysqldump']</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MYSQLDUMP_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">MysqlConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compressMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">databases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig" title="Link to this definition">¶</a></dt>
<dd><p>Class representing MySQL configuration.</p>
<p>The MySQL configuration information is used for backing up MySQL databases.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li><p>The compress mode must be one of the values in <a class="reference internal" href="../../config/index.html#id6" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-data docutils literal notranslate"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</p></li>
<li><p>The ‘all’ flag must be ‘Y’ if no databases are defined.</p></li>
<li><p>The ‘all’ flag must be ‘N’ if any databases are defined.</p></li>
<li><p>Any values in the databases list must be strings.</p></li>
</ul>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.user">
<span class="sig-name descname"><span class="pre">user</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.user" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.password">
<span class="sig-name descname"><span class="pre">password</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.password" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.compressMode">
<span class="sig-name descname"><span class="pre">compressMode</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.compressMode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.all">
<span class="sig-name descname"><span class="pre">all</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.all" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.databases">
<span class="sig-name descname"><span class="pre">databases</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.databases" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__repr__" title="Link to this definition">¶</a></dt>
<dd><p>Official string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__eq__" title="Link to this definition">¶</a></dt>
<dd><p>Equals operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__lt__" title="Link to this definition">¶</a></dt>
<dd><p>Less-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__gt__" title="Link to this definition">¶</a></dt>
<dd><p>Greater-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.MysqlConfig.__cmp__">
<span class="sig-name descname"><span class="pre">__cmp__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__cmp__" title="Link to this definition">¶</a></dt>
<dd><p>Original Python 2 comparison operator.
:param other: Other object to compare to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>-1/0/1 depending on whether self is <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> other</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">LocalConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xmlData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xmlPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig" title="Link to this definition">¶</a></dt>
<dd><p>Class representing this extension’s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
MySQL-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal notranslate"><span class="pre">validate</span></code> and <code class="docutils literal notranslate"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are “unordered” for equality comparisons.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.mysql">
<span class="sig-name descname"><span class="pre">mysql</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.mysql" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__repr__" title="Link to this definition">¶</a></dt>
<dd><p>Official string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__eq__" title="Link to this definition">¶</a></dt>
<dd><p>Equals operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__lt__" title="Link to this definition">¶</a></dt>
<dd><p>Less-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__gt__" title="Link to this definition">¶</a></dt>
<dd><p>Greater-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.__cmp__">
<span class="sig-name descname"><span class="pre">__cmp__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__cmp__" title="Link to this definition">¶</a></dt>
<dd><p>Original Python 2 comparison operator.
Lists within this class are “unordered” for equality comparisons.
:param other: Other object to compare to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>-1/0/1 depending on whether self is <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> other</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.validate" title="Link to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>The compress mode must be filled in.  Then, if the ‘all’ flag <em>is</em> set,
no databases are allowed, and if the ‘all’ flag is <em>not</em> set, at least
one database is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If one of the validations fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.LocalConfig.addConfig">
<span class="sig-name descname"><span class="pre">addConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xmlDom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parentNode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.addConfig" title="Link to this definition">¶</a></dt>
<dd><p>Adds a &lt;mysql&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span>           <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">user</span>
<span class="n">password</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">password</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">compress_mode</span>
<span class="nb">all</span>            <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="nb">all</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">database</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xmlDom</strong> – DOM tree as from <code class="docutils literal notranslate"><span class="pre">impl.createDocument()</span></code></p></li>
<li><p><strong>parentNode</strong> – Parent that the section should be appended to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.executeAction">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">executeAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.executeAction" title="Link to this definition">¶</a></dt>
<dd><p>Executes the MySQL backup action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configPath</strong> (<em>String representing a path on disk</em>) – Path to configuration file on disk</p></li>
<li><p><strong>options</strong> (<em>Options object</em>) – Program command-line options</p></li>
<li><p><strong>config</strong> (<em>Config object</em>) – Program configuration</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – Under many generic error conditions</p></li>
<li><p><strong>IOError</strong> – If a backup could not be written for some reason</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.extend.mysql.backupDatabase">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.mysql.</span></span><span class="sig-name descname"><span class="pre">backupDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.mysql.backupDatabase" title="Link to this definition">¶</a></dt>
<dd><p>Backs up an individual MySQL database, or all databases.</p>
<p>This function backs up either a named local MySQL database or all local
MySQL databases, using the passed-in user and password (if provided) for
connectivity.  This function call <em>always</em> results a full backup.  There is
no facility for incremental backups.</p>
<p>The backup data will be written into the passed-in backup file.  Normally,
this would be an object as returned from <code class="docutils literal notranslate"><span class="pre">open</span></code>, but it is possible to
use something like a <code class="docutils literal notranslate"><span class="pre">GzipFile</span></code> to write compressed output.  The caller is
responsible for closing the passed-in backup file.</p>
<p>Often, the “root” database user will be used when backing up all databases.
An alternative is to create a separate MySQL “backup” user and grant that
user rights to read (but not write) all of the databases that will be backed
up.</p>
<p>This function accepts a username and password.  However, you probably do not
want to pass those values in.  This is because they will be provided to
<code class="docutils literal notranslate"><span class="pre">mysqldump</span></code> via the command-line <code class="docutils literal notranslate"><span class="pre">--user</span></code> and <code class="docutils literal notranslate"><span class="pre">--password</span></code> switches,
which will be visible to other users in the process listing.</p>
<p>Instead, you should configure the username and password in one of MySQL’s
configuration files.  Typically, this would be done by putting a stanza like
this in <code class="docutils literal notranslate"><span class="pre">/root/.my.cnf</span></code>, to provide <code class="docutils literal notranslate"><span class="pre">mysqldump</span></code> with the root database
username and its password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mysqldump</span><span class="p">]</span>
<span class="n">user</span>     <span class="o">=</span> <span class="n">root</span>
<span class="n">password</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">secret</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you are executing this function as some system user other than root, then
the <code class="docutils literal notranslate"><span class="pre">.my.cnf</span></code> file would be placed in the home directory of that user.  In
either case, make sure to set restrictive permissions (typically, mode
<code class="docutils literal notranslate"><span class="pre">0600</span></code>) on <code class="docutils literal notranslate"><span class="pre">.my.cnf</span></code> to make sure that other users cannot read the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (String representing MySQL username, or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – User to use for connecting to the database (if any)</p></li>
<li><p><strong>password</strong> (String representing MySQL password, or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Password associated with user (if any)</p></li>
<li><p><strong>backupFile</strong> (Python file object as from <code class="docutils literal notranslate"><span class="pre">open</span></code> or <code class="docutils literal notranslate"><span class="pre">file</span></code>) – File use for writing backup</p></li>
<li><p><strong>database</strong> (String representing database name, or <code class="docutils literal notranslate"><span class="pre">None</span></code> for all databases) – Name of the database to be backed up</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If some value is missing or invalid</p></li>
<li><p><strong>IOError</strong> – If there is a problem executing the MySQL dump</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">cedar-backup3</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pronovic&repo=cedar-backup3&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">API Reference</a><ul>
  <li><a href="../../index.html">CedarBackup3</a><ul>
  <li><a href="../index.html">CedarBackup3.extend</a><ul>
      <li>Previous: <a href="../mbox/index.html" title="previous chapter">CedarBackup3.extend.mbox</a></li>
      <li>Next: <a href="../postgresql/index.html" title="next chapter">CedarBackup3.extend.postgresql</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;(c) Kenneth J. Pronovici.
      
    </div>

    
    <a href="https://github.com/pronovic/cedar-backup3" class="github">
        <img src="../../../../_static/github-banner.svg" alt="Fork me on GitHub" class="github"/>
    </a>
    

    
  </body>
</html>
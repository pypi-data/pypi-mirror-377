<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CedarBackup3.extend.postgresql &#8212; cedar-backup3 3.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=ec641305" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../../_static/documentation_options.js?v=f8d09eac"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="CedarBackup3.extend.split" href="../split/index.html" />
    <link rel="prev" title="CedarBackup3.extend.mysql" href="../mysql/index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-CedarBackup3.extend.postgresql">
<span id="cedarbackup3-extend-postgresql"></span><h1>CedarBackup3.extend.postgresql<a class="headerlink" href="#module-CedarBackup3.extend.postgresql" title="Link to this heading">¶</a></h1>
<p>Provides an extension to back up PostgreSQL databases.</p>
<p>This is a Cedar Backup extension used to back up PostgreSQL databases via the
Cedar Backup command line.  It requires a new configurations section
&lt;postgresql&gt; and is intended to be run either immediately before or immediately
after the standard collect action.  Aside from its own configuration, it
requires the options and collect configuration sections in the standard Cedar
Backup configuration file.</p>
<p>The backup is done via the <code class="docutils literal notranslate"><span class="pre">pg_dump</span></code> or <code class="docutils literal notranslate"><span class="pre">pg_dumpall</span></code> commands included with
the PostgreSQL product.  Output can be compressed using <code class="docutils literal notranslate"><span class="pre">gzip</span></code> or <code class="docutils literal notranslate"><span class="pre">bzip2</span></code>.
Administrators can configure the extension either to back up all databases or
to back up only specific databases.  The extension assumes that the current
user has passwordless access to the database since there is no easy way to pass
a password to the <code class="docutils literal notranslate"><span class="pre">pg_dump</span></code> client. This can be accomplished using appropriate
voodoo in the <code class="docutils literal notranslate"><span class="pre">pg_hda.conf</span></code> file.</p>
<p>Note that this code always produces a full backup.  There is currently no
facility for making incremental backups.</p>
<p>You should always make <code class="docutils literal notranslate"><span class="pre">/etc/cback3.conf</span></code> unreadble to non-root users once you
place postgresql configuration into it, since postgresql configuration will
contain information about available PostgreSQL databases and usernames.</p>
<p>Use of this extension <em>may</em> expose usernames in the process listing (via
<code class="docutils literal notranslate"><span class="pre">ps</span></code>) when the backup is running if the username is specified in the
configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
</dd>
<dt class="field-even">author<span class="colon">:</span></dt>
<dd class="field-even"><p>Antoine Beaupre &lt;<a class="reference external" href="mailto:anarcat&#37;&#52;&#48;koumbit&#46;org">anarcat<span>&#64;</span>koumbit<span>&#46;</span>org</a>&gt;</p>
</dd>
</dl>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.logger">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#CedarBackup3.extend.postgresql.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.POSTGRESQLDUMP_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">POSTGRESQLDUMP_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['pg_dump']</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.POSTGRESQLDUMP_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.POSTGRESQLDUMPALL_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">POSTGRESQLDUMPALL_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['pg_dumpall']</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.POSTGRESQLDUMPALL_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">PostgresqlConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compressMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">databases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig" title="Link to this definition">¶</a></dt>
<dd><p>Class representing PostgreSQL configuration.</p>
<p>The PostgreSQL configuration information is used for backing up PostgreSQL databases.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li><p>The compress mode must be one of the values in <a class="reference internal" href="../../config/index.html#id6" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-data docutils literal notranslate"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</p></li>
<li><p>The ‘all’ flag must be ‘Y’ if no databases are defined.</p></li>
<li><p>The ‘all’ flag must be ‘N’ if any databases are defined.</p></li>
<li><p>Any values in the databases list must be strings.</p></li>
</ul>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.user">
<span class="sig-name descname"><span class="pre">user</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.user" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.compressMode">
<span class="sig-name descname"><span class="pre">compressMode</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.compressMode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.all">
<span class="sig-name descname"><span class="pre">all</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.all" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.databases">
<span class="sig-name descname"><span class="pre">databases</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.databases" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__repr__" title="Link to this definition">¶</a></dt>
<dd><p>Official string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__eq__" title="Link to this definition">¶</a></dt>
<dd><p>Equals operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__lt__" title="Link to this definition">¶</a></dt>
<dd><p>Less-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__gt__" title="Link to this definition">¶</a></dt>
<dd><p>Greater-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.PostgresqlConfig.__cmp__">
<span class="sig-name descname"><span class="pre">__cmp__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__cmp__" title="Link to this definition">¶</a></dt>
<dd><p>Original Python 2 comparison operator.
:param other: Other object to compare to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>-1/0/1 depending on whether self is <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> other</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">LocalConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xmlData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xmlPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig" title="Link to this definition">¶</a></dt>
<dd><p>Class representing this extension’s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
PostgreSQL-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal notranslate"><span class="pre">validate</span></code> and <code class="docutils literal notranslate"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are “unordered” for equality comparisons.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.postgresql">
<span class="sig-name descname"><span class="pre">postgresql</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.postgresql" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__repr__" title="Link to this definition">¶</a></dt>
<dd><p>Official string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__eq__" title="Link to this definition">¶</a></dt>
<dd><p>Equals operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__lt__" title="Link to this definition">¶</a></dt>
<dd><p>Less-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__gt__" title="Link to this definition">¶</a></dt>
<dd><p>Greater-than operator, iplemented in terms of original Python 2 compare operator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.__cmp__">
<span class="sig-name descname"><span class="pre">__cmp__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__cmp__" title="Link to this definition">¶</a></dt>
<dd><p>Original Python 2 comparison operator.
Lists within this class are “unordered” for equality comparisons.
:param other: Other object to compare to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>-1/0/1 depending on whether self is <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> other</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.validate" title="Link to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>The compress mode must be filled in.  Then, if the ‘all’ flag
<em>is</em> set, no databases are allowed, and if the ‘all’ flag is
<em>not</em> set, at least one database is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If one of the validations fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.LocalConfig.addConfig">
<span class="sig-name descname"><span class="pre">addConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xmlDom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parentNode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.addConfig" title="Link to this definition">¶</a></dt>
<dd><p>Adds a &lt;postgresql&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span>           <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">user</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">compress_mode</span>
<span class="nb">all</span>            <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="nb">all</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">database</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xmlDom</strong> – DOM tree as from <code class="docutils literal notranslate"><span class="pre">impl.createDocument()</span></code></p></li>
<li><p><strong>parentNode</strong> – Parent that the section should be appended to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.executeAction">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">executeAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.executeAction" title="Link to this definition">¶</a></dt>
<dd><p>Executes the PostgreSQL backup action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configPath</strong> (<em>String representing a path on disk</em>) – Path to configuration file on disk</p></li>
<li><p><strong>options</strong> (<em>Options object</em>) – Program command-line options</p></li>
<li><p><strong>config</strong> (<em>Config object</em>) – Program configuration</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – Under many generic error conditions</p></li>
<li><p><strong>IOError</strong> – If a backup could not be written for some reason</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CedarBackup3.extend.postgresql.backupDatabase">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.extend.postgresql.</span></span><span class="sig-name descname"><span class="pre">backupDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.extend.postgresql.backupDatabase" title="Link to this definition">¶</a></dt>
<dd><p>Backs up an individual PostgreSQL database, or all databases.</p>
<p>This function backs up either a named local PostgreSQL database or all local
PostgreSQL databases, using the passed in user for connectivity.
This is <em>always</em> a full backup.  There is no facility for incremental
backups.</p>
<p>The backup data will be written into the passed-in back file.  Normally,
this would be an object as returned from <code class="docutils literal notranslate"><span class="pre">open</span></code>, but it is possible to
use something like a <code class="docutils literal notranslate"><span class="pre">GzipFile</span></code> to write compressed output.  The caller is
responsible for closing the passed-in backup file.</p>
<p><em>Note:</em> Typically, you would use the <code class="docutils literal notranslate"><span class="pre">root</span></code> user to back up all databases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<em>String representing PostgreSQL username</em>) – User to use for connecting to the database</p></li>
<li><p><strong>backupFile</strong> (Python file object as from <code class="docutils literal notranslate"><span class="pre">open</span></code> or <code class="docutils literal notranslate"><span class="pre">file</span></code>) – File use for writing backup</p></li>
<li><p><strong>database</strong> (String representing database name, or <code class="docutils literal notranslate"><span class="pre">None</span></code> for all databases) – Name of the database to be backed up</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If some value is missing or invalid</p></li>
<li><p><strong>IOError</strong> – If there is a problem executing the PostgreSQL dump</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">cedar-backup3</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pronovic&repo=cedar-backup3&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">API Reference</a><ul>
  <li><a href="../../index.html">CedarBackup3</a><ul>
  <li><a href="../index.html">CedarBackup3.extend</a><ul>
      <li>Previous: <a href="../mysql/index.html" title="previous chapter">CedarBackup3.extend.mysql</a></li>
      <li>Next: <a href="../split/index.html" title="next chapter">CedarBackup3.extend.split</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;(c) Kenneth J. Pronovici.
      
    </div>

    
    <a href="https://github.com/pronovic/cedar-backup3" class="github">
        <img src="../../../../_static/github-banner.svg" alt="Fork me on GitHub" class="github"/>
    </a>
    

    
  </body>
</html>
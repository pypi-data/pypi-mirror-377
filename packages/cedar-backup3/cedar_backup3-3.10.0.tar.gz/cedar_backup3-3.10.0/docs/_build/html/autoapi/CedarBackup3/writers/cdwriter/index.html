<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CedarBackup3.writers.cdwriter &#8212; cedar-backup3 3.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=ec641305" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../../_static/documentation_options.js?v=f8d09eac"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="CedarBackup3.writers.dvdwriter" href="../dvdwriter/index.html" />
    <link rel="prev" title="CedarBackup3.writers" href="../index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-CedarBackup3.writers.cdwriter">
<span id="cedarbackup3-writers-cdwriter"></span><h1>CedarBackup3.writers.cdwriter<a class="headerlink" href="#module-CedarBackup3.writers.cdwriter" title="Link to this heading">¶</a></h1>
<p>Provides functionality related to CD writer devices.</p>
<section id="module-attributes">
<h2>Module Attributes<a class="headerlink" href="#module-attributes" title="Link to this heading">¶</a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MEDIA_CDRW_74">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDRW_74</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MEDIA_CDRW_74" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing 74-minute CD-RW media</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MEDIA_CDR_74">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDR_74</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MEDIA_CDR_74" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing 74-minute CD-R media</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MEDIA_CDRW_80">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDRW_80</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MEDIA_CDRW_80" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing 80-minute CD-RW media</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MEDIA_CDR_80">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDR_80</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MEDIA_CDR_80" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing 80-minute CD-R media</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
</dd>
</dl>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.logger">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDRW_74</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id1">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDR_74</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id2">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDRW_80</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id3">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_CDR_80</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CDRECORD_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">CDRECORD_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['cdrecord']</span></em><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CDRECORD_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.EJECT_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">EJECT_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['eject']</span></em><a class="headerlink" href="#CedarBackup3.writers.cdwriter.EJECT_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MKISOFS_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MKISOFS_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['mkisofs']</span></em><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MKISOFS_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MediaDefinition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mediaType</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition" title="Link to this definition">¶</a></dt>
<dd><p>Class encapsulating information about CD media definitions.</p>
<p>The following media types are accepted:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDR_74</span></code>: 74-minute CD-R media (650 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDRW_74</span></code>: 74-minute CD-RW media (650 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDR_80</span></code>: 80-minute CD-R media (700 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDRW_80</span></code>: 80-minute CD-RW media (700 MB capacity)</p></li>
</ul>
</div></blockquote>
<p>Note that all of the capacities associated with a media definition are in
terms of ISO sectors (<code class="docutils literal notranslate"><span class="pre">util.ISO_SECTOR_SIZE)</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition.mediaType">
<span class="sig-name descname"><span class="pre">mediaType</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition.mediaType" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition.rewritable">
<span class="sig-name descname"><span class="pre">rewritable</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition.rewritable" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition.initialLeadIn">
<span class="sig-name descname"><span class="pre">initialLeadIn</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition.initialLeadIn" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition.leadIn">
<span class="sig-name descname"><span class="pre">leadIn</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition.leadIn" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaDefinition.capacity">
<span class="sig-name descname"><span class="pre">capacity</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaDefinition.capacity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">MediaCapacity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytesUsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytesAvailable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundaries</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity" title="Link to this definition">¶</a></dt>
<dd><p>Class encapsulating information about CD media capacity.</p>
<p>Space used includes the required media lead-in (unless the disk is unused).
Space available attempts to provide a picture of how many bytes are
available for data storage, including any required lead-in.</p>
<p>The boundaries value is either <code class="docutils literal notranslate"><span class="pre">None</span></code> (if multisession discs are not
supported or if the disc has no boundaries) or in exactly the form provided
by <code class="docutils literal notranslate"><span class="pre">cdrecord</span> <span class="pre">-msinfo</span></code>.  It can be passed as-is to the <code class="docutils literal notranslate"><span class="pre">IsoImage</span></code> class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.bytesUsed">
<span class="sig-name descname"><span class="pre">bytesUsed</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.bytesUsed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.bytesAvailable">
<span class="sig-name descname"><span class="pre">bytesAvailable</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.bytesAvailable" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.boundaries">
<span class="sig-name descname"><span class="pre">boundaries</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.boundaries" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.totalCapacity">
<span class="sig-name descname"><span class="pre">totalCapacity</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.totalCapacity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.MediaCapacity.utilized">
<span class="sig-name descname"><span class="pre">utilized</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.MediaCapacity.utilized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.cdwriter.</span></span><span class="sig-name descname"><span class="pre">CdWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scsiId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">driveSpeed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mediaType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">MEDIA_CDRW_74</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noEject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refreshMediaDelay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ejectDelay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unittest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter" title="Link to this definition">¶</a></dt>
<dd><p>Class representing a device that knows how to write CD media.</p>
<p>This is a class representing a device that knows how to write CD media.  It
provides common operations for the device, such as ejecting the media,
writing an ISO image to the media, or checking for the current media
capacity.  It also provides a place to store device attributes, such as
whether the device supports writing multisession discs, etc.</p>
<p>This class is implemented in terms of the <code class="docutils literal notranslate"><span class="pre">eject</span></code> and <code class="docutils literal notranslate"><span class="pre">cdrecord</span></code>
programs, both of which should be available on most UN*X platforms.</p>
<p><strong>Image Writer Interface</strong></p>
<p>The following methods make up the “image writer” interface shared
with other kinds of writers (such as DVD writers):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="fm">__init__</span>
<span class="n">initializeImage</span><span class="p">()</span>
<span class="n">addImageEntry</span><span class="p">()</span>
<span class="n">writeImage</span><span class="p">()</span>
<span class="n">setImageNewDisc</span><span class="p">()</span>
<span class="n">retrieveCapacity</span><span class="p">()</span>
<span class="n">getEstimatedImageSize</span><span class="p">()</span>
</pre></div>
</div>
<p>Only these methods will be used by other Cedar Backup functionality
that expects a compatible image writer.</p>
<p>The media attribute is also assumed to be available.</p>
<p><strong>Media Types</strong></p>
<p>This class knows how to write to two different kinds of media, represented
by the following constants:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDR_74</span></code>: 74-minute CD-R media (650 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDRW_74</span></code>: 74-minute CD-RW media (650 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDR_80</span></code>: 80-minute CD-R media (700 MB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_CDRW_80</span></code>: 80-minute CD-RW media (700 MB capacity)</p></li>
</ul>
</div></blockquote>
<p>Most hardware can read and write both 74-minute and 80-minute CD-R and
CD-RW media.  Some older drives may only be able to write CD-R media.
The difference between the two is that CD-RW media can be rewritten
(erased), while CD-R media cannot be.</p>
<p>I do not support any other configurations for a couple of reasons.  The
first is that I’ve never tested any other kind of media.  The second is
that anything other than 74 or 80 minute is apparently non-standard.</p>
<p><strong>Device Attributes vs. Media Attributes</strong></p>
<p>A given writer instance has two different kinds of attributes associated
with it, which I call device attributes and media attributes.  Device
attributes are things which can be determined without looking at the
media, such as whether the drive supports writing multisession disks or
has a tray.  Media attributes are attributes which vary depending on the
state of the media, such as the remaining capacity on a disc.  In
general, device attributes are available via instance variables and are
constant over the life of an object, while media attributes can be
retrieved through method calls.</p>
<p><strong>Talking to Hardware</strong></p>
<p>This class needs to talk to CD writer hardware in two different ways:
through cdrecord to actually write to the media, and through the
filesystem to do things like open and close the tray.</p>
<p>Historically, CdWriter has interacted with cdrecord using the scsiId
attribute, and with most other utilities using the device attribute.
This changed somewhat in Cedar Backup 2.9.0.</p>
<p>When Cedar Backup was first written, the only way to interact with
cdrecord was by using a SCSI device id.  IDE devices were mapped to
pseudo-SCSI devices through the kernel.  Later, extended SCSI “methods”
arrived, and it became common to see <code class="docutils literal notranslate"><span class="pre">ATA:1,0,0</span></code> or <code class="docutils literal notranslate"><span class="pre">ATAPI:0,0,0</span></code> as a
way to address IDE hardware.  By late 2006, <code class="docutils literal notranslate"><span class="pre">ATA</span></code> and <code class="docutils literal notranslate"><span class="pre">ATAPI</span></code> had
apparently been deprecated in favor of just addressing the IDE device
directly by name, i.e. <code class="docutils literal notranslate"><span class="pre">/dev/cdrw</span></code>.</p>
<p>Because of this latest development, it no longer makes sense to require a
CdWriter to be created with a SCSI id – there might not be one.  So, the
passed-in SCSI id is now optional.  Also, there is now a hardwareId
attribute.  This attribute is filled in with either the SCSI id (if
provided) or the device (otherwise).  The hardware id is the value that
will be passed to cdrecord in the <code class="docutils literal notranslate"><span class="pre">dev=</span></code> argument.</p>
<p><strong>Testing</strong></p>
<p>It’s rather difficult to test this code in an automated fashion, even if
you have access to a physical CD writer drive.  It’s even more difficult
to test it if you are running on some build daemon (think of a Debian
autobuilder) which can’t be expected to have any hardware or any media
that you could write to.</p>
<p>Because of this, much of the implementation below is in terms of static
methods that are supposed to take defined actions based on their
arguments.  Public methods are then implemented in terms of a series of
calls to simplistic static methods.  This way, we can test as much as
possible of the functionality via testing the static methods, while
hoping that if the static methods are called appropriately, things will
work properly.  It’s not perfect, but it’s much better than no testing at
all.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.device">
<span class="sig-name descname"><span class="pre">device</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.device" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.scsiId">
<span class="sig-name descname"><span class="pre">scsiId</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.scsiId" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.hardwareId">
<span class="sig-name descname"><span class="pre">hardwareId</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.hardwareId" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.driveSpeed">
<span class="sig-name descname"><span class="pre">driveSpeed</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.driveSpeed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.media">
<span class="sig-name descname"><span class="pre">media</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.media" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceType">
<span class="sig-name descname"><span class="pre">deviceType</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceType" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceVendor">
<span class="sig-name descname"><span class="pre">deviceVendor</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceVendor" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceId">
<span class="sig-name descname"><span class="pre">deviceId</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceId" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceBufferSize">
<span class="sig-name descname"><span class="pre">deviceBufferSize</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceBufferSize" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceSupportsMulti">
<span class="sig-name descname"><span class="pre">deviceSupportsMulti</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceSupportsMulti" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceHasTray">
<span class="sig-name descname"><span class="pre">deviceHasTray</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceHasTray" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.deviceCanEject">
<span class="sig-name descname"><span class="pre">deviceCanEject</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.deviceCanEject" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.refreshMediaDelay">
<span class="sig-name descname"><span class="pre">refreshMediaDelay</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.refreshMediaDelay" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.ejectDelay">
<span class="sig-name descname"><span class="pre">ejectDelay</span></span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.ejectDelay" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.isRewritable">
<span class="sig-name descname"><span class="pre">isRewritable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.isRewritable" title="Link to this definition">¶</a></dt>
<dd><p>Indicates whether the media is rewritable per configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.retrieveCapacity">
<span class="sig-name descname"><span class="pre">retrieveCapacity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entireDisc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useMulti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.retrieveCapacity" title="Link to this definition">¶</a></dt>
<dd><p>Retrieves capacity for the current media in terms of a <code class="docutils literal notranslate"><span class="pre">MediaCapacity</span></code>
object.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">entireDisc</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">True</span></code> the capacity will be for the
entire disc, as if it were to be rewritten from scratch.  If the drive
does not support writing multisession discs or if <code class="docutils literal notranslate"><span class="pre">useMulti</span></code> is passed
in as <code class="docutils literal notranslate"><span class="pre">False</span></code>, the capacity will also be as if the disc were to be
rewritten from scratch, but the indicated boundaries value will be
<code class="docutils literal notranslate"><span class="pre">None</span></code>.  The same will happen if the disc cannot be read for some
reason.  Otherwise, the capacity (including the boundaries) will
represent whatever space remains on the disc to be filled by future
sessions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entireDisc</strong> (<em>Boolean true/false</em>) – Indicates whether to return capacity for entire disc</p></li>
<li><p><strong>useMulti</strong> (<em>Boolean true/false</em>) – Indicates whether a multisession disc should be assumed, if possible</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">MediaCapacity</span></code> object describing the capacity of the media</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If the media could not be read for some reason</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.initializeImage">
<span class="sig-name descname"><span class="pre">initializeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newDisc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmpdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mediaLabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.initializeImage" title="Link to this definition">¶</a></dt>
<dd><p>Initializes the writer’s associated ISO image.</p>
<p>This method initializes the <code class="docutils literal notranslate"><span class="pre">image</span></code> instance variable so that the caller
can use the <code class="docutils literal notranslate"><span class="pre">addImageEntry</span></code> method.  Once entries have been added, the
<code class="docutils literal notranslate"><span class="pre">writeImage</span></code> method can be called with no arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>newDisc</strong> (<em>Boolean true/false</em>) – Indicates whether the disc should be re-initialized</p></li>
<li><p><strong>tmpdir</strong> (<em>String representing a directory path on disk</em>) – Temporary directory to use if needed</p></li>
<li><p><strong>mediaLabel</strong> (<em>String</em><em>, </em><em>no more than 25 characters long</em>) – Media label to be applied to the image, if any</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.addImageEntry">
<span class="sig-name descname"><span class="pre">addImageEntry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graftPoint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.addImageEntry" title="Link to this definition">¶</a></dt>
<dd><p>Adds a filepath entry to the writer’s associated ISO image.</p>
<p>The contents of the filepath – but not the path itself – will be added
to the image at the indicated graft point.  If you don’t want to use a
graft point, just pass <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p><em>Note:</em> Before calling this method, you must call <a class="reference internal" href="#CedarBackup3.writers.cdwriter.CdWriter.initializeImage" title="CedarBackup3.writers.cdwriter.CdWriter.initializeImage"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">initializeImage</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>String representing a path on disk</em>) – File or directory to be added to the image</p></li>
<li><p><strong>graftPoint</strong> (<em>String representing a graft point path</em><em>, </em><em>as described above</em>) – Graft point to be used when adding this entry</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If initializeImage() was not previously called</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.setImageNewDisc">
<span class="sig-name descname"><span class="pre">setImageNewDisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newDisc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.setImageNewDisc" title="Link to this definition">¶</a></dt>
<dd><p>Resets (overrides) the newDisc flag on the internal image.
:param newDisc: New disc flag to set</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If initializeImage() was not previously called</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.getEstimatedImageSize">
<span class="sig-name descname"><span class="pre">getEstimatedImageSize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.getEstimatedImageSize" title="Link to this definition">¶</a></dt>
<dd><p>Gets the estimated size of the image associated with the writer.
:returns: Estimated size of the image, in bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IOError</strong> – If there is a problem calling <code class="docutils literal notranslate"><span class="pre">mkisofs</span></code></p></li>
<li><p><strong>ValueError</strong> – If initializeImage() was not previously called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.openTray">
<span class="sig-name descname"><span class="pre">openTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.openTray" title="Link to this definition">¶</a></dt>
<dd><p>Opens the device’s tray and leaves it open.</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.</p>
<p>If the writer was constructed with <code class="docutils literal notranslate"><span class="pre">noEject=True</span></code>, then this is a no-op.</p>
<p>Starting with Debian wheezy on my backup hardware, I started seeing
consistent problems with the eject command.  I couldn’t tell whether
these problems were due to the device management system or to the new
kernel (3.2.0).  Initially, I saw simple eject failures, possibly because
I was opening and closing the tray too quickly.  I worked around that
behavior with the new ejectDelay flag.</p>
<p>Later, I sometimes ran into issues after writing an image to a disc:
eject would give errors like “unable to eject, last error: Inappropriate
ioctl for device”.  Various sources online (like Ubuntu bug #875543)
suggested that the drive was being locked somehow, and that the
workaround was to run ‘eject -i off’ to unlock it.  Sure enough, that
fixed the problem for me, so now it’s a normal error-handling strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.unlockTray">
<span class="sig-name descname"><span class="pre">unlockTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.unlockTray" title="Link to this definition">¶</a></dt>
<dd><p>Unlocks the device’s tray.
:raises IOError: If there is an error talking to the device</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.closeTray">
<span class="sig-name descname"><span class="pre">closeTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.closeTray" title="Link to this definition">¶</a></dt>
<dd><p>Closes the device’s tray.</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.</p>
<p>If the writer was constructed with <code class="docutils literal notranslate"><span class="pre">noEject=True</span></code>, then this is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.refreshMedia">
<span class="sig-name descname"><span class="pre">refreshMedia</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.refreshMedia" title="Link to this definition">¶</a></dt>
<dd><p>Opens and then immediately closes the device’s tray, to refresh the
device’s idea of the media.</p>
<p>Sometimes, a device gets confused about the state of its media.  Often,
all it takes to solve the problem is to eject the media and then
immediately reload it.  (There are also configurable eject and refresh
media delays which can be applied, for situations where this makes a
difference.)</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.  The configured delays still apply, though.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.cdwriter.CdWriter.writeImage">
<span class="sig-name descname"><span class="pre">writeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imagePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newDisc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writeMulti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.cdwriter.CdWriter.writeImage" title="Link to this definition">¶</a></dt>
<dd><p>Writes an ISO image to the media in the device.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">newDisc</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">True</span></code>, we assume that the entire disc
will be overwritten, and the media will be blanked before writing it if
possible (i.e. if the media is rewritable).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">writeMulti</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">True</span></code>, then a multisession disc will
be written if possible (i.e. if the drive supports writing multisession
discs).</p>
<p>if <code class="docutils literal notranslate"><span class="pre">imagePath</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the existing image
configured with <code class="docutils literal notranslate"><span class="pre">initializeImage</span></code> will be used.  Under these
circumstances, the passed-in <code class="docutils literal notranslate"><span class="pre">newDisc</span></code> flag will be ignored.</p>
<p>By default, we assume that the disc can be written multisession and that
we should append to the current contents of the disc.  In any case, the
ISO image must be generated appropriately (i.e. must take into account
any existing session boundaries, etc.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imagePath</strong> (<em>String representing a path on disk</em>) – Path to an ISO image on disk, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to use writer’s image</p></li>
<li><p><strong>newDisc</strong> (<em>Boolean true/false</em>) – Indicates whether the entire disc will overwritten</p></li>
<li><p><strong>writeMulti</strong> (<em>Boolean true/false</em>) – Indicates whether a multisession disc should be written, if possible</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If the image path is not absolute</p></li>
<li><p><strong>ValueError</strong> – If some path cannot be encoded properly</p></li>
<li><p><strong>IOError</strong> – If the media could not be written to for some reason</p></li>
<li><p><strong>ValueError</strong> – If no image is passed in and initializeImage() was not previously called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">cedar-backup3</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pronovic&repo=cedar-backup3&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">API Reference</a><ul>
  <li><a href="../../index.html">CedarBackup3</a><ul>
  <li><a href="../index.html">CedarBackup3.writers</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">CedarBackup3.writers</a></li>
      <li>Next: <a href="../dvdwriter/index.html" title="next chapter">CedarBackup3.writers.dvdwriter</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;(c) Kenneth J. Pronovici.
      
    </div>

    
    <a href="https://github.com/pronovic/cedar-backup3" class="github">
        <img src="../../../../_static/github-banner.svg" alt="Fork me on GitHub" class="github"/>
    </a>
    

    
  </body>
</html>
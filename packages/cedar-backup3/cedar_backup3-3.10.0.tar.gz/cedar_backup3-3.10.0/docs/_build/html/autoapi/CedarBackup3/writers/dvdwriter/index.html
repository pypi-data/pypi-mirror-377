<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CedarBackup3.writers.dvdwriter &#8212; cedar-backup3 3.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=ec641305" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../../_static/documentation_options.js?v=f8d09eac"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="CedarBackup3.writers.util" href="../util/index.html" />
    <link rel="prev" title="CedarBackup3.writers.cdwriter" href="../cdwriter/index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-CedarBackup3.writers.dvdwriter">
<span id="cedarbackup3-writers-dvdwriter"></span><h1>CedarBackup3.writers.dvdwriter<a class="headerlink" href="#module-CedarBackup3.writers.dvdwriter" title="Link to this heading">¶</a></h1>
<p>Provides functionality related to DVD writer devices.</p>
<section id="module-attributes">
<h2>Module Attributes<a class="headerlink" href="#module-attributes" title="Link to this heading">¶</a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MEDIA_DVDPLUSR">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_DVDPLUSR</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MEDIA_DVDPLUSR" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing DVD+R media</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MEDIA_DVDPLUSRW">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_DVDPLUSRW</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MEDIA_DVDPLUSRW" title="Link to this definition">¶</a></dt>
<dd><p>Constant representing DVD+RW media</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
</dd>
<dt class="field-even">author<span class="colon">:</span></dt>
<dd class="field-even"><p>Dmitry Rutsky &lt;<a class="reference external" href="mailto:rutsky&#37;&#52;&#48;inbox&#46;ru">rutsky<span>&#64;</span>inbox<span>&#46;</span>ru</a>&gt;</p>
</dd>
</dl>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.logger">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_DVDPLUSR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="id1">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MEDIA_DVDPLUSRW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.GROWISOFS_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">GROWISOFS_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['growisofs']</span></em><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.GROWISOFS_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.EJECT_COMMAND">
<span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">EJECT_COMMAND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['eject']</span></em><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.EJECT_COMMAND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaDefinition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MediaDefinition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mediaType</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaDefinition" title="Link to this definition">¶</a></dt>
<dd><p>Class encapsulating information about DVD media definitions.</p>
<p>The following media types are accepted:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_DVDPLUSR</span></code>: DVD+R media (4.4 GB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_DVDPLUSRW</span></code>: DVD+RW media (4.4 GB capacity)</p></li>
</ul>
</div></blockquote>
<p>Note that the capacity attribute returns capacity in terms of ISO sectors
(<code class="docutils literal notranslate"><span class="pre">util.ISO_SECTOR_SIZE)</span></code>.  This is for compatibility with the CD writer
functionality.</p>
<p>The capacities are 4.4 GB because Cedar Backup deals in “true” gigabytes
of 1024*1024*1024 bytes per gigabyte.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaDefinition.mediaType">
<span class="sig-name descname"><span class="pre">mediaType</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaDefinition.mediaType" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaDefinition.rewritable">
<span class="sig-name descname"><span class="pre">rewritable</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaDefinition.rewritable" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaDefinition.capacity">
<span class="sig-name descname"><span class="pre">capacity</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaDefinition.capacity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">MediaCapacity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytesUsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytesAvailable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity" title="Link to this definition">¶</a></dt>
<dd><p>Class encapsulating information about DVD media capacity.</p>
<p>Space used and space available do not include any information about media
lead-in or other overhead.</p>
<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Informal string representation for class instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity.bytesUsed">
<span class="sig-name descname"><span class="pre">bytesUsed</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity.bytesUsed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity.bytesAvailable">
<span class="sig-name descname"><span class="pre">bytesAvailable</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity.bytesAvailable" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity.totalCapacity">
<span class="sig-name descname"><span class="pre">totalCapacity</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity.totalCapacity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.MediaCapacity.utilized">
<span class="sig-name descname"><span class="pre">utilized</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.MediaCapacity.utilized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">CedarBackup3.writers.dvdwriter.</span></span><span class="sig-name descname"><span class="pre">DvdWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scsiId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">driveSpeed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mediaType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">MEDIA_DVDPLUSRW</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noEject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refreshMediaDelay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ejectDelay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unittest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter" title="Link to this definition">¶</a></dt>
<dd><p>Class representing a device that knows how to write some kinds of DVD media.</p>
<p><strong>Summary</strong></p>
<p>This is a class representing a device that knows how to write some kinds
of DVD media.  It provides common operations for the device, such as
ejecting the media and writing data to the media.</p>
<p>This class is implemented in terms of the <code class="docutils literal notranslate"><span class="pre">eject</span></code> and <code class="docutils literal notranslate"><span class="pre">growisofs</span></code>
utilities, all of which should be available on most UN*X platforms.</p>
<p><strong>Image Writer Interface</strong></p>
<p>The following methods make up the “image writer” interface shared
with other kinds of writers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="fm">__init__</span>
<span class="n">initializeImage</span><span class="p">()</span>
<span class="n">addImageEntry</span><span class="p">()</span>
<span class="n">writeImage</span><span class="p">()</span>
<span class="n">setImageNewDisc</span><span class="p">()</span>
<span class="n">retrieveCapacity</span><span class="p">()</span>
<span class="n">getEstimatedImageSize</span><span class="p">()</span>
</pre></div>
</div>
<p>Only these methods will be used by other Cedar Backup functionality
that expects a compatible image writer.</p>
<p>The media attribute is also assumed to be available.</p>
<p>Unlike the <code class="docutils literal notranslate"><span class="pre">CdWriter</span></code>, the <code class="docutils literal notranslate"><span class="pre">DvdWriter</span></code> can only operate in terms of
filesystem devices, not SCSI devices.  So, although the constructor
interface accepts a SCSI device parameter for the sake of compatibility,
it’s not used.</p>
<p><strong>Media Types</strong></p>
<p>This class knows how to write to DVD+R and DVD+RW media, represented
by the following constants:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_DVDPLUSR</span></code>: DVD+R media (4.4 GB capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIA_DVDPLUSRW</span></code>: DVD+RW media (4.4 GB capacity)</p></li>
</ul>
</div></blockquote>
<p>The difference is that DVD+RW media can be rewritten, while DVD+R media
cannot be (although at present, <code class="docutils literal notranslate"><span class="pre">DvdWriter</span></code> does not really
differentiate between rewritable and non-rewritable media).</p>
<p>The capacities are 4.4 GB because Cedar Backup deals in “true” gigabytes
of 1024*1024*1024 bytes per gigabyte.</p>
<p>The underlying <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> utility does support other kinds of media
(including DVD-R, DVD-RW and BlueRay) which work somewhat differently
than standard DVD+R and DVD+RW media.  I don’t support these other kinds
of media because I haven’t had any opportunity to work with them.  The
same goes for dual-layer media of any type.</p>
<p><strong>Device Attributes vs. Media Attributes</strong></p>
<p>As with the cdwriter functionality, a given dvdwriter instance has two
different kinds of attributes associated with it.  I call these device
attributes and media attributes.</p>
<p>Device attributes are things which can be determined without looking at
the media.  Media attributes are attributes which vary depending on the
state of the media.  In general, device attributes are available via
instance variables and are constant over the life of an object, while
media attributes can be retrieved through method calls.</p>
<p>Compared to cdwriters, dvdwriters have very few attributes.  This is due
to differences between the way <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> works relative to
<code class="docutils literal notranslate"><span class="pre">cdrecord</span></code>.</p>
<p><strong>Media Capacity</strong></p>
<p>One major difference between the <code class="docutils literal notranslate"><span class="pre">cdrecord</span></code>/<code class="docutils literal notranslate"><span class="pre">mkisofs</span></code> utilities used by
the cdwriter class and the <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> utility used here is that the
process of estimating remaining capacity and image size is more
straightforward with <code class="docutils literal notranslate"><span class="pre">cdrecord</span></code>/<code class="docutils literal notranslate"><span class="pre">mkisofs</span></code> than with <code class="docutils literal notranslate"><span class="pre">growisofs</span></code>.</p>
<p>In this class, remaining capacity is calculated by asking doing a dry run
of <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> and grabbing some information from the output of that
command.  Image size is estimated by asking the <code class="docutils literal notranslate"><span class="pre">IsoImage</span></code> class for an
estimate and then adding on a “fudge factor” determined through
experimentation.</p>
<p><strong>Testing</strong></p>
<p>It’s rather difficult to test this code in an automated fashion, even if
you have access to a physical DVD writer drive.  It’s even more difficult
to test it if you are running on some build daemon (think of a Debian
autobuilder) which can’t be expected to have any hardware or any media
that you could write to.</p>
<p>Because of this, some of the implementation below is in terms of static
methods that are supposed to take defined actions based on their
arguments.  Public methods are then implemented in terms of a series of
calls to simplistic static methods.  This way, we can test as much as
possible of the “difficult” functionality via testing the static methods,
while hoping that if the static methods are called appropriately, things
will work properly.  It’s not perfect, but it’s much better than no
testing at all.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.device">
<span class="sig-name descname"><span class="pre">device</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.device" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.scsiId">
<span class="sig-name descname"><span class="pre">scsiId</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.scsiId" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.hardwareId">
<span class="sig-name descname"><span class="pre">hardwareId</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.hardwareId" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.driveSpeed">
<span class="sig-name descname"><span class="pre">driveSpeed</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.driveSpeed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.media">
<span class="sig-name descname"><span class="pre">media</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.media" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.deviceHasTray">
<span class="sig-name descname"><span class="pre">deviceHasTray</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.deviceHasTray" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.deviceCanEject">
<span class="sig-name descname"><span class="pre">deviceCanEject</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.deviceCanEject" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.refreshMediaDelay">
<span class="sig-name descname"><span class="pre">refreshMediaDelay</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.refreshMediaDelay" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.ejectDelay">
<span class="sig-name descname"><span class="pre">ejectDelay</span></span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.ejectDelay" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.isRewritable">
<span class="sig-name descname"><span class="pre">isRewritable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.isRewritable" title="Link to this definition">¶</a></dt>
<dd><p>Indicates whether the media is rewritable per configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.retrieveCapacity">
<span class="sig-name descname"><span class="pre">retrieveCapacity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entireDisc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.retrieveCapacity" title="Link to this definition">¶</a></dt>
<dd><p>Retrieves capacity for the current media in terms of a <code class="docutils literal notranslate"><span class="pre">MediaCapacity</span></code>
object.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">entireDisc</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">True</span></code>, the capacity will be for the
entire disc, as if it were to be rewritten from scratch.  The same will
happen if the disc can’t be read for some reason. Otherwise, the capacity
will be calculated by subtracting the sectors currently used on the disc,
as reported by <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>entireDisc</strong> (<em>Boolean true/false</em>) – Indicates whether to return capacity for entire disc</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">MediaCapacity</span></code> object describing the capacity of the media</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If there is a problem parsing the <code class="docutils literal notranslate"><span class="pre">growisofs</span></code> output</p></li>
<li><p><strong>IOError</strong> – If the media could not be read for some reason</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.initializeImage">
<span class="sig-name descname"><span class="pre">initializeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newDisc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmpdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mediaLabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.initializeImage" title="Link to this definition">¶</a></dt>
<dd><p>Initializes the writer’s associated ISO image.</p>
<p>This method initializes the <code class="docutils literal notranslate"><span class="pre">image</span></code> instance variable so that the caller
can use the <code class="docutils literal notranslate"><span class="pre">addImageEntry</span></code> method.  Once entries have been added, the
<code class="docutils literal notranslate"><span class="pre">writeImage</span></code> method can be called with no arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>newDisc</strong> (<em>Boolean true/false</em>) – Indicates whether the disc should be re-initialized</p></li>
<li><p><strong>tmpdir</strong> (<em>String representing a directory path on disk</em>) – Temporary directory to use if needed</p></li>
<li><p><strong>mediaLabel</strong> (<em>String</em><em>, </em><em>no more than 25 characters long</em>) – Media label to be applied to the image, if any</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.addImageEntry">
<span class="sig-name descname"><span class="pre">addImageEntry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graftPoint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.addImageEntry" title="Link to this definition">¶</a></dt>
<dd><p>Adds a filepath entry to the writer’s associated ISO image.</p>
<p>The contents of the filepath – but not the path itself – will be added
to the image at the indicated graft point.  If you don’t want to use a
graft point, just pass <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p><em>Note:</em> Before calling this method, you must call <a class="reference internal" href="#CedarBackup3.writers.dvdwriter.DvdWriter.initializeImage" title="CedarBackup3.writers.dvdwriter.DvdWriter.initializeImage"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">initializeImage</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>String representing a path on disk</em>) – File or directory to be added to the image</p></li>
<li><p><strong>graftPoint</strong> (<em>String representing a graft point path</em><em>, </em><em>as described above</em>) – Graft point to be used when adding this entry</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If initializeImage() was not previously called</p></li>
<li><p><strong>ValueError</strong> – If the path is not a valid file or directory</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.setImageNewDisc">
<span class="sig-name descname"><span class="pre">setImageNewDisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newDisc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.setImageNewDisc" title="Link to this definition">¶</a></dt>
<dd><p>Resets (overrides) the newDisc flag on the internal image.
:param newDisc: New disc flag to set</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If initializeImage() was not previously called</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.getEstimatedImageSize">
<span class="sig-name descname"><span class="pre">getEstimatedImageSize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.getEstimatedImageSize" title="Link to this definition">¶</a></dt>
<dd><p>Gets the estimated size of the image associated with the writer.</p>
<p>This is an estimate and is conservative.  The actual image could be as
much as 450 blocks (sectors) smaller under some circmstances.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Estimated size of the image, in bytes</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IOError</strong> – If there is a problem calling <code class="docutils literal notranslate"><span class="pre">mkisofs</span></code></p></li>
<li><p><strong>ValueError</strong> – If initializeImage() was not previously called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.openTray">
<span class="sig-name descname"><span class="pre">openTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.openTray" title="Link to this definition">¶</a></dt>
<dd><p>Opens the device’s tray and leaves it open.</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.</p>
<p>Starting with Debian wheezy on my backup hardware, I started seeing
consistent problems with the eject command.  I couldn’t tell whether
these problems were due to the device management system or to the new
kernel (3.2.0).  Initially, I saw simple eject failures, possibly because
I was opening and closing the tray too quickly.  I worked around that
behavior with the new ejectDelay flag.</p>
<p>Later, I sometimes ran into issues after writing an image to a disc:
eject would give errors like “unable to eject, last error: Inappropriate
ioctl for device”.  Various sources online (like Ubuntu bug #875543)
suggested that the drive was being locked somehow, and that the
workaround was to run ‘eject -i off’ to unlock it.  Sure enough, that
fixed the problem for me, so now it’s a normal error-handling strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.unlockTray">
<span class="sig-name descname"><span class="pre">unlockTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.unlockTray" title="Link to this definition">¶</a></dt>
<dd><p>Unlocks the device’s tray via ‘eject -i off’.
:raises IOError: If there is an error talking to the device</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.closeTray">
<span class="sig-name descname"><span class="pre">closeTray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.closeTray" title="Link to this definition">¶</a></dt>
<dd><p>Closes the device’s tray.</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.refreshMedia">
<span class="sig-name descname"><span class="pre">refreshMedia</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.refreshMedia" title="Link to this definition">¶</a></dt>
<dd><p>Opens and then immediately closes the device’s tray, to refresh the
device’s idea of the media.</p>
<p>Sometimes, a device gets confused about the state of its media.  Often,
all it takes to solve the problem is to eject the media and then
immediately reload it.  (There are also configurable eject and refresh
media delays which can be applied, for situations where this makes a
difference.)</p>
<p>This only works if the device has a tray and supports ejecting its media.
We have no way to know if the tray is currently open or closed, so we
just send the appropriate command and hope for the best.  If the device
does not have a tray or does not support ejecting its media, then we do
nothing.  The configured delays still apply, though.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IOError</strong> – If there is an error talking to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="CedarBackup3.writers.dvdwriter.DvdWriter.writeImage">
<span class="sig-name descname"><span class="pre">writeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imagePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newDisc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writeMulti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#CedarBackup3.writers.dvdwriter.DvdWriter.writeImage" title="Link to this definition">¶</a></dt>
<dd><p>Writes an ISO image to the media in the device.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">newDisc</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">True</span></code>, we assume that the entire disc
will be re-created from scratch.  Note that unlike <code class="docutils literal notranslate"><span class="pre">CdWriter</span></code>,
<code class="docutils literal notranslate"><span class="pre">DvdWriter</span></code> does not blank rewritable media before reusing it; however,
<code class="docutils literal notranslate"><span class="pre">growisofs</span></code> is called such that the media will be re-initialized as
needed.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">imagePath</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the existing image
configured with <code class="docutils literal notranslate"><span class="pre">initializeImage()</span></code> will be used.  Under these
circumstances, the passed-in <code class="docutils literal notranslate"><span class="pre">newDisc</span></code> flag will be ignored and the
value passed in to <code class="docutils literal notranslate"><span class="pre">initializeImage()</span></code> will apply instead.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">writeMulti</span></code> argument is ignored.  It exists for compatibility with
the Cedar Backup image writer interface.</p>
<p><em>Note:</em> The image size indicated in the log (“Image size will be…”) is
an estimate.  The estimate is conservative and is probably larger than
the actual space that <code class="docutils literal notranslate"><span class="pre">dvdwriter</span></code> will use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imagePath</strong> (<em>String representing a path on disk</em>) – Path to an ISO image on disk, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to use writer’s image</p></li>
<li><p><strong>newDisc</strong> (<em>Boolean true/false</em>) – Indicates whether the disc should be re-initialized</p></li>
<li><p><strong>writeMulti</strong> (<em>Boolean true/false</em>) – Unused</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If the image path is not absolute</p></li>
<li><p><strong>ValueError</strong> – If some path cannot be encoded properly</p></li>
<li><p><strong>IOError</strong> – If the media could not be written to for some reason</p></li>
<li><p><strong>ValueError</strong> – If no image is passed in and initializeImage() was not previously called</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">cedar-backup3</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pronovic&repo=cedar-backup3&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">API Reference</a><ul>
  <li><a href="../../index.html">CedarBackup3</a><ul>
  <li><a href="../index.html">CedarBackup3.writers</a><ul>
      <li>Previous: <a href="../cdwriter/index.html" title="previous chapter">CedarBackup3.writers.cdwriter</a></li>
      <li>Next: <a href="../util/index.html" title="next chapter">CedarBackup3.writers.util</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;(c) Kenneth J. Pronovici.
      
    </div>

    
    <a href="https://github.com/pronovic/cedar-backup3" class="github">
        <img src="../../../../_static/github-banner.svg" alt="Fork me on GitHub" class="github"/>
    </a>
    

    
  </body>
</html>
Metadata-Version: 2.4
Name: coinbase-data-fetcher
Version: 0.1.0
Summary: A Python library for fetching cryptocurrency data from Coinbase
Author: TradeOptimizer Team
License: MIT
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: pandas>=2.0.0
Requires-Dist: numpy>=1.24.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: requests>=2.31.0
Requires-Dist: ratelimit>=2.2.1
Requires-Dist: tenacity>=8.2.0
Requires-Dist: tqdm>=4.65.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: pyright>=1.1.0; extra == "dev"

# Coinbase Data Fetcher

A Python library for fetching historical cryptocurrency data from Coinbase with caching support.

## Features

- Fetch historical price data for multiple cryptocurrencies
- Built-in rate limiting and retry logic
- Local caching to minimize API calls
- Support for multiple time granularities (1min, 5min, 15min, 1hour)
- Optional candlestick high/low interpolation
- Progress bar support
- Command-line tool for batch data fetching

## Installation

```bash
pip install coinbase-data-fetcher
```

## Command Line Tool

After installation, you can use the `coinbase-prefetch` command to fetch data:

```bash
# Pre-fetch all data for all coins and granularities
coinbase-prefetch

# Pre-fetch specific coin (all granularities)
coinbase-prefetch --coin bitcoin

# Pre-fetch specific coin and granularity
coinbase-prefetch --coin bitcoin --granularity 3600

# Pre-fetch with custom date range
coinbase-prefetch --coin bitcoin --granularity 3600 --start-date 2023-01-01 --end-date 2023-12-31

# Use custom cache directory
coinbase-prefetch --cache-path /custom/cache/path

# Don't save CSV files (cache only)
coinbase-prefetch --no-csv

# Disable price interpolation (use raw candlestick data)
coinbase-prefetch --coin bitcoin --granularity 3600 --no-interpolate-price
```

### Command Line Options

- `--coin`: Specific coin to fetch (e.g., bitcoin, ethereum, solana)
- `--granularity`: Time granularity in seconds (60, 300, 900, 3600)
- `--start-date`: Start date for fetching (e.g., 2023-01-01)
- `--end-date`: End date for fetching (e.g., 2023-12-31, max: yesterday)
- `--no-interpolate-price`: Disable price interpolation using candlestick hi/lo data (default: enabled)
- `--cache-path`: Override default cache directory
- `--no-csv`: Don't save CSV files, only cache JSON data

## Python API Usage

### Object-Oriented Interface

```python
from coinbase_data_fetcher import CoinDataModel, CoinData, Coins
import pandas as pd

# Create a model for Bitcoin data
model = CoinDataModel(
    coin=Coins.BITCOIN,
    data_granularity=3600,  # 1 hour
    start_date=pd.Timestamp('2023-01-01'),
    end_date=pd.Timestamp('2023-12-31'),
    price_interpolation='mean'
)

# Create data fetcher
coin_data = CoinData(model)

# Fetch prices
df = coin_data.fetch_prices()
```

### Direct API Usage

```python
from coinbase_data_fetcher import fetch_prices, Coins

df = fetch_prices(
    coin=Coins.ETHEREUM,
    start_time='2023-06-01',
    end_time='2023-06-30',
    granularity=300,  # 5 minutes
    use_candle_hi_lo=True
)
```

### Programmatic Pre-fetching

```python
from coinbase_data_fetcher import prefetch_all_data, fetch_data_for_coin

# Pre-fetch all coins and granularities
prefetch_all_data()

# Pre-fetch specific coin and granularity
fetch_data_for_coin('bitcoin', 3600)  # Bitcoin, 1 hour granularity
```

## Configuration

Set the cache directory using environment variable:
```bash
export COINBASE_CACHE_PATH=/path/to/cache
```

Or programmatically:
```python
from coinbase_data_fetcher.config import config
config.cache_path = '/path/to/cache'
```

## Available Coins

- Bitcoin (BTC-USD) - Available from 2015-07-20
- Ethereum (ETH-USD) - Available from 2016-07-21
- Solana (SOL-USD) - Available from 2021-05-24
- Litecoin (LTC-USD) - Available from 2017-05-03
- Dogecoin (DOGE-USD) - Available from 2021-06-03
- dogwifhat (WIF-USD) - Available from 2024-11-13

## Development

### Setup

1. Clone the repository
2. Create and activate a virtual environment:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # On Windows: .venv\Scripts\activate
   ```
3. Install development dependencies:
   ```bash
   pip install -e ".[dev]"
   ```

### Testing

Run tests with pytest:
```bash
source .venv/bin/activate
pytest
```

Run tests with coverage:
```bash
pytest --cov=coinbase_data_fetcher
```

### Code Quality

The project uses Ruff for linting and Pyright for type checking:
```bash
ruff check src tests
pyright
```

### Requirements

- Python 3.9+
- Dependencies managed via pyproject.toml

## API Rate Limiting

The library includes built-in rate limiting (10 calls per second) and automatic retry logic with exponential backoff to handle Coinbase API limits gracefully.

## Caching

Fetched data is automatically cached locally to minimize API calls. The cache directory can be configured via the `COINBASE_CACHE_PATH` environment variable.

## License

MIT License

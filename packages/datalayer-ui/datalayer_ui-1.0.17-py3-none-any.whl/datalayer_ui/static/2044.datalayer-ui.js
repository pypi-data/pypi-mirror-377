"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[2044],{9857:(e,t,n)=>{n.d(t,{c:()=>a});const a=3},15069:(e,t,n)=>{n.d(t,{v:()=>c});var a=n(18683),r=n(9387),o=n(83121),i=n(26127),s=n(79435),l=n(41273);const u=e=>{const{message:t}=e,{loginAndNavigate:n}=(0,s.D)(),{logout:u,checkIAMToken:c,externalToken:d}=(0,i.Y)(),{enqueueToast:m}=(0,l.d)();return(0,r.useEffect)(()=>{d&&n(d,u,c).catch(e=>{console.debug("Failed to login with the provided token.",e),m("Failed to login with the provided token.",{variant:"error"})}).finally(()=>{m("Runtimes are available.",{variant:"success"})})},[d]),(0,a.jsx)(o.Y,{size:"small",message:t})},c=e=>(0,a.jsx)(u,{...e})},16878:(e,t,n)=>{n.d(t,{K:()=>u,N:()=>l});var a=n(63711),r=n(85181);const o="Assign a new Runtime",i="Assign an existing Remote Runtime",s="Assign an existing Runtime";function l(e,t,n,l=()=>!0,u){const c=(n=n??r.wK).load("jupyterlab"),d=e.local.kernelspecs.specs,m=e.local.sessions.running(),g={},h=Array.from(m).filter(e=>e.kernel&&e.kernel.id!==t&&d.kernelspecs[e.kernel.name]).map(e=>{const t=d.kernelspecs[e.kernel.name];return{kernelId:e.kernel.id,name:t.name,language:t.language,displayName:e.name||a.PathExt.basename(e.path),location:"local"}}).concat(Array.from(e.browser?.sessions.running()??[]).filter(e=>e.kernel&&e.kernel.id!==t).map(t=>{const n=e.browser.kernelspecs.specs.kernelspecs[t.kernel.name];return{id:"",kernelId:t.kernel.id,name:n.name,language:n.language,displayName:t.name||a.PathExt.basename(t.path),location:"browser"}})).filter(l),f=h.map(e=>e.kernelId),p=Array.from(e.local.kernels.running()).filter(e=>!f.includes(e.id)).map(e=>{const t=d.kernelspecs[e.name];return{kernelId:e.id,name:t.name,language:t.language,displayName:t.display_name,location:"local"}}).concat((e.remote?.runtimesManager.get()??[]).filter(e=>e.id&&!f.includes(e.id)).map(t=>{const n=e.remote.environments.get().find(e=>e.name===t.environment_name);return{kernelId:t.id,name:n.name,language:n.language,displayName:t.given_name??n.title,location:"remote",podName:t.pod_name,gpu:n.resources?.["nvidia.com/gpu"]}})).concat(Array.from(e.browser?.kernels.running()??[]).filter(e=>!f.includes(e.id)).map(t=>{const n=e.browser.kernelspecs.specs.kernelspecs[t.name];return{kernelId:t.id,name:n.name,language:n.language,displayName:n.display_name,location:"browser"}})).filter(l);h.push(...p),h.length&&(g["cell"===u?i:s]=h);const v=Object.values(d.kernelspecs).filter(e=>!!e).map(e=>({name:e.name,language:e.language,displayName:e.display_name,gpu:e.resources?.["nvidia.com/gpu"],location:"local"})).filter(l);return v.push(...e.remote?.environments.get().map(e=>({name:e.name,language:e.language,displayName:e.title,location:"remote",gpu:e.resources?.["nvidia.com/gpu"],burningRate:e.burning_rate})).filter(l)??[]),v.push(...Object.values(e.browser?.kernelspecs.specs?.kernelspecs??{}).filter(e=>!!e).map(e=>({name:e.name,language:e.language,displayName:e.display_name,location:"browser"})).filter(l)),v.length&&(g[c.__(o)]=v),g}function u(e){const{specs:t,preference:n}=e,{name:a,language:r,canStart:o,autoStartDefault:i}=n;if(!t||!1===o)return null;const s=i?t.default:null;if(!a&&!r)return s;for(const e in t.kernelspecs)if(e===a)return a;if(!r)return s;const l=[];for(const e in t.kernelspecs){const n=t.kernelspecs[e]?.language;r===n&&l.push(e)}if(1===l.length){const e=l[0];return console.warn("No exact match found for "+e+", using runtime "+e+" that matches language="+r),e}return s}},18035:(e,t,n)=>{n.d(t,{J:()=>u});var a={};function r(){return"\ndef _list_variables():\n    import json\n    from types import BuiltinFunctionType, BuiltinMethodType, FunctionType, MethodType, MethodWrapperType, ModuleType, TracebackType\n\n    _FORBIDDEN_TYPES = [type, BuiltinFunctionType, BuiltinMethodType, FunctionType, MethodType, MethodWrapperType, ModuleType, TracebackType]\n    try:\n        from IPython.core.autocall import ExitAutocall\n        _FORBIDDEN_TYPES.append(ExitAutocall)\n    except ImportError:\n        pass\n    _exclude = tuple(_FORBIDDEN_TYPES)\n\n    _all = frozenset(globals())\n    _vars = {}\n    for _n in _all:\n        _v = globals()[_n]\n        \n        if not (\n            _n.startswith('_') or\n            isinstance(_v, _exclude) or\n            # Special IPython variables\n            (_n == 'In' and isinstance(_v, list)) or\n            (_n == 'Out' and isinstance(_v, dict))\n        ):\n            _vars[_n] = type(_v).__qualname__\n\n    return json.dumps(_vars)\n\n_list_variables()"}function o(e){return`\ndef _pickle_variables():\n    from base64 import encodebytes\n    import json\n    import pickle\n    _names = {${e.map(e=>`"${e}"`).join(",")}}\n    _data = {}\n    for _n in _names:\n        try:\n            _v = globals()[_n]\n            dump = pickle.dumps(_v)\n            _data[_n] = encodebytes(dump).decode("ascii")\n        except:\n            ...\n\n    return json.dumps(_data)\n\n_pickle_variables()\n`}function i(e){return`\ndef _load_variables():\n    from base64 import decodebytes\n    import json\n    import pickle\n    _data = json.loads(${e})\n    _loaded = []\n    for _n, _v in _data.items():\n        try:\n            dump = decodebytes(_v.encode("ascii"))\n            globals()[_n] = pickle.loads(dump)\n            _loaded.append(_n)\n        except:\n            ...\n    return json.dumps(_loaded)\n\n_load_variables()\n`}function s(e){return`\ndef _change_current_directory():\n    import os\n    from pathlib import Path\n    _local_content_mount_point = Path(Path.home() / ${e.split("/").map(e=>`"${e}"`).join(" / ")})\n    _local_content_mount_point.mkdir(parents=True, exist_ok=True)\n    os.chdir(_local_content_mount_point)\n\n    assert Path.cwd() == _local_content_mount_point\n\n_change_current_directory()\n`}function l(e){return Array.from(e.matchAll(/^((?<output>[A-z][\w]*)\s*=[^=]|\((?<walrus>[A-z][\w]*)\s*:=[^=)]+\))/gm)).map(e=>e.groups?.output??e.groups?.walrus??"").filter(e=>!!e)}n.r(a),n.d(a,{changeCurrentWorkingDirectory:()=>s,getOutputCandidates:()=>l,listVariables:()=>r,loadVariables:()=>i,saveVariables:()=>o});class u{static $language=new Map;static register(e,t){this.$language.set(e,t)}static supports(e){return this.$language.has(e)}_language;constructor(e){if(!u.$language.has(e))throw new Error(`${e} is not supported.`);this._language=e}get language(){return this._language}changeCurrentWorkingDirectory(e){return u.$language.get(this.language).changeCurrentWorkingDirectory(e)}listVariables(){return u.$language.get(this.language).listVariables()}loadVariables(e){return u.$language.get(this.language).loadVariables(e)}saveVariables(e){return u.$language.get(this.language).saveVariables(e)}getOutputCandidates(e){return u.$language.get(this.language).getOutputCandidates(e)}}u.register("python",a)},57484:(e,t,n)=>{n.d(t,{I:()=>C});var a=n(18683),r=n(9387),o=n(85181),i=n(34447),s=n(67390),l=n(94907),u=n(58078),c=n(72533),d=n(70985),m=n(11029),g=n(81396),h=n(58875),f=n(36008),p=n(52982),v=n(38621),b=n(63948),w=n(72870),k=n(98970),y=n(75960),x=n(16878);const _=25;function C(e){const{disabled:t,display:n,filterRuntime:C,multiServiceManager:T,postActions:j,preActions:A,preference:M,runtimeDesc:D,sessionContext:S,setRuntimeDesc:I,translator:O,variant:E}=e,[N,U]=(0,r.useState)((0,x.N)(T,M?.id,O,C,E)),R=(0,r.useMemo)(()=>(O??o.wK).load("jupyterlab"),[O]),[P,Y]=(0,r.useState)(!1),z={maxHeight:"large",width:"cell"===E?"small":"auto"};return(0,r.useEffect)(()=>{if(S&&N){const e=S.session?.kernel?.id;e&&Object.entries(N).forEach(([t,n])=>{n.forEach(t=>{t.kernelId===e&&I(t)})})}Y(!0)},[N]),(0,a.jsx)(a.Fragment,{children:"menu"===n?(0,a.jsxs)(d.W,{children:["cell"===E?(0,a.jsx)(d.W.Anchor,{children:(0,a.jsx)(h.K,{disabled:t||null===N,icon:()=>(0,a.jsx)("span",{className:"dla-Cell-runtime-icon",children:(0,a.jsx)(v.GQJ,{})}),"aria-label":R.__("Assign a Runtime to the Cell."),title:R.__("Assign a Runtime to the Cell."),size:"small",variant:"invisible"})}):(0,a.jsxs)(d.W.Button,{variant:"default",disabled:t||null===N,children:[(0,a.jsx)(c.A,{fontWeight:"bold",children:R.__("Runtime:")})," "+(D?.displayName??R.__("No Runtime"))]}),(0,a.jsx)(d.W.Overlay,{...z,width:"medium",sx:{overflowY:"auto"},side:"cell"===E?"outside-left":"outside-right",children:(0,a.jsxs)(i.l,{selectionVariant:"single",children:["cell"===E&&(0,a.jsxs)(i.l.Item,{selected:void 0===D,onSelect:()=>{I(void 0)},children:[M?.location&&(0,a.jsx)(i.l.LeadingVisual,{children:"local"===M.location?(0,a.jsx)(w.A,{}):"browser"===M.location?(0,a.jsx)(b.A,{}):(0,a.jsx)(f.A,{})}),R.__("Assign the Notebook Runtime")]},"null"),!!A&&A,Object.entries(N??{}).map(([e,t])=>(0,a.jsxs)(i.l.Group,{children:[(0,a.jsx)(i.l.GroupHeading,{children:e}),t.map(e=>{const t=e.podName?` - ${e.podName.split("-",2).reverse()[0]}`:e.kernelId?` - ${e.kernelId}`:"",n=(e.displayName??"")+t,r=(e.displayName?.length??0)>_?e.displayName.slice(0,_)+"â€¦":e.displayName??"";return(0,a.jsxs)(i.l.Item,{title:n,selected:(e.location===e?.location||(0,y.R)(e.location)&&(0,y.R)(e?.location??"local"))&&(e.kernelId??e.name)===(e?.kernelId??e?.name),onSelect:()=>{I(e)},children:[(0,a.jsx)(i.l.LeadingVisual,{children:"local"===e.location?(0,a.jsx)(w.A,{}):"browser"===e.location?(0,a.jsx)(b.A,{}):(0,a.jsx)(f.A,{})}),r+t.slice(0,10)]},e.name)})]},e)),!!j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.l.Divider,{}),j]})]})})]}):(0,a.jsxs)(a.Fragment,{children:[P&&(0,a.jsx)(g.A,{name:"kernel-options","aria-labelledby":"kernel-options",children:Object.entries(N??{}).map(([e,t])=>(0,a.jsxs)(p.az,{children:[(0,a.jsx)(p.az,{as:"h4",style:{marginTop:0},children:e}),t.map(e=>(0,a.jsxs)(p.az,{title:e.name,children:[(0,a.jsxs)(m.A,{children:[(0,a.jsx)(l.A,{value:e.kernelId,onChange:()=>{I(e)},checked:(e.location===e?.location||(0,y.R)(e.location)&&(0,y.R)(e?.location??"local"))&&(e.kernelId??e.name)===(D?.kernelId??D?.name)}),(0,a.jsx)(m.A.Label,{children:(0,a.jsxs)(p.az,{display:"flex",children:[(0,a.jsx)(p.az,{children:e.displayName}),e.kernelId&&"remote"===e.location&&(0,a.jsx)(p.az,{ml:3,mt:1,children:(0,a.jsx)(k.m,{kernelId:e.kernelId,serviceManager:T.remote},"credits-indicator")})]})}),(0,a.jsx)(m.A.Caption,{children:(0,a.jsxs)(u.A,{sx:{marginTop:1},children:[(0,a.jsx)(s.A,{variant:"secondary",children:e.name}),(0,a.jsx)(s.A,{variant:"secondary",sx:{marginLeft:1},children:e.location}),e.burningRate&&(0,a.jsxs)(s.A,{variant:"sponsors",sx:{marginLeft:1},children:[e.burningRate," credits/second"]}),e.gpu&&(0,a.jsx)(s.A,{variant:"success",sx:{marginLeft:1},children:"GPU"})]})})]}),(0,a.jsx)(i.l.Divider,{})]},e.kernelId))]},e))}),!!j&&(0,a.jsx)(a.Fragment,{children:j})]})})}},59176:(e,t,n)=>{n.d(t,{m:()=>f});var a=n(18683),r=n(9387),o=n(87123),i=n(85181),s=n(98238),l=n(36848),u=n(18035),c=n(11029),d=n(13931),m=n(8038),g=n(52982);function h(e){const{getInputOptions:t,getOutputOptions:n,inputs:o,output:l,setInputs:u,setOutput:h,translator:f}=e,p=(0,r.useMemo)(()=>(f??i.wK).load("jupyterlab"),[f]),v=(0,r.useRef)(null),[b,w]=(0,r.useState)(!1),[k,y]=(0,r.useState)(!!t),[x,_]=(0,r.useState)(null),[C,T]=(0,r.useState)(o.map(e=>({id:e,text:e,selected:!0}))),[j,A]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=o.filter(e=>!C.find(t=>t.text===e));e.length&&T([...C,...e.map(e=>({id:e,text:e,selected:!0}))])},[o]),(0,r.useEffect)(()=>{const e=C.filter(e=>e.selected).map(e=>e.text);s.JSONExt.deepEqual(o,e)||u(e)},[C]),(0,r.useEffect)(()=>{k&&(t?t().then(e=>{const t=C.map(e=>e.text);T([...C,...e.sort().filter(e=>!t.includes(e)).map(e=>({id:e,text:e,selected:!1}))]),y(!1)}):y(!1))},[C,t]),(0,r.useEffect)(()=>{n&&Promise.all([n(),t?.()]).then(([e,t])=>{_(e.sort().concat((t??[]).sort()).reduce((e,t)=>(e.includes(t)||e.push(t),e),[]).map(e=>({id:e,text:e,selected:!1})))}).catch(e=>{console.error("Failed to get the cell output candidates",e),_([])})},[n,t]);const M=(0,r.useCallback)(e=>{const t=C.findIndex(t=>t.id===e);t>=0&&(C.splice(t,1),T([...C]))},[C]),D=(0,r.useCallback)(e=>{Array.isArray(e)||(e=[e]);const t=e.map(e=>e.id);T([...C.map(e=>t.includes(e.id)?Object.assign(e,{selected:!0}):Object.assign(e,{selected:!1}))])},[C]),S=(0,r.useCallback)(e=>{const t=C.find(t=>t.id===e.id);t?(t.selected=!0,T([...C])):T([...C,e])},[C]),I=(0,r.useCallback)(e=>{e.currentTarget&&A(e.currentTarget.value)},[]),O=(0,r.useCallback)(e=>{e.currentTarget&&h(e.currentTarget.value)},[]),E=(0,r.useCallback)(e=>{b?v.current&&!e&&(h(v.current.value),w(!1)):e&&w(!0)},[b]);return(0,a.jsxs)(g.az,{as:"form",sx:{p:3},children:[(0,a.jsxs)(c.A,{children:[(0,a.jsx)(c.A.Label,{id:"cell-input-variables",children:p.__("Inputs")}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Input,{as:m.A,tokens:C.filter(e=>e.selected),onTokenRemove:M,onChange:I}),(0,a.jsx)(d.A.Overlay,{children:(0,a.jsx)(d.A.Menu,{addNewItem:j&&!C.find(e=>e.text===j)?{id:j,text:p.__("Add '%1'",j),handleAddItem:e=>{S({...e,text:j,selected:!0}),A("")}}:void 0,items:C,selectedItemIds:C.filter(e=>e.selected).map(e=>e.id),onSelectedChange:D,"aria-labelledby":"cell-input-variables",selectionVariant:"multiple",emptyStateText:p.__("No available variables."),loading:k})})]})]}),(0,a.jsxs)(c.A,{children:[(0,a.jsx)(c.A.Label,{id:"cell-output-variables",children:p.__("Output")}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Input,{ref:v,value:l,onChange:O}),(0,a.jsx)(d.A.Overlay,{children:(0,a.jsx)(d.A.Menu,{items:x??[],selectedItemIds:l?[l]:[],"aria-labelledby":"cell-output-variables",loading:n&&!x,emptyStateText:p.__("Not among the available variables."),onOpenChange:E})})]})]})]})}function f(e){const{onClose:t,model:n,preference:c,sessionContext:d,translator:m}=e,[g,f]=(0,r.useState)([]),[p,v]=(0,r.useState)(),b=(0,r.useMemo)(()=>(m??i.wK).load("jupyterlab"),[m]);(0,r.useEffect)(()=>{const e=e=>{const t=e.getMetadata("datalayer")??{};t.in&&!s.JSONExt.deepEqual(g,t.in)&&f(t.in),t.out&&t.out!==p&&v(t.out)};return e(n),n.metadataChanged.connect(e),()=>{n.metadataChanged.disconnect(e)}},[n,g,p]);const w=(0,r.useCallback)(()=>{const e=n.getMetadata("datalayer")??{};g.length?e.in=g:delete e.in,p?e.out=p:delete e.out,n.setMetadata("datalayer",{...e}),t()},[n,g,p,t]),k=(0,r.useCallback)(async()=>{if(!d)return[];const e=d.session.kernel,t=d.specsManager.specs.kernelspecs[e.model.name],n=new u.J(t.language),a=(await new l.D({connection:e}).execute(n.listVariables())).get(0).data["text/plain"];if(a){const e=JSON.parse(a.slice(1,a.length-1));return Object.keys(e??{})}return[]},[c,d]),y=(0,r.useCallback)(async()=>new u.J("python").getOutputCandidates(n.sharedModel.source),[n]);let x="Define cell variables to transfer";const _=(n.getMetadata("datalayer")??{}).kernel??{},C=(_.displayName||_.name)??"";return C&&(!1!==_.params?.notebook&&_.id?x+=` with running ${C} (${_.id.slice(0,7)})`:x+=` with ${C}`),(0,a.jsx)(o.l,{title:x,onClose:t,footerButtons:[{buttonType:"default",content:b.__("Cancel"),onClick:t},{buttonType:"primary",content:b.__("Set variables"),onClick:w,autoFocus:!0}],children:(0,a.jsx)(h,{inputs:g,getInputOptions:d?k:void 0,setInputs:f,output:p??void 0,getOutputOptions:y,setOutput:v,translator:m})})}},60372:(e,t,n)=>{n.d(t,{B:()=>_});var a=n(18683),r=n(9387),o=n(85181),i=n(34447),s=n(36008),l=n(26127),u=n(9570),c=n(75960),d=n(18035),m=n(15069),g=n(11029),h=n(81089),f=n(72533),p=n(52982),v=n(87123),b=n(25547);function w(e){const{model:t,onClose:n,language:i,snippets:s,markdownParser:l,sanitizer:u,translator:c}=e,[d,m]=(0,r.useState)(s[0]),w=(0,r.useMemo)(()=>(c??o.wK).load("jupyterlab"),[c]),k=(0,r.useCallback)(e=>{const t=e.target.value;m(s[parseInt(t,10)])},[m,s]),y=(0,r.useCallback)(()=>{const e=t.sharedModel.getSource().length;t.sharedModel.updateSource(e,e,"\n".repeat(e?2:0)+d.code),n()},[t,d,n]);return(0,a.jsx)(v.l,{title:"Pick a snippet to inject",onClose:n,footerButtons:[{buttonType:"default",content:w.__("Cancel"),onClick:n},{buttonType:"primary",content:w.__("Inject snippet"),onClick:y,autoFocus:!0}],children:(0,a.jsx)(p.az,{as:"form",children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(g.A.Label,{}),(0,a.jsx)(h.A,{block:!0,onChange:k,children:s.map((e,t)=>(0,a.jsx)(h.A.Option,{value:`${t}`,children:e.title},t))}),(0,a.jsxs)(g.A.Caption,{children:[d.description&&(0,a.jsx)(f.A,{as:"p",children:d.description}),l?(0,a.jsx)(b.o,{markdownParser:l,sanitizer:u,text:`\`\`\`${i}\n${d.code}\`\`\``}):(0,a.jsx)("code",{children:d.code})]})]})})})}var k=n(59017),y=n(57484),x=n(59176);function _(e){const{logIn:t,markdownParser:n,model:g,preference:h,sanitizer:f,multiServiceManager:p,sessionContext:v,translator:b}=e,{token:_}=(0,l.Y)(),{configuration:C}=(0,u._O)(),[T,j]=(0,r.useState)(!1),[A,M]=(0,r.useState)(!1),[D,S]=(0,r.useState)(!1),[I,O]=(0,r.useState)(!1),[E,N]=(0,r.useState)(""),[U,R]=(0,r.useState)([]),[P,Y]=(0,r.useState)(!1),z=(0,r.useMemo)(()=>(b??o.wK).load("jupyterlab"),[b]);(0,r.useEffect)(()=>{const e=e=>{const t=(e.getMetadata("datalayer")??{}).kernel;j(!!t),M(!1===t?.params?.notebook);const n=new Array;if(t){const e=p.remote?.environments.get().find(e=>e.name===t.name);N(e?.language??""),e?.snippets&&n.push(...e.snippets)}R(n)};return e(g),g.metadataChanged.connect(e),()=>{g.metadataChanged.disconnect(e)}},[g]);const L=(0,r.useCallback)(e=>!!e.kernelId&&(0,c.R)(e.location)&&(!h?.language||e.language===h?.language),[h]),F=(0,r.useCallback)(e=>{const t=g.getMetadata("datalayer")??{kernel:void 0};e?g.setMetadata("datalayer",Object.assign(t,{kernel:e})):(delete t.kernel,g.setMetadata("datalayer",t))},[g]),q=(0,r.useCallback)(()=>{O(!1)},[]),W=(0,r.useCallback)(()=>{O(!0)},[]),$=(0,r.useCallback)(()=>{Y(!1)},[]),B=(0,r.useCallback)(()=>{Y(!0)},[]),H=(0,r.useCallback)(()=>{S(!0)},[]),G=(0,r.useCallback)(e=>{e&&(e.params={...e.params,notebook:!1},F(e)),S(!1)},[F]),V=g.getMetadata("datalayer")??{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.I,{display:"menu",filterRuntime:L,preference:h,multiServiceManager:p,runtimeDesc:V.kernel?V.kernel:void 0,setRuntimeDesc:F,variant:"cell",preActions:(0,a.jsxs)(i.l.Item,{disabled:!p.remote,onSelect:H,selected:A,title:p.remote?"Assign a new temporary Runtime on each Cell execution.":"You are not connected with Datalayer.",children:[(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)(s.A,{})}),z.__("Assign a Cell Runtime")]}),postActions:_||!t?(0,a.jsxs)(a.Fragment,{children:[d.J.supports(h?.language??"")&&(0,a.jsx)(i.l.Item,{onSelect:W,disabled:!T,title:z.__("Define variables to transfer between the document kernel and the cell kernel."),children:z.__("Define Cell Variables Transfer")}),!C.whiteLabel&&(0,a.jsx)(i.l.Item,{onSelect:B,disabled:0===U.length,title:z.__("Inject a code snippet at the end of the cell."),children:z.__("Inject Code Snippet")})]}):(0,a.jsx)(i.l.Item,{onSelect:e.logIn,title:"Connect to the Runtime provider.",children:(0,a.jsx)(m.v,{message:"Connect to the Runtime provider"})}),translator:b}),I&&(0,a.jsx)(x.m,{model:g,onClose:q,preference:h,sessionContext:v,translator:b}),P&&(0,a.jsx)(w,{language:E,model:g,snippets:U,onClose:$,markdownParser:n,sanitizer:f}),D&&(0,a.jsx)(k.D,{manager:p.remote,onSubmit:G,startRuntime:!1,markdownParser:n,sanitizer:f})]})}},63806:(e,t,n)=>{n.d(t,{A:()=>Y});var a=n(34037),r=n(58362),o=n(12348);var i=n(45355);function s(e){(0,r.A)(1,arguments);var t=(0,o.A)(e),n=t.getUTCDay(),a=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function l(e){(0,r.A)(1,arguments);var t=(0,o.A)(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=s(a),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=s(l);return t.getTime()>=i.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}var u=n(12151);function c(e,t){var n,a,s,l,c,d,m,g;(0,r.A)(1,arguments);var h=(0,u.q)(),f=(0,i.A)(null!==(n=null!==(a=null!==(s=null!==(l=null==t?void 0:t.weekStartsOn)&&void 0!==l?l:null==t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:h.weekStartsOn)&&void 0!==a?a:null===(m=h.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==n?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=(0,o.A)(e),v=p.getUTCDay(),b=(v<f?7:0)+v-f;return p.setUTCDate(p.getUTCDate()-b),p.setUTCHours(0,0,0,0),p}function d(e,t){var n,a,s,l,d,m,g,h;(0,r.A)(1,arguments);var f=(0,o.A)(e),p=f.getUTCFullYear(),v=(0,u.q)(),b=(0,i.A)(null!==(n=null!==(a=null!==(s=null!==(l=null==t?void 0:t.firstWeekContainsDate)&&void 0!==l?l:null==t||null===(d=t.locale)||void 0===d||null===(m=d.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==s?s:v.firstWeekContainsDate)&&void 0!==a?a:null===(g=v.locale)||void 0===g||null===(h=g.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(p+1,0,b),w.setUTCHours(0,0,0,0);var k=c(w,t),y=new Date(0);y.setUTCFullYear(p,0,b),y.setUTCHours(0,0,0,0);var x=c(y,t);return f.getTime()>=k.getTime()?p+1:f.getTime()>=x.getTime()?p:p-1}function m(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}const g=function(e,t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return m("yy"===t?a%100:a,t.length)},h=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):m(n+1,2)},f=function(e,t){return m(e.getUTCDate(),t.length)},p=function(e,t){return m(e.getUTCHours()%12||12,t.length)},v=function(e,t){return m(e.getUTCHours(),t.length)},b=function(e,t){return m(e.getUTCMinutes(),t.length)},w=function(e,t){return m(e.getUTCSeconds(),t.length)},k=function(e,t){var n=t.length,a=e.getUTCMilliseconds();return m(Math.floor(a*Math.pow(10,n-3)),t.length)};function y(e,t){var n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;if(0===o)return n+String(r);var i=t||"";return n+String(r)+i+m(o,2)}function x(e,t){return e%60==0?(e>0?"-":"+")+m(Math.abs(e)/60,2):_(e,t)}function _(e,t){var n=t||"",a=e>0?"-":"+",r=Math.abs(e);return a+m(Math.floor(r/60),2)+n+m(r%60,2)}const C={G:function(e,t,n){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var a=e.getUTCFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return g(e,t)},Y:function(e,t,n,a){var r=d(e,a),o=r>0?r:1-r;return"YY"===t?m(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):m(o,t.length)},R:function(e,t){return m(l(e),t.length)},u:function(e,t){return m(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return m(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return m(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){var a=e.getUTCMonth();switch(t){case"M":case"MM":return h(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return m(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){var s=function(e,t){(0,r.A)(1,arguments);var n=(0,o.A)(e),a=c(n,t).getTime()-function(e,t){var n,a,o,s,l,m,g,h;(0,r.A)(1,arguments);var f=(0,u.q)(),p=(0,i.A)(null!==(n=null!==(a=null!==(o=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t||null===(l=t.locale)||void 0===l||null===(m=l.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==o?o:f.firstWeekContainsDate)&&void 0!==a?a:null===(g=f.locale)||void 0===g||null===(h=g.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1),v=d(e,t),b=new Date(0);return b.setUTCFullYear(v,0,p),b.setUTCHours(0,0,0,0),c(b,t)}(n,t).getTime();return Math.round(a/6048e5)+1}(e,a);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):m(s,t.length)},I:function(e,t,n){var a=function(e){(0,r.A)(1,arguments);var t=(0,o.A)(e),n=s(t).getTime()-function(e){(0,r.A)(1,arguments);var t=l(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),s(n)}(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):m(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):f(e,t)},D:function(e,t,n){var a=function(e){(0,r.A)(1,arguments);var t=(0,o.A)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=n-t.getTime();return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):m(a,t.length)},E:function(e,t,n){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return m(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return m(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var a=e.getUTCDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return m(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var a,r=e.getUTCHours();switch(a=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var a,r=e.getUTCHours();switch(a=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return p(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):v(e,t)},K:function(e,t,n){var a=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):m(a,t.length)},k:function(e,t,n){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):m(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):b(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):w(e,t)},S:function(e,t){return k(e,t)},X:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return x(r);case"XXXX":case"XX":return _(r);default:return _(r,":")}},x:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return x(r);case"xxxx":case"xx":return _(r);default:return _(r,":")}},O:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+y(r,":");default:return"GMT"+_(r,":")}},z:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+y(r,":");default:return"GMT"+_(r,":")}},t:function(e,t,n,a){var r=a._originalDate||e;return m(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,n,a){return m((a._originalDate||e).getTime(),t.length)}};var T=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},j=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const A={p:j,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return T(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",T(r,t)).replace("{{time}}",j(o,t))}};var M=n(55183),D=["D","DD"],S=["YY","YYYY"];function I(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var O=n(20635),E=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,U=/^'([^]*?)'?$/,R=/''/g,P=/[a-zA-Z]/;function Y(e,t,n){var s,l,c,d,m,g,h,f,p,v,b,w,k,y,x,_,T,j;(0,r.A)(2,arguments);var Y=String(t),z=(0,u.q)(),L=null!==(s=null!==(l=null==n?void 0:n.locale)&&void 0!==l?l:z.locale)&&void 0!==s?s:O.A,F=(0,i.A)(null!==(c=null!==(d=null!==(m=null!==(g=null==n?void 0:n.firstWeekContainsDate)&&void 0!==g?g:null==n||null===(h=n.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==m?m:z.firstWeekContainsDate)&&void 0!==d?d:null===(p=z.locale)||void 0===p||null===(v=p.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==c?c:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var q=(0,i.A)(null!==(b=null!==(w=null!==(k=null!==(y=null==n?void 0:n.weekStartsOn)&&void 0!==y?y:null==n||null===(x=n.locale)||void 0===x||null===(_=x.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==k?k:z.weekStartsOn)&&void 0!==w?w:null===(T=z.locale)||void 0===T||null===(j=T.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==b?b:0);if(!(q>=0&&q<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var W=(0,o.A)(e);if(!function(e){if((0,r.A)(1,arguments),!function(e){return(0,r.A)(1,arguments),e instanceof Date||"object"===(0,a.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=(0,o.A)(e);return!isNaN(Number(t))}(W))throw new RangeError("Invalid time value");var $=function(e,t){return(0,r.A)(2,arguments),function(e,t){(0,r.A)(2,arguments);var n=(0,o.A)(e).getTime(),a=(0,i.A)(t);return new Date(n+a)}(e,-(0,i.A)(t))}(W,(0,M.A)(W)),B={firstWeekContainsDate:F,weekStartsOn:q,locale:L,_originalDate:W};return Y.match(N).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,A[t])(e,L.formatLong):e}).join("").match(E).map(function(a){if("''"===a)return"'";var r,o,i=a[0];if("'"===i)return(o=(r=a).match(U))?o[1].replace(R,"'"):r;var s,l=C[i];if(l)return null!=n&&n.useAdditionalWeekYearTokens||(s=a,-1===S.indexOf(s))||I(a,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==D.indexOf(e)}(a)||I(a,t,String(e)),l($,a,L.localize,B);if(i.match(P))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return a}).join("")}},69584:(e,t,n)=>{n.d(t,{X:()=>o,n:()=>r});var a=n(98238);const r=new a.Token("@jupyterlab/coreutils:ISettingConnector","A service to connect to the settings endpoint."),o=new a.Token("@jupyterlab/coreutils:ISettingRegistry",'A service for the JupyterLab settings system.\n  Use this if you want to store settings for your application.\n  See "schemaDir" for more information.')},75960:(e,t,n)=>{n.d(t,{R:()=>r});const a=["browser","local"];function r(e){return!a.includes(e)}},89460:(e,t,n)=>{n.d(t,{W_:()=>s,fI:()=>i,p8:()=>r,w9:()=>o});var a=n(98238);const r=new a.Token("@jupyterlab/notebook:INotebookWidgetFactory","A service to create the notebook viewer."),o=new a.Token("@jupyterlab/notebook:INotebookTools",'A service for the "Notebook Tools" panel in the\n  right sidebar. Use this to add your own functionality to the panel.'),i=new a.Token("@jupyterlab/notebook:INotebookTracker","A widget tracker for notebooks.\n  Use this if you want to be able to iterate over and interact with notebooks\n  created by the application."),s=new a.Token("@jupyterlab/notebook:INotebookCellExecutor","The notebook cell executor")},94064:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(9387);const r={small:16,medium:32,large:64};function o({title:e,titleId:t,size:n,...o},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:i,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},o),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fill:"#b1cc33",d:"M51.56 17.73c-.509.003-1.018.034-1.524.091l-.673.072-.317-.6c-2.673-5.047-8.5-8.308-14.854-8.308-9.026 0-16.369 6.4-16.369 14.268.002.517.035 1.032.1 1.544l.1.824-.792.251c-4.015 1.272-6.608 4.186-6.608 7.421 0 4.445 4.851 8.061 10.813 8.061 2.305.023 4.575-.559 6.584-1.688l.591-.34.19.15.343.275c2.714 2.167 7.082 3.462 11.683 3.462 7.763 0 14.32-3.69 14.32-8.06a4.411 4.411 0 00-.077-.806l-.139-.75-.021-.118.842-.266c4.021-1.27 6.621-4.185 6.621-7.425.002-4.439-4.85-8.058-10.813-8.058z"}),a.createElement("path",{fill:"#5c9e31",d:"M39.468 27.997s4.917 7.331 15.443 5.488l.891 3.572-4 4.922-9.214 2.032-12.13-2.555-1.846-2.126A17.56 17.56 0 0039.47 27.997z"}),a.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeWidth:2},a.createElement("path",{strokeLinejoin:"round",d:"M35.79 63.943V52.776l-7.631-7.516M35.789 52.776l4.368-4.546"}),a.createElement("path",{strokeMiterlimit:10,d:"M63.374 25.773c0-5-5.289-9.06-11.813-9.06a15.38 15.38 0 00-1.63.1c-2.764-5.217-8.763-8.84-15.739-8.84-9.593 0-17.369 6.836-17.369 15.268.002.558.038 1.114.108 1.667-4.288 1.36-7.306 4.595-7.306 8.374 0 5 5.29 9.061 11.813 9.061 2.48.021 4.922-.607 7.084-1.822 2.791 2.23 7.257 3.681 12.307 3.681 8.461 0 15.32-4.057 15.32-9.06a5.464 5.464 0 00-.094-.987c4.294-1.36 7.32-4.598 7.32-8.382z"})))}const i=a.forwardRef(o)}}]);
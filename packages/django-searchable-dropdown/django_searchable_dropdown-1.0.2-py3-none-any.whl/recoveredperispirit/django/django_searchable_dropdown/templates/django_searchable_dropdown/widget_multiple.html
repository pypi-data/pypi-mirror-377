{% load static %}

<div class="searchable-dropdown searchable-dropdown-multiple" 
     data-type="{{ dropdown_type|default:'default' }}"
     {% if max_selections %}data-max-selections="{{ max_selections }}"{% endif %}
     {% if ajax_url %}data-ajax-url="{{ ajax_url }}"{% endif %}
     {% if min_search_length %}data-min-search-length="{{ min_search_length }}"{% endif %}
     {% if max_results %}data-max-results="{{ max_results }}"{% endif %}
     {% if allow_clear != None %}data-allow-clear="{{ allow_clear|yesno:'true,false' }}"{% endif %}
     {% if allow_create != None %}data-allow-create="{{ allow_create|yesno:'true,false' }}"{% endif %}>
    <div class="dropdown-display" tabindex="0">
        <div class="selected-items">
            <span class="selected-text">{{ placeholder|default:'Selecione opções' }}</span>
        </div>
        <i class="bi bi-chevron-down dropdown-arrow"></i>
    </div>
    
    <div class="dropdown-menu">
        <div class="search-container">
            <input type="text" class="search-input" 
                   placeholder="{{ search_placeholder|default:'Digite para buscar...' }}">
            <i class="bi bi-search search-icon"></i>
        </div>
        
        <div class="options-container">
            {% for choice in widget.choices %}
                <div class="dropdown-option" data-value="{{ choice.0 }}">
                    <i class="bi bi-check2 option-checkbox"></i>
                    {{ choice.1 }}
                </div>
            {% endfor %}
        </div>
        
        <div class="no-results" style="display: none;">
            {{ no_results_text|default:'Nenhum resultado encontrado' }}
        </div>
        
        <div class="multiple-actions">
            <button type="button" class="btn btn-sm btn-outline-primary select-all">
                Selecionar Todos
            </button>
            <button type="button" class="btn btn-sm btn-outline-secondary clear-all">
                Limpar
            </button>
        </div>
    </div>
    
    <select name="{{ name }}" id="{{ attrs.id }}" multiple style="display: none;">
        {% for choice in widget.choices %}
            <option value="{{ choice.0 }}" 
                    {% if choice.0 in value %}selected{% endif %}>
                {{ choice.1 }}
            </option>
        {% endfor %}
    </select>
</div>

<link rel="stylesheet" href="{% static 'css/searchable-dropdown.css' %}">


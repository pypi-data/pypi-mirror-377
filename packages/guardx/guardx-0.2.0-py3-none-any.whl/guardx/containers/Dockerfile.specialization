FROM registry.access.redhat.com/ubi9/python-311:1-34 AS builder

WORKDIR /app

COPY src src
COPY requirements.txt .

RUN pip3 install -r requirements.txt

RUN /bin/bash -c "$(curl -fsSL https://exaloop.io/install.sh)"
ENV PATH="/opt/app-root/src/.codon/bin:$PATH"

ENTRYPOINT ["python"]
CMD ["src/app.py"]

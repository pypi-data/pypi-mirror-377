# arroy vs hannoy
Results below ran on a machine with 8xIntel(R) Core(TM) i7-6900K CPUs @ 3.20GHz using [this branch](https://github.com/meilisearch/vector-store-relevancy-benchmark/compare/main...nnethercott:vector-store-relevancy-benchmark:arroy-hannoy) in [this repo](https://github.com/meilisearch/vector-store-relevancy-benchmark).

## datacomp-small-768
- hannoy: `M=24`, `ef_construction=512`, `ef_search=200`
- distance: cosine

| # of Vectors | Build Time | DB Size     | Recall@1 | Recall@5 | Recall@10 | Recall@50 | Recall@100 | Search Latency (ms)                             |
|--------------|------------|-------------|----------|----------|-----------|-----------|------------|-------------------------------------------------|
| 10K (arroy)  | 1.18 s     | 71.30 MiB   | 0.95     | 0.84     | 0.84      | 0.91      | 0.95       | 16.75 ms (100%) / 11.25 ms (10%)               |
| 50K (arroy)  | 25.61 s    | 451.89 MiB  | 0.93     | 0.78     | 0.80      | 0.88      | 0.88       | 43.81 ms (100%) / 27.92 ms (10%)               |
| 100K (arroy) | 78.31 s    | 1.02 GiB    | 0.95     | 0.75     | 0.77      | 0.85      | 0.89       | 65.95 ms (100%) / 46.91 ms (10%)               |
| 500K (arroy) | 860.64 s   | 6.87 GiB    | 0.88     | 0.75     | 0.77      | 0.85      | 0.87       | 142.34 ms (100%) / 114.12 ms (10%)             |
| 1M (arroy)   | 2386.92 s  | 16.19 GiB   | 0.96     | 0.80     | 0.83      | 0.87      | 0.90       | 190.84 ms (100%) / 160.12 ms (10%)             |
| **--- arroy → hannoy ---** |            |             |          |          |           |           |            |                                                 |
| 10K (hannoy) | 1.16 s     | 40.31 MiB   | 0.91     | 0.95     | 0.95      | 0.97      | 0.97       | 9.53 ms                                        |
| 50K (hannoy) | 12.27 s    | 201.39 MiB  | 0.91     | 0.93     | 0.93      | 0.95      | 0.91       | 13.49 ms                                       |
| 100K (hannoy)| 31.51 s    | 404.24 MiB  | 0.92     | 0.92     | 0.93      | 0.94      | 0.92       | 15.73 ms                                       |
| 500K (hannoy)| 226.31 s   | 2.00 GiB    | 0.86     | 0.90     | 0.90      | 0.91      | 0.89       | 24.23 ms                                       |
| 1M (hannoy)  | 506.41 s   | 4.03 GiB    | 0.95     | 0.93     | 0.94      | 0.94      | 0.94       | 29.89 ms                                       |
| 10M (hannoy) | 7216.37 s  | 41.39 GiB   | 0.89     | 0.87     | 0.87      | 0.86      | 0.86       | 53.28 ms                                       |

## wikipedia-22-12-simple-768
- hannoy: `M=16`, `ef_construction=48`, `ef_search=5*nns.min(100)`
- distance: cosine

| # of Vectors | Build Time | DB Size     | Recall@1 | Recall@5 | Recall@10 | Recall@50 | Recall@100 | Search Latency (ms)                             |
|--------------|------------|-------------|----------|----------|-----------|-----------|------------|-------------------------------------------------|
| 10K (arroy)  | 723.92 ms  | 69.18 MiB   | 1.00     | 0.96     | 0.98      | 0.99      | 1.00       | 15.82 ms (100%) / 9.43 ms (10%)                |
| 50K (arroy)  | 15.19 s    | 445.64 MiB  | 1.00     | 0.90     | 0.92      | 0.97      | 0.99       | 48.11 ms (100%) / 26.36 ms (10%)               |
| 100K (arroy) | 46.77 s    | 1008.54 MiB | 1.00     | 0.89     | 0.92      | 0.97      | 0.98       | 72.95 ms (100%) / 44.91 ms (10%)               |
| 485K (arroy) | 483.82 s   | 6.64 GiB    | 1.00     | 0.81     | 0.86      | 0.96      | 0.97       | 152.87 ms (100%) / 117.14 ms (10%)             |
| **--- arroy → hannoy ---** |            |             |          |          |           |           |            |                                                 |
| 10K (hannoy) | 259.23 ms  | 40.17 MiB   | 0.98     | 0.99     | 0.99      | 1.00      | 1.00       | 6.95 ms                                        |
| 50K (hannoy) | 1.95 s     | 200.81 MiB  | 0.90     | 0.97     | 0.98      | 0.99      | 0.99       | 11.58 ms                                       |
| 100K (hannoy)| 4.91 s     | 402.59 MiB  | 0.89     | 0.97     | 0.97      | 0.98      | 0.99       | 13.31 ms                                       |
| 485K (hannoy)| 36.10 s    | 1.92 GiB    | 0.77     | 0.86     | 0.89      | 0.94      | 0.96       | 20.00 ms                                       |

## db-pedia-ada002-1536
- hannoy: `M=16`, `ef_construction=33`, `ef_search=5*nns.min(100)`
- distance: cosine

| # of Vectors | Build Time | DB Size     | Recall@1 | Recall@5 | Recall@10 | Recall@50 | Recall@100 | Search Latency (ms) |
|--------------|------------|-------------|----------|----------|-----------|-----------|------------|----------------------|
| 10K (arroy)  | 494.72 ms  | 93.94 MiB   | 1.00     | 0.80     | 0.86      | 0.98      | 0.99       | 22.15 ms (100%) / 8.93 ms (10%)              |
| 50K (arroy)  | 9.86 s     | 527.14 MiB  | 1.00     | 0.68     | 0.75      | 0.93      | 0.97       | 56.16 ms (100%) / 28.80 ms (10%)             |
| 100K (arroy) | 29.73 s    | 1.10 GiB    | 1.00     | 0.69     | 0.74      | 0.91      | 0.96       | 89.72 ms (100%) / 51.55 ms (10%)             |
| 500K (arroy) | 343.20 s   | 6.55 GiB    | 1.00     | 0.70     | 0.74      | 0.91      | 0.95       | 176.91 ms (100%) / 138.49 ms (10%)            |
| 1M (arroy)   | 955.92 s   | 14.45 GiB   | 1.00     | 0.75     | 0.77      | 0.92      | 0.95       | 227.89 ms (100%) / 191.47 ms (10%)            |
| **--- arroy → hannoy ---** |            |             |          |          |           |           |            |                      |
| 10K (hannoy) | 474.26 ms  | 79.49 MiB   | 0.95     | 0.95     | 0.95      | 0.98      | 0.98       | 9.53 ms              |
| 50K (hannoy) | 3.61 s     | 397.35 MiB  | 0.93     | 0.92     | 0.93      | 0.95      | 0.96       | 12.53 ms             |
| 100K (hannoy)| 12.28 s    | 796.44 MiB  | 0.97     | 0.95     | 0.96      | 0.98      | 0.98       | 24.51 ms             |
| 500K (hannoy)| 72.18 s    | 3.92 GiB    | 0.93     | 0.92     | 0.94      | 0.96      | 0.97       | 29.87 ms             |
| 1M (hannoy)  | 152.81 s   | 7.87 GiB    | 0.91     | 0.90     | 0.91      | 0.95      | 0.97       | 30.54 ms             |

## db-pedia3-large-3072
- hannoy: `M=16`, `ef_construction=33`, `ef_search=5*nns.min(100)`
- distance: cosine

| # of Vectors | Build Time | DB Size     | Recall@1 | Recall@5 | Recall@10 | Recall@50 | Recall@100 | Search Latency (ms) |
|--------------|------------|-------------|----------|----------|-----------|-----------|------------|----------------------|
| 10K (arroy)  | 694.63 ms  | 172.35 MiB  | 1.00     | 0.87     | 0.86      | 0.98      | 1.00       | 46.01 ms (100%) / 14.77 ms (10%)             |
| 50K (arroy)  | 17.55 s    | 934.51 MiB  | 1.00     | 0.68     | 0.75      | 0.94      | 0.97       | 138.75 ms (100%) / 56.77 ms (10%)             |
| 100K (arroy) | 54.16 s    | 1.90 GiB    | 1.00     | 0.64     | 0.72      | 0.91      | 0.96       | 190.94 ms (100%) / 96.88 ms (10%)             |
| 500K (arroy) | 612.11 s   | 10.75 GiB   | 1.00     | 0.67     | 0.71      | 0.90      | 0.95       | 356.43 ms (100%) / 256.94 ms (10%)            |
| 1M (arroy)   | 1695.77 s  | 23.02 GiB   | 1.00     | 0.71     | 0.72      | 0.90      | 0.95       | 444.07 ms (100%) / 356.85 ms (10%)            |
| **--- arroy → hannoy ---** |            |             |          |          |           |           |            |                      |
| 10K (hannoy) | 1.49 s     | 157.71 MiB  | 1.00     | 0.99     | 0.99      | 0.99      | 1.00       | 27.67 ms             |
| 50K (hannoy) | 10.76 s    | 788.34 MiB  | 0.98     | 0.95     | 0.95      | 0.98      | 0.99       | 38.16 ms             |
| 100K (hannoy)| 23.21 s    | 1.54 GiB    | 0.99     | 0.94     | 0.94      | 0.97      | 0.98       | 41.27 ms             |
| 500K (hannoy)| 124.33 s   | 7.73 GiB    | 0.94     | 0.92     | 0.94      | 0.96      | 0.97       | 45.73 ms             |
| 1M (hannoy)  | 253.80 s   | 15.50 GiB   | 0.87     | 0.93     | 0.94      | 0.95      | 0.96       | 45.17 ms             |


(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[5312],{16468:(e,t,n)=>{"use strict";n.d(t,{BW:()=>r,T$:()=>s,bJ:()=>c,gj:()=>o,hc:()=>a,jj:()=>i,rL:()=>l}),n(68211);const r=4,s=4;function a(e){return"execute_result"===e.output_type}function i(e){return"display_data"===e.output_type}function o(e){return"update_display_data"===e.output_type}function l(e){return"stream"===e.output_type}function c(e){return"error"===e.output_type}},29452:(e,t,n)=>{var r,s=/[&<>"'`]/g,a=RegExp(s.source),i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,o="object"==typeof self&&self&&self.Object===Object&&self,l=i||o||Function("return this")(),c=(r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==r?void 0:r[e]}),d=Object.prototype.toString,h=l.Symbol,u=h?h.prototype:void 0,p=u?u.toString:void 0;e.exports=function(e){var t;return(e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t))&&a.test(e)?e.replace(s,c):e}},75312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AttachmentModel:()=>o,ILatexTypesetter:()=>le,IMarkdownParser:()=>ce,IRenderMimeRegistry:()=>oe,MimeModel:()=>Q,OutputModel:()=>re,RenderMimeRegistry:()=>ie,RenderedCommon:()=>P,RenderedError:()=>J,RenderedHTML:()=>U,RenderedHTMLCommon:()=>A,RenderedImage:()=>I,RenderedJavaScript:()=>F,RenderedLatex:()=>H,RenderedMarkdown:()=>D,RenderedSVG:()=>$,RenderedText:()=>z,errorRendererFactory:()=>X,htmlRendererFactory:()=>W,imageRendererFactory:()=>B,javaScriptRendererFactory:()=>Y,latexRendererFactory:()=>G,markdownRendererFactory:()=>V,removeMath:()=>m,renderError:()=>O,renderHTML:()=>x,renderImage:()=>v,renderLatex:()=>T,renderMarkdown:()=>w,renderSVG:()=>k,renderText:()=>E,replaceMath:()=>g,standardRendererFactories:()=>K,svgRendererFactory:()=>q,textRendererFactory:()=>Z});var r,s=n(33647),a=n(68211),i=n(30427);class o{constructor(e){this.trusted=!1,this._changed=new i.Signal(this),this._raw={};const t=r.getData(e.value);this._data=new s.ObservableJSON({values:t}),this._rawData=t;const n=e.value;for(const e in n)"data"===e||(this._raw[e]=r.extract(n,e))}get changed(){return this._changed}dispose(){this._data.dispose(),i.Signal.clearData(this)}get data(){return this._rawData}get metadata(){return{}}setData(e){e.data&&(this._updateObservable(this._data,e.data),this._rawData=e.data),this._changed.emit(void 0)}toJSON(){const e={};for(const t in this._raw)e[t]=r.extract(this._raw,t);return e}_updateObservable(e,t){const n=e.keys(),r=Object.keys(t);for(const t of n)-1===r.indexOf(t)&&e.delete(t);for(const n of r){const r=e.get(n),s=t[n];r!==s&&e.set(n,s)}}}!function(e){e.getData=function(e){return r.getData(e)}}(o||(o={})),function(e){function t(e){return function(e){const t=Object.create(null);for(const r in e)t[r]=n(e,r);return t}(e)}function n(e,t){const n=e[t];return void 0===n||a.JSONExt.isPrimitive(n)?n:a.JSONExt.deepCopy(n)}e.getData=t,e.getBundleOptions=function(e){return{data:t(e.value)}},e.extract=n}(r||(r={}));var l=n(90182),c=n(80281),d=n(62246),h=n(29452),u=n.n(h);const p="$",f=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[{}$]|[{}]|(?:\n\s*)+|@@\d+@@|\\\\(?:\(|\)|\[|\]))/i;function m(e){const t=[];let n,r=null,s=null,a=null,i=0;e.includes("`")||e.includes("~~~")?(e=e.replace(/~/g,"~T").replace(/^(?<fence>`{3,}|(~T){3,})[^`\n]*\n([\s\S]*?)^\k<fence>`*$/gm,e=>e.replace(/\$/g,"~D")).replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,e=>e.replace(/\$/g,"~D")),n=e=>e.replace(/~([TD])/g,(e,t)=>"T"===t?"~":p)):n=e=>e;let o=e.replace(/\r\n?/g,"\n").split(f);for(let e=1,l=o.length;e<l;e+=2){const l=o[e];"@"===l.charAt(0)?(o[e]="@@"+t.length+"@@",t.push(l)):null!==r?l===s?i?a=e:(o=y(r,e,n,t,o),r=null,s=null,a=null):l.match(/\n.*\n/)?(null!==a&&(e=a,o=y(r,e,n,t,o)),r=null,s=null,a=null,i=0):"{"===l?i++:"}"===l&&i&&i--:l===p||"$$"===l?(r=e,s=l,i=0):"\\\\("===l||"\\\\["===l?(r=e,s="("===l.slice(-1)?"\\\\)":"\\\\]",i=0):"begin"===l.substr(1,5)&&(r=e,s="\\end"+l.substr(6),i=0)}return null!==r&&null!==a&&(o=y(r,a,n,t,o),r=null,s=null,a=null),{text:n(o.join("")),math:t}}function g(e,t){return e.replace(/@@(\d+)@@/g,(e,n)=>{let r=t[n];return"\\\\("===r.substr(0,3)&&"\\\\)"===r.substr(r.length-3)?r="\\("+r.substring(3,r.length-3)+"\\)":"\\\\["===r.substr(0,3)&&"\\\\]"===r.substr(r.length-3)&&(r="\\["+r.substring(3,r.length-3)+"\\]"),r})}function y(e,t,n,r,s){let a=s.slice(e,t+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(navigator&&"Microsoft Internet Explorer"===navigator.appName&&(a=a.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));t>e;)s[t]="",t--;return s[e]="@@"+r.length+"@@",n&&(a=n(a)),r.push(a),s}async function x(e){let{host:t,source:n,trusted:r,sanitizer:s,resolver:a,linkHandler:i,shouldTypeset:o,latexTypesetter:c,translator:d}=e;d=d||l.nullTranslator;const h=null==d?void 0:d.load("jupyterlab");let u=n;if(n){if(r||(u=`${n}`,n=s.sanitize(n)),t.innerHTML=n,t.getElementsByTagName("script").length>0)if(r)S.evalInnerHTMLScriptTags(t);else{const e=document.createElement("div"),n=document.createElement("pre");n.textContent=h.__("This HTML output contains inline scripts. Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const r=document.createElement("button");r.textContent=h.__("Run"),r.onclick=e=>{t.innerHTML=u,S.evalInnerHTMLScriptTags(t),t.firstChild&&t.removeChild(t.firstChild)},e.appendChild(n),e.appendChild(r),t.insertBefore(e,t.firstChild)}S.handleDefaults(t,a),a&&await S.handleUrls(t,a,i),o&&c&&c.typeset(t)}else t.textContent=""}async function v(e){const{host:t,mimeType:n,source:r,width:s,height:a,needsBackground:i,unconfined:o}=e;t.textContent="";const l=document.createElement("img");l.src=`data:${n};base64,${r}`,"number"==typeof a&&(l.height=a),"number"==typeof s&&(l.width=s),"light"===i?l.classList.add("jp-needs-light-background"):"dark"===i&&l.classList.add("jp-needs-dark-background"),!0===o&&l.classList.add("jp-mod-unconfined"),t.appendChild(l)}async function T(e){const{host:t,source:n,shouldTypeset:r,latexTypesetter:s}=e;t.textContent=n,r&&s&&s.typeset(t)}async function w(e){var t;const{host:n,source:r,markdownParser:s,...a}=e;if(!r)return void(n.textContent="");let i="";if(s){const e=m(r);i=await s.render(e.text),i=g(i,e.math)}else i=`<pre>${r}</pre>`;await x({host:n,source:i,...a}),S.headerAnchors(n,null!==(t=e.sanitizer.allowNamedProperties)&&void 0!==t&&t)}async function k(e){let{host:t,source:n,trusted:r,unconfined:s}=e;if(!n)return void(t.textContent="");if(!r)return void(t.textContent="Cannot display an untrusted SVG. Maybe you need to run the cell?");n.search("<svg[^>]+xmlns=[^>]+svg")<0&&(n=n.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"'));const a=new Image;a.src=`data:image/svg+xml,${encodeURIComponent(n)}`,t.appendChild(a),!0===s&&t.classList.add("jp-mod-unconfined")}var _;!function(e){e.createHeaderId=function(e){var t;return(null!==(t=e.textContent)&&void 0!==t?t:"").replace(/ /g,"-")}}(w||(w={})),function(e){const t="\\u0000-\\u0020\\u007f-\\u009f";e.webLinkRegex=new RegExp("(?<path>(?:[a-zA-Z][a-zA-Z0-9+.-]{2,40}:\\/\\/|data:|www\\.)[^\\s"+t+'"]{2,}[^\\s'+t+"\"'(){}\\[\\],:;.!?])","ug");const n=new RegExp(`(${/(?:[a-zA-Z]:(?:(?:\\|\/)[\w\.-]*)+)/.source}|${/(?:(?:\~|\.)(?:(?:\\|\/)[\w\.-]*)+)/.source})`),r=navigator.userAgent.indexOf("Windows")>=0;e.pathLinkRegex=new RegExp(`(?<path>${r?n.source:/((?:\~|\.)?(?:\/[\w\.-]*)+)/.source})${/(?:(?:\:|", line )(?<line>[\d]+))?(?:\:(?<column>[\d]+))?/.source}`,"g")}(_||(_={}));class b{constructor(){this.regex=_.webLinkRegex}createAnchor(e,t){const n=document.createElement("a");return n.href=e.startsWith("www.")?"https://"+e:e,n.rel="noopener",n.target="_blank",n.appendChild(document.createTextNode(t)),n}processPath(e){const t=e.slice(-1),n=-1!==[">","<"].indexOf(t)?e.length-1:e.length;return e.slice(0,n)}processLabel(e){return this.processPath(e)}}class R{constructor(){this.regex=_.pathLinkRegex}createAnchor(e,t,n){const r=document.createElement("a");r.dataset.path=e;const s=parseInt(n.line,10);let a=isNaN(s)?"":"line="+(s-1);return r.dataset.locator=a,r.appendChild(document.createTextNode(t)),r}}function C(e,t){const n=[];t.checkWeb&&n.push(new b),t.checkPaths&&n.push(new R);const r=[],s=(e,t)=>{if(t>=n.length)return void r.push(document.createTextNode(e));const a=n[t];let i,o=0;const l=a.regex;for(l.lastIndex=0;null!=(i=l.exec(e));){const n=e.substring(o,i.index);n&&s(n,t+1);const{path:l,...c}=i.groups,d=a.processPath?a.processPath(l):l,h=a.processLabel?a.processLabel(i[0]):i[0];r.push(a.createAnchor(d,h,c)),o=i.index+h.length}const c=e.substring(o);c&&s(c,t+1)};return s(e,0),r}function L(e,t){var n,r;const s=e.cloneNode();s.textContent=null===(n=e.textContent)||void 0===n?void 0:n.slice(0,t);const a=e.cloneNode();return a.textContent=null===(r=e.textContent)||void 0===r?void 0:r.slice(t),{pre:s,post:a}}function*j(e){var t;let n,r=0;for(let s of e)n=r+((null===(t=s.textContent)||void 0===t?void 0:t.length)||0),yield{node:s,start:r,end:n,isText:s.nodeType===Node.TEXT_NODE},r=n}async function E(e){N(e,{checkWeb:!0,checkPaths:!1})}const M="";function N(e,t){var n,r;const{host:s,sanitizer:a,source:i}=e,o=i.includes(M)?a.sanitize(S.ansiSpan(i),{allowedTags:["span"]}):function(e){const t=document.createElement("span");return t.textContent=e,t.innerHTML}(i),l=document.createElement("pre");l.innerHTML=o;const c=l.textContent,d=[];t.checkWeb&&d.push("web"),t.checkPaths&&d.push("paths");const h=d.join("-");let u,p=S.autoLinkCache.get(h);if(p||(p=new WeakMap,S.autoLinkCache.set(h,p)),c){let e;if(null===(r=null===(n=a.getAutolink)||void 0===n?void 0:n.call(a))||void 0===r||r){const n=function(e,t){if(!e)return null;if(t.length<e.preTextContent.length)return null;let n=t.substring(e.preTextContent.length),r=e.linkedNodes;const s=e.linkedNodes[e.linkedNodes.length-1];if(e.preTextContent.endsWith("\n")||n.startsWith("\n"));else{if(!(s instanceof Text))return null;r=r.slice(0,-1),n=s.textContent+n}return t.startsWith(e.preTextContent)?{cachedNodes:r,addedText:n}:null}(p.get(s),c);if(n){const{cachedNodes:r,addedText:s}=n,a=C(s,t),i=r[r.length-1],o=a[0];if(i instanceof Text&&o instanceof Text){const t=i;t.data+=o.data,e=[...r.slice(0,-1),t,...a.slice(1)]}else e=[...r,...a]}else e=C(c,t);p.set(s,{preTextContent:c,linkedNodes:e.map(e=>e.cloneNode(!0))})}else e=[document.createTextNode(o)];u=function(e,t){const n=document.createElement("pre");let r=!1;const s=[];for(let n of function*(e,t){var n,r;let s=j(e),a=j(t),i=s.next(),o=a.next();for(;!i.done&&!o.done;){let e=i.value,t=o.value;if(e.isText&&e.start<=t.start&&e.end>=t.end)yield[null,t.node],o=a.next();else if(t.isText&&t.start<=e.start&&t.end>=e.end)yield[e.node,null],i=s.next();else if(e.end===t.end&&e.start===t.start)yield[e.node,t.node],i=s.next(),o=a.next();else if(e.end>t.end){let{pre:r,post:s}=L(e.node,t.end-e.start);t.start<e.start&&(t.node.textContent=null===(n=t.node.textContent)||void 0===n?void 0:n.slice(e.start-t.start)),yield[r,t.node],e.node=s,e.start=t.end,o=a.next()}else{if(!(t.end>e.end))throw new Error(`Unexpected intersection: ${JSON.stringify(e)} ${JSON.stringify(t)}`);{let{pre:n,post:a}=L(t.node,e.end-t.start);e.start<t.start&&(e.node.textContent=null===(r=e.node.textContent)||void 0===r?void 0:r.slice(t.start-e.start)),yield[e.node,n],t.node=a,t.start=e.end,i=s.next()}}}}(e,t)){if(!n[0]){s.push(n[1]),r=n[1].nodeType!==Node.TEXT_NODE;continue}if(!n[1]){s.push(n[0]),r=!1;continue}let[e,t]=n;const a=s[s.length-1];r&&t.href===a.href?a.appendChild(e):t.nodeType!==Node.TEXT_NODE?(t.textContent="",t.appendChild(e),s.push(t),r=!0):(s.push(e),r=!1)}for(const e of s)n.appendChild(e);return n}(Array.from(l.childNodes),e)}else u=document.createElement("pre");s.appendChild(u)}async function O(e){const{host:t,linkHandler:n,resolver:r}=e;N(e,{checkWeb:!0,checkPaths:!0}),r&&await S.handlePaths(t,r,n)}var S;!function(e){async function t(e,t,n){const r=e.getAttribute(t)||"",s=n.isLocal?n.isLocal(r):d.URLExt.isLocal(r);if(r&&s)try{const s=await n.resolveUrl(r);let a=await n.getDownloadUrl(s);"data:"!==d.URLExt.parse(a).protocol&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime()),e.setAttribute(t,a)}catch(n){throw e.setAttribute(t,""),n}}async function n(e,t,n){let r=e.getAttribute("href")||"";const s=t.isLocal?t.isLocal(r):d.URLExt.isLocal(r);if(!r||!s)return;const a=e.hash;if(a){if(a===r)return void(e.target="_self");r=r.replace(a,"")}return t.resolveUrl(r).then(r=>{const s=decodeURIComponent(r);return n&&n.handleLink(e,s,a),t.getDownloadUrl(r)}).then(t=>{e.href=t+a}).catch(t=>{e.href=""})}e.autoLinkCache=new Map,e.evalInnerHTMLScriptTags=function(e){const t=Array.from(e.getElementsByTagName("script"));for(const e of t){if(!e.parentNode)continue;const t=document.createElement("script"),n=e.attributes;for(let e=0,r=n.length;e<r;++e){const{name:r,value:s}=n[e];t.setAttribute(r,s)}t.textContent=e.textContent,e.parentNode.replaceChild(t,e)}},e.handleDefaults=function(e,t){const n=e.getElementsByTagName("a");for(let e=0;e<n.length;e++){const r=n[e];if(!(r instanceof HTMLAnchorElement))continue;const s=r.href,a=t&&t.isLocal?t.isLocal(s):d.URLExt.isLocal(s);r.target||(r.target=a?"_self":"_blank"),a||(r.rel="noopener")}const r=e.getElementsByTagName("img");for(let e=0;e<r.length;e++)r[e].alt||(r[e].alt="Image")},e.handleUrls=async function(e,r,s){const a=[],i=e.querySelectorAll("*[src]");for(let e=0;e<i.length;e++)a.push(t(i[e],"src",r));const o=e.getElementsByTagName("a");for(let e=0;e<o.length;e++)a.push(n(o[e],r,s));const l=e.getElementsByTagName("link");for(let e=0;e<l.length;e++)a.push(t(l[e],"href",r));return Promise.all(a)},e.handlePaths=async function(e,t,n){const r=Array.from(e.querySelectorAll("a[data-path]"));return Promise.all(r.map(e=>async function(e,t,n){let r=e.dataset.path||"",s=e.dataset.locator?"#"+e.dataset.locator:"";delete e.dataset.path,delete e.dataset.locator;const a=!0,i=t.isLocal?t.isLocal(r,a):d.URLExt.isLocal(r,a);if(r&&i&&t.resolvePath&&n&&n.handlePath)try{const a=await t.resolvePath(r);if(!a)return void console.log("Path resolution bailing: does not exist");n.handlePath(e,a.path,a.scope,s),e.href=a.path+s}catch(t){console.warn("Path anchor error:",t),e.href="#linking-failed-see-console"}else e.replaceWith(...e.childNodes)}(e,t,n)))},e.headerAnchors=function(e,t){const n=["h1","h2","h3","h4","h5","h6"];for(const r of n){const n=e.getElementsByTagName(r);for(let e=0;e<n.length;e++){const r=n[e],s=w.createHeaderId(r);t?r.id=s:r.setAttribute("data-jupyter-id",s);const a=document.createElement("a");a.target="_self",a.textContent="¶",a.href="#"+s,a.classList.add("jp-InternalAnchorLink"),r.appendChild(a)}}};const r=["ansi-black","ansi-red","ansi-green","ansi-yellow","ansi-blue","ansi-magenta","ansi-cyan","ansi-white","ansi-black-intense","ansi-red-intense","ansi-green-intense","ansi-yellow-intense","ansi-blue-intense","ansi-magenta-intense","ansi-cyan-intense","ansi-white-intense"];function s(e,t,n,s,a,i,o){if(e){const l=[],c=[];s&&"number"==typeof t&&0<=t&&t<8&&(t+=8),i&&([t,n]=[n,t]),"number"==typeof t?l.push(r[t]+"-fg"):t.length?c.push(`color: rgb(${t})`):i&&l.push("ansi-default-inverse-fg"),"number"==typeof n?l.push(r[n]+"-bg"):n.length?c.push(`background-color: rgb(${n})`):i&&l.push("ansi-default-inverse-bg"),s&&l.push("ansi-bold"),a&&l.push("ansi-underline"),l.length||c.length?(o.push("<span"),l.length&&o.push(` class="${l.join(" ")}"`),c.length&&o.push(` style="${c.join("; ")}"`),o.push(">"),o.push(e),o.push("</span>")):o.push(e)}}function a(e){let t,n,r;const s=e.shift();if(2===s&&e.length>=3){if(t=e.shift(),n=e.shift(),r=e.shift(),[t,n,r].some(e=>e<0||255<e))throw new RangeError("Invalid range for RGB colors")}else{if(!(5===s&&e.length>=1))throw new RangeError("Invalid extended color specification");{const s=e.shift();if(s<0)throw new RangeError("Color index must be >= 0");if(s<16)return s;if(s<232)t=Math.floor((s-16)/36),t=t>0?55+40*t:0,n=Math.floor((s-16)%36/6),n=n>0?55+40*n:0,r=(s-16)%6,r=r>0?55+40*r:0;else{if(!(s<256))throw new RangeError("Color index must be < 256");t=n=r=10*(s-232)+8}}}return[t,n,r]}e.ansiSpan=function(e){const t=/\x1b\[(.*?)([@-~])/g;let n,r=[],i=[],o=!1,l=!1,c=!1;const d=[],h=[];let p=0;for(e=u()(e),e+="[m";n=t.exec(e);){if("m"===n[2]){const e=n[1].split(";");for(let t=0;t<e.length;t++){const n=e[t];if(""===n)h.push(0);else{if(-1===n.search(/^\d+$/)){h.length=0;break}h.push(parseInt(n,10))}}}for(s(e.substring(p,n.index),r,i,o,l,c,d),p=t.lastIndex;h.length;){const e=h.shift();switch(e){case 0:r=i=[],o=!1,l=!1,c=!1;break;case 1:case 5:o=!0;break;case 4:l=!0;break;case 7:c=!0;break;case 21:case 22:o=!1;break;case 24:l=!1;break;case 27:c=!1;break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:r=e-30;break;case 38:try{r=a(h)}catch(e){h.length=0}break;case 39:r=[];break;case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:i=e-40;break;case 48:try{i=a(h)}catch(e){h.length=0}break;case 49:i=[];break;case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:r=e-90+8;break;case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:i=e-100+8}}}return d.join("")}}(S||(S={}));class P extends c.Widget{constructor(e){var t,n;super(),this.mimeType=e.mimeType,this.sanitizer=e.sanitizer,this.resolver=e.resolver,this.linkHandler=e.linkHandler,this.translator=null!==(t=e.translator)&&void 0!==t?t:l.nullTranslator,this.latexTypesetter=e.latexTypesetter,this.markdownParser=null!==(n=e.markdownParser)&&void 0!==n?n:null,this.node.dataset.mimeType=this.mimeType}async renderModel(e,t){if(!t)for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.toggleClass("jp-mod-trusted",e.trusted),await this.render(e);const{fragment:n}=e.metadata;n&&this.setFragment(n)}setFragment(e){}}class A extends P{constructor(e){super(e),this.addClass("jp-RenderedHTMLCommon")}setFragment(e){let t;try{t=this.node.querySelector(e.startsWith("#")?`#${CSS.escape(e.slice(1))}`:e)}catch(e){console.warn("Unable to set URI fragment identifier.",e)}t&&t.scrollIntoView()}}class U extends A{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedHTML")}render(e){return this._rendered=x({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,translator:this.translator})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&this.latexTypesetter.typeset(this.node)}).catch(console.warn)}}class H extends P{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedLatex")}render(e){return this._rendered=T({host:this.node,source:String(e.data[this.mimeType]),shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&this.latexTypesetter.typeset(this.node)}).catch(console.warn)}}class I extends P{constructor(e){super(e),this.addClass("jp-RenderedImage")}render(e){const t=e.metadata[this.mimeType];return v({host:this.node,mimeType:this.mimeType,source:String(e.data[this.mimeType]),width:t&&t.width,height:t&&t.height,needsBackground:e.metadata.needs_background,unconfined:t&&t.unconfined})}}class D extends A{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedMarkdown")}render(e){return this._rendered=w({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,markdownParser:this.markdownParser,translator:this.translator})}async renderModel(e){await super.renderModel(e,!0)}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&this.latexTypesetter.typeset(this.node)}).catch(console.warn)}}class $ extends P{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedSVG")}render(e){const t=e.metadata[this.mimeType];return this._rendered=k({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,unconfined:t&&t.unconfined,translator:this.translator})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&this.latexTypesetter.typeset(this.node)}).catch(console.warn)}}class z extends P{constructor(e){super(e),this.addClass("jp-RenderedText")}render(e){return E({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),translator:this.translator})}}class J extends P{constructor(e){super(e),this.addClass("jp-RenderedText")}render(e){return O({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),linkHandler:this.linkHandler,resolver:this.resolver,translator:this.translator})}}class F extends P{constructor(e){super(e),this.addClass("jp-RenderedJavaScript")}render(e){const t=this.translator.load("jupyterlab");return E({host:this.node,sanitizer:this.sanitizer,source:t.__("JavaScript output is disabled in JupyterLab"),translator:this.translator})}}const W={safe:!0,mimeTypes:["text/html"],defaultRank:50,createRenderer:e=>new U(e)},B={safe:!0,mimeTypes:["image/bmp","image/png","image/jpeg","image/gif","image/webp"],defaultRank:90,createRenderer:e=>new I(e)},G={safe:!0,mimeTypes:["text/latex"],defaultRank:70,createRenderer:e=>new H(e)},V={safe:!0,mimeTypes:["text/markdown"],defaultRank:60,createRenderer:e=>new D(e)},q={safe:!1,mimeTypes:["image/svg+xml"],defaultRank:80,createRenderer:e=>new $(e)},X={safe:!0,mimeTypes:["application/vnd.jupyter.stderr"],defaultRank:110,createRenderer:e=>new J(e)},Z={safe:!0,mimeTypes:["text/plain","application/vnd.jupyter.stdout"],defaultRank:120,createRenderer:e=>new z(e)},Y={safe:!1,mimeTypes:["text/javascript","application/javascript"],defaultRank:110,createRenderer:e=>new F(e)},K=[W,V,G,q,B,Y,X,Z];class Q{constructor(e={}){this.trusted=!!e.trusted,this._data=e.data||{},this._metadata=e.metadata||{},this._callback=e.callback||ee.noOp}get data(){return this._data}get metadata(){return this._metadata}setData(e){this._data=e.data||this._data,this._metadata=e.metadata||this._metadata,this._callback(e)}}var ee;!function(e){e.noOp=function(){}}(ee||(ee={}));var te,ne=n(16468);class re{constructor(e){this._changed=new i.Signal(this),this._raw={},this._text=void 0;const{data:t,metadata:n,trusted:r}=te.getBundleOptions(e);this._rawData=t,void 0!==e.value&&ne.rL(e.value)&&(this._text=new s.ObservableString("string"==typeof e.value.text?e.value.text:e.value.text.join(""))),this._metadata=new s.ObservableJSON({values:n}),this._rawMetadata=n,this.trusted=r;const a=e.value;for(const e in a)switch(e){case"data":case"metadata":break;default:this._raw[e]=te.extract(a,e)}this.type=a.output_type,ne.hc(a)?this.executionCount=a.execution_count:this.executionCount=null}get changed(){return this._changed}dispose(){var e;null===(e=this._text)||void 0===e||e.dispose(),this._metadata.dispose(),i.Signal.clearData(this)}get data(){return te.getData(this.toJSON())}get streamText(){return this._text}get metadata(){return this._rawMetadata}setData(e){e.data&&(this._rawData=e.data),e.metadata&&(this._updateObservable(this._metadata,e.metadata),this._rawMetadata=e.metadata),this._changed.emit()}toJSON(){const e={};for(const t in this._raw)e[t]=te.extract(this._raw,t);switch(void 0!==this._text&&(e.text=this._text.text),this.type){case"display_data":case"execute_result":case"update_display_data":e.data=this._rawData,e.metadata=this.metadata}return delete e.transient,e}_updateObservable(e,t){const n=e.keys(),r=Object.keys(t);for(const t of n)-1===r.indexOf(t)&&e.delete(t);for(const n of r){const r=e.get(n),s=t[n];r!==s&&e.set(n,s)}}}!function(e){e.getData=function(e){return te.getData(e)},e.getMetadata=function(e){return te.getMetadata(e)}}(re||(re={})),function(e){function t(e){let t={};if(ne.hc(e)||ne.jj(e)||ne.gj(e))t=e.data;else if(ne.rL(e))"stderr"===e.name?t["application/vnd.jupyter.stderr"]=e.text:t["application/vnd.jupyter.stdout"]=e.text;else if(ne.bJ(e)){t["application/vnd.jupyter.error"]=e;const n=e.traceback.join("\n");t["application/vnd.jupyter.stderr"]=n||`${e.ename}: ${e.evalue}`}return function(e){const t=Object.create(null);for(const n in e)t[n]=r(e,n);return t}(t)}function n(e){const t=Object.create(null);if(ne.hc(e)||ne.jj(e))for(const n in e.metadata)t[n]=r(e.metadata,n);return t}function r(e,t){const n=e[t];return void 0===n||a.JSONExt.isPrimitive(n)?n:JSON.parse(JSON.stringify(n))}e.getData=t,e.getMetadata=n,e.getBundleOptions=function(e){return{data:t(e.value),metadata:n(e.value),trusted:!!e.trusted}},e.extract=r}(te||(te={}));var se,ae=n(18504);class ie{constructor(e={}){var t,n,r,s,a,i;if(this._id=0,this._ranks={},this._types=null,this._factories={},this.translator=null!==(t=e.translator)&&void 0!==t?t:l.nullTranslator,this.resolver=null!==(n=e.resolver)&&void 0!==n?n:null,this.linkHandler=null!==(r=e.linkHandler)&&void 0!==r?r:null,this.latexTypesetter=null!==(s=e.latexTypesetter)&&void 0!==s?s:null,this.markdownParser=null!==(a=e.markdownParser)&&void 0!==a?a:null,this.sanitizer=null!==(i=e.sanitizer)&&void 0!==i?i:new ae.Sanitizer,e.initialFactories)for(const t of e.initialFactories)this.addFactory(t)}get mimeTypes(){return this._types||(this._types=se.sortedTypes(this._ranks))}preferredMimeType(e,t="ensure"){if("ensure"===t||"prefer"===t)for(const t of this.mimeTypes)if(t in e&&this._factories[t].safe)return t;if("ensure"!==t)for(const t of this.mimeTypes)if(t in e)return t}createRenderer(e){if(!(e in this._factories))throw new Error(`No factory for mime type: '${e}'`);return this._factories[e].createRenderer({mimeType:e,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,latexTypesetter:this.latexTypesetter,markdownParser:this.markdownParser,translator:this.translator})}createModel(e={}){return new Q(e)}clone(e={}){var t,n,r,s,a,i,o,l,c,d;const h=new ie({resolver:null!==(n=null!==(t=e.resolver)&&void 0!==t?t:this.resolver)&&void 0!==n?n:void 0,sanitizer:null!==(s=null!==(r=e.sanitizer)&&void 0!==r?r:this.sanitizer)&&void 0!==s?s:void 0,linkHandler:null!==(i=null!==(a=e.linkHandler)&&void 0!==a?a:this.linkHandler)&&void 0!==i?i:void 0,latexTypesetter:null!==(l=null!==(o=e.latexTypesetter)&&void 0!==o?o:this.latexTypesetter)&&void 0!==l?l:void 0,markdownParser:null!==(d=null!==(c=e.markdownParser)&&void 0!==c?c:this.markdownParser)&&void 0!==d?d:void 0,translator:this.translator});return h._factories={...this._factories},h._ranks={...this._ranks},h._id=this._id,h}getFactory(e){return this._factories[e]}addFactory(e,t){void 0===t&&void 0===(t=e.defaultRank)&&(t=100);for(const n of e.mimeTypes)this._factories[n]=e,this._ranks[n]={rank:t,id:this._id++};this._types=null}removeMimeType(e){delete this._factories[e],delete this._ranks[e],this._types=null}getRank(e){const t=this._ranks[e];return t&&t.rank}setRank(e,t){if(!this._ranks[e])return;const n=this._id++;this._ranks[e]={rank:t,id:n},this._types=null}}!function(e){e.UrlResolver=class{constructor(e){this._path=e.path,this._contents=e.contents}get path(){return this._path}set path(e){this._path=e}async resolveUrl(e){if(this.isLocal(e)){const t=encodeURI(d.PathExt.dirname(this.path));e=d.PathExt.resolve(t,e)}return e}async getDownloadUrl(e){return this.isLocal(e)?this._contents.getDownloadUrl(decodeURIComponent(e)):e}isLocal(e,t=!1){return!this.isMalformed(e)&&(d.URLExt.isLocal(e,t)||!!this._contents.driveName(decodeURI(e)))}async resolvePath(e){const t=d.PageConfig.getOption("rootUri").replace("file://","");if(e.startsWith("~/")&&t.startsWith("/home/")&&(e=t.split("/").slice(0,3).join("/")+e.substring(1)),e.startsWith(t)||e.startsWith("./"))try{const n=e.replace(t,"");return{path:(await this._contents.get(n,{content:!1})).path,scope:"server"}}catch(t){return console.warn(`Could not resolve location of ${e} on server`),null}return{path:e,scope:"kernel"}}isMalformed(e){try{return decodeURI(e),!1}catch(e){if(e instanceof URIError)return!0;throw e}}}}(ie||(ie={})),function(e){e.sortedTypes=function(e){return Object.keys(e).sort((t,n)=>{const r=e[t],s=e[n];return r.rank!==s.rank?r.rank-s.rank:r.id-s.id})}}(se||(se={}));const oe=new a.Token("@jupyterlab/rendermime:IRenderMimeRegistry",'A service for the rendermime registry for the application. Use this to create renderers for various mime-types in your extension. Many times it will be easier to create a "mime renderer extension" rather than using this service directly.'),le=new a.Token("@jupyterlab/rendermime:ILatexTypesetter","A service for the LaTeX typesetter for the application. Use this if you want to typeset math in your extension."),ce=new a.Token("@jupyterlab/rendermime:IMarkdownParser","A service for rendering markdown syntax as HTML content.")}}]);
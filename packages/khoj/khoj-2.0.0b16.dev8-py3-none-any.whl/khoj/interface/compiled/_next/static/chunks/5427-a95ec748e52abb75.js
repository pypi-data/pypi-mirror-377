(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5427],{25427:function(e,t,s){"use strict";s.d(t,{EY:function(){return eo},ks:function(){return ec},bc:function(){return ei}});var a=s(57437),l=s(71159),r=s.n(l),n=s(2265),i=s(62869),o=s(68263),c=s(97615),d=s(60885),u=s(30655),m=s(49807),x=s(86723),h=s(68589),f=s(96620),p=s(63511),j=s(45199),g=s(79603),v=s(75256),b=s(82033),N=s(2335),y=s(24148),w=s(13520),_=s(97159),k=s(4235),C=s(65241),S=s(67119),z=s(66070),I=s(26110),V=s(39535),T=s(42225),P=s(84671),O=s(65613),R=s(15681),Z=s(29501),q=s(95186),F=s(13590),A=s(76818),B=s(53647),W=s(49027),D=s(962);let E=D.fC,J=D.wy,M=D.Fw;var X=s(94508),L=s(23518),Y=s(59199),G=s(37099),K=s(32759),$=s(57054),Q=s(97673),U=s(81103),H=s(20271);let ee=H.fC,et=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(H.aV,{ref:t,className:(0,X.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});et.displayName=H.aV.displayName;let es=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(H.xz,{ref:t,className:(0,X.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});es.displayName=H.xz.displayName;let ea=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(H.VY,{ref:t,className:(0,X.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});ea.displayName=H.VY.displayName;var el=s(19378);async function er(e,t){let s="/login?next=/agents?agent=".concat(e);if(!t){window.location.href=s;return}let a=await fetch("/api/chat/sessions?agent_slug=".concat(encodeURIComponent(e)),{method:"POST"}),l=await a.json();200==a.status?window.location.href="/chat?conversationId=".concat(l.conversation_id):403==a.status||401==a.status?window.location.href=s:alert("Failed to start chat session")}function en(e){var t;let s=(null===(t=e.text)||void 0===t?void 0:t.replace(/^\w/,e=>e.toUpperCase()))||"";return(0,a.jsx)(U.pn,{children:(0,a.jsxs)(U.u,{children:[(0,a.jsx)(U._v,{asChild:!0,children:(0,a.jsx)("div",{className:"text-sm",children:e.hoverText||s})}),(0,a.jsx)(U.aJ,{className:"cursor-text",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 rounded-full border-accent-500 border p-1.5",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:e.icon}),s&&s.length>0&&(0,a.jsx)("div",{className:"text-muted-foreground text-sm",children:s})]})})]})})}let ei=S.Ry({name:S.Z_({required_error:"Name is required"}).min(1,"Name is required"),persona:S.Z_({required_error:"Personality is required"}).min(1,"Personality is required"),color:S.Z_({required_error:"Color is required"}).min(1,"Color is required"),icon:S.Z_({required_error:"Icon is required"}).min(1,"Icon is required"),privacy_level:S.Z_({required_error:"Privacy level is required"}).min(1,"Privacy level is required"),chat_model:S.Z_({required_error:"Chat model is required"}).min(1,"Chat model is required"),files:S.IX(S.Z_()).default([]).optional(),input_tools:S.IX(S.Z_()).default([]).optional(),output_modes:S.IX(S.Z_()).default([]).optional()});function eo(e){var t;let[s,l]=(0,n.useState)(e.agentSlug===e.data.slug),[j,g]=(0,n.useState)(!1),[v,b]=(0,n.useState)(null),N=(0,a.jsx)(o.H,{}),y="Private agents are only visible to you.";"public"===e.data.privacy_level?(N=(0,a.jsx)(c.T,{}),y="Public agents are visible to everyone."):"protected"===e.data.privacy_level&&(N=(0,a.jsx)(d.M,{}),y="Protected agents are visible to anyone with a direct link.");let w=e.userProfile,_=(0,Z.cI)({resolver:(0,F.F)(ei),defaultValues:{name:e.data.name,persona:e.data.persona,color:e.data.color,icon:e.data.icon,privacy_level:e.data.privacy_level,chat_model:e.data.chat_model,files:e.data.files,input_tools:e.data.input_tools,output_modes:e.data.output_modes}});(0,n.useEffect)(()=>{_.reset({name:e.data.name,persona:e.data.persona,color:e.data.color,icon:e.data.icon,privacy_level:e.data.privacy_level,chat_model:e.data.chat_model,files:e.data.files,input_tools:e.data.input_tools,output_modes:e.data.output_modes})},[e.data]),s&&window.history.pushState({},"Khoj AI - Agent ".concat(e.data.slug),"/agents?agent=".concat(e.data.slug));let k=(0,P.oz)(e.data.color);function C(){return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[e.editCard&&(0,a.jsx)(en,{icon:N,text:e.data.privacy_level,hoverText:y}),e.data.files&&e.data.files.length>0&&(0,a.jsx)(en,{icon:(0,a.jsx)(u.f,{}),text:"knowledge",hoverText:"The agent has a custom knowledge base with ".concat(e.data.files.length," documents. It can use them to give you answers.")}),(0,a.jsx)(en,{icon:(0,a.jsx)(m.a,{}),text:e.data.chat_model,hoverText:"The agent uses the ".concat(e.data.chat_model," model to chat with you.")}),e.data.output_modes.map(t=>(0,a.jsx)(en,{icon:(0,T.vH)(t),hoverText:"".concat(t,": ").concat(e.outputModeOptions[t])},t)),e.data.input_tools.map(t=>(0,a.jsx)(en,{icon:(0,T.vH)(t),hoverText:"".concat(t,": ").concat(e.inputToolOptions[t])},t))]})}return(0,a.jsxs)(z.Zb,{className:"shadow-md rounded-xl hover:shadow-lg dark:bg-muted",children:[j&&(0,a.jsx)(V.Z,{onOpenChange:g,isMobileWidth:e.isMobileWidth}),(0,a.jsx)(z.Ol,{children:(0,a.jsx)(z.ll,{children:(0,a.jsxs)(I.Vq,{open:s,onOpenChange:()=>{l(!s),window.history.pushState({},"Khoj AI - Agents","/agents")},children:[(0,a.jsx)(I.hg,{className:"focus-visible:outline-none",children:(0,a.jsxs)("div",{className:"flex items-center relative top-2",children:[(0,T.TI)(e.data.icon,e.data.color),e.data.name]})}),(0,a.jsxs)("div",{className:"flex float-right",children:[e.editCard&&(0,a.jsx)("div",{className:"float-right",children:(0,a.jsxs)($.J2,{children:[(0,a.jsx)($.xo,{children:(0,a.jsx)(i.z,{className:"bg-[hsl(var(--background))] w-10 h-10 p-0 rounded-xl border dark:border-neutral-700 shadow-sm hover:bg-stone-100 dark:hover:bg-neutral-900",children:(0,a.jsx)(x.F,{className:"w-6 h-6 ".concat((0,P.oz)(e.data.color))})})}),(0,a.jsxs)($.yk,{className:"w-fit grid p-1",side:"bottom",align:"end",children:[(0,a.jsxs)(i.z,{className:"items-center justify-start",variant:"ghost",onClick:()=>l(!0),children:[(0,a.jsx)(h.z,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.editCard&&"private"!==e.data.privacy_level&&(0,a.jsx)(Q.Z,{buttonTitle:"Share",title:"Share Agent",description:"Share a link to this agent with others. They'll be able to chat with it, and ask questions to all of its knowledge base.",buttonVariant:"ghost",includeIcon:!0,url:"".concat(window.location.origin,"/agents?agent=").concat(e.data.slug)}),e.data.creator===(null==w?void 0:w.username)&&(0,a.jsxs)(i.z,{className:"items-center justify-start",variant:"destructive",onClick:()=>{fetch("/api/agents/".concat(e.data.slug),{method:"DELETE"}).then(()=>{e.setAgentChangeTriggered(!0)})},children:[(0,a.jsx)(f.r,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),(null===(t=e.showChatButton)||void 0===t||t)&&(0,a.jsx)("div",{className:"float-right ml-2",children:e.userProfile?(0,a.jsx)(i.z,{className:"bg-[hsl(var(--background))] w-10 h-10 p-0 rounded-xl border dark:border-neutral-700 shadow-sm hover:bg-stone-100 dark:hover:bg-neutral-900",onClick:()=>er(e.data.slug,w),children:(0,a.jsx)(p.g,{className:"w-6 h-6 ".concat((0,P.oz)(e.data.color))})}):(0,a.jsx)(i.z,{className:"bg-[hsl(var(--background))] w-14 h-14 rounded-xl border dark:border-neutral-700 shadow-sm hover:bg-stone-100 dark:hover:bg-neutral-900",onClick:()=>g(!0),children:(0,a.jsx)(p.g,{className:"w-6 h-6 ".concat((0,P.oz)(e.data.color))})})})]}),e.editCard?(0,a.jsxs)(I.cZ,{className:"lg:max-w-screen-lg py-4 overflow-y-scroll h-full md:h-4/6 rounded-lg flex flex-col",children:[(0,a.jsxs)(W.$N,{children:["Edit ",(0,a.jsx)("b",{children:e.data.name})]}),(0,a.jsx)(ec,{form:_,onSubmit:t=>{let s=e.editCard?"PATCH":"POST",a=t;e.editCard&&(a={...t,slug:e.data.slug}),fetch("/api/agents",{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(t=>{200===t.status?(_.reset(),l(!1),b(null),e.setAgentChangeTriggered(!0)):t.json().then(e=>{console.error(e),_.clearErrors(),e.error&&b(e.error)})}).catch(e=>{console.error("Error:",e),b(e),_.clearErrors()})},create:!1,errors:v,filesOptions:e.filesOptions,modelOptions:e.modelOptions,slug:e.data.slug,inputToolOptions:e.inputToolOptions,isSubscribed:e.isSubscribed,outputModeOptions:e.outputModeOptions})]}):(0,a.jsxs)(I.cZ,{className:"whitespace-pre-line max-h-[80vh] max-w-[90vw] md:max-w-[50vw] rounded-lg",children:[(0,a.jsx)(I.fK,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,T.TI)(e.data.icon,e.data.color),(0,a.jsx)("p",{className:"font-bold text-lg",children:(0,a.jsx)(W.$N,{children:e.data.name})})]})}),(0,a.jsx)("div",{className:"max-h-[60vh] overflow-y-scroll text-neutral-500 dark:text-white",children:e.data.persona}),(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-1",children:C()}),(0,a.jsx)(I.cN,{children:(0,a.jsxs)(i.z,{className:"pt-6 pb-6 ".concat(k," bg-white dark:bg-[hsl(var(--background))] text-neutral-500 dark:text-white border-2 border-stone-100 shadow-sm rounded-xl hover:bg-stone-100 dark:hover:bg-neutral-900 dark:border-neutral-700"),onClick:()=>{er(e.data.slug,w),l(!1)},children:[(0,a.jsx)(p.g,{className:"w-6 h-6 m-2 ".concat((0,P.oz)(e.data.color))}),"Start Chatting"]})})]})]})})}),(0,a.jsx)(z.aY,{children:(0,a.jsx)("div",{className:r().agentPersonality,children:(0,a.jsx)("button",{className:"".concat(r().infoButton," text-neutral-500 dark:text-white"),onClick:()=>l(!0),children:(0,a.jsx)("p",{children:e.data.persona})})})}),(0,a.jsx)(z.eW,{children:(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-1",children:C()})})]})}function ec(e){let[t,s]=(0,n.useState)(!1),l=(0,T.BI)(),r=P.xF,o=(0,P.oz)(e.form.getValues("color")),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[S,z]=(0,n.useState)(0),[I,V]=(0,n.useState)([]),[Z,F]=(0,n.useState)([]),[W,D]=(0,n.useState)(0),[Q,U]=(0,n.useState)(""),[H,er]=(0,n.useState)(!1),en=["public","private","protected"],eo=[{fields:[{name:"name",label:"Name"},{name:"persona",label:"Personality"},{name:"color",label:"Color"},{name:"icon",label:"Icon"}],label:"1. Basic Settings",tabName:"basic"},{fields:[{name:"chat_model",label:"Chat Model"},{name:"privacy_level",label:"Privacy Level"}],label:"2. Model & Privacy",tabName:"customize"},{fields:[{name:"files",label:"Knowledge Base"}],label:"3. Knowledge Base",tabName:"knowledge"},{fields:[{name:"input_tools",label:"Input Tools"},{name:"output_modes",label:"Output Modes"}],label:"4. Tools",tabName:"tools"}],ec=(0,n.useRef)(null);function ed(e){e.preventDefault(),d(!0)}function eu(e){e.preventDefault(),d(!1)}function em(e){e.preventDefault(),d(!1),e.dataTransfer.files&&ex(e.dataTransfer.files)}function ex(e){(0,Y.ko)(e,m,p,h,V)}function eh(){ec&&ec.current&&ec.current.click()}function ef(e){e.target.files&&ex(e.target.files)}(0,n.useEffect)(()=>{if(f||z(0),f){let e=setInterval(()=>{z(e=>{let t=e+(Math.floor(5*Math.random())+1);return t<100?t:100})},800);return()=>clearInterval(e)}},[f]),(0,n.useEffect)(()=>{F(Array.from(new Set([...Z,...e.form.getValues("files")||[],...e.filesOptions||[]])))},[]),(0,n.useEffect)(()=>{I.length>0&&(ej(I),F(e=>[...e,...I]))},[I]),(0,n.useEffect)(()=>{e.errors&&s(!1)},[e.errors]);let ep=t=>{console.log("Submitting",t),e.onSubmit(t),s(!0)},ej=t=>{for(let s of t){let t=e.form.getValues("files")||[],a=t.includes(s)?t.filter(e=>e!==s):[...t,s];e.form.setValue("files",a)}},eg=t=>{try{return ei.parse(e.form.getValues()),!0}catch(s){let e=s.errors.reduce((e,t)=>(e[t.path[0]]=t.message,e),{});for(let s of t.fields)if(e[s.name])return!1;return!0}};if(H)return(0,a.jsx)(G.aR,{open:!0,children:(0,a.jsxs)(G._T,{children:[(0,a.jsx)(G.fY,{children:(0,a.jsx)(G.f$,{children:"Upgrade to Futurist"})}),(0,a.jsxs)(G.yT,{children:["You need to be a Futurist subscriber to create more agents."," ",(0,a.jsx)("a",{href:"/settings",children:"Upgrade now"}),"."]}),(0,a.jsxs)(G.xo,{children:[(0,a.jsx)(G.le,{onClick:()=>{er(!1)},children:"Cancel"}),(0,a.jsx)(G.OL,{onClick:()=>{window.location.href="/settings"},children:"Continue"})]})]})});let ev=t=>{switch(t){case"name":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(R.xJ,{className:"space-y-0 grid gap-2",children:[(0,a.jsx)(R.lX,{children:"Name"}),(0,a.jsx)(R.pf,{children:"What should this agent be called? Pick something descriptive & memorable."}),(0,a.jsx)(R.NI,{children:(0,a.jsx)(q.I,{className:"dark:bg-muted",placeholder:"Biologist",...t})}),(0,a.jsx)(R.zG,{})]})}},t);case"chat_model":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"chat_model",render:t=>{let{field:s}=t;return(0,a.jsxs)(R.xJ,{className:"my-2 grid gap-2",children:[(0,a.jsx)(R.lX,{children:"Chat Model"}),(0,a.jsx)(R.pf,{children:e.isSubscribed?(0,a.jsx)("p",{children:"Which chat model would you like to use?"}):(0,a.jsxs)("p",{className:"text-secondary-foreground",children:["Upgrade to the ",(0,a.jsx)("a",{href:"/settings",children:"Futurist plan"})," to access all models."]})}),(0,a.jsxs)(B.Ph,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,a.jsx)(R.NI,{children:(0,a.jsx)(B.i4,{className:"text-left dark:bg-muted",children:(0,a.jsx)(B.ki,{})})}),(0,a.jsx)(B.Bw,{className:"items-start space-y-1 inline-flex flex-col",children:e.modelOptions.map(t=>(0,a.jsx)(B.Ql,{value:t.name,disabled:!e.isSubscribed&&"free"!==t.tier,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t.name," ","standard"===t.tier&&(0,a.jsx)("span",{className:"text-green-500 ml-2",children:"(Futurist)"})]})},t.id))})]}),(0,a.jsx)(R.zG,{})]})}},t);case"privacy_level":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"privacy_level",render:e=>{let{field:t}=e;return(0,a.jsxs)(R.xJ,{className:"my-2 grid gap-2",children:[(0,a.jsx)(R.lX,{children:(0,a.jsx)("div",{children:"Privacy Level"})}),(0,a.jsx)(R.pf,{children:(0,a.jsxs)($.J2,{children:[(0,a.jsx)($.xo,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"ghost",className:"p-0 h-fit",children:(0,a.jsxs)("span",{className:"items-center flex gap-1 text-sm",children:[(0,a.jsx)(j.k,{className:"inline"}),(0,a.jsx)("p",{className:"text-sm",children:"Learn more"})]})})}),(0,a.jsxs)($.yk,{children:[(0,a.jsx)("b",{children:"Private"}),": only visible to you.",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Protected"}),": visible to anyone with a link.",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Public"}),": visible to everyone.",(0,a.jsx)("br",{}),"All public agents will be reviewed by us before they are launched."]})]})}),(0,a.jsxs)(B.Ph,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(R.NI,{children:(0,a.jsx)(B.i4,{className:"w-[200px] dark:bg-muted",children:(0,a.jsx)(B.ki,{placeholder:"private"})})}),(0,a.jsx)(B.Bw,{className:"items-center space-y-1 inline-flex flex-col",children:en.map(e=>(0,a.jsx)(B.Ql,{value:e,children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:e})},e))})]}),(0,a.jsx)(R.zG,{})]})}},t);case"color":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"color",render:e=>{let{field:t}=e;return(0,a.jsxs)(R.xJ,{className:"space-y-3 my-2",children:[(0,a.jsx)(R.lX,{children:"Color"}),(0,a.jsxs)(B.Ph,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(R.NI,{children:(0,a.jsx)(B.i4,{className:"w-[200px] dark:bg-muted",children:(0,a.jsx)(B.ki,{placeholder:"Color"})})}),(0,a.jsx)(B.Bw,{className:"items-center space-y-1 inline-flex flex-col",children:r.map(e=>(0,a.jsx)(B.Ql,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.C,{className:"w-6 h-6 mr-2 ".concat((0,P.oz)(e)),weight:"fill"}),e]})},e))})]}),(0,a.jsx)(R.zG,{})]})}},t);case"icon":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"icon",render:t=>{let{field:s}=t;return(0,a.jsxs)(R.xJ,{className:"space-y-3 my-2",children:[(0,a.jsx)(R.lX,{children:"Icon"}),(0,a.jsxs)(B.Ph,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,a.jsx)(R.NI,{children:(0,a.jsx)(B.i4,{className:"w-[200px] dark:bg-muted",children:(0,a.jsx)(B.ki,{placeholder:"Icon"})})}),(0,a.jsx)(B.Bw,{className:"items-center space-y-1 inline-flex flex-col",children:l.map(t=>(0,a.jsx)(B.Ql,{value:t,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,T.TI)(t,e.form.getValues("color"),"w-6","h-6"),t]})},t))})]}),(0,a.jsx)(R.zG,{})]})}},t);case"persona":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"persona",render:e=>{let{field:t}=e;return(0,a.jsxs)(R.xJ,{className:"space-y-1 my-2 grid gap-2",children:[(0,a.jsx)(R.lX,{children:"Personality"}),(0,a.jsx)(R.pf,{children:"What is the personality, thought process, or tuning of this agent? This is where you can provide any instructions to the agent."}),(0,a.jsx)(R.NI,{children:(0,a.jsx)(A.g,{className:"dark:bg-muted focus:outline-none focus-visible:border-orange-500 focus-visible:border-2",placeholder:"You are an excellent biologist, at the top of your field in marine biology.",...t})}),(0,a.jsx)(R.zG,{})]})}},t);case"files":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"files",render:t=>{let{field:s}=t;return(0,a.jsxs)(R.xJ,{className:"my-2 flex flex-col gap-2",children:[(0,a.jsx)(R.lX,{children:"Knowledge Base"}),(0,a.jsxs)(R.pf,{children:["Which information should be part of its digital brain?"," ",(0,a.jsx)("a",{href:"/settings",children:"Manage data"}),"."]}),(0,a.jsxs)(E,{children:[(0,a.jsxs)(J,{className:"flex items-center justify-between text-sm gap-2 bg-muted p-2 rounded-lg",children:[(0,a.jsx)(v.K,{}),s.value&&s.value.length>0?"".concat(s.value.length," files selected"):"Select files"]}),(0,a.jsx)(M,{className:"m-1",children:(0,a.jsxs)(L.mY,{children:[(0,a.jsx)(G.aR,{open:null!==u||null!=x,children:(0,a.jsxs)(G._T,{children:[(0,a.jsx)(G.fY,{children:(0,a.jsx)(G.f$,{children:"Alert"})}),(0,a.jsx)(G.yT,{children:u||x}),(0,a.jsx)(G.OL,{className:"bg-slate-400 hover:bg-slate-500",onClick:()=>{m(null),h(null),p(!1)},children:"Close"})]})}),(0,a.jsxs)("div",{className:"flex flex-col h-full cursor-pointer",onDragOver:ed,onDragLeave:eu,onDrop:em,onClick:eh,children:[(0,a.jsx)("input",{type:"file",multiple:!0,ref:ec,style:{display:"none"},onChange:ef}),(0,a.jsx)("div",{className:"flex-none p-4",children:f&&(0,a.jsx)(K.E,{indicatorColor:"bg-slate-500",className:"w-full h-2 rounded-full",value:S})}),(0,a.jsx)("div",{className:"flex-none p-4 bg-secondary border-b ".concat(c?"animate-pulse":""," rounded-lg"),children:(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-16 border-2 border-dashed border-gray-300 rounded-lg",children:c?(0,a.jsxs)("div",{className:"flex items-center justify-center w-full h-full",children:[(0,a.jsx)(b.u,{className:"h-6 w-6 mr-2"}),(0,a.jsx)("span",{children:"Drop files to upload"})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center w-full h-full",children:[(0,a.jsx)(N.v,{className:"h-6 w-6 mr-2"}),(0,a.jsx)("span",{children:"Drag and drop files here"})]})})})]}),(0,a.jsx)(L.sZ,{placeholder:"Select files...",value:Q,onValueChange:U}),(0,a.jsxs)(L.e8,{children:[(0,a.jsx)(L.rb,{children:"No files found."}),(0,a.jsxs)(L.fu,{children:[(0,a.jsxs)("div",{className:"flex gap-2 px-2 py-1 border-b",children:[(0,a.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:t=>{t.stopPropagation();let s=Z.filter(e=>e.toLowerCase().includes(Q.toLowerCase())),a=[...new Set([...e.form.getValues("files")||[],...s])];e.form.setValue("files",a)},children:"Select All"}),(0,a.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:t=>{t.stopPropagation();let s=Z.filter(e=>e.toLowerCase().includes(Q.toLowerCase())),a=(e.form.getValues("files")||[]).filter(e=>!s.includes(e));e.form.setValue("files",a)},children:"Deselect All"})]}),Z.map(t=>(0,a.jsxs)(L.di,{value:t,className:"break-all",onSelect:()=>{let s=e.form.getValues("files")||[],a=s.includes(t)?s.filter(e=>e!==t):[...s,t];e.form.setValue("files",a)},children:[(0,a.jsx)(y.J,{className:(0,X.cn)("mr-2 h-4 w-4",s.value&&s.value.includes(t)?"opacity-100":"opacity-0")}),t]},t))]})]})]})})]})]})}},t);case"input_tools":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"input_tools",render:t=>{let{field:s}=t;return(0,a.jsxs)(R.xJ,{className:"flex flex-col gap-2 my-2",children:[(0,a.jsx)(R.lX,{children:"Restrict Input Tools"}),(0,a.jsxs)(R.pf,{children:["Which knowledge retrieval tools should this agent be limited to?",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Default:"})," No limitations."]}),(0,a.jsxs)(E,{children:[(0,a.jsxs)(J,{className:"flex items-center justify-between text-sm gap-2 bg-muted p-2 rounded-lg",children:[(0,a.jsx)(v.K,{}),s.value&&s.value.length>0?"".concat(s.value.length," tools selected"):"All tools"]}),(0,a.jsx)(M,{children:(0,a.jsx)(L.mY,{children:(0,a.jsx)(L.e8,{children:(0,a.jsx)(L.fu,{children:Object.entries(e.inputToolOptions).map(t=>{let[l,r]=t;return(0,a.jsxs)(L.di,{value:l,onSelect:()=>{let t=e.form.getValues("input_tools")||[],s=t.includes(l)?t.filter(e=>e!==l):[...t,l];e.form.setValue("input_tools",s)},children:[(0,a.jsx)(y.J,{className:(0,X.cn)("mr-2 h-4 w-4",s.value&&s.value.includes(l)?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:(0,X.cn)("flex items-center space-x-2"),children:[(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:l})}),(0,a.jsx)("p",{children:r})]})]},l)})})})})})]})]})}},t);case"output_modes":return(0,a.jsx)(R.Wi,{control:e.form.control,name:"output_modes",render:t=>{let{field:s}=t;return(0,a.jsxs)(R.xJ,{className:"flex flex-col gap-2 my-2",children:[(0,a.jsx)(R.lX,{children:"Restrict Output Modes"}),(0,a.jsxs)(R.pf,{children:["Which output modes should this agent be limited to?",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Default:"})," No limitations."]}),(0,a.jsxs)(E,{children:[(0,a.jsxs)(J,{className:"flex items-center justify-between text-sm gap-2 bg-muted p-2 rounded-lg",children:[(0,a.jsx)(v.K,{}),s.value&&s.value.length>0?"".concat(s.value.length," modes selected"):"All modes"]}),(0,a.jsx)(M,{children:(0,a.jsx)(L.mY,{children:(0,a.jsx)(L.e8,{children:(0,a.jsx)(L.fu,{children:Object.entries(e.outputModeOptions).map(t=>{let[l,r]=t;return(0,a.jsxs)(L.di,{value:l,onSelect:()=>{let t=e.form.getValues("output_modes")||[],s=t.includes(l)?t.filter(e=>e!==l):[...t,l];e.form.setValue("output_modes",s)},children:[(0,a.jsx)(y.J,{className:(0,X.cn)("mr-2 h-4 w-4",s.value&&s.value.includes(l)?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:(0,X.cn)("flex items-center space-x-2"),children:[(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:l})}),(0,a.jsx)("p",{children:r})]})]},l)})})})})})]})]})}},t);default:return null}};return(0,a.jsxs)(R.l0,{...e.form,children:[(0,a.jsx)(el.x,{className:"h-full",children:(0,a.jsxs)("form",{onSubmit:e.form.handleSubmit(ep),className:"space-y-6 pb-4 px-4 h-full flex flex-col justify-between",children:[(0,a.jsxs)(ee,{defaultValue:"basic",value:eo[W].tabName,children:[(0,a.jsx)(et,{className:"grid grid-cols-2 md:grid-cols-4 gap-2 h-fit",children:eo.map(e=>(0,a.jsxs)(es,{value:e.tabName,className:"text-center ".concat(eg(e)?"":"text-red-500"),onClick:()=>D(eo.findIndex(t=>t.tabName===e.tabName)),children:[e.label," ",!eg(e)&&"*"]},e.tabName))}),eo.map(e=>(0,a.jsx)(ea,{value:e.tabName,children:e.fields.map(e=>ev(e.name))},e.tabName))]}),e.errors&&(0,a.jsx)(O.bZ,{className:"bg-secondary border-none my-4",children:(0,a.jsxs)(O.X,{className:"flex items-center gap-1",children:[(0,a.jsx)(w.f,{weight:"fill",className:"h-4 w-4 text-yellow-400 inline"}),(0,a.jsx)("span",{children:e.errors})]})})]})}),(0,a.jsxs)("div",{className:"flex justify-between mt-1 left-0 right-0 bg-background p-1",children:[(0,a.jsxs)(i.z,{type:"button",variant:"outline",onClick:e=>{e.preventDefault(),W>0&&D(W-1)},disabled:0===W,className:"items-center ".concat(t?"bg-stone-100 dark:bg-neutral-900":""," text-white ").concat(o),children:[(0,a.jsx)(_.X,{className:"mr-2 h-4 w-4"}),"Previous"]}),W<eo.length-1?(0,a.jsxs)(i.z,{type:"button",variant:"outline",onClick:e=>{e.preventDefault(),W<eo.length-1&&D(W+1)},disabled:!eg(eo[W]),className:"items-center ".concat(t?"bg-stone-100 dark:bg-neutral-900":""," text-white ").concat(o),children:["Continue",(0,a.jsx)(k.o,{className:"ml-2 h-4 w-4"})]}):(0,a.jsxs)(i.z,{type:"submit",variant:"outline",disabled:t,onClick:e.form.handleSubmit(ep),className:"items-center ".concat(t?"bg-stone-100 dark:bg-neutral-900":""," text-white ").concat(o),children:[(0,a.jsx)(C.B,{className:"h-4 w-4 mr-2"}),t?"Booting...":"Save"]})]})]})}},97673:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(57437),l=s(26110),r=s(62869),n=s(95186),i=s(26815),o=s(33321);function c(e){var t;return(0,a.jsxs)(l.Vq,{children:[(0,a.jsx)(l.hg,{asChild:!0,onClick:e.onShare,children:(0,a.jsxs)(r.z,{size:"sm",className:"".concat(e.buttonClassName||"px-3"),variant:null!==(t=e.buttonVariant)&&void 0!==t?t:"default",children:[e.includeIcon&&(0,a.jsx)(o.m,{className:"w-4 h-4 mr-2"}),e.buttonTitle]})}),(0,a.jsxs)(l.cZ,{children:[(0,a.jsxs)(l.fK,{children:[(0,a.jsx)(l.$N,{children:e.title}),(0,a.jsx)(l.Be,{children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"grid flex-1 gap-2",children:[(0,a.jsx)(i._,{htmlFor:"link",className:"sr-only",children:"Link"}),(0,a.jsx)(n.I,{id:"link",defaultValue:e.url,readOnly:!0})]}),(0,a.jsx)(r.z,{type:"submit",size:"sm",className:"px-3",onClick:()=>(function(e){let t=navigator.clipboard;t&&t.writeText(e)})(e.url),children:(0,a.jsx)("span",{children:"Copy"})})]})]})]})}},65613:function(e,t,s){"use strict";s.d(t,{X:function(){return c},bZ:function(){return o}});var a=s(57437),l=s(2265),r=s(90535),n=s(94508);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=l.forwardRef((e,t)=>{let{className:s,variant:l,...r}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:l}),s),...r})});o.displayName="Alert",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...l})}).displayName="AlertTitle";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...l})});c.displayName="AlertDescription"},15681:function(e,t,s){"use strict";s.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return c},lX:function(){return f},pf:function(){return j},xJ:function(){return h},zG:function(){return g}});var a=s(57437),l=s(2265),r=s(37053),n=s(29501),i=s(94508),o=s(26815);let c=n.RV,d=l.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(n.Qr,{...t})})},m=()=>{let e=l.useContext(d),t=l.useContext(x),{getFieldState:s,formState:a}=(0,n.Gc)(),r=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},x=l.createContext({}),h=l.forwardRef((e,t)=>{let{className:s,...r}=e,n=l.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",s),...r})})});h.displayName="FormItem";let f=l.forwardRef((e,t)=>{let{className:s,...l}=e,{error:r,formItemId:n}=m();return(0,a.jsx)(o._,{ref:t,className:(0,i.cn)(r&&"text-destructive",s),htmlFor:n,...l})});f.displayName="FormLabel";let p=l.forwardRef((e,t)=>{let{...s}=e,{error:l,formItemId:n,formDescriptionId:i,formMessageId:o}=m();return(0,a.jsx)(r.g7,{ref:t,id:n,"aria-describedby":l?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!l,...s})});p.displayName="FormControl";let j=l.forwardRef((e,t)=>{let{className:s,...l}=e,{formDescriptionId:r}=m();return(0,a.jsx)("p",{ref:t,id:r,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});j.displayName="FormDescription";let g=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e,{error:n,formMessageId:o}=m(),c=n?String(null==n?void 0:n.message):l;return c?(0,a.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",s),...r,children:c}):null});g.displayName="FormMessage"},26815:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(57437),l=s(2265),r=s(6394),n=s(90535),i=s(94508);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,i.cn)(o(),s),...l})});c.displayName=r.f.displayName},53647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return f},Ph:function(){return d},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=s(57437),l=s(2265),r=s(56873),n=s(40875),i=s(22135),o=s(30401),c=s(94508);let d=r.fC;r.ZA;let u=r.B4,m=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(r.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[l,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let f=l.forwardRef((e,t)=>{let{className:s,children:l,position:n="popper",...i}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(h,{})]})})});f.displayName=r.VY.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=r.__.displayName;let p=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(r.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:l})]})});p.displayName=r.ck.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=r.Z0.displayName},71159:function(e){e.exports={agentPersonality:"agentCard_agentPersonality__MmRlN",infoButton:"agentCard_infoButton__heh_w"}}}]);
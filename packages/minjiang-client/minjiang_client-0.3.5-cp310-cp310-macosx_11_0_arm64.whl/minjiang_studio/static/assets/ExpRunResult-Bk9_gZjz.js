import{d as Pt,e as ne,f as T,h as F,aT as at,aJ as ca,r as z,z as da,c as pa,Z as _a,Y as ga,b as ma,F as Vt,ae as zt,K as ee,m as ya,l as ha,a9 as va,B as he,aM as ba,N as wa,o as xa,a2 as It,bH as Ta,i as J,w as M,a4 as Ot,a5 as Et,k as i,C as te,T as Ca,J as Jt,t as Y,ab as Aa,x as qe,a1 as Ia,p as Oe,a0 as Oa,aQ as Ea,j as Pa,V as Ra,b2 as La,R as Ma,q as Ua,aN as Na,I as ka,aU as rt,aV as Da}from"./index-J5_wuFzQ.js";import{u as Fa,g as $a,v as Sa,w as qa,x as Ba,y as Ga,z as Ka}from"./exp-CY-VG9oB.js";import{_ as Ha}from"./DynamicForm.vue_vue_type_script_setup_true_lang-ERKaPvUp.js";import{i as Va}from"./json-editor-vue-B6h867kq.js";import{u as za}from"./exp-BkI3wTfv.js";import{c as Ja}from"./index-BypQeadj.js";import{N as Ya}from"./InputNumber-CR50tpzY.js";import{b as ja,a as Wa}from"./Tabs-CR38P_Kp.js";import{_ as Xa}from"./Popconfirm-DjayWGkX.js";import"./FormItem-cRlJVOXw.js";import"./Alert-BAyZP53g.js";import"./debounce-COzzVebV.js";import"./Add-C8P6H80E.js";const Za={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qa=Pt({name:"ArrowReset24Regular",render:function(j,C){return T(),ne("svg",Za,C[0]||(C[0]=[F("g",{fill:"none"},[F("path",{d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0z",fill:"currentColor"})],-1)]))}}),er={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},tr=Pt({name:"Edit",render:function(j,C){return T(),ne("svg",er,C[0]||(C[0]=[F("path",{d:"M2 26h28v2H2z",fill:"currentColor"},null,-1),F("path",{d:"M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z",fill:"currentColor"},null,-1)]))}});var Be={exports:{}};Be.exports;var Yt;function nr(){return Yt||(Yt=1,function(ve,j){var C=200,st="Expected a function",Ne="__lodash_hash_undefined__",be=1,a=2,U=9007199254740991,pe="[object Arguments]",W="[object Array]",ae="[object Boolean]",we="[object Date]",re="[object Error]",se="[object Function]",it="[object GeneratorFunction]",X="[object Map]",ke="[object Number]",ie="[object Object]",Ge="[object Promise]",De="[object RegExp]",xe="[object Set]",le="[object String]",Ee="[object Symbol]",Te="[object WeakMap]",Pe="[object ArrayBuffer]",Re="[object DataView]",lt="[object Float32Array]",ut="[object Float64Array]",Fe="[object Int8Array]",Le="[object Int16Array]",ot="[object Int32Array]",ft="[object Uint8Array]",ct="[object Uint8ClampedArray]",Ke="[object Uint16Array]",dt="[object Uint32Array]",p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,g=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/[\\^$.*+?()[\]{}|]/g,f=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,l={};l[lt]=l[ut]=l[Fe]=l[Le]=l[ot]=l[ft]=l[ct]=l[Ke]=l[dt]=!0,l[pe]=l[W]=l[Pe]=l[ae]=l[Re]=l[we]=l[re]=l[se]=l[X]=l[ke]=l[ie]=l[De]=l[xe]=l[le]=l[Te]=!1;var m=typeof at=="object"&&at&&at.Object===Object&&at,A=typeof self=="object"&&self&&self.Object===Object&&self,d=m||A||Function("return this")(),b=j&&!j.nodeType&&j,G=b&&!0&&ve&&!ve.nodeType&&ve,I=G&&G.exports===b,K=I&&m.process,N=function(){try{return K&&K.binding("util")}catch{}}(),H=N&&N.isTypedArray;function E(e,t,n,r){for(var u=-1,s=e?e.length:0;++u<s;){var c=e[u];t(r,c,n(c),e)}return r}function w(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function P(e){return function(t){return t==null?void 0:t[e]}}function R(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function k(e){return function(t){return e(t)}}function V(e,t){return e==null?void 0:e[t]}function $(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function He(e){var t=-1,n=Array(e.size);return e.forEach(function(r,u){n[++t]=[u,r]}),n}function _e(e,t){return function(n){return e(t(n))}}function pt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var _t=Array.prototype,Wt=Function.prototype,Ve=Object.prototype,gt=d["__core-js_shared__"],Rt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Lt=Wt.toString,ue=Ve.hasOwnProperty,Me=Ve.toString,Xt=RegExp("^"+Lt.call(ue).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mt=d.Symbol,Ut=d.Uint8Array,Zt=Ve.propertyIsEnumerable,Qt=_t.splice,en=_e(Object.keys,Object),mt=Ue(d,"DataView"),$e=Ue(d,"Map"),yt=Ue(d,"Promise"),ht=Ue(d,"Set"),vt=Ue(d,"WeakMap"),Se=Ue(Object,"create"),tn=Ae(mt),nn=Ae($e),an=Ae(yt),rn=Ae(ht),sn=Ae(vt),ze=Mt?Mt.prototype:void 0,bt=ze?ze.valueOf:void 0,Nt=ze?ze.toString:void 0;function Ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ln(){this.__data__=Se?Se(null):{}}function un(e){return this.has(e)&&delete this.__data__[e]}function on(e){var t=this.__data__;if(Se){var n=t[e];return n===Ne?void 0:n}return ue.call(t,e)?t[e]:void 0}function fn(e){var t=this.__data__;return Se?t[e]!==void 0:ue.call(t,e)}function cn(e,t){var n=this.__data__;return n[e]=Se&&t===void 0?Ne:t,this}Ce.prototype.clear=ln,Ce.prototype.delete=un,Ce.prototype.get=on,Ce.prototype.has=fn,Ce.prototype.set=cn;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dn(){this.__data__=[]}function pn(e){var t=this.__data__,n=Ye(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Qt.call(t,n,1),!0}function _n(e){var t=this.__data__,n=Ye(t,e);return n<0?void 0:t[n][1]}function gn(e){return Ye(this.__data__,e)>-1}function mn(e,t){var n=this.__data__,r=Ye(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}oe.prototype.clear=dn,oe.prototype.delete=pn,oe.prototype.get=_n,oe.prototype.has=gn,oe.prototype.set=mn;function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function yn(){this.__data__={hash:new Ce,map:new($e||oe),string:new Ce}}function hn(e){return je(this,e).delete(e)}function vn(e){return je(this,e).get(e)}function bn(e){return je(this,e).has(e)}function wn(e,t){return je(this,e).set(e,t),this}fe.prototype.clear=yn,fe.prototype.delete=hn,fe.prototype.get=vn,fe.prototype.has=bn,fe.prototype.set=wn;function Je(e){var t=-1,n=e?e.length:0;for(this.__data__=new fe;++t<n;)this.add(e[t])}function xn(e){return this.__data__.set(e,Ne),this}function Tn(e){return this.__data__.has(e)}Je.prototype.add=Je.prototype.push=xn,Je.prototype.has=Tn;function ce(e){this.__data__=new oe(e)}function Cn(){this.__data__=new oe}function An(e){return this.__data__.delete(e)}function In(e){return this.__data__.get(e)}function On(e){return this.__data__.has(e)}function En(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!$e||r.length<C-1)return r.push([e,t]),this;n=this.__data__=new fe(r)}return n.set(e,t),this}ce.prototype.clear=Cn,ce.prototype.delete=An,ce.prototype.get=In,ce.prototype.has=On,ce.prototype.set=En;function Pn(e,t){var n=me(e)||Gt(e)?R(e.length,String):[],r=n.length,u=!!r;for(var s in e)ue.call(e,s)&&!(u&&(s=="length"||$t(s,r)))&&n.push(s);return n}function Ye(e,t){for(var n=e.length;n--;)if(Bt(e[n][0],t))return n;return-1}function Rn(e,t,n,r){return Ln(e,function(u,s,c){t(r,u,n(u),c)}),r}var Ln=Jn(Un),Mn=Yn();function Un(e,t){return e&&Mn(e,t,et)}function kt(e,t){t=We(t,e)?[t]:Dt(t);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Xe(t[n++])];return n&&n==r?e:void 0}function Nn(e){return Me.call(e)}function kn(e,t){return e!=null&&t in Object(e)}function wt(e,t,n,r,u){return e===t?!0:e==null||t==null||!Ze(e)&&!Qe(t)?e!==e&&t!==t:Dn(e,t,wt,n,r,u)}function Dn(e,t,n,r,u,s){var c=me(e),L=me(t),x=W,D=W;c||(x=ge(e),x=x==pe?ie:x),L||(D=ge(t),D=D==pe?ie:D);var q=x==ie&&!$(e),B=D==ie&&!$(t),S=x==D;if(S&&!q)return s||(s=new ce),c||sa(e)?Ft(e,t,n,r,u,s):jn(e,t,x,n,r,u,s);if(!(u&a)){var Z=q&&ue.call(e,"__wrapped__"),Q=B&&ue.call(t,"__wrapped__");if(Z||Q){var ye=Z?e.value():e,de=Q?t.value():t;return s||(s=new ce),n(ye,de,r,u,s)}}return S?(s||(s=new ce),Wn(e,t,n,r,u,s)):!1}function Fn(e,t,n,r){var u=n.length,s=u;if(e==null)return!s;for(e=Object(e);u--;){var c=n[u];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++u<s;){c=n[u];var L=c[0],x=e[L],D=c[1];if(c[2]){if(x===void 0&&!(L in e))return!1}else{var q=new ce,B;if(!(B===void 0?wt(D,x,r,be|a,q):B))return!1}}return!0}function $n(e){if(!Ze(e)||ea(e))return!1;var t=Kt(e)||$(e)?Xt:O;return t.test(Ae(e))}function Sn(e){return Qe(e)&&Ct(e.length)&&!!l[Me.call(e)]}function qn(e){return typeof e=="function"?e:e==null?oa:typeof e=="object"?me(e)?Kn(e[0],e[1]):Gn(e):fa(e)}function Bn(e){if(!ta(e))return en(e);var t=[];for(var n in Object(e))ue.call(e,n)&&n!="constructor"&&t.push(n);return t}function Gn(e){var t=Xn(e);return t.length==1&&t[0][2]?qt(t[0][0],t[0][1]):function(n){return n===e||Fn(n,e,t)}}function Kn(e,t){return We(e)&&St(t)?qt(Xe(e),t):function(n){var r=la(n,e);return r===void 0&&r===t?ua(n,e):wt(t,r,void 0,be|a)}}function Hn(e){return function(t){return kt(t,e)}}function Vn(e){if(typeof e=="string")return e;if(At(e))return Nt?Nt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Dt(e){return me(e)?e:na(e)}function zn(e,t){return function(n,r){var u=me(n)?E:Rn,s=t?t():{};return u(n,e,qn(r),s)}}function Jn(e,t){return function(n,r){if(n==null)return n;if(!Tt(n))return e(n,r);for(var u=n.length,s=-1,c=Object(n);++s<u&&r(c[s],s,c)!==!1;);return n}}function Yn(e){return function(t,n,r){for(var u=-1,s=Object(t),c=r(t),L=c.length;L--;){var x=c[++u];if(n(s[x],x,s)===!1)break}return t}}function Ft(e,t,n,r,u,s){var c=u&a,L=e.length,x=t.length;if(L!=x&&!(c&&x>L))return!1;var D=s.get(e);if(D&&s.get(t))return D==t;var q=-1,B=!0,S=u&be?new Je:void 0;for(s.set(e,t),s.set(t,e);++q<L;){var Z=e[q],Q=t[q];if(r)var ye=c?r(Q,Z,q,t,e,s):r(Z,Q,q,e,t,s);if(ye!==void 0){if(ye)continue;B=!1;break}if(S){if(!w(t,function(de,Ie){if(!S.has(Ie)&&(Z===de||n(Z,de,r,u,s)))return S.add(Ie)})){B=!1;break}}else if(!(Z===Q||n(Z,Q,r,u,s))){B=!1;break}}return s.delete(e),s.delete(t),B}function jn(e,t,n,r,u,s,c){switch(n){case Re:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Pe:return!(e.byteLength!=t.byteLength||!r(new Ut(e),new Ut(t)));case ae:case we:case ke:return Bt(+e,+t);case re:return e.name==t.name&&e.message==t.message;case De:case le:return e==t+"";case X:var L=He;case xe:var x=s&a;if(L||(L=pt),e.size!=t.size&&!x)return!1;var D=c.get(e);if(D)return D==t;s|=be,c.set(e,t);var q=Ft(L(e),L(t),r,u,s,c);return c.delete(e),q;case Ee:if(bt)return bt.call(e)==bt.call(t)}return!1}function Wn(e,t,n,r,u,s){var c=u&a,L=et(e),x=L.length,D=et(t),q=D.length;if(x!=q&&!c)return!1;for(var B=x;B--;){var S=L[B];if(!(c?S in t:ue.call(t,S)))return!1}var Z=s.get(e);if(Z&&s.get(t))return Z==t;var Q=!0;s.set(e,t),s.set(t,e);for(var ye=c;++B<x;){S=L[B];var de=e[S],Ie=t[S];if(r)var Ht=c?r(Ie,de,S,t,e,s):r(de,Ie,S,e,t,s);if(!(Ht===void 0?de===Ie||n(de,Ie,r,u,s):Ht)){Q=!1;break}ye||(ye=S=="constructor")}if(Q&&!ye){var tt=e.constructor,nt=t.constructor;tt!=nt&&"constructor"in e&&"constructor"in t&&!(typeof tt=="function"&&tt instanceof tt&&typeof nt=="function"&&nt instanceof nt)&&(Q=!1)}return s.delete(e),s.delete(t),Q}function je(e,t){var n=e.__data__;return Qn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Xn(e){for(var t=et(e),n=t.length;n--;){var r=t[n],u=e[r];t[n]=[r,u,St(u)]}return t}function Ue(e,t){var n=V(e,t);return $n(n)?n:void 0}var ge=Nn;(mt&&ge(new mt(new ArrayBuffer(1)))!=Re||$e&&ge(new $e)!=X||yt&&ge(yt.resolve())!=Ge||ht&&ge(new ht)!=xe||vt&&ge(new vt)!=Te)&&(ge=function(e){var t=Me.call(e),n=t==ie?e.constructor:void 0,r=n?Ae(n):void 0;if(r)switch(r){case tn:return Re;case nn:return X;case an:return Ge;case rn:return xe;case sn:return Te}return t});function Zn(e,t,n){t=We(t,e)?[t]:Dt(t);for(var r,u=-1,c=t.length;++u<c;){var s=Xe(t[u]);if(!(r=e!=null&&n(e,s)))break;e=e[s]}if(r)return r;var c=e?e.length:0;return!!c&&Ct(c)&&$t(s,c)&&(me(e)||Gt(e))}function $t(e,t){return t=t??U,!!t&&(typeof e=="number"||h.test(e))&&e>-1&&e%1==0&&e<t}function We(e,t){if(me(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||At(e)?!0:o.test(e)||!p.test(e)||t!=null&&e in Object(t)}function Qn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ea(e){return!!Rt&&Rt in e}function ta(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ve;return e===n}function St(e){return e===e&&!Ze(e)}function qt(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var na=xt(function(e){e=ia(e);var t=[];return g.test(e)&&t.push(""),e.replace(_,function(n,r,u,s){t.push(u?s.replace(f,"$1"):r||n)}),t});function Xe(e){if(typeof e=="string"||At(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ae(e){if(e!=null){try{return Lt.call(e)}catch{}try{return e+""}catch{}}return""}var aa=zn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function xt(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(st);var n=function(){var r=arguments,u=t?t.apply(this,r):r[0],s=n.cache;if(s.has(u))return s.get(u);var c=e.apply(this,r);return n.cache=s.set(u,c),c};return n.cache=new(xt.Cache||fe),n}xt.Cache=fe;function Bt(e,t){return e===t||e!==e&&t!==t}function Gt(e){return ra(e)&&ue.call(e,"callee")&&(!Zt.call(e,"callee")||Me.call(e)==pe)}var me=Array.isArray;function Tt(e){return e!=null&&Ct(e.length)&&!Kt(e)}function ra(e){return Qe(e)&&Tt(e)}function Kt(e){var t=Ze(e)?Me.call(e):"";return t==se||t==it}function Ct(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=U}function Ze(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Qe(e){return!!e&&typeof e=="object"}function At(e){return typeof e=="symbol"||Qe(e)&&Me.call(e)==Ee}var sa=H?k(H):Sn;function ia(e){return e==null?"":Vn(e)}function la(e,t,n){var r=e==null?void 0:kt(e,t);return r===void 0?n:r}function ua(e,t){return e!=null&&Zn(e,t,kn)}function et(e){return Tt(e)?Pn(e):Bn(e)}function oa(e){return e}function fa(e){return We(e)?P(Xe(e)):Hn(e)}ve.exports=aa}(Be,Be.exports)),Be.exports}var ar=nr();const rr=ca(ar),sr={class:"flex gap-3"},ir={class:"w-64 pl-2"},lr={class:"mb-5"},ur={class:"text-xl"},or={class:"text-sm opacity-80"},fr={key:0,class:"text-right mt-2"},cr={class:"flex justify-between items-center mb-2"},dr={class:"flex-1"},pr={key:0},_r={class:"text-xl"},gr={class:"opacity-75 italic pl-2"},mr={key:1,class:"text-xl"},yr={key:0,class:"flex gap-2"},hr={class:"mt-4 mb-2 text-xl"},vr={class:"flex justify-end mt-5 gap-2"},v="__SPACE_PARAMETER_UPDATING__",jt="__SELECTED_SPACE_PARAMETER_UPDATING__",Ur=Pt({__name:"ExpRunResult",setup(ve){const j=z(!1),C=da(),st=pa(),Ne=_a(),be=ga(),a=za(),{t:U}=ma(),pe=z(),W=z({show:!1}),ae=z(!1),we=z(!1),re=z(!1),se=z(!1),it=[{label:"str",value:"str"},{label:"int",value:"int"},{label:"float",value:"float"},{label:"bool",value:"bool"},{label:"list",value:"list"},{label:"tuple",value:"tuple"},{label:"dict",value:"dict"},{label:"complex",value:"complex"},{label:"ndarray",value:"ndarray"}],X=z(),ke=z(),ie=z(),Ge=async()=>{var g,_;const[p,o]=await Fa();if(!p&&(o==null?void 0:o.status)===0){ie.value=o.data;const[y]=(_=(g=a==null?void 0:a.expInfo)==null?void 0:g.exp)!=null&&_.template?a.expInfo.exp.template.split("/"):"";y&&o.data[y]?(X.value=y,rt(()=>{Te(y,!0)})):(X.value=Object.keys(o.data)[0],rt(()=>{Te(Object.keys(o.data)[0])}))}},De=async()=>{var g,_,y;if(!C.query.exp_id)return;const[p,o]=await $a({exp_id:C.query.exp_id,device_group_name:C.query.device_group_name,space_id:C.query.space_id});if(!p&&(o==null?void 0:o.status)===0){if((g=o.data)!=null&&g.data){o.data.data=JSON.parse(o.data.data);const f=(_=o.data.data)!=null&&_.tables?(y=o.data.data)==null?void 0:y.tables[v]:null;f&&(f.crows=f.rows)}a.result=o.data}},xe=Vt(()=>{var _,y;const p=[];(_=a.result)!=null&&_.data&&zt((y=a.result.data)==null?void 0:y.tables,f=>{const O=f.rows.map(l=>{var A;const m={};return(A=f.columns)==null||A.forEach((d,b)=>{m[d.name]=typeof l[b]!==void 0?`${l[b]}`:l[b]}),m}),h=f.columns.map((l,m)=>{const A={...l,title:l.name,key:l.name};return l.name==="key"?{...A,minWidth:200}:l.name==="type"&&f.name===v?{...A,width:200,render(d,b){if(j.value){const G=f.crows?f.crows[b][m]:null;return ee(ya,{class:G!=d.type?"!outline !outline-red-500 w-32":"w-32",options:it,value:d.type,onUpdateValue:I=>{var K,N,H,E,w,P,R,k;(N=(K=a==null?void 0:a.result)==null?void 0:K.data)!=null&&N.tables&&((E=(H=a==null?void 0:a.result)==null?void 0:H.data)!=null&&E.tables[v])&&(((P=(w=a==null?void 0:a.result)==null?void 0:w.data)==null?void 0:P.tables[v]).rows[b][m]=I,I==="bool"&&(((k=(R=a==null?void 0:a.result)==null?void 0:R.data)==null?void 0:k.tables[v]).rows[b][m+1]=!1))}})}return d.type}}:l.name==="value"&&f.name===v?{...A,render:(d,b)=>{const G=f.crows?f.crows[b][m]:null;if(j.value){const I=ee(Ya,{value:+d.value,class:G!=d.value?"outline outline-red-500 w-full":"w-full",onUpdateValue(E){var w,P,R,k,V,$;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((k=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&k.tables[v])&&((($=(V=a==null?void 0:a.result)==null?void 0:V.data)==null?void 0:$.tables[v]).rows[b][m]=E)}}),K=ee(ha,{value:String(d.value),class:G!==d.value?"!outline !outline-red-500":"",onUpdateValue(E){var w,P,R,k,V,$;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((k=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&k.tables[v])&&((($=(V=a==null?void 0:a.result)==null?void 0:V.data)==null?void 0:$.tables[v]).rows[b][m]=E)}}),N=ee("div",{class:"flex gap-2 h-[34px] leading-[34px]"},[ee("div",{class:G!=d.value?"outline outline-red-500":""},ee(va,{lineClamp:1},{default:()=>d.value})),ee(he,{type:"info",size:"tiny",class:"!h-[34px] !w-[34px]",onClick:()=>{W.value={show:!0,info:{rowIdx:b,cidx:m,value:d.value}}}},{icon:()=>ee(tr)})]),H=ee(ba,{class:G!=d.value?"!outline !outline-red-500 w-32":"w-32",checkedValue:"true",uncheckedValue:"false",onUpdateValue:E=>{var w,P,R,k,V,$;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((k=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&k.tables[v])&&((($=(V=a==null?void 0:a.result)==null?void 0:V.data)==null?void 0:$.tables[v]).rows[b][m]=E)}});return ee("div",{class:"flex items-center"},Ja([["float","int"].includes(d.type)?I:null,["str","complex"].includes(d.type)?K:null,["dict","list","tuple","ndarray"].includes(d.type)?N:null,["bool"].includes(d.type)?H:null]))}return d.value}}:A});j.value&&f.name===v&&h.push({title:U("expInfo.tableOptions"),key:"options",width:100,align:"rigth",render(l,m){const A=f.columns.findIndex(I=>I.name==="type"),d=f.crows?f.crows[m][A]:null,b=f.columns.findIndex(I=>I.name==="value"),G=f.crows?f.crows[m][b]:null;return ee(he,{type:"info",size:"small",class:"!h-[34px]",onClick:()=>{var I,K,N,H,E,w,P,R;(K=(I=a==null?void 0:a.result)==null?void 0:I.data)!=null&&K.tables&&((H=(N=a==null?void 0:a.result)==null?void 0:N.data)!=null&&H.tables[v])&&(((w=(E=a==null?void 0:a.result)==null?void 0:E.data)==null?void 0:w.tables[v]).rows[m][b]=G,((R=(P=a==null?void 0:a.result)==null?void 0:P.data)==null?void 0:R.tables[v]).rows[m][A]=d)}},{default:()=>U("expInfo.reset"),icon:()=>ee(wa,{component:Qa})})}}),f.name===v&&j.value&&h.unshift({type:"selection",key:"selection"}),p.push({oname:f.name,name:f.name===v?U("expInfo.needUpdateParams"):f.name===jt?U("expInfo.updatedParams"):f.name,columns:h,rows:O})});const[o,g]=rr(p,{oname:jt});return[...o,...g]}),le=z(),Ee=z(),Te=async(p,o)=>{var y,f,O;const[g,_]=await Sa({fitter_group_name:p});if(!g&&(_==null?void 0:_.status)===0){ke.value=_.data;const h=(O=(f=(y=a==null?void 0:a.expInfo)==null?void 0:y.exp)==null?void 0:f.template)==null?void 0:O.split("/")[1];h&&_.data[h]&&o?(le.value=h,rt(()=>{Pe(h)})):(le.value=Object.keys(_.data)[0],rt(()=>{Pe(Object.keys(_.data)[0])}))}},Pe=async p=>{if(ae.value)return;ae.value=!0;const[o,g]=await qa({fitter_group_name:X.value,fitter_name:p,group_name:C.query.device_group_name,space_id:C.query.space_id});ae.value=!1,!o&&(g==null?void 0:g.status)===0&&(g.data.exp_id&&(g.data.exp_id.default=C.query.exp_id?Number(C.query.exp_id):null),Ee.value=g.data)},Re=p=>{Te(p)},lt=p=>{Pe(p)},ut=async()=>{var O;if(!pe.value||we.value)return;we.value=!0;const p=await((O=pe.value[0])==null?void 0:O.submit()),o=Da(p);if(It(o))return;const{device_group_name:g,space_id:_}=C.query,[y,f]=await Ba({setting:o,group_name:g,space_id:_,fitter_group:X.value,fitter_name:le.value});if(we.value=!1,!y&&(f==null?void 0:f.status)===0){a.result={...f.data,big_picture_url:"/"+f.data.plot_file_in_static};const[h,l]=await Ga("/"+f.data.table_file_in_static);h||(j.value=!0,zt(l==null?void 0:l.tables,(m,A)=>{A===v&&(m.crows=JSON.parse(JSON.stringify(m.rows)),Le.value=m.crows.map(d=>d[0]))}),a.result={...a.result||{},data:l})}},Fe=async(p=!1)=>{var y,f,O,h,l;if(p){if(se.value)return;se.value=!0}else{if(re.value)return;re.value=!0}const o={group_name:C.query.device_group_name,space_id:C.query.space_id,exp_id:C.query.exp_id,task_id:((y=a.expInfo)==null?void 0:y.task_id)||"",img_file:((f=a.result)==null?void 0:f.plot_file)||"",table_file:((O=a.result)==null?void 0:O.table_file)||"",update_space_parameters:p};if(p){const m=(h=xe.value)==null?void 0:h.find(A=>A.oname===v);o.space_parameters=(l=Le.value)==null?void 0:l.map(A=>{var d;return(d=m.rows)==null?void 0:d.find(b=>b.key===A)})}const[g,_]=await Ka(o);!g&&(_==null?void 0:_.status)===0&&(Ne.success("Submit Successfully"),await De(),j.value=!1),p?se.value=!1:re.value=!1},Le=z(),ot=p=>{Le.value=p};xa(()=>{if(!C.query.exp_id){st.back();return}Ge(),De()});const ft=()=>{Fe()},ct=Vt(()=>{var o,g,_,y,f,O;const p=(g=(o=a.result)==null?void 0:o.data)!=null&&g.tables?(y=(_=a.result)==null?void 0:_.data)==null?void 0:y.tables[v]:null;if(!It(p)){const h=(f=p.columns)==null?void 0:f.findIndex(l=>l.name==="value");return h<0?!1:(O=p.crows)==null?void 0:O.some((l,m)=>l[h]!==p.rows[m][h])}return!1}),Ke=()=>{W.value={show:!1,info:void 0}},dt=()=>{var _,y,f,O,h,l;const{rowIdx:p,cidx:o,value:g}=W.value.info;(y=(_=a==null?void 0:a.result)==null?void 0:_.data)!=null&&y.tables&&((O=(f=a==null?void 0:a.result)==null?void 0:f.data)!=null&&O.tables[v])&&(((l=(h=a==null?void 0:a.result)==null?void 0:h.data)==null?void 0:l.tables[v]).rows[p][o]=g),Ke()};return Ta(()=>{a.result=void 0}),(p,o)=>{const g=Ia,_=Aa,y=Ea,f=Xa,O=Pa,h=Ra,l=Ma,m=ja,A=Wa,d=Ca,b=Ua,G=ka;return T(),ne("div",null,[J(A,{type:"card",placement:"top",animated:"",onUpdateValue:Re,value:i(X),"onUpdate:value":o[3]||(o[3]=I=>Jt(X)?X.value=I:null),class:"!h-full"},{default:M(()=>[(T(!0),ne(Ot,null,Et(i(ie),(I,K)=>(T(),te(m,{key:K,name:K,tab:I.title,disabled:i(ae)},{default:M(()=>[J(d,{class:"p-3 min-h-[260px]"},{default:M(()=>[J(A,{type:"line",placement:"left",value:i(le),"onUpdate:value":o[2]||(o[2]=N=>Jt(le)?le.value=N:null),size:"small",onUpdateValue:lt,style:{height:"calc(100vh - 330px)"}},{default:M(()=>[(T(!0),ne(Ot,null,Et(i(ke),(N,H)=>(T(),te(m,{key:H,name:H,tab:N.title,disabled:i(ae)},{default:M(()=>[F("div",sr,[F("div",ir,[F("div",lr,[F("div",ur,Y(N.title),1),F("div",or,Y(N.desc),1)]),J(_,{show:i(ae)},{default:M(()=>{var E,w;return[J(g,{style:{"max-height":"calc(100vh - 330px)"}},{default:M(()=>[i(Ee)&&!i(ae)?(T(),te(Ha,{key:0,cfgs:i(Ee),ref_for:!0,ref_key:"dynamicFormRef",ref:pe},null,8,["cfgs"])):qe("",!0)]),_:1}),(w=(E=i(a))==null?void 0:E.expInfo)!=null&&w.exp_id?(T(),ne("div",fr,[J(i(he),{type:"primary",onClick:ut,loading:i(we)},{default:M(()=>[Oe(Y(i(U)("expInfo.ffitting")),1)]),_:1},8,["loading"])])):qe("",!0)]}),_:1},8,["show"])]),F("div",{class:"flex-1 pl-3",style:Oa({borderLeft:`1px solid ${i(be).dividerColor}`})},[i(It)(i(a).result)?(T(),te(y,{key:0,description:i(U)("expInfo.nores"),class:"mt-20"},null,8,["description"])):(T(),te(g,{key:1,style:{"max-height":"calc(100vh - 330px)"}},{default:M(()=>{var E,w,P,R,k,V,$,He;return[F("div",cr,[F("div",dr,[!((E=i(a).result)!=null&&E.plot_file)&&!((w=i(a).result)!=null&&w.table_file)&&((P=i(a).result)!=null&&P.create_time)?(T(),ne("div",pr,[F("span",_r,Y(i(U)("expInfo.resUploaded")),1),F("span",gr,Y((R=i(a).result)==null?void 0:R.create_time),1)])):(T(),ne("div",mr,Y(i(U)("expInfo.result")),1))]),(k=i(a).result)!=null&&k.plot_file||(V=i(a).result)!=null&&V.table_file?(T(),ne("div",yr,[i(ct)?(T(),te(f,{key:0,onPositiveClick:ft},{trigger:M(()=>[J(i(he),{loading:i(re),type:"primary",disabled:i(se)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])]),default:M(()=>[Oe(" "+Y(i(U)("expInfo.updateOnlyTips")),1)]),_:1})):(T(),te(i(he),{key:1,loading:i(re),type:"primary",onClick:o[0]||(o[0]=()=>Fe()),disabled:i(se)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])),J(i(he),{loading:i(se),type:"primary",onClick:o[1]||(o[1]=()=>Fe(!0)),disabled:i(re)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadAndModifyParams")),1)]),_:1},8,["loading","disabled"])])):qe("",!0)]),J(O,{class:"!my-2"}),($=i(a).result)!=null&&$.big_picture_url?(T(),te(h,{key:0,src:i(La)((He=i(a).result)==null?void 0:He.big_picture_url,"t",String(+new Date)),alt:"",class:"max-w-full"},null,8,["src"])):qe("",!0),(T(!0),ne(Ot,null,Et(i(xe),(_e,pt)=>(T(),ne("div",{key:pt},[F("div",hr,Y(_e.name),1),_e.oname===v?(T(),te(l,{key:0,columns:_e.columns,data:_e.rows,"checked-row-keys":i(Le),"row-key":_t=>_t.key,"onUpdate:checkedRowKeys":ot},null,8,["columns","data","checked-row-keys","row-key"])):(T(),te(l,{key:1,columns:_e.columns,data:_e.rows},null,8,["columns","data"]))]))),128))]}),_:2},1024))],4)])]),_:2},1032,["name","tab","disabled"]))),128))]),_:2},1032,["value"])]),_:2},1024)]),_:2},1032,["name","tab","disabled"]))),128))]),_:1},8,["value"]),J(G,{show:i(W).show,"onUpdate:show":o[5]||(o[5]=I=>i(W).show=I),"mask-closable":!1},{default:M(()=>[J(b,{style:{width:"1000px","min-height":"500px"},size:"huge",bordered:!1},{default:M(()=>[i(W).info?(T(),te(i(Va),{key:0,class:Na(["w-full h-[70vh] overflow-auto",[i(be).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:i(W).info.value,"onUpdate:modelValue":o[4]||(o[4]=I=>i(W).info.value=I),mode:"text"},null,8,["class","modelValue"])):qe("",!0),F("div",vr,[J(i(he),{onClick:Ke},{default:M(()=>[Oe(Y(i(U)("common.cancel")),1)]),_:1}),J(i(he),{type:"primary",onClick:dt},{default:M(()=>[Oe(Y(i(U)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])])}}});export{Ur as default};

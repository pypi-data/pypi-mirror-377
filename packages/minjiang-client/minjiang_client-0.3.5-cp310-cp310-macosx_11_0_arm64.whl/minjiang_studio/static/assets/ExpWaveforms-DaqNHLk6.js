import{af as ti,aj as zi,d as it,K as Mt,ak as ni,aq as Fr,bm as Fi,F as Ct,as as Xa,at as Ui,ai as yo,bn as Gi,bo as Bi,a4 as ht,bp as Hi,bq as bo,e as ge,f as W,h as Y,aG as ji,aT as tt,aJ as cr,aK as ri,Y as Ln,b0 as Ur,a0 as Zt,k as d,br as Nr,a5 as Ut,aN as ao,C as $e,x as Je,w as D,i as C,B as $t,p as xe,t as we,bs as Ji,H as Gr,r as he,a1 as oo,bt as Ya,o as io,bu as qi,aL as Lt,aU as Rt,$ as ai,b as kn,z as oi,ae as wo,a2 as wt,N as Br,I as zn,J as Tt,q as Fn,bv as Wi,bw as Vi,ab as lo,Z as Xi,a9 as Yi,m as so,aV as xo,bx as ar,by as Ka,bz as Ki,l as Qi,j as ii,a3 as Zi,a6 as el,aX as tl,a7 as nl,aQ as rl,bA as al,L as li,bB as uo}from"./index-J5_wuFzQ.js";import{u as Un,n as co}from"./exp-BkI3wTfv.js";import{A as Pr}from"./Add-GkLiV60o.js";import{D as fo,E as si}from"./EditOutlined-CxVRAS58.js";import{_ as Hr,C as ui,r as ol,Z as So,c as Co,w as Io,g as Oo,a as il,R as ll,b as ci,t as ot,i as sl,d as ul,e as cl,m as fl,k as dl,f as fi,h as di,j as pl,l as Eo,n as hl,o as vl,p as gl,q as ml,s as _l,S as yl,u as bl,v as wl,x as xl,y as To,z as Sl,A as Cl,B as Il,D as Ol,E as El,F as Tl,G as Al,H as Dl,I as Nl,J as Pl,K as Ml}from"./installCanvasRenderer-DQ3trSBi.js";import{n as Rl,o as $l,p as Ll,q as kl}from"./exp-CY-VG9oB.js";import{P as pi,o as zl}from"./index-FTla-omU.js";import{_ as Fl}from"./Alert-BAyZP53g.js";import{C as Ul}from"./Copy16Filled-CVvtcQrC.js";import{N as po}from"./InputNumber-CR50tpzY.js";import{_ as hi,Q as Ao}from"./ScriptTemplate.vue_vue_type_script_setup_true_lang-BtDwOg18.js";import{V as vi}from"./index-DRYyqL9g.js";import{_ as jr,a as Jr}from"./FormItem-cRlJVOXw.js";import{_ as Gl}from"./Popconfirm-DjayWGkX.js";import{C as Bl}from"./CommingSoon-D4lnxNbH.js";import{u as Hl}from"./use-houdini-DqtEzbnd.js";import"./Add-C8P6H80E.js";const jl=ti("input-group-label",`
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 box-sizing: border-box;
 padding: 0 12px;
 display: inline-block;
 border-radius: var(--n-border-radius);
 background-color: var(--n-group-label-color);
 color: var(--n-group-label-text-color);
 font-size: var(--n-font-size);
 line-height: var(--n-height);
 height: var(--n-height);
 flex-shrink: 0;
 white-space: nowrap;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[zi("border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-group-label-border);
 transition: border-color .3s var(--n-bezier);
 `)]),Jl=Object.assign(Object.assign({},Fr.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:void 0}}),ql=it({name:"InputGroupLabel",props:Jl,setup(e){const{mergedBorderedRef:r,mergedClsPrefixRef:n,inlineThemeDisabled:a}=ni(e),l=Fr("Input","-input-group-label",jl,Fi,e,n),s=Ct(()=>{const{size:h}=e,{common:{cubicBezierEaseInOut:c},self:{groupLabelColor:m,borderRadius:p,groupLabelTextColor:I,lineHeight:N,groupLabelBorder:v,[Xa("fontSize",h)]:O,[Xa("height",h)]:M}}=l.value;return{"--n-bezier":c,"--n-group-label-color":m,"--n-group-label-border":v,"--n-border-radius":p,"--n-group-label-text-color":I,"--n-font-size":O,"--n-line-height":N,"--n-height":M}}),u=a?Ui("input-group-label",Ct(()=>e.size[0]),s,e):void 0;return{mergedClsPrefix:n,mergedBordered:r,cssVars:a?void 0:s,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e,r,n;const{mergedClsPrefix:a}=this;return(e=this.onRender)===null||e===void 0||e.call(this),Mt("div",{class:[`${a}-input-group-label`,this.themeClass],style:this.cssVars},(n=(r=this.$slots).default)===null||n===void 0?void 0:n.call(r),this.mergedBordered?Mt("div",{class:`${a}-input-group-label__border`}):null)}}),Wl=yo([ti("skeleton",`
 height: 1em;
 width: 100%;
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--n-color-start);
 `),yo("@keyframes skeleton-loading",`
 0% {
 background: var(--n-color-start);
 }
 40% {
 background: var(--n-color-end);
 }
 80% {
 background: var(--n-color-start);
 }
 100% {
 background: var(--n-color-start);
 }
 `)]),Vl=Object.assign(Object.assign({},Fr.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),Xl=it({name:"Skeleton",inheritAttrs:!1,props:Vl,setup(e){Hl();const{mergedClsPrefixRef:r}=ni(e),n=Fr("Skeleton","-skeleton",Wl,Hi,e,r);return{mergedClsPrefix:r,style:Ct(()=>{var a,l;const s=n.value,{common:{cubicBezierEaseInOut:u}}=s,h=s.self,{color:c,colorEnd:m,borderRadius:p}=h;let I;const{circle:N,sharp:v,round:O,width:M,height:K,size:R,text:J,animated:B}=e;R!==void 0&&(I=h[Xa("height",R)]);const P=N?(a=M??K)!==null&&a!==void 0?a:I:M,E=(l=N?M??K:K)!==null&&l!==void 0?l:I;return{display:J?"inline-block":"",verticalAlign:J?"-0.125em":"",borderRadius:N?"50%":O?"4096px":v?"":p,width:typeof P=="number"?bo(P):P,height:typeof E=="number"?bo(E):E,animation:B?"":"none","--n-bezier":u,"--n-color-start":c,"--n-color-end":m}})}},render(){const{repeat:e,style:r,mergedClsPrefix:n,$attrs:a}=this,l=Mt("div",Gi({class:`${n}-skeleton`,style:r},a));return e>1?Mt(ht,null,Bi(e,null).map(s=>[l,`
`])):l}}),Yl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Kl=it({name:"Pulse",render:function(r,n){return W(),ge("svg",Yl,n[0]||(n[0]=[Y("path",{d:"M432 272a48.09 48.09 0 0 0-45.25 32h-39.22l-28.35-85.06a16 16 0 0 0-30.56.66l-44.51 155.76l-52.33-314a16 16 0 0 0-31.3-1.25L99.51 304H48a16 16 0 0 0 0 32h64a16 16 0 0 0 15.52-12.12l45.34-181.37l51.36 308.12A16 16 0 0 0 239.1 464h.91a16 16 0 0 0 15.37-11.6l49.8-174.28l15.64 46.94A16 16 0 0 0 336 336h50.75A48 48 0 1 0 432 272z",fill:"currentColor"},null,-1)]))}}),Ql={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Zl=it({name:"ArrowLeft24Regular",render:function(r,n){return W(),ge("svg",Ql,n[0]||(n[0]=[Y("g",{fill:"none"},[Y("path",{d:"M10.733 19.79a.75.75 0 0 0 1.034-1.086L5.516 12.75H20.25a.75.75 0 0 0 0-1.5H5.516l6.251-5.955a.75.75 0 0 0-1.034-1.086l-7.42 7.067a.995.995 0 0 0-.3.58a.754.754 0 0 0 .001.289a.995.995 0 0 0 .3.579l7.419 7.067z",fill:"currentColor"})],-1)]))}}),es={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ts=it({name:"ArrowRight24Regular",render:function(r,n){return W(),ge("svg",es,n[0]||(n[0]=[Y("g",{fill:"none"},[Y("path",{d:"M13.267 4.209a.75.75 0 0 0-1.034 1.086l6.251 5.955H3.75a.75.75 0 0 0 0 1.5h14.734l-6.251 5.954a.75.75 0 0 0 1.034 1.087l7.42-7.067a.996.996 0 0 0 .3-.58a.758.758 0 0 0-.001-.29a.995.995 0 0 0-.3-.578l-7.419-7.067z",fill:"currentColor"})],-1)]))}});var ns=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=r.type,n.layoutMode={type:"box",ignoreSize:!0},n}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(ui),rs=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,a,l){if(this.group.removeAll(),!!n.get("show")){var s=this.group,u=n.getModel("textStyle"),h=n.getModel("subtextStyle"),c=n.get("textAlign"),m=ol(n.get("textBaseline"),n.get("textVerticalAlign")),p=new So({style:Co(u,{text:n.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),I=p.getBoundingRect(),N=n.get("subtext"),v=new So({style:Co(h,{text:N,fill:h.getTextColor(),y:I.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),O=n.get("link"),M=n.get("sublink"),K=n.get("triggerEvent",!0);p.silent=!O&&!K,v.silent=!M&&!K,O&&p.on("click",function(){Io(O,"_"+n.get("target"))}),M&&v.on("click",function(){Io(M,"_"+n.get("subtarget"))}),Oo(p).eventData=Oo(v).eventData=K?{componentType:"title",componentIndex:n.componentIndex}:null,s.add(p),N&&s.add(v);var R=s.getBoundingRect(),J=n.getBoxLayoutParams();J.width=R.width,J.height=R.height;var B=il(J,{width:l.getWidth(),height:l.getHeight()},n.get("padding"));c||(c=n.get("left")||n.get("right"),c==="middle"&&(c="center"),c==="right"?B.x+=B.width:c==="center"&&(B.x+=B.width/2)),m||(m=n.get("top")||n.get("bottom"),m==="center"&&(m="middle"),m==="bottom"?B.y+=B.height:m==="middle"&&(B.y+=B.height/2),m=m||"top"),s.x=B.x,s.y=B.y,s.markRedraw();var P={align:c,verticalAlign:m};p.setStyle(P),v.setStyle(P),R=s.getBoundingRect();var E=B.margin,$=n.getItemStyle(["color","opacity"]);$.fill=n.get("backgroundColor");var x=new ll({shape:{x:R.x-E[3],y:R.y-E[0],width:R.width+E[1]+E[3],height:R.height+E[0]+E[2],r:n.get("borderRadius")},style:$,subPixelOptimize:!0,silent:!0});s.add(x)}},r.type="title",r}(ci);function as(e){e.registerComponentModel(ns),e.registerComponentView(rs)}var Do={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},os=function(){function e(r){var n=this._condVal=Eo(r)?new RegExp(r):hl(r)?r:null;if(n==null){var a="";ot(a)}}return e.prototype.evaluate=function(r){var n=typeof r;return Eo(n)?this._condVal.test(r):vl(n)?this._condVal.test(r+""):!1},e}(),is=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),ls=function(){function e(){}return e.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(!r[n].evaluate())return!1;return!0},e}(),ss=function(){function e(){}return e.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(r[n].evaluate())return!0;return!1},e}(),us=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),cs=function(){function e(){}return e.prototype.evaluate=function(){for(var r=!!this.valueParser,n=this.getValue,a=n(this.valueGetterParam),l=r?this.valueParser(a):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(r?l:a))return!1;return!0},e}();function ho(e,r){if(e===!0||e===!1){var n=new is;return n.value=e,n}var a="";return gi(e)||ot(a),e.and?No("and",e,r):e.or?No("or",e,r):e.not?fs(e,r):ds(e,r)}function No(e,r,n){var a=r[e],l="";cl(a)||ot(l),a.length||ot(l);var s=e==="and"?new ls:new ss;return s.children=fl(a,function(u){return ho(u,n)}),s.children.length||ot(l),s}function fs(e,r){var n=e.not,a="";gi(n)||ot(a);var l=new us;return l.child=ho(n,r),l.child||ot(a),l}function ds(e,r){for(var n="",a=r.prepareGetValue(e),l=[],s=dl(e),u=e.parser,h=u?fi(u):null,c=0;c<s.length;c++){var m=s[c];if(!(m==="parser"||r.valueGetterAttrMap.get(m))){var p=di(Do,m)?Do[m]:m,I=e[m],N=h?h(I):I,v=pl(p,N)||p==="reg"&&new os(N);v||ot(n),l.push(v)}}l.length||ot(n);var O=new cs;return O.valueGetterParam=a,O.valueParser=h,O.getValue=r.getValue,O.subCondList=l,O}function gi(e){return sl(e)&&!ul(e)}var ps=function(){function e(r,n){this._cond=ho(r,n)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function hs(e,r){return new ps(e,r)}var vs={type:"echarts:filter",transform:function(e){for(var r=e.upstream,n,a=hs(e.config,{valueGetterAttrMap:gl({dimension:!0}),prepareGetValue:function(h){var c="",m=h.dimension;di(h,"dimension")||ot(c);var p=r.getDimensionInfo(m);return p||ot(c),{dimIdx:p.index}},getValue:function(h){return r.retrieveValueFromItem(n,h.dimIdx)}}),l=[],s=0,u=r.count();s<u;s++)n=r.getRawDataItem(s),a.evaluate()&&l.push(n);return{data:l}}},gs={type:"echarts:sort",transform:function(e){var r=e.upstream,n=e.config,a="",l=ml(n);l.length||ot(a);var s=[];_l(l,function(p){var I=p.dimension,N=p.order,v=p.parser,O=p.incomparable;if(I==null&&ot(a),N!=="asc"&&N!=="desc"&&ot(a),O&&O!=="min"&&O!=="max"){var M="";ot(M)}if(N!=="asc"&&N!=="desc"){var K="";ot(K)}var R=r.getDimensionInfo(I);R||ot(a);var J=v?fi(v):null;v&&!J&&ot(a),s.push({dimIdx:R.index,parser:J,comparator:new yl(N,O)})});var u=r.sourceFormat;u!==bl&&u!==wl&&ot(a);for(var h=[],c=0,m=r.count();c<m;c++)h.push(r.getRawDataItem(c));return h.sort(function(p,I){for(var N=0;N<s.length;N++){var v=s[N],O=r.retrieveValueFromItem(p,v.dimIdx),M=r.retrieveValueFromItem(I,v.dimIdx);v.parser&&(O=v.parser(O),M=v.parser(M));var K=v.comparator.evaluate(O,M);if(K!==0)return K}return 0}),{data:h}}};function ms(e){e.registerTransform(vs),e.registerTransform(gs)}var _s=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return r.prototype.init=function(n,a,l){e.prototype.init.call(this,n,a,l),this._sourceManager=new xl(this),To(this)},r.prototype.mergeOption=function(n,a){e.prototype.mergeOption.call(this,n,a),To(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:Sl},r}(ui),ys=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return r.type="dataset",r}(ci);function bs(e){e.registerComponentModel(_s),e.registerComponentView(ys)}const ws={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},xs=it({name:"Draggable",render:function(r,n){return W(),ge("svg",ws,n[0]||(n[0]=[ji('<path d="M10 6h4v4h-4z" fill="currentColor"></path><path d="M18 6h4v4h-4z" fill="currentColor"></path><path d="M10 14h4v4h-4z" fill="currentColor"></path><path d="M18 14h4v4h-4z" fill="currentColor"></path><path d="M10 22h4v4h-4z" fill="currentColor"></path><path d="M18 22h4v4h-4z" fill="currentColor"></path>',6)]))}}),Ss={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Qa=it({name:"Script",render:function(r,n){return W(),ge("svg",Ss,n[0]||(n[0]=[Y("path",{d:"M18.83 26l2.58-2.58L20 22l-4 4l4 4l1.42-1.41L18.83 26z",fill:"currentColor"},null,-1),Y("path",{d:"M27.17 26l-2.58 2.58L26 30l4-4l-4-4l-1.42 1.41L27.17 26z",fill:"currentColor"},null,-1),Y("path",{d:"M14 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v6h2v-8a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h6zm4-23.6l5.6 5.6H18z",fill:"currentColor"},null,-1)]))}});var Zn={exports:{}};Zn.exports;var Po;function Cs(){return Po||(Po=1,function(e,r){var n=200,a="Expected a function",l="__lodash_hash_undefined__",s=1,u=2,h=9007199254740991,c="[object Arguments]",m="[object Array]",p="[object Boolean]",I="[object Date]",N="[object Error]",v="[object Function]",O="[object GeneratorFunction]",M="[object Map]",K="[object Number]",R="[object Object]",J="[object Promise]",B="[object RegExp]",P="[object Set]",E="[object String]",$="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",b="[object DataView]",L="[object Float32Array]",H="[object Float64Array]",G="[object Int8Array]",F="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",Q="[object Uint8ClampedArray]",pe="[object Uint16Array]",me="[object Uint32Array]",Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Ue=/^\./,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,fe=/\\(\\)?/g,oe=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,y={};y[L]=y[H]=y[G]=y[F]=y[X]=y[V]=y[Q]=y[pe]=y[me]=!0,y[c]=y[m]=y[S]=y[p]=y[b]=y[I]=y[N]=y[v]=y[M]=y[K]=y[R]=y[B]=y[P]=y[E]=y[x]=!1;var j=typeof tt=="object"&&tt&&tt.Object===Object&&tt,te=typeof self=="object"&&self&&self.Object===Object&&self,q=j||te||Function("return this")(),_e=r&&!r.nodeType&&r,be=_e&&!0&&e&&!e.nodeType&&e,ue=be&&be.exports===_e,ie=ue&&j.process,se=function(){try{return ie&&ie.binding("util")}catch{}}(),Se=se&&se.isTypedArray;function ye(t,o){for(var f=-1,w=t?t.length:0;++f<w;)if(o(t[f],f,t))return!0;return!1}function Ee(t){return function(o){return o==null?void 0:o[t]}}function ze(t,o){for(var f=-1,w=Array(t);++f<t;)w[f]=o(f);return w}function Be(t){return function(o){return t(o)}}function qe(t,o){return t==null?void 0:t[o]}function Fe(t){var o=!1;if(t!=null&&typeof t.toString!="function")try{o=!!(t+"")}catch{}return o}function Ye(t){var o=-1,f=Array(t.size);return t.forEach(function(w,A){f[++o]=[A,w]}),f}function ct(t,o){return function(f){return t(o(f))}}function xt(t){var o=-1,f=Array(t.size);return t.forEach(function(w){f[++o]=w}),f}var Gt=Array.prototype,At=Function.prototype,ft=Object.prototype,lt=q["__core-js_shared__"],Dt=function(){var t=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=At.toString,He=ft.hasOwnProperty,Ke=ft.toString,pn=RegExp("^"+gt.call(He).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=q.Symbol,_=q.Uint8Array,k=ft.propertyIsEnumerable,ne=Gt.splice,De=ct(Object.keys,Object),g=on(q,"DataView"),T=on(q,"Map"),Z=on(q,"Promise"),Me=on(q,"Set"),st=on(q,"WeakMap"),Qe=on(Object,"create"),rn=yt(g),Wt=yt(T),hn=yt(Z),an=yt(Me),wn=yt(st),Vt=Nt?Nt.prototype:void 0,vn=Vt?Vt.valueOf:void 0,Gn=Vt?Vt.toString:void 0;function mt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function Wr(){this.__data__=Qe?Qe(null):{}}function Vr(t){return this.has(t)&&delete this.__data__[t]}function Xr(t){var o=this.__data__;if(Qe){var f=o[t];return f===l?void 0:f}return He.call(o,t)?o[t]:void 0}function Yr(t){var o=this.__data__;return Qe?o[t]!==void 0:He.call(o,t)}function Kr(t,o){var f=this.__data__;return f[t]=Qe&&o===void 0?l:o,this}mt.prototype.clear=Wr,mt.prototype.delete=Vr,mt.prototype.get=Xr,mt.prototype.has=Yr,mt.prototype.set=Kr;function nt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function Qr(){this.__data__=[]}function Zr(t){var o=this.__data__,f=Yt(o,t);if(f<0)return!1;var w=o.length-1;return f==w?o.pop():ne.call(o,f,1),!0}function ea(t){var o=this.__data__,f=Yt(o,t);return f<0?void 0:o[f][1]}function ta(t){return Yt(this.__data__,t)>-1}function na(t,o){var f=this.__data__,w=Yt(f,t);return w<0?f.push([t,o]):f[w][1]=o,this}nt.prototype.clear=Qr,nt.prototype.delete=Zr,nt.prototype.get=ea,nt.prototype.has=ta,nt.prototype.set=na;function rt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function ra(){this.__data__={hash:new mt,map:new(T||nt),string:new mt}}function aa(t){return Sn(this,t).delete(t)}function oa(t){return Sn(this,t).get(t)}function ia(t){return Sn(this,t).has(t)}function la(t,o){return Sn(this,t).set(t,o),this}rt.prototype.clear=ra,rt.prototype.delete=aa,rt.prototype.get=oa,rt.prototype.has=ia,rt.prototype.set=la;function Xt(t){var o=-1,f=t?t.length:0;for(this.__data__=new rt;++o<f;)this.add(t[o])}function sa(t){return this.__data__.set(t,l),this}function ua(t){return this.__data__.has(t)}Xt.prototype.add=Xt.prototype.push=sa,Xt.prototype.has=ua;function at(t){this.__data__=new nt(t)}function ca(){this.__data__=new nt}function fa(t){return this.__data__.delete(t)}function da(t){return this.__data__.get(t)}function pa(t){return this.__data__.has(t)}function ha(t,o){var f=this.__data__;if(f instanceof nt){var w=f.__data__;if(!T||w.length<n-1)return w.push([t,o]),this;f=this.__data__=new rt(w)}return f.set(t,o),this}at.prototype.clear=ca,at.prototype.delete=fa,at.prototype.get=da,at.prototype.has=pa,at.prototype.set=ha;function va(t,o){var f=Kt(t)||Vn(t)?ze(t.length,String):[],w=f.length,A=!!w;for(var z in t)He.call(t,z)&&!(A&&(z=="length"||Jn(z,w)))&&f.push(z);return f}function Yt(t,o){for(var f=t.length;f--;)if(Ht(t[f][0],o))return f;return-1}function Bn(t,o){o=ln(o,t)?[o]:xn(o);for(var f=0,w=o.length;t!=null&&f<w;)t=t[kt(o[f++])];return f&&f==w?t:void 0}function ga(t){return Ke.call(t)}function pr(t,o){return t!=null&&o in Object(t)}function Hn(t,o,f,w,A){return t===o?!0:t==null||o==null||!un(t)&&!En(o)?t!==t&&o!==o:ma(t,o,Hn,f,w,A)}function ma(t,o,f,w,A,z){var ee=Kt(t),de=Kt(o),Ce=m,Ne=m;ee||(Ce=_t(t),Ce=Ce==c?R:Ce),de||(Ne=_t(o),Ne=Ne==c?R:Ne);var Le=Ce==R&&!Fe(t),Re=Ne==R&&!Fe(o),ke=Ce==Ne;if(ke&&!Le)return z||(z=new at),ee||Pa(t)?hr(t,o,f,w,A,z):vr(t,o,Ce,f,w,A,z);if(!(A&u)){var Ge=Le&&He.call(t,"__wrapped__"),Xe=Re&&He.call(o,"__wrapped__");if(Ge||Xe){var ut=Ge?t.value():t,dt=Xe?o.value():o;return z||(z=new at),f(ut,dt,w,A,z)}}return ke?(z||(z=new at),Ta(t,o,f,w,A,z)):!1}function jn(t,o,f,w){var A=f.length,z=A;if(t==null)return!z;for(t=Object(t);A--;){var ee=f[A];if(ee[2]?ee[1]!==t[ee[0]]:!(ee[0]in t))return!1}for(;++A<z;){ee=f[A];var de=ee[0],Ce=t[de],Ne=ee[1];if(ee[2]){if(Ce===void 0&&!(de in t))return!1}else{var Le=new at,Re;if(!(Re===void 0?Hn(Ne,Ce,w,s|u,Le):Re))return!1}}return!0}function _a(t){if(!un(t)||Aa(t))return!1;var o=gn(t)||Fe(t)?pn:oe;return o.test(yt(t))}function ya(t){return En(t)&&sn(t.length)&&!!y[Ke.call(t)]}function ba(t){return typeof t=="function"?t:t==null?$a:typeof t=="object"?Kt(t)?Sa(t[0],t[1]):xa(t):i(t)}function wa(t){if(!Da(t))return De(t);var o=[];for(var f in Object(t))He.call(t,f)&&f!="constructor"&&o.push(f);return o}function xa(t){var o=Cn(t);return o.length==1&&o[0][2]?qn(o[0][0],o[0][1]):function(f){return f===t||jn(f,t,o)}}function Sa(t,o){return ln(t)&&gr(o)?qn(kt(t),o):function(f){var w=Tn(f,t);return w===void 0&&w===o?Ra(f,t):Hn(o,w,void 0,s|u)}}function Ca(t){return function(o){return Bn(o,t)}}function Ia(t,o){for(var f=t?o.length:0,w=f-1;f--;){var A=o[f];if(f==w||A!==z){var z=A;if(Jn(A))ne.call(t,A,1);else if(ln(A,t))delete t[kt(A)];else{var ee=xn(A),de=mr(t,ee);de!=null&&delete de[kt(Wn(ee))]}}}return t}function Oa(t,o,f){var w=-1,A=t.length;o<0&&(o=-o>A?0:A+o),f=f>A?A:f,f<0&&(f+=A),A=o>f?0:f-o>>>0,o>>>=0;for(var z=Array(A);++w<A;)z[w]=t[w+o];return z}function Ea(t){if(typeof t=="string")return t;if(Kn(t))return Gn?Gn.call(t):"";var o=t+"";return o=="0"&&1/t==-1/0?"-0":o}function xn(t){return Kt(t)?t:Na(t)}function hr(t,o,f,w,A,z){var ee=A&u,de=t.length,Ce=o.length;if(de!=Ce&&!(ee&&Ce>de))return!1;var Ne=z.get(t);if(Ne&&z.get(o))return Ne==o;var Le=-1,Re=!0,ke=A&s?new Xt:void 0;for(z.set(t,o),z.set(o,t);++Le<de;){var Ge=t[Le],Xe=o[Le];if(w)var ut=ee?w(Xe,Ge,Le,o,t,z):w(Ge,Xe,Le,t,o,z);if(ut!==void 0){if(ut)continue;Re=!1;break}if(ke){if(!ye(o,function(dt,jt){if(!ke.has(jt)&&(Ge===dt||f(Ge,dt,w,A,z)))return ke.add(jt)})){Re=!1;break}}else if(!(Ge===Xe||f(Ge,Xe,w,A,z))){Re=!1;break}}return z.delete(t),z.delete(o),Re}function vr(t,o,f,w,A,z,ee){switch(f){case b:if(t.byteLength!=o.byteLength||t.byteOffset!=o.byteOffset)return!1;t=t.buffer,o=o.buffer;case S:return!(t.byteLength!=o.byteLength||!w(new _(t),new _(o)));case p:case I:case K:return Ht(+t,+o);case N:return t.name==o.name&&t.message==o.message;case B:case E:return t==o+"";case M:var de=Ye;case P:var Ce=z&u;if(de||(de=xt),t.size!=o.size&&!Ce)return!1;var Ne=ee.get(t);if(Ne)return Ne==o;z|=s,ee.set(t,o);var Le=hr(de(t),de(o),w,A,z,ee);return ee.delete(t),Le;case $:if(vn)return vn.call(t)==vn.call(o)}return!1}function Ta(t,o,f,w,A,z){var ee=A&u,de=Qn(t),Ce=de.length,Ne=Qn(o),Le=Ne.length;if(Ce!=Le&&!ee)return!1;for(var Re=Ce;Re--;){var ke=de[Re];if(!(ee?ke in o:He.call(o,ke)))return!1}var Ge=z.get(t);if(Ge&&z.get(o))return Ge==o;var Xe=!0;z.set(t,o),z.set(o,t);for(var ut=ee;++Re<Ce;){ke=de[Re];var dt=t[ke],jt=o[ke];if(w)var mn=ee?w(jt,dt,ke,o,t,z):w(dt,jt,ke,t,o,z);if(!(mn===void 0?dt===jt||f(dt,jt,w,A,z):mn)){Xe=!1;break}ut||(ut=ke=="constructor")}if(Xe&&!ut){var Qt=t.constructor,yr=o.constructor;Qt!=yr&&"constructor"in t&&"constructor"in o&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof yr=="function"&&yr instanceof yr)&&(Xe=!1)}return z.delete(t),z.delete(o),Xe}function Sn(t,o){var f=t.__data__;return In(o)?f[typeof o=="string"?"string":"hash"]:f.map}function Cn(t){for(var o=Qn(t),f=o.length;f--;){var w=o[f],A=t[w];o[f]=[w,A,gr(A)]}return o}function on(t,o){var f=qe(t,o);return _a(f)?f:void 0}var _t=ga;(g&&_t(new g(new ArrayBuffer(1)))!=b||T&&_t(new T)!=M||Z&&_t(Z.resolve())!=J||Me&&_t(new Me)!=P||st&&_t(new st)!=x)&&(_t=function(t){var o=Ke.call(t),f=o==R?t.constructor:void 0,w=f?yt(f):void 0;if(w)switch(w){case rn:return b;case Wt:return M;case hn:return J;case an:return P;case wn:return x}return o});function Bt(t,o,f){o=ln(o,t)?[o]:xn(o);for(var w,A=-1,ee=o.length;++A<ee;){var z=kt(o[A]);if(!(w=t!=null&&f(t,z)))break;t=t[z]}if(w)return w;var ee=t?t.length:0;return!!ee&&sn(ee)&&Jn(z,ee)&&(Kt(t)||Vn(t))}function Jn(t,o){return o=o??h,!!o&&(typeof t=="number"||Ie.test(t))&&t>-1&&t%1==0&&t<o}function ln(t,o){if(Kt(t))return!1;var f=typeof t;return f=="number"||f=="symbol"||f=="boolean"||t==null||Kn(t)?!0:Ae.test(t)||!Te.test(t)||o!=null&&t in Object(o)}function In(t){var o=typeof t;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?t!=="__proto__":t===null}function Aa(t){return!!Dt&&Dt in t}function Da(t){var o=t&&t.constructor,f=typeof o=="function"&&o.prototype||ft;return t===f}function gr(t){return t===t&&!un(t)}function qn(t,o){return function(f){return f==null?!1:f[t]===o&&(o!==void 0||t in Object(f))}}function mr(t,o){return o.length==1?t:Bn(t,Oa(o,0,-1))}var Na=On(function(t){t=Ma(t);var o=[];return Ue.test(t)&&o.push(""),t.replace(le,function(f,w,A,z){o.push(A?z.replace(fe,"$1"):w||f)}),o});function kt(t){if(typeof t=="string"||Kn(t))return t;var o=t+"";return o=="0"&&1/t==-1/0?"-0":o}function yt(t){if(t!=null){try{return gt.call(t)}catch{}try{return t+""}catch{}}return""}function Wn(t){var o=t?t.length:0;return o?t[o-1]:void 0}function _r(t,o){var f=[];if(!(t&&t.length))return f;var w=-1,A=[],z=t.length;for(o=ba(o);++w<z;){var ee=t[w];o(ee,w,t)&&(f.push(ee),A.push(w))}return Ia(t,A),f}function On(t,o){if(typeof t!="function"||o&&typeof o!="function")throw new TypeError(a);var f=function(){var w=arguments,A=o?o.apply(this,w):w[0],z=f.cache;if(z.has(A))return z.get(A);var ee=t.apply(this,w);return f.cache=z.set(A,ee),ee};return f.cache=new(On.Cache||rt),f}On.Cache=rt;function Ht(t,o){return t===o||t!==t&&o!==o}function Vn(t){return Yn(t)&&He.call(t,"callee")&&(!k.call(t,"callee")||Ke.call(t)==c)}var Kt=Array.isArray;function Xn(t){return t!=null&&sn(t.length)&&!gn(t)}function Yn(t){return En(t)&&Xn(t)}function gn(t){var o=un(t)?Ke.call(t):"";return o==v||o==O}function sn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h}function un(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function En(t){return!!t&&typeof t=="object"}function Kn(t){return typeof t=="symbol"||En(t)&&Ke.call(t)==$}var Pa=Se?Be(Se):ya;function Ma(t){return t==null?"":Ea(t)}function Tn(t,o,f){var w=t==null?void 0:Bn(t,o);return w===void 0?f:w}function Ra(t,o){return t!=null&&Bt(t,o,pr)}function Qn(t){return Xn(t)?va(t):wa(t)}function $a(t){return t}function i(t){return ln(t)?Ee(kt(t)):Ca(t)}e.exports=_r}(Zn,Zn.exports)),Zn.exports}var Is=Cs();const vo=cr(Is),Os={class:"thead"},Es={class:"tr"},Ts={class:"th-title-wrap flex justify-between items-center group"},As={class:"w-8 h-5 inline-flex"},Ds={class:"th-title inline-flex items-center gap-4 relative"},Ns={class:"hidden group-hover:inline-flex items-center justify-center absolute top-[1px] -right-10"},Ps={class:"w-8 h-5 inline-flex"},Ms=it({__name:"WaveformHeader",props:{layers:{}},setup(e){ri(c=>({"5da7fefc":d(r).dividerColor,"30b1234c":d(r).tableHeaderColor}));const r=Ln(),n=Un(),{layers:a,gates:l,program:s}=Ur(n),u=c=>{var N;const m=JSON.parse(JSON.stringify(l.value||{}));a.value[c].forEach(v=>{delete m[v]}),l.value=m;const I=JSON.parse(JSON.stringify(s.value));vo(I.waveform_script,v=>v.layer===c),a.value.length>Ji&&(a.value.splice(c,1),(N=I.waveform_script)==null||N.forEach(v=>{v.layer>c&&(v.layer=v.layer-1)})),s.value=I},h=c=>{var p;a.value.splice(c,0,[]);const m=JSON.parse(JSON.stringify(((p=s.value)==null?void 0:p.waveform_script)||[]));m==null||m.forEach(I=>{I.layer>=c&&(I.layer=I.layer+1)}),s.value={...s.value||{},waveform_script:m}};return(c,m)=>{const p=$t;return W(),ge("table",{class:"table",style:Zt({width:`${100+d(Nr)*d(a).length}px`})},[Y("colgroup",null,[m[0]||(m[0]=Y("col",{class:"w-[100px]"},null,-1)),(W(!0),ge(ht,null,Ut(d(a),(I,N)=>(W(),ge("col",{key:N,class:ao(`w-[${d(Nr)}px]`)},null,2))),128))]),Y("thead",Os,[Y("tr",Es,[m[1]||(m[1]=Y("th",{class:"th"},[Y("div",{class:"th-title-wrap"},[Y("div",{class:"th-title"},"Entities")])],-1)),(W(!0),ge(ht,null,Ut(d(a),(I,N)=>{var v,O,M,K,R,J;return W(),ge("th",{class:"th",key:N},[Y("div",Ts,[(O=(v=d(n))==null?void 0:v.expInfo)!=null&&O.exp_id?Je("",!0):(W(),$e(p,{key:0,type:"info",circle:"",quaternary:"",onClick:()=>h(N)},{icon:D(()=>[Y("div",As,[C(d(Zl)),C(d(Pr))])]),_:2},1032,["onClick"])),Y("div",Ds,[xe(we(N)+" ",1),Y("div",Ns,[(K=(M=d(n))==null?void 0:M.expInfo)!=null&&K.exp_id?Je("",!0):(W(),$e(p,{key:0,size:"small",class:"!w-5 !h-5",circle:"",type:"error",onClick:()=>u(N)},{icon:D(()=>[C(d(fo))]),_:2},1032,["onClick"]))])]),(J=(R=d(n))==null?void 0:R.expInfo)!=null&&J.exp_id?Je("",!0):(W(),$e(p,{key:1,type:"info",circle:"",quaternary:"",onClick:()=>h(N+1)},{icon:D(()=>[Y("div",Ps,[C(d(Pr)),C(d(ts))])]),_:2},1032,["onClick"]))])])}),128))])])],4)}}}),Rs=Gr(Ms,[["__scopeId","data-v-a971b1ac"]]),$s=it({__name:"WaveformScroll",setup(e){const r=he(),n=he(),a=s=>{var h,c;const u=s.target;(h=n.value)!=null&&h.scrollbarInstRef&&((c=n.value)==null||c.scrollTo({left:u.scrollLeft}))},l=s=>{var h,c;const u=s.target;(h=r.value)!=null&&h.scrollbarInstRef&&((c=r.value)==null||c.scrollTo({left:u.scrollLeft}))};return(s,u)=>{const h=oo;return W(),ge("div",null,[C(h,{ref_key:"headerRef",ref:r,style:{"max-width":"calc(100vw - 212px)"},onScroll:a},{default:D(()=>[Ya(s.$slots,"header")]),_:3},512),C(h,{class:"box-border","x-scrollable":"",ref_key:"bodyRef",ref:n,onScroll:l,style:{maxHeight:"calc(100vh - 380px)",maxWidth:"calc(100vw - 212px)"}},{default:D(()=>[Ya(s.$slots,"default")]),_:3},512)])}}}),mi=it({__name:"WaveCharts",props:{data:{},size:{}},setup(e){const r=e;Cl([as,Ol,El,bs,ms,Tl,Al,Dl,Nl,Pl,Ml]);const n=Ln(),a=he(),l=he();return io(()=>{a.value=qi(Il(l.value,n.value.baseColor==="#000"?"dark":"light"))}),Lt(()=>r.data,s=>{if(!s)return;const u=Object.keys(s.channel_seqs),h={tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{data:u},grid:{top:"20px",left:"50px",right:"20px",bottom:"70px"},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"filter",start:0,end:10},{type:"inside",xAxisIndex:0,filterMode:"filter",start:0,end:10}],xAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},data:s.time_list},yAxis:[{type:"value"}],series:u.map(c=>({name:c,type:"line",data:s.channel_seqs[c]}))};Rt(()=>{var c;(c=a.value)==null||c.setOption(JSON.parse(JSON.stringify(h)))})},{immediate:!0}),ai(()=>{var s;(s=a.value)==null||s.dispose()}),(s,u)=>{var h,c,m,p;return W(),ge("div",{ref_key:"chartRef",ref:l,style:Zt({width:`${((h=s.size)==null?void 0:h.w)||690}px`,height:`${((c=s.size)==null?void 0:c.h)||220}px`}),class:ao([[`min-w-[${((m=s.size)==null?void 0:m.w)||690}px] min-h-[${((p=s.size)==null?void 0:p.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),Ls={class:"flex justify-between items-center mb-2"},ks={key:0,class:"flex justify-start flex-1 px-5"},zs={class:"text-center text-xl font-bold pb-3"},Fs={class:"h-[400px]"},Us=it({__name:"WaveformAction",setup(e){const r=Un(),{t:n}=kn(),a=oi(),l=he(),s=he(!1),u=he(),h=he(!1),c=he(!1),m=()=>{c.value=!0},p=()=>{c.value=!1,h.value=!1},I=R=>{R||p()},N=async()=>{var P,E,$,x,S,b,L,H,G,F,X,V,Q;const R={};r.layers.forEach((pe,me)=>{R[String(me)]=pe});const[J,B]=await Rl({template_name:(E=(P=r.expInfo)==null?void 0:P.exp)==null?void 0:E.template.split("/")[1],device_group_name:a.query.device_group_name,space_id:a.query.space_id,task_id:($=r.expInfo)==null?void 0:$.task_id,experiment_json:{...r.expInfo||{},title:(S=(x=r.expInfo)==null?void 0:x.exp)==null?void 0:S.title,desc:(L=(b=r.expInfo)==null?void 0:b.exp)==null?void 0:L.desc,options:(G=(H=r.expInfo)==null?void 0:H.exp)==null?void 0:G.options,template:(X=(F=r.expInfo)==null?void 0:F.exp)==null?void 0:X.template,wave_circuit:{gates:r.gates||{},layers:R},waveform_script:((V=r.program)==null?void 0:V.waveform_script)||[],space_parameter_script:((Q=r.program)==null?void 0:Q.space_parameter_script)||[]}});s.value=!1,!J&&(B==null?void 0:B.status)===0&&(l.value=B.data,h.value=!0)},v=()=>{s.value||(s.value=!0,h.value=!0,N())},O=Ct(()=>{let R=[];return wo(r.gates,J=>{R=R.concat(J.entity)}),R}),M=R=>{const J=JSON.parse(JSON.stringify(r.allQubits||{}));wo(J,B=>{R.includes(B.value)?B.visible=!0:B.visible=!1}),r.allQubits=J};Lt(()=>r.allQubits,R=>{u.value=R.filter(J=>J.visible).map(J=>J.value)},{immediate:!0});const K=Ct(()=>{var J,B;const R=(B=(J=r==null?void 0:r.expInfo)==null?void 0:J.exp)==null?void 0:B.wave_circuit;return!!(!R||wt(R==null?void 0:R.gates)&&wt(R==null?void 0:R.layers))});return(R,J)=>{var H,G;const B=$t,P=Fl,E=Br,$=Vi,x=Wi,S=Fn,b=zn,L=lo;return W(),ge("div",null,[Y("div",Ls,[C(B,{type:"primary",onClick:m},{default:D(()=>[xe(we(d(n)("expInfo.chooseEntities")),1)]),_:1}),d(K)&&((G=(H=d(r))==null?void 0:H.expInfo)!=null&&G.exp_id)?(W(),ge("div",ks,[C(P,{type:"info"},{default:D(()=>[xe(we(d(n)("expInfo.emptyTips")),1)]),_:1})])):Je("",!0),C(B,{type:"primary",loading:d(s),onClick:v},{icon:D(()=>[C(E,{component:d(pi)},null,8,["component"])]),default:D(()=>[xe(" "+we(d(n)("expInfo.viewWaveForms")),1)]),_:1},8,["loading"])]),C(b,{show:d(c),"onUpdate:show":J[1]||(J[1]=F=>Tt(c)?c.value=F:null),"on-update:show":I},{default:D(()=>[C(S,{style:{width:"660px"},size:"huge",bordered:!1,class:"!pt-0"},{default:D(()=>[Y("div",zs,we(d(n)("expInfo.chooseEntities")),1),C(x,{value:d(u),"onUpdate:value":[J[0]||(J[0]=F=>Tt(u)?u.value=F:null),M]},{default:D(()=>[(W(!0),ge(ht,null,Ut(d(r).allQubits,F=>(W(),$e($,{key:F.id,value:F.value,label:F.value,disabled:d(O).includes(F.value)},null,8,["value","label","disabled"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"]),C(b,{show:d(h),"onUpdate:show":J[2]||(J[2]=F=>Tt(h)?h.value=F:null),"on-update:show":I},{default:D(()=>[C(S,{style:{"min-width":"1000px",height:"500px",width:"90vw"},size:"huge",bordered:!1,class:"!pt-0"},{default:D(()=>[C(L,{show:d(s)},{default:D(()=>[Y("div",Fs,[d(s)?Je("",!0):(W(),$e(mi,{key:0,size:{w:920,h:400},data:d(l)},null,8,["data"]))])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])])}}}),Gs=["id"],Bs={class:"flex gap-4 justify-between items-center"},Hs={class:"flex items-center"},js={key:0,class:"gate-handle mt-1 px-2 cursor-move"},Js={key:1,class:"ml-0.5 inline-flex items-center justify-center"},qs={class:"hidden group-hover:flex items-center gap-2"},Ws={class:"flex items-center gap-3"},Vs={class:"w-24"},Xs={class:"flex items-center gap-3 mt-5"},Ys={class:"w-24"},Ks={class:"flex justify-end mt-5"},Qs=it({__name:"WaveformCell",props:{qubit:{},layer:{},layerIdx:{},changeId:{}},emits:["open-gate-modal","open-edit-modal"],setup(e,{expose:r,emit:n}){const{t:a}=kn(),l=Ln(),s=Un(),{gates:u,layers:h,program:c}=Ur(s),m=Xi(),p=he(!1),I=()=>{p.value=!0},N=()=>{p.value=!1,O.value=void 0,v.value=void 0},v=he(),O=he(),M=Ct(()=>s.allQubits.filter(H=>{if(H.visible)return!0}).map(H=>({...H,label:H.value}))),K=(L,H)=>{const G=(F,X)=>u.value?h.value[X].some(Q=>{var pe;if(u.value&&u.value[Q])return(pe=u.value[Q].entity)==null?void 0:pe.includes(F)}):!1;return!L.some(F=>G(F,H))},R=()=>{var pe,me,Te,Ae,Ue,le,ve,fe;if(v.value===void 0)return;const L=(Ae=(Te=(me=(pe=S==null?void 0:S.value)==null?void 0:pe.matchedGate)==null?void 0:me.val)==null?void 0:Te.entity)==null?void 0:Ae.length;if(L>1&&L!==((Ue=O.value)==null?void 0:Ue.length)||v.value>=h.value.length)return;if(!K(L===1?[O.value]:O.value,v.value)){m.error("目标位非空");return}if(L>1){const oe=h.value[v.value];if(!wt(oe)){let Ie=[];if(oe.forEach(y=>{var j;Ie=Ie.concat(u.value?(j=u.value[y])==null?void 0:j.entity:[])}),Ie.includes(O.value||""))return}}const G=JSON.parse(JSON.stringify((le=S.value.matchedGate)==null?void 0:le.val));G.entity=L>1?O.value:[O.value],(ve=G==null?void 0:G.waves)==null||ve.forEach((oe,Ie)=>{var y,j,te,q,_e,be,ue,ie;if(oe.channel){if(L===1)oe.channel=oe.channel.replace(((te=(j=(y=S==null?void 0:S.value)==null?void 0:y.matchedGate)==null?void 0:j.val)==null?void 0:te.entity[0])||"",O.value);else if(L>1){const se={i:0,t:""};(ue=(be=(_e=(q=S==null?void 0:S.value)==null?void 0:q.matchedGate)==null?void 0:_e.val)==null?void 0:be.entity)==null||ue.some((Se,ye)=>{if(oe.channel.startsWith(Se))return se.i=ye,se.t=Se,!0}),se.t&&(oe.channel=(ie=oe.channel)==null?void 0:ie.replace(se==null?void 0:se.t,O.value[se.i]))}}});const F=co();u.value={...u.value,[F]:G};const X=JSON.parse(JSON.stringify(h.value));X[+v.value]?X[+v.value].push(F):X[+v.value]=[F],h.value=X;const V=JSON.parse(JSON.stringify(c.value)),Q=[];(fe=V==null?void 0:V.waveform_script)==null||fe.forEach(oe=>{var Ie,y,j,te;oe.layer===P.layerIdx&&((te=(j=(y=(Ie=S.value)==null?void 0:Ie.matchedGate)==null?void 0:y.val)==null?void 0:j.entity)!=null&&te.includes(oe.entity))&&Q.push({...oe,entity:L>1?O.value[0]:O.value,layer:v.value})}),V.waveform_script=V.waveform_script.concat(Q),c.value=V,Rt(()=>{setTimeout(()=>{E("open-edit-modal",L===1?O.value:O.value[0],v.value),N()},200)})},J=L=>{var G,F,X,V;const H=(V=(X=(F=(G=S==null?void 0:S.value)==null?void 0:G.matchedGate)==null?void 0:F.val)==null?void 0:X.entity)==null?void 0:V.length;Array.isArray(L)&&L.length>H&&Rt(()=>{var Q;O.value=(Q=O.value)==null?void 0:Q.slice(0,H)})},B=L=>{L||N()},P=e,E=n,$=()=>{E("open-gate-modal",{...xo(P)})},x=()=>{var L;E("open-gate-modal",{...xo(P),gateInfo:(L=S.value)==null?void 0:L.matchedGate})},S=Ct(()=>{var G;if(wt(u.value))return{};const L={};let H=`${P.qubit.id}__**__${P.qubit.value}__**__${P.layerIdx}`;return(G=P.layer)==null||G.some(F=>{var V;const X=u.value?(V=u.value[F])==null?void 0:V.entity:null;if(X&&X.includes(P.qubit.value))return L.val=u.value?u.value[F]:void 0,L.key=F,H=`${P.qubit.id}__**__${P.qubit.value}__**__${P.layerIdx}__**__${F}`,!0}),{matchedGate:L,id:H}}),b=()=>{var X,V,Q;if(wt((X=S.value)==null?void 0:X.matchedGate))return;const L=(Q=(V=S.value)==null?void 0:V.matchedGate)==null?void 0:Q.key,H=JSON.parse(JSON.stringify(u.value||{}));delete H[L];const G=JSON.parse(JSON.stringify(h.value||[]));G[P.layerIdx]=ar(G[P.layerIdx],L);const F=JSON.parse(JSON.stringify(c.value));vo(F.waveform_script,pe=>{var me,Te,Ae;if(P.layerIdx===pe.layer&&((Ae=(Te=(me=S.value)==null?void 0:me.matchedGate)==null?void 0:Te.val)!=null&&Ae.entity.includes(pe.entity)))return!0}),c.value=F,u.value=H,h.value=G};return r({handleEdit:x,props:P}),(L,H)=>{var Te,Ae,Ue,le,ve,fe,oe,Ie,y,j,te,q,_e,be,ue,ie,se,Se,ye,Ee,ze,Be;const G=$t,F=Br,X=Yi,V=so,Q=po,pe=Fn,me=zn;return W(),ge("div",{class:"group cell-group p-3",id:(Te=d(S))==null?void 0:Te.id,style:Zt({display:L.changeId===((Ae=d(S))==null?void 0:Ae.id)&&((Ue=d(S))!=null&&Ue.id)?"none":"block"})},[d(wt)((ve=(le=d(S))==null?void 0:le.matchedGate)==null?void 0:ve.val)&&!((oe=(fe=d(s))==null?void 0:fe.expInfo)!=null&&oe.exp_id)?(W(),$e(G,{key:0,circle:"",type:"info",size:"small",class:"!w-5 !h-5",quaternary:"",onClick:$},{icon:D(()=>[C(d(Pr))]),_:1})):d(wt)((y=(Ie=d(S))==null?void 0:Ie.matchedGate)==null?void 0:y.val)?Je("",!0):(W(),ge(ht,{key:1},[Y("div",Bs,[Y("div",Hs,[(te=(j=d(s))==null?void 0:j.expInfo)!=null&&te.exp_id?Je("",!0):(W(),ge("span",js,[C(F,{component:d(xs)},null,8,["component"])])),C(X,{style:{"max-width":"110px"}},{default:D(()=>{var qe,Fe,Ye;return[xe(we((Ye=(Fe=(qe=d(S))==null?void 0:qe.matchedGate)==null?void 0:Fe.val)==null?void 0:Ye.gate_name),1)]}),_:1}),xe(" ("+we((ue=(be=(_e=(q=d(S))==null?void 0:q.matchedGate)==null?void 0:_e.val)==null?void 0:be.entity)==null?void 0:ue.join(","))+") ",1),d(wt)((Se=(se=(ie=d(S))==null?void 0:ie.matchedGate)==null?void 0:se.val)==null?void 0:Se.waves)?Je("",!0):(W(),ge("span",Js,[C(F,{component:d(Kl),color:d(l).infoColor,size:"16"},null,8,["component","color"])]))]),Y("div",qs,[(Ee=(ye=d(s))==null?void 0:ye.expInfo)!=null&&Ee.exp_id?Je("",!0):(W(),$e(G,{key:0,size:"small",class:"!w-5 !h-5",circle:"",type:"info",onClick:I},{icon:D(()=>[C(d(Ul))]),_:1})),C(G,{type:"primary",size:"small",class:"!w-5 !h-5",circle:"",onClick:x},{icon:D(()=>[C(d(si))]),_:1}),(Be=(ze=d(s))==null?void 0:ze.expInfo)!=null&&Be.exp_id?Je("",!0):(W(),$e(G,{key:1,size:"small",class:"!w-5 !h-5",circle:"",type:"error",onClick:b},{icon:D(()=>[C(d(fo))]),_:1}))])]),C(me,{show:d(p),"onUpdate:show":H[2]||(H[2]=qe=>Tt(p)?p.value=qe:null),onUpdateShow:B},{default:D(()=>[C(pe,{style:{width:"500px"}},{default:D(()=>{var qe,Fe,Ye,ct;return[Y("div",Ws,[Y("div",Vs,we(d(a)("expInfo.targetEntity")),1),C(V,{multiple:((ct=(Ye=(Fe=(qe=d(S))==null?void 0:qe.matchedGate)==null?void 0:Fe.val)==null?void 0:Ye.entity)==null?void 0:ct.length)>1,filterable:"",value:d(O),"onUpdate:value":H[0]||(H[0]=xt=>Tt(O)?O.value=xt:null),options:d(M),"max-tag-count":2,onUpdateValue:J,class:"flex-1"},null,8,["multiple","value","options"])]),Y("div",Xs,[Y("div",Ys,we(d(a)("expInfo.targetLayer")),1),C(Q,{class:"flex-1",value:d(v),"onUpdate:value":H[1]||(H[1]=xt=>Tt(v)?v.value=xt:null),min:0},null,8,["value"])]),Y("div",Ks,[C(G,{type:"primary",onClick:R},{default:D(()=>[xe(we(d(a)("common.OK")),1)]),_:1})])]}),_:1})]),_:1},8,["show"])],64))],12,Gs)}}});var er={exports:{}};er.exports;var Mo;function Zs(){return Mo||(Mo=1,function(e,r){var n=200,a="Expected a function",l="__lodash_hash_undefined__",s=1,u=2,h=9007199254740991,c="[object Arguments]",m="[object Array]",p="[object Boolean]",I="[object Date]",N="[object Error]",v="[object Function]",O="[object GeneratorFunction]",M="[object Map]",K="[object Number]",R="[object Object]",J="[object Promise]",B="[object RegExp]",P="[object Set]",E="[object String]",$="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",b="[object DataView]",L="[object Float32Array]",H="[object Float64Array]",G="[object Int8Array]",F="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",Q="[object Uint8ClampedArray]",pe="[object Uint16Array]",me="[object Uint32Array]",Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Ue=/^\./,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,fe=/\\(\\)?/g,oe=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,y={};y[L]=y[H]=y[G]=y[F]=y[X]=y[V]=y[Q]=y[pe]=y[me]=!0,y[c]=y[m]=y[S]=y[p]=y[b]=y[I]=y[N]=y[v]=y[M]=y[K]=y[R]=y[B]=y[P]=y[E]=y[x]=!1;var j=typeof tt=="object"&&tt&&tt.Object===Object&&tt,te=typeof self=="object"&&self&&self.Object===Object&&self,q=j||te||Function("return this")(),_e=r&&!r.nodeType&&r,be=_e&&!0&&e&&!e.nodeType&&e,ue=be&&be.exports===_e,ie=ue&&j.process,se=function(){try{return ie&&ie.binding("util")}catch{}}(),Se=se&&se.isTypedArray;function ye(i,t){for(var o=-1,f=i?i.length:0;++o<f;)if(t(i[o],o,i))return!0;return!1}function Ee(i){return function(t){return t==null?void 0:t[i]}}function ze(i,t){for(var o=-1,f=Array(i);++o<i;)f[o]=t(o);return f}function Be(i){return function(t){return i(t)}}function qe(i,t){return i==null?void 0:i[t]}function Fe(i){var t=!1;if(i!=null&&typeof i.toString!="function")try{t=!!(i+"")}catch{}return t}function Ye(i){var t=-1,o=Array(i.size);return i.forEach(function(f,w){o[++t]=[w,f]}),o}function ct(i,t){return function(o){return i(t(o))}}function xt(i){var t=-1,o=Array(i.size);return i.forEach(function(f){o[++t]=f}),o}var Gt=Array.prototype,At=Function.prototype,ft=Object.prototype,lt=q["__core-js_shared__"],Dt=function(){var i=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),gt=At.toString,He=ft.hasOwnProperty,Ke=ft.toString,pn=RegExp("^"+gt.call(He).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=q.Symbol,_=q.Uint8Array,k=ft.propertyIsEnumerable,ne=Gt.splice,De=ct(Object.keys,Object),g=_t(q,"DataView"),T=_t(q,"Map"),Z=_t(q,"Promise"),Me=_t(q,"Set"),st=_t(q,"WeakMap"),Qe=_t(Object,"create"),rn=yt(g),Wt=yt(T),hn=yt(Z),an=yt(Me),wn=yt(st),Vt=Nt?Nt.prototype:void 0,vn=Vt?Vt.valueOf:void 0,Gn=Vt?Vt.toString:void 0;function mt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function Wr(){this.__data__=Qe?Qe(null):{}}function Vr(i){return this.has(i)&&delete this.__data__[i]}function Xr(i){var t=this.__data__;if(Qe){var o=t[i];return o===l?void 0:o}return He.call(t,i)?t[i]:void 0}function Yr(i){var t=this.__data__;return Qe?t[i]!==void 0:He.call(t,i)}function Kr(i,t){var o=this.__data__;return o[i]=Qe&&t===void 0?l:t,this}mt.prototype.clear=Wr,mt.prototype.delete=Vr,mt.prototype.get=Xr,mt.prototype.has=Yr,mt.prototype.set=Kr;function nt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function Qr(){this.__data__=[]}function Zr(i){var t=this.__data__,o=Yt(t,i);if(o<0)return!1;var f=t.length-1;return o==f?t.pop():ne.call(t,o,1),!0}function ea(i){var t=this.__data__,o=Yt(t,i);return o<0?void 0:t[o][1]}function ta(i){return Yt(this.__data__,i)>-1}function na(i,t){var o=this.__data__,f=Yt(o,i);return f<0?o.push([i,t]):o[f][1]=t,this}nt.prototype.clear=Qr,nt.prototype.delete=Zr,nt.prototype.get=ea,nt.prototype.has=ta,nt.prototype.set=na;function rt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function ra(){this.__data__={hash:new mt,map:new(T||nt),string:new mt}}function aa(i){return Cn(this,i).delete(i)}function oa(i){return Cn(this,i).get(i)}function ia(i){return Cn(this,i).has(i)}function la(i,t){return Cn(this,i).set(i,t),this}rt.prototype.clear=ra,rt.prototype.delete=aa,rt.prototype.get=oa,rt.prototype.has=ia,rt.prototype.set=la;function Xt(i){var t=-1,o=i?i.length:0;for(this.__data__=new rt;++t<o;)this.add(i[t])}function sa(i){return this.__data__.set(i,l),this}function ua(i){return this.__data__.has(i)}Xt.prototype.add=Xt.prototype.push=sa,Xt.prototype.has=ua;function at(i){this.__data__=new nt(i)}function ca(){this.__data__=new nt}function fa(i){return this.__data__.delete(i)}function da(i){return this.__data__.get(i)}function pa(i){return this.__data__.has(i)}function ha(i,t){var o=this.__data__;if(o instanceof nt){var f=o.__data__;if(!T||f.length<n-1)return f.push([i,t]),this;o=this.__data__=new rt(f)}return o.set(i,t),this}at.prototype.clear=ca,at.prototype.delete=fa,at.prototype.get=da,at.prototype.has=pa,at.prototype.set=ha;function va(i,t){var o=Ht(i)||On(i)?ze(i.length,String):[],f=o.length,w=!!f;for(var A in i)He.call(i,A)&&!(w&&(A=="length"||ln(A,f)))&&o.push(A);return o}function Yt(i,t){for(var o=i.length;o--;)if(_r(i[o][0],t))return o;return-1}var Bn=hr();function ga(i,t){return i&&Bn(i,t,Tn)}function pr(i,t){t=In(t,i)?[t]:xn(t);for(var o=0,f=t.length;i!=null&&o<f;)i=i[kt(t[o++])];return o&&o==f?i:void 0}function Hn(i){return Ke.call(i)}function ma(i,t){return i!=null&&t in Object(i)}function jn(i,t,o,f,w){return i===t?!0:i==null||t==null||!gn(i)&&!sn(t)?i!==i&&t!==t:_a(i,t,jn,o,f,w)}function _a(i,t,o,f,w,A){var z=Ht(i),ee=Ht(t),de=m,Ce=m;z||(de=Bt(i),de=de==c?R:de),ee||(Ce=Bt(t),Ce=Ce==c?R:Ce);var Ne=de==R&&!Fe(i),Le=Ce==R&&!Fe(t),Re=de==Ce;if(Re&&!Ne)return A||(A=new at),z||En(i)?vr(i,t,o,f,w,A):Ta(i,t,de,o,f,w,A);if(!(w&u)){var ke=Ne&&He.call(i,"__wrapped__"),Ge=Le&&He.call(t,"__wrapped__");if(ke||Ge){var Xe=ke?i.value():i,ut=Ge?t.value():t;return A||(A=new at),o(Xe,ut,f,w,A)}}return Re?(A||(A=new at),Sn(i,t,o,f,w,A)):!1}function ya(i,t,o,f){var w=o.length,A=w;if(i==null)return!A;for(i=Object(i);w--;){var z=o[w];if(z[2]?z[1]!==i[z[0]]:!(z[0]in i))return!1}for(;++w<A;){z=o[w];var ee=z[0],de=i[ee],Ce=z[1];if(z[2]){if(de===void 0&&!(ee in i))return!1}else{var Ne=new at,Le;if(!(Le===void 0?jn(Ce,de,f,s|u,Ne):Le))return!1}}return!0}function ba(i){if(!gn(i)||Da(i))return!1;var t=Xn(i)||Fe(i)?pn:oe;return t.test(yt(i))}function wa(i){return sn(i)&&Yn(i.length)&&!!y[Ke.call(i)]}function xa(i){return typeof i=="function"?i:i==null?Qn:typeof i=="object"?Ht(i)?Ia(i[0],i[1]):Ca(i):$a(i)}function Sa(i){if(!gr(i))return De(i);var t=[];for(var o in Object(i))He.call(i,o)&&o!="constructor"&&t.push(o);return t}function Ca(i){var t=on(i);return t.length==1&&t[0][2]?mr(t[0][0],t[0][1]):function(o){return o===i||ya(o,i,t)}}function Ia(i,t){return In(i)&&qn(t)?mr(kt(i),t):function(o){var f=Pa(o,i);return f===void 0&&f===t?Ma(o,i):jn(t,f,void 0,s|u)}}function Oa(i){return function(t){return pr(t,i)}}function Ea(i){if(typeof i=="string")return i;if(un(i))return Gn?Gn.call(i):"";var t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function xn(i){return Ht(i)?i:Na(i)}function hr(i){return function(t,o,f){for(var w=-1,A=Object(t),z=f(t),ee=z.length;ee--;){var de=z[++w];if(o(A[de],de,A)===!1)break}return t}}function vr(i,t,o,f,w,A){var z=w&u,ee=i.length,de=t.length;if(ee!=de&&!(z&&de>ee))return!1;var Ce=A.get(i);if(Ce&&A.get(t))return Ce==t;var Ne=-1,Le=!0,Re=w&s?new Xt:void 0;for(A.set(i,t),A.set(t,i);++Ne<ee;){var ke=i[Ne],Ge=t[Ne];if(f)var Xe=z?f(Ge,ke,Ne,t,i,A):f(ke,Ge,Ne,i,t,A);if(Xe!==void 0){if(Xe)continue;Le=!1;break}if(Re){if(!ye(t,function(ut,dt){if(!Re.has(dt)&&(ke===ut||o(ke,ut,f,w,A)))return Re.add(dt)})){Le=!1;break}}else if(!(ke===Ge||o(ke,Ge,f,w,A))){Le=!1;break}}return A.delete(i),A.delete(t),Le}function Ta(i,t,o,f,w,A,z){switch(o){case b:if(i.byteLength!=t.byteLength||i.byteOffset!=t.byteOffset)return!1;i=i.buffer,t=t.buffer;case S:return!(i.byteLength!=t.byteLength||!f(new _(i),new _(t)));case p:case I:case K:return _r(+i,+t);case N:return i.name==t.name&&i.message==t.message;case B:case E:return i==t+"";case M:var ee=Ye;case P:var de=A&u;if(ee||(ee=xt),i.size!=t.size&&!de)return!1;var Ce=z.get(i);if(Ce)return Ce==t;A|=s,z.set(i,t);var Ne=vr(ee(i),ee(t),f,w,A,z);return z.delete(i),Ne;case $:if(vn)return vn.call(i)==vn.call(t)}return!1}function Sn(i,t,o,f,w,A){var z=w&u,ee=Tn(i),de=ee.length,Ce=Tn(t),Ne=Ce.length;if(de!=Ne&&!z)return!1;for(var Le=de;Le--;){var Re=ee[Le];if(!(z?Re in t:He.call(t,Re)))return!1}var ke=A.get(i);if(ke&&A.get(t))return ke==t;var Ge=!0;A.set(i,t),A.set(t,i);for(var Xe=z;++Le<de;){Re=ee[Le];var ut=i[Re],dt=t[Re];if(f)var jt=z?f(dt,ut,Re,t,i,A):f(ut,dt,Re,i,t,A);if(!(jt===void 0?ut===dt||o(ut,dt,f,w,A):jt)){Ge=!1;break}Xe||(Xe=Re=="constructor")}if(Ge&&!Xe){var mn=i.constructor,Qt=t.constructor;mn!=Qt&&"constructor"in i&&"constructor"in t&&!(typeof mn=="function"&&mn instanceof mn&&typeof Qt=="function"&&Qt instanceof Qt)&&(Ge=!1)}return A.delete(i),A.delete(t),Ge}function Cn(i,t){var o=i.__data__;return Aa(t)?o[typeof t=="string"?"string":"hash"]:o.map}function on(i){for(var t=Tn(i),o=t.length;o--;){var f=t[o],w=i[f];t[o]=[f,w,qn(w)]}return t}function _t(i,t){var o=qe(i,t);return ba(o)?o:void 0}var Bt=Hn;(g&&Bt(new g(new ArrayBuffer(1)))!=b||T&&Bt(new T)!=M||Z&&Bt(Z.resolve())!=J||Me&&Bt(new Me)!=P||st&&Bt(new st)!=x)&&(Bt=function(i){var t=Ke.call(i),o=t==R?i.constructor:void 0,f=o?yt(o):void 0;if(f)switch(f){case rn:return b;case Wt:return M;case hn:return J;case an:return P;case wn:return x}return t});function Jn(i,t,o){t=In(t,i)?[t]:xn(t);for(var f,w=-1,z=t.length;++w<z;){var A=kt(t[w]);if(!(f=i!=null&&o(i,A)))break;i=i[A]}if(f)return f;var z=i?i.length:0;return!!z&&Yn(z)&&ln(A,z)&&(Ht(i)||On(i))}function ln(i,t){return t=t??h,!!t&&(typeof i=="number"||Ie.test(i))&&i>-1&&i%1==0&&i<t}function In(i,t){if(Ht(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||un(i)?!0:Ae.test(i)||!Te.test(i)||t!=null&&i in Object(t)}function Aa(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}function Da(i){return!!Dt&&Dt in i}function gr(i){var t=i&&i.constructor,o=typeof t=="function"&&t.prototype||ft;return i===o}function qn(i){return i===i&&!gn(i)}function mr(i,t){return function(o){return o==null?!1:o[i]===t&&(t!==void 0||i in Object(o))}}var Na=Wn(function(i){i=Kn(i);var t=[];return Ue.test(i)&&t.push(""),i.replace(le,function(o,f,w,A){t.push(w?A.replace(fe,"$1"):f||o)}),t});function kt(i){if(typeof i=="string"||un(i))return i;var t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function yt(i){if(i!=null){try{return gt.call(i)}catch{}try{return i+""}catch{}}return""}function Wn(i,t){if(typeof i!="function"||t&&typeof t!="function")throw new TypeError(a);var o=function(){var f=arguments,w=t?t.apply(this,f):f[0],A=o.cache;if(A.has(w))return A.get(w);var z=i.apply(this,f);return o.cache=A.set(w,z),z};return o.cache=new(Wn.Cache||rt),o}Wn.Cache=rt;function _r(i,t){return i===t||i!==i&&t!==t}function On(i){return Kt(i)&&He.call(i,"callee")&&(!k.call(i,"callee")||Ke.call(i)==c)}var Ht=Array.isArray;function Vn(i){return i!=null&&Yn(i.length)&&!Xn(i)}function Kt(i){return sn(i)&&Vn(i)}function Xn(i){var t=gn(i)?Ke.call(i):"";return t==v||t==O}function Yn(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=h}function gn(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function sn(i){return!!i&&typeof i=="object"}function un(i){return typeof i=="symbol"||sn(i)&&Ke.call(i)==$}var En=Se?Be(Se):wa;function Kn(i){return i==null?"":Ea(i)}function Pa(i,t,o){var f=i==null?void 0:pr(i,t);return f===void 0?o:f}function Ma(i,t){return i!=null&&Jn(i,t,ma)}function Tn(i){return Vn(i)?va(i):Sa(i)}function Ra(i,t){var o={};return t=xa(t),ga(i,function(f,w,A){o[w]=t(f,w,A)}),o}function Qn(i){return i}function $a(i){return In(i)?Ee(kt(i)):Oa(i)}e.exports=Ra}(er,er.exports)),er.exports}var eu=Zs();const Ro=cr(eu),tu={class:"whitespace-pre-line"},nu={class:"flex items-center gap-2 mb-4"},ru={class:"flex justify-end"},au=it({__name:"ScriptTool",props:{scripts:{},idx:{},editable:{type:Boolean}},emits:["close","update-value"],setup(e,{emit:r}){const n=e,a=r,{t:l}=kn(),s=he(),u=he({script:void 0}),h=he(!1),c=()=>{h.value=!1,u.value={script:""},a("close")},m=()=>{n.editable&&(h.value=!0,u.value={script:(n==null?void 0:n.idx)!==void 0&&n.idx>-1&&(n==null?void 0:n.scripts)!==void 0?n.scripts[n.idx].script:void 0})},p=v=>{v||c()},I=()=>{var v;(v=s.value)==null||v.validate(O=>{var M;O||(a("update-value",(M=u.value)==null?void 0:M.script,n.idx),c())})},N=v=>{u.value={...u.value,script:v}};return Lt(n,v=>{u.value={script:(v==null?void 0:v.idx)!==void 0&&v.idx>-1&&(v==null?void 0:v.scripts)!==void 0?v.scripts[v.idx].script:void 0}},{immediate:!0}),(v,O)=>{var P;const M=Br,K=Jr,R=jr,J=Fn,B=zn;return W(),ge("div",null,[v.idx!==void 0&&v.idx>-1&&v.scripts!==void 0&&((P=v.scripts[v.idx])!=null&&P.script)?(W(),$e(d(Ka),{key:0,trigger:"hover"},{trigger:D(()=>[C(d($t),{type:"warning",onClick:m},{default:D(()=>[C(M,null,{default:D(()=>[C(d(Qa))]),_:1})]),_:1})]),default:D(()=>[Y("div",tu,we(v.scripts[v.idx].script),1)]),_:1})):(W(),$e(d($t),{key:1,type:"info",onClick:m},{default:D(()=>[C(M,null,{default:D(()=>[C(d(Qa))]),_:1})]),_:1})),C(B,{show:d(h),"onUpdate:show":O[1]||(O[1]=E=>Tt(h)?h.value=E:null),"on-update:show":p},{default:D(()=>[C(J,{style:{width:"750px"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0"},{default:D(()=>[C(R,{model:d(u),ref_key:"formRef",ref:s,size:"small"},{default:D(()=>[C(K,{path:"script",class:"w-full",label:"Script"},{label:D(()=>[Y("div",nu,[O[2]||(O[2]=Y("span",{class:"inline-block w-12"}," Script ",-1)),v.editable?(W(),$e(hi,{key:0,"onUpdate:value":N})):Je("",!0)])]),default:D(()=>[C(d(vi),{height:"500px",theme:"vs-dark",value:d(u).script,"onUpdate:value":O[0]||(O[0]=E=>d(u).script=E),language:"python"},null,8,["value"])]),_:1})]),_:1},8,["model"]),Y("div",ru,[C(d($t),{type:"primary",onClick:I},{default:D(()=>[xe(we(d(l)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])])}}}),br=Gr(au,[["__scopeId","data-v-63e6099a"]]),ou={class:"flex justify-between items-center gap-2"},iu={class:"flex justify-between gap-2"},lu={class:"flex items-center gap-2"},su={class:"flex justify-end mr-4"},uu=it({__name:"WaveformModal",props:{gateInfo:{},layerIdx:{},len:{},waveInfo:{},scriptInfo:{}},emits:["close","update-value"],setup(e,{expose:r,emit:n}){const a=e,l=n,{t:s}=kn(),u=Ln(),h=Un(),c=he(),m=he(),p=he({type:"func",t0:0,ratio:1,channel:void 0,func_name:void 0,wave_parameters:{},waveform_compiler_config:{},name:void 0}),I=he({type:{required:!0,message:s("common.required")},channel:{required:!0,message:s("common.required")},func_name:{required:!0,message:s("common.required")},t0:{required:!0,message:s("common.required")},ratio:{required:!0,message:s("common.required")}}),N=he(!1),v=()=>{N.value=!1,l("close")},O=()=>{N.value=!0},M=()=>{v()},K=()=>{var E;(E=m.value)==null||E.validate($=>{var x;$||(l("update-value",(x=c.value)==null?void 0:x.map(S=>{var b;return{...S,gate_name:(b=a.gateInfo)==null?void 0:b.gate_name,wave_func_names:[p.value.func_name]}}),p.value),v())})},R=Ct(()=>{const E=p.value.func_name;return E?h.waveFunctions?h.waveFunctions[E]:void 0:{}}),J=E=>Mt("div",{class:"inline-flex justify-center items-center gap-2"},[Mt("div",Mt(Ka,{trigger:"hover",style:"white-space: pre-line"},{default:()=>Mt("div",h.waveFunctions?h.waveFunctions[E.label].docstring:""),trigger:()=>Mt($t,{size:"small",class:"!relative !mt-1 !w-5 !h-5",circle:!0,type:"info"},{icon:()=>Mt(Ao)})})),Mt("div",E.value)]),B=E=>{Rt(()=>{var x;const $=JSON.parse(JSON.stringify(((x=R.value)==null?void 0:x.parameters)||{}));p.value={...p.value,wave_parameters:Ro($,()=>{}),name:E}})},P=(E,$,x)=>{var b;const S=JSON.parse(JSON.stringify(c.value||[]));$===void 0||$<0?S.push({entity:a.gateInfo.entity,layer:a.layerIdx,ratio:1,t0:0,channel:a.gateInfo.channel,wave_ids:((b=a.waveInfo)==null?void 0:b.wave_id)!==void 0?[a.waveInfo.wave_id]:[a.len],parameter:x,script:E,gate_name:a.gateInfo.gate_name,wave_func_names:p.value.func_name,search_type:"ids"}):S[$]={...S[$],script:E},c.value=S};return Lt(()=>h.waveCompiler,E=>{if(E){const $=JSON.parse(JSON.stringify(E));p.value={...p.value,waveform_compiler_config:Ro($,()=>0)}}},{immediate:!0}),Lt(()=>a.scriptInfo,E=>{c.value=E},{immediate:!0}),Lt(()=>a.waveInfo,E=>{wt(E==null?void 0:E.wave)||(p.value={...E.wave,waveform_compiler_config:E.wave.waveform_compiler_config||{}})},{immediate:!0}),r({open:O,close:v}),(E,$)=>{const x=ql,S=Qi,b=Ki,L=Jr,H=so,G=ii,F=po,X=el,V=Zi,Q=jr,pe=oo,me=Fn,Te=zn;return W(),$e(Te,{show:d(N),"onUpdate:show":$[7]||($[7]=Ae=>Tt(N)?N.value=Ae:null),"on-update:show":M},{default:D(()=>[C(me,{style:{width:"880px"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0","content-class":"!pl-5 !pr-1 !py-4"},{default:D(()=>[C(pe,{style:{"max-height":"500px","padding-right":"15px"}},{default:D(()=>{var Ae,Ue;return[C(Q,{model:d(p),rules:d(I),ref_key:"formRef",ref:m,size:"small",disabled:!!((Ue=(Ae=d(h))==null?void 0:Ae.expInfo)!=null&&Ue.exp_id)},{default:D(()=>[Y("div",ou,[C(L,{path:"channel",class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>[C(x,{size:"small"},{default:D(()=>[xe(we(d(s)("expInfo.channel"))+" ",1),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),C(S,{value:d(p).channel,"onUpdate:value":$[0]||($[0]=le=>d(p).channel=le)},null,8,["value"])]),_:1})]),_:1}),C(L,{path:"type",class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>[C(x,{size:"small"},{default:D(()=>[xe(we(d(s)("expInfo.type")),1)]),_:1}),C(H,{disabled:"",options:[{label:"func",value:"func"}],value:d(p).type,"onUpdate:value":$[1]||($[1]=le=>d(p).type=le)},null,8,["value"])]),_:1})]),_:1})]),C(G,{class:"!mt-0 !mb-2"},{default:D(()=>[xe(we(d(s)("expInfo.waveformParameter")),1)]),_:1}),Y("div",iu,[C(L,{path:"func_name",class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>[C(x,{size:"small"},{default:D(()=>[xe(we(d(s)("expInfo.function"))+" ",1),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),C(H,{value:d(p).func_name,"onUpdate:value":$[2]||($[2]=le=>d(p).func_name=le),options:Object.keys(d(h).waveFunctions||{}).map(le=>({label:le,value:le})),"render-label":J,onUpdateValue:B},null,8,["value","options"])]),_:1})]),_:1}),C(L,{path:"t0",class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>{var le,ve,fe;return[C(x,{size:"small"},{default:D(()=>[$[8]||($[8]=xe(" t0 ")),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),C(F,{value:d(p).t0,"onUpdate:value":$[3]||($[3]=oe=>d(p).t0=oe),class:"w-full"},null,8,["value"]),C(br,{editable:!((ve=(le=d(h))==null?void 0:le.expInfo)!=null&&ve.exp_id),scripts:d(c),idx:(fe=d(c))==null?void 0:fe.findIndex(oe=>oe.parameter==="t0"),onUpdateValue:$[4]||($[4]=(oe,Ie)=>P(oe,Ie,"t0"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1}),C(L,{path:"ratio",class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>{var le,ve,fe;return[C(x,{size:"small"},{default:D(()=>[$[9]||($[9]=xe(" ratio ")),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),C(F,{value:d(p).ratio,"onUpdate:value":$[5]||($[5]=oe=>d(p).ratio=oe),class:"w-full"},null,8,["value"]),C(br,{editable:!((ve=(le=d(h))==null?void 0:le.expInfo)!=null&&ve.exp_id),scripts:d(c),idx:(fe=d(c))==null?void 0:fe.findIndex(oe=>oe.parameter==="ratio"),onUpdateValue:$[6]||($[6]=(oe,Ie)=>P(oe,Ie,"ratio"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1})]),d(wt)(d(p).wave_parameters)?Je("",!0):(W(),$e(V,{key:0,cols:3,"x-gap":"8"},{default:D(()=>{var le;return[(W(!0),ge(ht,null,Ut((le=d(R))==null?void 0:le.parameters,(ve,fe)=>(W(),$e(X,{key:fe},{default:D(()=>[(W(),$e(L,{key:fe,path:`wave_parameters.(${fe})`,class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>{var oe,Ie,y;return[C(x,{size:"small"},{default:D(()=>[xe(we(fe),1)]),_:2},1024),C(F,{placeholder:String(ve),value:d(p).wave_parameters[fe],"onUpdate:value":j=>d(p).wave_parameters[fe]=j},null,8,["placeholder","value","onUpdate:value"]),C(br,{editable:!((Ie=(oe=d(h))==null?void 0:oe.expInfo)!=null&&Ie.exp_id),scripts:d(c),idx:(y=d(c))==null?void 0:y.findIndex(j=>j.parameter===String(fe)),onUpdateValue:(j,te)=>P(j,te,String(fe))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]}),_:1})),C(G,{class:"!m-0"},{default:D(()=>[xe(we(d(s)("expInfo.waveCompilerSetup")),1)]),_:1}),C(V,{cols:3,"x-gap":"8"},{default:D(()=>[(W(!0),ge(ht,null,Ut(d(h).waveCompiler,(le,ve)=>(W(),$e(X,{key:ve},{default:D(()=>[(W(),$e(L,{key:ve,path:`waveform_compiler_config.${ve}`,class:"flex-1"},{default:D(()=>[C(b,null,{default:D(()=>{var fe,oe,Ie;return[C(d(Ka),{trigger:"hover"},{trigger:D(()=>[C(x,{size:"small"},{default:D(()=>[Y("div",lu,[xe(we(ve)+" ",1),C(d($t),{type:"info",size:"small",class:"!w-5 !h-5",circle:""},{icon:D(()=>[C(d(Ao))]),_:1})])]),_:2},1024)]),default:D(()=>[xe(" "+we(le==null?void 0:le.desc),1)]),_:2},1024),C(F,{placeholder:String(le.type),value:d(p).waveform_compiler_config[ve],"onUpdate:value":y=>d(p).waveform_compiler_config[ve]=y},null,8,["placeholder","value","onUpdate:value"]),C(br,{editable:!((oe=(fe=d(h))==null?void 0:fe.expInfo)!=null&&oe.exp_id),scripts:d(c),idx:(Ie=d(c))==null?void 0:Ie.findIndex(y=>y.parameter===String(ve)),onUpdateValue:(y,j)=>P(y,j,String(ve))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1}),Y("div",su,[C(d($t),{type:"primary",onClick:K},{default:D(()=>[xe(we(d(s)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])}}});var La,$o;function cu(){if($o)return La;$o=1;var e="Expected a function",r="__lodash_hash_undefined__",n="[object Function]",a="[object GeneratorFunction]",l="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,h=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/[\\^$.*+?()[\]{}|]/g,p=/\\(\\)?/g,I=/^\[object .+?Constructor\]$/,N=typeof tt=="object"&&tt&&tt.Object===Object&&tt,v=typeof self=="object"&&self&&self.Object===Object&&self,O=N||v||Function("return this")();function M(_,k){return _==null?void 0:_[k]}function K(_){var k=!1;if(_!=null&&typeof _.toString!="function")try{k=!!(_+"")}catch{}return k}var R=Array.prototype,J=Function.prototype,B=Object.prototype,P=O["__core-js_shared__"],E=function(){var _=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),$=J.toString,x=B.hasOwnProperty,S=B.toString,b=RegExp("^"+$.call(x).replace(m,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=O.Symbol,H=R.splice,G=Be(O,"Map"),F=Be(Object,"create"),X=L?L.prototype:void 0,V=X?X.toString:void 0;function Q(_){var k=-1,ne=_?_.length:0;for(this.clear();++k<ne;){var De=_[k];this.set(De[0],De[1])}}function pe(){this.__data__=F?F(null):{}}function me(_){return this.has(_)&&delete this.__data__[_]}function Te(_){var k=this.__data__;if(F){var ne=k[_];return ne===r?void 0:ne}return x.call(k,_)?k[_]:void 0}function Ae(_){var k=this.__data__;return F?k[_]!==void 0:x.call(k,_)}function Ue(_,k){var ne=this.__data__;return ne[_]=F&&k===void 0?r:k,this}Q.prototype.clear=pe,Q.prototype.delete=me,Q.prototype.get=Te,Q.prototype.has=Ae,Q.prototype.set=Ue;function le(_){var k=-1,ne=_?_.length:0;for(this.clear();++k<ne;){var De=_[k];this.set(De[0],De[1])}}function ve(){this.__data__=[]}function fe(_){var k=this.__data__,ne=ie(k,_);if(ne<0)return!1;var De=k.length-1;return ne==De?k.pop():H.call(k,ne,1),!0}function oe(_){var k=this.__data__,ne=ie(k,_);return ne<0?void 0:k[ne][1]}function Ie(_){return ie(this.__data__,_)>-1}function y(_,k){var ne=this.__data__,De=ie(ne,_);return De<0?ne.push([_,k]):ne[De][1]=k,this}le.prototype.clear=ve,le.prototype.delete=fe,le.prototype.get=oe,le.prototype.has=Ie,le.prototype.set=y;function j(_){var k=-1,ne=_?_.length:0;for(this.clear();++k<ne;){var De=_[k];this.set(De[0],De[1])}}function te(){this.__data__={hash:new Q,map:new(G||le),string:new Q}}function q(_){return ze(this,_).delete(_)}function _e(_){return ze(this,_).get(_)}function be(_){return ze(this,_).has(_)}function ue(_,k){return ze(this,_).set(_,k),this}j.prototype.clear=te,j.prototype.delete=q,j.prototype.get=_e,j.prototype.has=be,j.prototype.set=ue;function ie(_,k){for(var ne=_.length;ne--;)if(ft(_[ne][0],k))return ne;return-1}function se(_,k){k=qe(k,_)?[k]:Ee(k);for(var ne=0,De=k.length;_!=null&&ne<De;)_=_[xt(k[ne++])];return ne&&ne==De?_:void 0}function Se(_){if(!gt(_)||Ye(_))return!1;var k=Dt(_)||K(_)?b:I;return k.test(Gt(_))}function ye(_){if(typeof _=="string")return _;if(Ke(_))return V?V.call(_):"";var k=_+"";return k=="0"&&1/_==-1/0?"-0":k}function Ee(_){return lt(_)?_:ct(_)}function ze(_,k){var ne=_.__data__;return Fe(k)?ne[typeof k=="string"?"string":"hash"]:ne.map}function Be(_,k){var ne=M(_,k);return Se(ne)?ne:void 0}function qe(_,k){if(lt(_))return!1;var ne=typeof _;return ne=="number"||ne=="symbol"||ne=="boolean"||_==null||Ke(_)?!0:u.test(_)||!s.test(_)||k!=null&&_ in Object(k)}function Fe(_){var k=typeof _;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?_!=="__proto__":_===null}function Ye(_){return!!E&&E in _}var ct=At(function(_){_=pn(_);var k=[];return h.test(_)&&k.push(""),_.replace(c,function(ne,De,g,T){k.push(g?T.replace(p,"$1"):De||ne)}),k});function xt(_){if(typeof _=="string"||Ke(_))return _;var k=_+"";return k=="0"&&1/_==-1/0?"-0":k}function Gt(_){if(_!=null){try{return $.call(_)}catch{}try{return _+""}catch{}}return""}function At(_,k){if(typeof _!="function"||k&&typeof k!="function")throw new TypeError(e);var ne=function(){var De=arguments,g=k?k.apply(this,De):De[0],T=ne.cache;if(T.has(g))return T.get(g);var Z=_.apply(this,De);return ne.cache=T.set(g,Z),Z};return ne.cache=new(At.Cache||j),ne}At.Cache=j;function ft(_,k){return _===k||_!==_&&k!==k}var lt=Array.isArray;function Dt(_){var k=gt(_)?S.call(_):"";return k==n||k==a}function gt(_){var k=typeof _;return!!_&&(k=="object"||k=="function")}function He(_){return!!_&&typeof _=="object"}function Ke(_){return typeof _=="symbol"||He(_)&&S.call(_)==l}function pn(_){return _==null?"":ye(_)}function Nt(_,k,ne){var De=_==null?void 0:se(_,k);return De===void 0?ne:De}return La=Nt,La}var fu=cu();const du=cr(fu),pu={class:"flex items-center"},hu={key:0},vu={class:"flex justify-end"},gu=it({__name:"WaveQuickEdit",props:{wave:{},pkey:{},editable:{type:Boolean},idx:{},scriptInfo:{}},emits:["update-value"],setup(e,{emit:r}){const n=r,a=e,l=he({value:void 0,script:void 0}),s=he(null),u=he(!1),h=()=>{u.value=!0},c=()=>{u.value=!1},m=v=>{v||c()},p=()=>{n("update-value",{idx:a.idx,pkey:a.pkey,...l.value}),c()},I=(v="")=>{l.value={...l.value,script:v}};Lt(u,()=>{var O;const v=JSON.parse(JSON.stringify(a||{}));l.value={value:du(a.wave,a.pkey),script:((O=v==null?void 0:v.scriptInfo)==null?void 0:O.script)||""}},{immediate:!0,deep:!0});const N=Ct(()=>{var v,O,M;return((v=a.scriptInfo)==null?void 0:v.parameter)===((O=a.pkey.split("."))==null?void 0:O.pop())&&((M=a==null?void 0:a.scriptInfo)==null?void 0:M.script)});return(v,O)=>{var $;const M=$t,K=tl,R=po,J=Jr,B=jr,P=Fn,E=zn;return W(),ge("div",{class:"flex items-center",onClick:h},[C(K,{trigger:"hover",disabled:!(($=v.scriptInfo)!=null&&$.script)},{trigger:D(()=>[Y("div",pu,[Y("div",null,[Ya(v.$slots,"default",{},void 0,!0)]),d(N)?(W(),$e(M,{key:0,size:"small",class:"!w-5 !h-5",type:"warning"},{icon:D(()=>[C(d(Qa))]),_:1})):Je("",!0)])]),default:D(()=>[v.scriptInfo.script?(W(),ge("span",hu,we(v.scriptInfo.script),1)):Je("",!0)]),_:3},8,["disabled"]),C(E,{show:d(u),"onUpdate:show":O[2]||(O[2]=x=>Tt(u)?u.value=x:null),onUpdateShow:m},{default:D(()=>[C(P,{style:{width:"900px"}},{default:D(()=>[C(B,{model:d(l),ref_key:"formRef",ref:s,size:"small",disabled:!v.editable},{default:D(()=>{var x;return[C(J,{label:(x=v.pkey.split("."))==null?void 0:x.pop()},{default:D(()=>[C(R,{class:"w-52",value:d(l).value,"onUpdate:value":O[0]||(O[0]=S=>d(l).value=S)},null,8,["value"])]),_:1},8,["label"]),C(J,{path:"script",class:"w-full",label:"Script"},{label:D(()=>[Y("div",null,[O[3]||(O[3]=Y("span",{class:"inline-block w-12 mb-2"}," Script ",-1)),v.editable?(W(),$e(hi,{key:0,"onUpdate:value":I})):Je("",!0)])]),default:D(()=>[C(d(vi),{height:"400px",theme:"vs-dark",value:d(l).script,"onUpdate:value":O[1]||(O[1]=S=>d(l).script=S),language:"python",options:{readOnly:!v.editable}},null,8,["value","options"])]),_:1})]}),_:1},8,["model","disabled"]),Y("div",vu,[C(M,{type:"primary",onClick:p},{default:D(()=>O[4]||(O[4]=[xe(" 确定 ")])),_:1})])]),_:1})]),_:1},8,["show"])])}}}),wr=Gr(gu,[["__scopeId","data-v-ede03f38"]]);var ka,Lo;function mu(){if(Lo)return ka;Lo=1;var e="Expected a function",r="__lodash_hash_undefined__",n=9007199254740991,a="[object Function]",l="[object GeneratorFunction]",s="[object Symbol]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,c=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/[\\^$.*+?()[\]{}|]/g,I=/\\(\\)?/g,N=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,O=typeof tt=="object"&&tt&&tt.Object===Object&&tt,M=typeof self=="object"&&self&&self.Object===Object&&self,K=O||M||Function("return this")();function R(g,T){return g==null?void 0:g[T]}function J(g){var T=!1;if(g!=null&&typeof g.toString!="function")try{T=!!(g+"")}catch{}return T}var B=Array.prototype,P=Function.prototype,E=Object.prototype,$=K["__core-js_shared__"],x=function(){var g=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),S=P.toString,b=E.hasOwnProperty,L=E.toString,H=RegExp("^"+S.call(b).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=K.Symbol,F=B.splice,X=Ye(K,"Map"),V=Ye(Object,"create"),Q=G?G.prototype:void 0,pe=Q?Q.toString:void 0;function me(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function Te(){this.__data__=V?V(null):{}}function Ae(g){return this.has(g)&&delete this.__data__[g]}function Ue(g){var T=this.__data__;if(V){var Z=T[g];return Z===r?void 0:Z}return b.call(T,g)?T[g]:void 0}function le(g){var T=this.__data__;return V?T[g]!==void 0:b.call(T,g)}function ve(g,T){var Z=this.__data__;return Z[g]=V&&T===void 0?r:T,this}me.prototype.clear=Te,me.prototype.delete=Ae,me.prototype.get=Ue,me.prototype.has=le,me.prototype.set=ve;function fe(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function oe(){this.__data__=[]}function Ie(g){var T=this.__data__,Z=ye(T,g);if(Z<0)return!1;var Me=T.length-1;return Z==Me?T.pop():F.call(T,Z,1),!0}function y(g){var T=this.__data__,Z=ye(T,g);return Z<0?void 0:T[Z][1]}function j(g){return ye(this.__data__,g)>-1}function te(g,T){var Z=this.__data__,Me=ye(Z,g);return Me<0?Z.push([g,T]):Z[Me][1]=T,this}fe.prototype.clear=oe,fe.prototype.delete=Ie,fe.prototype.get=y,fe.prototype.has=j,fe.prototype.set=te;function q(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function _e(){this.__data__={hash:new me,map:new(X||fe),string:new me}}function be(g){return Fe(this,g).delete(g)}function ue(g){return Fe(this,g).get(g)}function ie(g){return Fe(this,g).has(g)}function se(g,T){return Fe(this,g).set(g,T),this}q.prototype.clear=_e,q.prototype.delete=be,q.prototype.get=ue,q.prototype.has=ie,q.prototype.set=se;function Se(g,T,Z){var Me=g[T];(!(b.call(g,T)&&He(Me,Z))||Z===void 0&&!(T in g))&&(g[T]=Z)}function ye(g,T){for(var Z=g.length;Z--;)if(He(g[Z][0],T))return Z;return-1}function Ee(g){if(!Nt(g)||At(g))return!1;var T=pn(g)||J(g)?H:N;return T.test(Dt(g))}function ze(g,T,Z,Me){if(!Nt(g))return g;T=xt(T,g)?[T]:qe(T);for(var st=-1,Qe=T.length,rn=Qe-1,Wt=g;Wt!=null&&++st<Qe;){var hn=lt(T[st]),an=Z;if(st!=rn){var wn=Wt[hn];an=void 0,an===void 0&&(an=Nt(wn)?wn:ct(T[st+1])?[]:{})}Se(Wt,hn,an),Wt=Wt[hn]}return g}function Be(g){if(typeof g=="string")return g;if(k(g))return pe?pe.call(g):"";var T=g+"";return T=="0"&&1/g==-1/0?"-0":T}function qe(g){return Ke(g)?g:ft(g)}function Fe(g,T){var Z=g.__data__;return Gt(T)?Z[typeof T=="string"?"string":"hash"]:Z.map}function Ye(g,T){var Z=R(g,T);return Ee(Z)?Z:void 0}function ct(g,T){return T=T??n,!!T&&(typeof g=="number"||v.test(g))&&g>-1&&g%1==0&&g<T}function xt(g,T){if(Ke(g))return!1;var Z=typeof g;return Z=="number"||Z=="symbol"||Z=="boolean"||g==null||k(g)?!0:h.test(g)||!u.test(g)||T!=null&&g in Object(T)}function Gt(g){var T=typeof g;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?g!=="__proto__":g===null}function At(g){return!!x&&x in g}var ft=gt(function(g){g=ne(g);var T=[];return c.test(g)&&T.push(""),g.replace(m,function(Z,Me,st,Qe){T.push(st?Qe.replace(I,"$1"):Me||Z)}),T});function lt(g){if(typeof g=="string"||k(g))return g;var T=g+"";return T=="0"&&1/g==-1/0?"-0":T}function Dt(g){if(g!=null){try{return S.call(g)}catch{}try{return g+""}catch{}}return""}function gt(g,T){if(typeof g!="function"||T&&typeof T!="function")throw new TypeError(e);var Z=function(){var Me=arguments,st=T?T.apply(this,Me):Me[0],Qe=Z.cache;if(Qe.has(st))return Qe.get(st);var rn=g.apply(this,Me);return Z.cache=Qe.set(st,rn),rn};return Z.cache=new(gt.Cache||q),Z}gt.Cache=q;function He(g,T){return g===T||g!==g&&T!==T}var Ke=Array.isArray;function pn(g){var T=Nt(g)?L.call(g):"";return T==a||T==l}function Nt(g){var T=typeof g;return!!g&&(T=="object"||T=="function")}function _(g){return!!g&&typeof g=="object"}function k(g){return typeof g=="symbol"||_(g)&&L.call(g)==s}function ne(g){return g==null?"":Be(g)}function De(g,T,Z){return g==null?g:ze(g,T,Z)}return ka=De,ka}var _u=mu();const yu=cr(_u),bu={style:{border:"1px dashed rgba(56, 137, 197, 0.35)"},class:"rounded p-1 my-1"},wu={class:"flex justify-between items-center gap-2 flex-wrap"},xu={class:"text-l"},Su={class:"my-1 flex gap-1 flex-1 flex-wrap"},Cu={class:"inline-flex gap-2 items-center"},Iu=it({__name:"WaveView",props:{widx:{},wave:{},editable:{type:Boolean},root:{},scriptInfo:{}},emits:["edit-wave","delete-wave","update-wave-script"],setup(e,{emit:r}){const n=e,{t:a}=kn(),l=he(),s=r,u=()=>{s("edit-wave")},h=()=>{s("delete-wave")};Lt(()=>n.scriptInfo,m=>{l.value=m==null?void 0:m.waveformScript},{immediate:!0,deep:!0});const c=({pkey:m,script:p,value:I,idx:N})=>{const v=JSON.parse(JSON.stringify(n.wave));yu(v,m,I),s("update-wave-script",{wave:v,pkey:m,script:p,widx:n.widx,idx:N})};return(m,p)=>{var O,M,K,R,J,B;const I=nl,N=$t,v=Gl;return W(),ge("div",bu,[Y("div",wu,[Y("div",xu,[C(I,{type:"info",bordered:!1,size:"small"},{default:D(()=>{var P;return[xe(we((P=m.wave)==null?void 0:P.channel),1)]}),_:1}),p[0]||(p[0]=xe(" : ")),C(I,{type:"success",bordered:!1,size:"small"},{default:D(()=>{var P;return[xe(we((P=m.wave)==null?void 0:P.func_name),1)]}),_:1})]),Y("div",Su,[p[3]||(p[3]=xe(" ( ")),C(wr,{pkey:"t0",wave:m.wave,editable:m.editable,idx:(O=d(l))==null?void 0:O.findIndex(P=>P.parameter==="t0"),"script-info":(M=d(l))==null?void 0:M.find(P=>P.parameter==="t0"),onUpdateValue:c},{default:D(()=>[C(I,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:D(()=>{var P;return[xe(" t0 = "+we((P=m.wave)==null?void 0:P.t0),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),p[4]||(p[4]=xe(" , ")),C(wr,{pkey:"ratio",wave:m.wave,editable:m.editable,idx:(K=d(l))==null?void 0:K.findIndex(P=>P.parameter==="ratio"),"script-info":(R=d(l))==null?void 0:R.find(P=>P.parameter==="ratio"),onUpdateValue:c},{default:D(()=>[C(I,{bordered:!1,size:"small",class:"!cursor-pointer",color:{textColor:"#ff7d00"}},{default:D(()=>{var P;return[xe(" ratio = "+we((P=m.wave)==null?void 0:P.ratio),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),p[5]||(p[5]=xe(" , ")),(W(!0),ge(ht,null,Ut((J=m.wave)==null?void 0:J.wave_parameters,(P,E)=>{var $,x;return W(),ge(ht,{key:E},[C(wr,{wave:m.wave,pkey:`wave_parameters.${E}`,editable:m.editable,idx:($=d(l))==null?void 0:$.findIndex(S=>S.parameter===E),"script-info":(x=d(l))==null?void 0:x.find(S=>S.parameter===E),onUpdateValue:c},{default:D(()=>[C(I,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:D(()=>[xe(we(E)+" = "+we(P),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),p[1]||(p[1]=xe(" , "))],64)}),128)),(W(!0),ge(ht,null,Ut((B=m.wave)==null?void 0:B.waveform_compiler_config,(P,E)=>{var $,x;return W(),ge(ht,{key:E},[C(wr,{wave:m.wave,pkey:`waveform_compiler_config.${E}`,editable:m.editable,idx:($=d(l))==null?void 0:$.findIndex(S=>S.parameter===E),"script-info":(x=d(l))==null?void 0:x.find(S=>S.parameter===E),onUpdateValue:c},{default:D(()=>[C(I,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#00b42a"}},{default:D(()=>[xe(we(E)+" = "+we(P),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),p[2]||(p[2]=Y("span",{class:"last:hidden"},",",-1))],64)}),128)),p[6]||(p[6]=xe(" ) "))]),Y("div",Cu,[C(N,{type:"info",size:"small",circle:"",onClick:u},{icon:D(()=>[C(d(si))]),_:1}),m.editable?(W(),$e(v,{key:0,trigger:"click",onPositiveClick:h},{trigger:D(()=>[C(N,{type:"error",size:"small",circle:""},{icon:D(()=>[C(d(fo))]),_:1})]),default:D(()=>[xe(" "+we(d(a)("common.removeConfirm")),1)]),_:1})):Je("",!0)])])])}}}),Ou={class:"flex justify-between items-center gap-2"},Eu={class:"flex justify-between"},Tu={class:"text-xl inline-flex items-center gap-2"},Au={class:"flex items-center gap-2"},Du={key:0,class:"text-center mt-20"},Nu={class:"n-empty__description"},Pu={key:1,class:"text-center mt-20"},Mu={class:"n-empty__description"},Ru={class:"h-[236px] overflow-hidden"},$u={class:"flex justify-end mt-4"},Lu=it({__name:"GateModal",props:{info:{}},emits:["ok","close"],setup(e,{expose:r,emit:n}){const a=e,l=Ln(),s=Un(),{allQubits:u,gates:h,program:c,layers:m}=Ur(s),{t:p}=kn(),I=oi(),N=he(),v=he(),O=he(),M=he(!1),K=he(!1),R=he(!1),J=he([]),B=he(!1),P=he(),E=he(),$=he(),x=he({gate_name:void 0,entity:void 0}),S=he({gate_name:{required:!0,message:p("common.required")},entity:{required:!0,message:p("common.required")}}),b=n,L=he(!1),H=()=>{L.value=!1,P.value=void 0,b("close")},G=()=>{L.value=!0},F=()=>{H()},X=()=>{B.value=!0,Rt(()=>{var y;(y=E.value)==null||y.open()})},V=()=>{P.value=void 0,B.value=!1,O.value=void 0},Q=()=>{var y;(y=$.value)==null||y.validate(j=>{var te,q,_e,be;if(!j){let ue=JSON.parse(JSON.stringify(((te=c.value)==null?void 0:te.waveform_script)||[]));const{idx:ie=[],waveformScript:se=[]}=v.value||{};if(se.forEach(ye=>{var Ee;ye.entity=x.value.entity?x.value.entity[0]:"",ye.gate_name=((Ee=x.value)==null?void 0:Ee.gate_name)||""}),ie==null||ie.forEach((ye,Ee)=>{ue[ye]=se[Ee]}),ue=ue.concat(se.slice(ie.length)),vo(ue,ye=>!ye.script),c.value={space_parameter_script:(q=c.value)==null?void 0:q.space_parameter_script,waveform_script:ue},(_e=a.info)!=null&&_e.gateInfo)h.value={...h.value||{},[a.info.gateInfo.key]:x.value};else if(((be=a.info)==null?void 0:be.layerIdx)!==void 0){const ye=co(),Ee=JSON.parse(JSON.stringify(m.value||[]));Ee[a.info.layerIdx].push(ye),m.value=Ee,h.value={...h.value||{},[ye]:x.value}}const Se=JSON.parse(JSON.stringify(u.value));Se==null||Se.forEach(ye=>{var Ee;(ye.value===x.value.entity||(Ee=x.value.entity)!=null&&Ee.includes(ye.value))&&(ye.visible=!0)}),u.value=Se,H()}})},pe=Ct(()=>{var j;let y=[];return m.value[(j=a.info)==null?void 0:j.layerIdx].forEach(te=>{var _e;const q=h!=null&&h.value?(_e=h.value[te])==null?void 0:_e.entity:[];y=y.concat(q)}),u.value.filter(te=>!y.includes(te.value)).map(te=>({label:te.value,value:te.value}))}),me=y=>{if(y.length>2){Rt(()=>{x.value={...x.value,entity:y.slice(0,2)}});return}},Te=(y,j)=>{var _e,be;const te=[],q=(be=(_e=v.value)==null?void 0:_e.waveformScript)==null?void 0:be.filter((ue,ie)=>{var se,Se,ye,Ee,ze;if(ue.search_type==="ids"&&ue.script&&((Se=(se=ue.wave_ids)==null?void 0:se.map(qe=>+qe))==null?void 0:Se.includes(+j))||ue.search_type==="name"&&ue.script&&ue.wave_names.includes(y.name)||ue.search_type==="channel"&&ue.script&&(ue.channels.includes(y.channel)||ue.channels.includes((ze=y.channel)==null?void 0:ze.replace(((Ee=(ye=a.info)==null?void 0:ye.qubit)==null?void 0:Ee.value)||"",""))))return te.push(ie),!0});return{idx:te,waveformScript:q}},Ae=(y,j)=>{O.value=Te(y,j),P.value={wave_id:j,wave:x.value.waves?x.value.waves[j]:void 0},X()},Ue=y=>{if(x.value.waves){const j=JSON.parse(JSON.stringify(v.value));j.waveformScript.forEach(q=>{var _e,be;q.search_type==="ids"&&(((_e=q.wave_ids)==null?void 0:_e.length)>1?ar(q.wave_ids,y):(be=q.wave_ids)!=null&&be.includes(y)&&(q.script=""),q.wave_ids.forEach((ie,se)=>{ie>y&&(q.wave_ids[se]=ie-1)}))}),v.value=j;const te=JSON.parse(JSON.stringify(x.value.waves));te.splice(y,1),x.value={...x.value,waves:te},Rt(()=>{var q;((q=x.value.waves)==null?void 0:q.length)===0&&(N.value=void 0)})}},le=async y=>{if(M.value)return;M.value=!0;const j=x.value.waves;if(!j)return;const[te,q]=await $l({device_group_name:I.query.device_group_name,space_id:I.query.space_id,waves:j});M.value=!1,!te&&(q==null?void 0:q.status)===0&&(N.value=q.data)},ve=async()=>{var y,j,te,q,_e,be;if((y=x.value)!=null&&y.entity&&((j=x.value)!=null&&j.gate_name)&&wt((te=x.value)==null?void 0:te.waves)){const[ue,ie]=await Ll({device_group_name:I.query.device_group_name,space_id:I.query.space_id,entities:(_e=(q=x.value)==null?void 0:q.entity)==null?void 0:_e.join(","),gate_name:(be=x.value)==null?void 0:be.gate_name});!ue&&(ie==null?void 0:ie.status)===0&&(x.value={...x.value,waves:ie.data.waves})}},fe=(y,j)=>{var be,ue,ie;let te=JSON.parse(JSON.stringify(((be=v.value)==null?void 0:be.waveformScript)||[]));const{idx:q=[]}=O.value||{};q==null||q.forEach((se,Se)=>{te[se]=y[Se]}),(y==null?void 0:y.length)>q.length&&(te=te.concat(y.slice(q.length))),v.value={idx:((ue=v.value)==null?void 0:ue.idx)||[],waveformScript:te};const _e=JSON.parse(JSON.stringify(x.value.waves||[]));P.value?(_e[P.value.wave_id]=j,x.value={...x.value,waves:_e}):x.value={...x.value,waves:(((ie=x.value)==null?void 0:ie.waves)||[]).concat(j)}},oe=({wave:y,script:j,pkey:te,widx:q,idx:_e})=>{var ye,Ee;const be=JSON.parse(JSON.stringify(x.value.waves));be[q]=y,x.value={...x.value,waves:be};const ue=JSON.parse(JSON.stringify(v.value||{waveformScript:[],idx:[]})),{idx:ie,waveformScript:se}=Te(y,q),Se=(ye=te.split("."))==null?void 0:ye.pop();se==null||se.forEach(ze=>{ze.parameter===Se&&(ze.script=j||"")}),ie.forEach((ze,Be)=>{ue.waveformScript[ze]=se?se[Be]:void 0}),Se&&!(se!=null&&se.map(ze=>ze.parameter).includes(Se))&&ue.waveformScript.push({entity:x.value.entity,layer:(Ee=a.info)==null?void 0:Ee.layerIdx,channel:y.channel,wave_ids:[q],parameter:Se,script:j,gate_name:x.value.gate_name,wave_func_names:[y.func_name],search_type:"ids"}),v.value=ue};Lt(a,y=>{var j,te,q,_e,be,ue,ie;if((te=(j=y==null?void 0:y.info)==null?void 0:j.qubit)!=null&&te.value&&(x.value={...x.value,...(q=y.info.gateInfo)==null?void 0:q.val,entity:(be=(_e=y.info.gateInfo)==null?void 0:_e.val)==null?void 0:be.entity},(ue=y==null?void 0:y.info)!=null&&ue.gateInfo)){const se=[],Se=JSON.parse(JSON.stringify(((ie=c.value)==null?void 0:ie.waveform_script)||[])),ye=Se==null?void 0:Se.filter((Ee,ze)=>{var Be,qe,Fe,Ye;if(((Be=y.info)==null?void 0:Be.layerIdx)===Ee.layer&&((Ye=(Fe=(qe=y.info.gateInfo)==null?void 0:qe.val)==null?void 0:Fe.entity)!=null&&Ye.includes(Ee.entity)))return se.push(ze),!0});v.value={idx:se,waveformScript:ye}}},{immediate:!0}),Lt(x,y=>{y.gate_name&&!wt(y.entity)?(K.value=!1,R.value=!1):(K.value=!0,R.value=!0)},{deep:!0,immediate:!0}),Lt(()=>x.value.waves,y=>{Rt(()=>{wt(y)||le()})},{immediate:!0});const Ie=async()=>{const[y,j]=await kl({device_group_name:I.query.device_group_name,space_id:I.query.space_id});!y&&(j==null?void 0:j.status)===0&&(J.value=Object.keys(j.data).map(te=>({label:te,value:te})))};return io(()=>{Ie()}),r({open:G,close:H}),(y,j)=>{const te=so,q=Jr,_e=jr,be=ii,ue=Br,ie=$t,se=rl,Se=oo,ye=lo,Ee=Fn,ze=zn;return W(),$e(ze,{show:d(L),"onUpdate:show":j[2]||(j[2]=Be=>Tt(L)?L.value=Be:null),"on-update:show":F},{default:D(()=>[C(Ee,{style:Zt([{width:"1000px",height:"93vh"},{background:d(l).modalColor}]),size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0 g-n-card","content-style":"padding: 20px"},{default:D(()=>{var Be,qe,Fe,Ye;return[C(_e,{model:d(x),rules:d(S),ref_key:"formRef",ref:$,size:"small",disabled:!!((qe=(Be=d(s))==null?void 0:Be.expInfo)!=null&&qe.exp_id)},{default:D(()=>[Y("div",Ou,[C(q,{label:d(p)("expInfo.gateName"),path:"gate_name",class:"flex-1"},{default:D(()=>[C(te,{tag:"",filterable:"",value:d(x).gate_name,"onUpdate:value":j[0]||(j[0]=ct=>d(x).gate_name=ct),options:d(J)},null,8,["value","options"])]),_:1},8,["label"]),C(q,{label:d(p)("expInfo.qubits"),path:"entity",class:"w-full flex-1"},{default:D(()=>[C(te,{multiple:"",filterable:"",value:d(x).entity,"onUpdate:value":j[1]||(j[1]=ct=>d(x).entity=ct),options:d(pe),"max-tag-count":2,onUpdateValue:me},null,8,["value","options"])]),_:1},8,["label"])])]),_:1},8,["model","rules","disabled"]),C(be,{class:"!mb-2 !mt-0"}),Y("div",Eu,[Y("div",Tu,[C(ue,{component:d(pi)},null,8,["component"]),xe(" "+we(d(p)("expInfo.waveformsTitle")),1)]),Y("div",Au,[d(wt)(d(x).waves)?(W(),$e(ie,{key:0,type:"info",size:"small",onClick:ve,disabled:d(R)},{default:D(()=>[xe(we(d(p)("expInfo.waveformsTips")),1)]),_:1},8,["disabled"])):Je("",!0),(Ye=(Fe=d(s))==null?void 0:Fe.expInfo)!=null&&Ye.exp_id?Je("",!0):(W(),$e(ie,{key:1,onClick:X,type:"info",size:"small",disabled:d(K)},{icon:D(()=>[C(d(Pr))]),default:D(()=>[xe(" "+we(d(p)("expInfo.addWaveForm")),1)]),_:1},8,["disabled"]))])]),C(Se,{style:{height:"calc(93vh - 435px)"}},{default:D(()=>{var ct,xt,Gt,At;return[d(R)?(W(),ge("div",Du,[C(se,{description:d(p)("expInfo.nowaveforms")},{extra:D(()=>[Y("div",Nu,we(d(p)("expInfo.checkTips")),1)]),_:1},8,["description"])])):Je("",!0),d(wt)(d(x).waves)&&!d(R)?(W(),ge("div",Pu,[C(se,{description:d(p)("expInfo.nowaveforms")},{extra:D(()=>[Y("div",Mu,we(d(p)("expInfo.defaultTips")),1)]),_:1},8,["description"])])):Je("",!0),(W(!0),ge(ht,null,Ut(d(x).waves,(ft,lt)=>{var Dt,gt;return W(),$e(Iu,{key:lt,widx:lt,root:d(x),wave:ft,"script-info":Te(ft,lt),onEditWave:()=>Ae(ft,lt),onDeleteWave:()=>Ue(lt),onUpdateWaveScript:oe,editable:!((gt=(Dt=d(s))==null?void 0:Dt.expInfo)!=null&&gt.exp_id)},null,8,["widx","root","wave","script-info","onEditWave","onDeleteWave","editable"])}),128)),d(B)&&((ct=y.info)==null?void 0:ct.layerIdx)!==void 0?(W(),$e(uu,{key:2,ref_key:"waveFormRef",ref:E,"layer-idx":(xt=y.info)==null?void 0:xt.layerIdx,"gate-info":d(x),"wave-info":d(P),"script-info":(Gt=d(O))==null?void 0:Gt.waveformScript,len:((At=d(x).waves)==null?void 0:At.length)||0,onClose:V,onUpdateValue:fe},null,8,["layer-idx","gate-info","wave-info","script-info","len"])):Je("",!0)]}),_:1}),Y("div",Ru,[d(M)?(W(),$e(ye,{key:0,class:"h-full w-full","v-show":!0})):d(N)?(W(),$e(mi,{key:1,data:d(N)},null,8,["data"])):Je("",!0)]),Y("div",$u,[C(ie,{type:"primary",onClick:Q},{default:D(()=>[xe(we(d(p)("common.OK")),1)]),_:1})])]}),_:1},8,["style"])]),_:1},8,["show"])}}});var ku=Object.defineProperty,Mr=Object.getOwnPropertySymbols,_i=Object.prototype.hasOwnProperty,yi=Object.prototype.propertyIsEnumerable,ko=(e,r,n)=>r in e?ku(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Pn=(e,r)=>{for(var n in r||(r={}))_i.call(r,n)&&ko(e,n,r[n]);if(Mr)for(var n of Mr(r))yi.call(r,n)&&ko(e,n,r[n]);return e},bi=(e,r)=>{var n={};for(var a in e)_i.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Mr)for(var a of Mr(e))r.indexOf(a)<0&&yi.call(e,a)&&(n[a]=e[a]);return n};const wi="[vue-draggable-plus]: ";function zu(e){console.warn(wi+e)}function Fu(e){console.error(wi+e)}function zo(e,r,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(r,1)[0]),e}function Uu(e){return e.replace(/-(\w)/g,(r,n)=>n?n.toUpperCase():"")}function Gu(e){return Object.keys(e).reduce((r,n)=>(typeof e[n]<"u"&&(r[Uu(n)]=e[n]),r),{})}function Fo(e,r){return Array.isArray(e)&&e.splice(r,1),e}function Uo(e,r,n){return Array.isArray(e)&&e.splice(r,0,n),e}function Bu(e){return typeof e>"u"}function Hu(e){return typeof e=="string"}function Go(e,r,n){const a=e.children[n];e.insertBefore(r,a)}function za(e){e.parentNode&&e.parentNode.removeChild(e)}function ju(e,r=document){var n;let a=null;return typeof(r==null?void 0:r.querySelector)=="function"?a=(n=r==null?void 0:r.querySelector)==null?void 0:n.call(r,e):a=document.querySelector(e),a||zu(`Element not found: ${e}`),a}function Ju(e,r,n=null){return function(...a){return e.apply(n,a),r.apply(n,a)}}function qu(e,r){const n=Pn({},e);return Object.keys(r).forEach(a=>{n[a]?n[a]=Ju(e[a],r[a]):n[a]=r[a]}),n}function Wu(e){return e instanceof HTMLElement}function Bo(e,r){Object.keys(e).forEach(n=>{r(n,e[n])})}function Vu(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const Xu=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ho(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function qt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ho(Object(n),!0).forEach(function(a){Yu(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Or(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Or=function(r){return typeof r}:Or=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Or(e)}function Yu(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function tn(){return tn=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tn.apply(this,arguments)}function Ku(e,r){if(e==null)return{};var n={},a=Object.keys(e),l,s;for(s=0;s<a.length;s++)l=a[s],!(r.indexOf(l)>=0)&&(n[l]=e[l]);return n}function Qu(e,r){if(e==null)return{};var n=Ku(e,r),a,l;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)a=s[l],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Zu="1.15.2";function en(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var nn=en(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fr=en(/Edge/i),jo=en(/firefox/i),or=en(/safari/i)&&!en(/chrome/i)&&!en(/android/i),xi=en(/iP(ad|od|hone)/i),Si=en(/chrome/i)&&en(/android/i),Ci={capture:!1,passive:!1};function Pe(e,r,n){e.addEventListener(r,n,!nn&&Ci)}function Oe(e,r,n){e.removeEventListener(r,n,!nn&&Ci)}function Rr(e,r){if(r){if(r[0]===">"&&(r=r.substring(1)),e)try{if(e.matches)return e.matches(r);if(e.msMatchesSelector)return e.msMatchesSelector(r);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(r)}catch{return!1}return!1}}function ec(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ft(e,r,n,a){if(e){n=n||document;do{if(r!=null&&(r[0]===">"?e.parentNode===n&&Rr(e,r):Rr(e,r))||a&&e===n)return e;if(e===n)break}while(e=ec(e))}return null}var Jo=/\s+/g;function It(e,r,n){if(e&&r)if(e.classList)e.classList[n?"add":"remove"](r);else{var a=(" "+e.className+" ").replace(Jo," ").replace(" "+r+" "," ");e.className=(a+(n?" "+r:"")).replace(Jo," ")}}function re(e,r,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),r===void 0?n:n[r];!(r in a)&&r.indexOf("webkit")===-1&&(r="-webkit-"+r),a[r]=n+(typeof n=="string"?"":"px")}}function Rn(e,r){var n="";if(typeof e=="string")n=e;else do{var a=re(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!r&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function Ii(e,r,n){if(e){var a=e.getElementsByTagName(r),l=0,s=a.length;if(n)for(;l<s;l++)n(a[l],l);return a}return[]}function Jt(){var e=document.scrollingElement;return e||document.documentElement}function et(e,r,n,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var s,u,h,c,m,p,I;if(e!==window&&e.parentNode&&e!==Jt()?(s=e.getBoundingClientRect(),u=s.top,h=s.left,c=s.bottom,m=s.right,p=s.height,I=s.width):(u=0,h=0,c=window.innerHeight,m=window.innerWidth,p=window.innerHeight,I=window.innerWidth),(r||n)&&e!==window&&(l=l||e.parentNode,!nn))do if(l&&l.getBoundingClientRect&&(re(l,"transform")!=="none"||n&&re(l,"position")!=="static")){var N=l.getBoundingClientRect();u-=N.top+parseInt(re(l,"border-top-width")),h-=N.left+parseInt(re(l,"border-left-width")),c=u+s.height,m=h+s.width;break}while(l=l.parentNode);if(a&&e!==window){var v=Rn(l||e),O=v&&v.a,M=v&&v.d;v&&(u/=M,h/=O,I/=O,p/=M,c=u+p,m=h+I)}return{top:u,left:h,bottom:c,right:m,width:I,height:p}}}function qo(e,r,n){for(var a=dn(e,!0),l=et(e)[r];a;){var s=et(a)[n],u=void 0;if(u=l>=s,!u)return a;if(a===Jt())break;a=dn(a,!1)}return!1}function $n(e,r,n,a){for(var l=0,s=0,u=e.children;s<u.length;){if(u[s].style.display!=="none"&&u[s]!==ae.ghost&&(a||u[s]!==ae.dragged)&&Ft(u[s],n.draggable,e,!1)){if(l===r)return u[s];l++}s++}return null}function go(e,r){for(var n=e.lastElementChild;n&&(n===ae.ghost||re(n,"display")==="none"||r&&!Rr(n,r));)n=n.previousElementSibling;return n||null}function Pt(e,r){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ae.clone&&(!r||Rr(e,r))&&n++;return n}function Wo(e){var r=0,n=0,a=Jt();if(e)do{var l=Rn(e),s=l.a,u=l.d;r+=e.scrollLeft*s,n+=e.scrollTop*u}while(e!==a&&(e=e.parentNode));return[r,n]}function tc(e,r){for(var n in e)if(e.hasOwnProperty(n)){for(var a in r)if(r.hasOwnProperty(a)&&r[a]===e[n][a])return Number(n)}return-1}function dn(e,r){if(!e||!e.getBoundingClientRect)return Jt();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=re(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jt();if(a||r)return n;a=!0}}while(n=n.parentNode);return Jt()}function nc(e,r){if(e&&r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function Fa(e,r){return Math.round(e.top)===Math.round(r.top)&&Math.round(e.left)===Math.round(r.left)&&Math.round(e.height)===Math.round(r.height)&&Math.round(e.width)===Math.round(r.width)}var ir;function Oi(e,r){return function(){if(!ir){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),ir=setTimeout(function(){ir=void 0},r)}}}function rc(){clearTimeout(ir),ir=void 0}function Ei(e,r,n){e.scrollLeft+=r,e.scrollTop+=n}function Ti(e){var r=window.Polymer,n=window.jQuery||window.Zepto;return r&&r.dom?r.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ai(e,r,n){var a={};return Array.from(e.children).forEach(function(l){var s,u,h,c;if(!(!Ft(l,r.draggable,e,!1)||l.animated||l===n)){var m=et(l);a.left=Math.min((s=a.left)!==null&&s!==void 0?s:1/0,m.left),a.top=Math.min((u=a.top)!==null&&u!==void 0?u:1/0,m.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,m.right),a.bottom=Math.max((c=a.bottom)!==null&&c!==void 0?c:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Et="Sortable"+new Date().getTime();function ac(){var e=[],r;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(re(a,"display")==="none"||a===ae.ghost)){e.push({target:a,rect:et(a)});var l=qt({},e[e.length-1].rect);if(a.thisAnimationDuration){var s=Rn(a,!0);s&&(l.top-=s.f,l.left-=s.e)}a.fromRect=l}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(tc(e,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(r),typeof n=="function"&&n();return}var l=!1,s=0;e.forEach(function(u){var h=0,c=u.target,m=c.fromRect,p=et(c),I=c.prevFromRect,N=c.prevToRect,v=u.rect,O=Rn(c,!0);O&&(p.top-=O.f,p.left-=O.e),c.toRect=p,c.thisAnimationDuration&&Fa(I,p)&&!Fa(m,p)&&(v.top-p.top)/(v.left-p.left)===(m.top-p.top)/(m.left-p.left)&&(h=ic(v,I,N,a.options)),Fa(p,m)||(c.prevFromRect=m,c.prevToRect=p,h||(h=a.options.animation),a.animate(c,v,p,h)),h&&(l=!0,s=Math.max(s,h),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},h),c.thisAnimationDuration=h)}),clearTimeout(r),l?r=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),e=[]},animate:function(n,a,l,s){if(s){re(n,"transition",""),re(n,"transform","");var u=Rn(this.el),h=u&&u.a,c=u&&u.d,m=(a.left-l.left)/(h||1),p=(a.top-l.top)/(c||1);n.animatingX=!!m,n.animatingY=!!p,re(n,"transform","translate3d("+m+"px,"+p+"px,0)"),this.forRepaintDummy=oc(n),re(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),re(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){re(n,"transition",""),re(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function oc(e){return e.offsetWidth}function ic(e,r,n,a){return Math.sqrt(Math.pow(r.top-e.top,2)+Math.pow(r.left-e.left,2))/Math.sqrt(Math.pow(r.top-n.top,2)+Math.pow(r.left-n.left,2))*a.animation}var An=[],Ua={initializeByDefault:!0},dr={mount:function(e){for(var r in Ua)Ua.hasOwnProperty(r)&&!(r in e)&&(e[r]=Ua[r]);An.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),An.push(e)},pluginEvent:function(e,r,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var l=e+"Global";An.forEach(function(s){r[s.pluginName]&&(r[s.pluginName][l]&&r[s.pluginName][l](qt({sortable:r},n)),r.options[s.pluginName]&&r[s.pluginName][e]&&r[s.pluginName][e](qt({sortable:r},n)))})},initializePlugins:function(e,r,n,a){An.forEach(function(u){var h=u.pluginName;if(!(!e.options[h]&&!u.initializeByDefault)){var c=new u(e,r,e.options);c.sortable=e,c.options=e.options,e[h]=c,tn(n,c.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var s=this.modifyOption(e,l,e.options[l]);typeof s<"u"&&(e.options[l]=s)}},getEventProperties:function(e,r){var n={};return An.forEach(function(a){typeof a.eventProperties=="function"&&tn(n,a.eventProperties.call(r[a.pluginName],e))}),n},modifyOption:function(e,r,n){var a;return An.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[r]=="function"&&(a=l.optionListeners[r].call(e[l.pluginName],n))}),a}};function lc(e){var r=e.sortable,n=e.rootEl,a=e.name,l=e.targetEl,s=e.cloneEl,u=e.toEl,h=e.fromEl,c=e.oldIndex,m=e.newIndex,p=e.oldDraggableIndex,I=e.newDraggableIndex,N=e.originalEvent,v=e.putSortable,O=e.extraEventProperties;if(r=r||n&&n[Et],!!r){var M,K=r.options,R="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!nn&&!fr?M=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(M=document.createEvent("Event"),M.initEvent(a,!0,!0)),M.to=u||n,M.from=h||n,M.item=l||n,M.clone=s,M.oldIndex=c,M.newIndex=m,M.oldDraggableIndex=p,M.newDraggableIndex=I,M.originalEvent=N,M.pullMode=v?v.lastPutMode:void 0;var J=qt(qt({},O),dr.getEventProperties(a,r));for(var B in J)M[B]=J[B];n&&n.dispatchEvent(M),K[R]&&K[R].call(r,M)}}var sc=["evt"],St=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,l=Qu(n,sc);dr.pluginEvent.bind(ae)(e,r,qt({dragEl:U,parentEl:Ve,ghostEl:ce,rootEl:je,nextEl:bn,lastDownEl:Er,cloneEl:We,cloneHidden:fn,dragStarted:tr,putSortable:pt,activeSortable:ae.active,originalEvent:a,oldIndex:Mn,oldDraggableIndex:lr,newIndex:Ot,newDraggableIndex:cn,hideGhostForTarget:Mi,unhideGhostForTarget:Ri,cloneNowHidden:function(){fn=!0},cloneNowShown:function(){fn=!1},dispatchSortableEvent:function(s){bt({sortable:r,name:s,originalEvent:a})}},l))};function bt(e){lc(qt({putSortable:pt,cloneEl:We,targetEl:U,rootEl:je,oldIndex:Mn,oldDraggableIndex:lr,newIndex:Ot,newDraggableIndex:cn},e))}var U,Ve,ce,je,bn,Er,We,fn,Mn,Ot,lr,cn,xr,pt,Nn=!1,$r=!1,Lr=[],_n,zt,Ga,Ba,Vo,Xo,tr,Dn,sr,ur=!1,Sr=!1,Tr,vt,Ha=[],Za=!1,kr=[],qr=typeof document<"u",Cr=xi,Yo=fr||nn?"cssFloat":"float",uc=qr&&!Si&&!xi&&"draggable"in document.createElement("div"),Di=function(){if(qr){if(nn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ni=function(e,r){var n=re(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=$n(e,0,r),s=$n(e,1,r),u=l&&re(l),h=s&&re(s),c=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+et(l).width,m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+et(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var p=u.float==="left"?"left":"right";return s&&(h.clear==="both"||h.clear===p)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||c>=a&&n[Yo]==="none"||s&&n[Yo]==="none"&&c+m>a)?"vertical":"horizontal"},cc=function(e,r,n){var a=n?e.left:e.top,l=n?e.right:e.bottom,s=n?e.width:e.height,u=n?r.left:r.top,h=n?r.right:r.bottom,c=n?r.width:r.height;return a===u||l===h||a+s/2===u+c/2},fc=function(e,r){var n;return Lr.some(function(a){var l=a[Et].options.emptyInsertThreshold;if(!(!l||go(a))){var s=et(a),u=e>=s.left-l&&e<=s.right+l,h=r>=s.top-l&&r<=s.bottom+l;if(u&&h)return n=a}}),n},Pi=function(e){function r(l,s){return function(u,h,c,m){var p=u.options.group.name&&h.options.group.name&&u.options.group.name===h.options.group.name;if(l==null&&(s||p))return!0;if(l==null||l===!1)return!1;if(s&&l==="clone")return l;if(typeof l=="function")return r(l(u,h,c,m),s)(u,h,c,m);var I=(s?u:h).options.group.name;return l===!0||typeof l=="string"&&l===I||l.join&&l.indexOf(I)>-1}}var n={},a=e.group;(!a||Or(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=r(a.pull,!0),n.checkPut=r(a.put),n.revertClone=a.revertClone,e.group=n},Mi=function(){!Di&&ce&&re(ce,"display","none")},Ri=function(){!Di&&ce&&re(ce,"display","")};qr&&!Si&&document.addEventListener("click",function(e){if($r)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),$r=!1,!1},!0);var yn=function(e){if(U){e=e.touches?e.touches[0]:e;var r=fc(e.clientX,e.clientY);if(r){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Et]._onDragOver(n)}}},dc=function(e){U&&U.parentNode[Et]._isOutsideThisEl(e.target)};function ae(e,r){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=r=tn({},r),e[Et]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ni(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ae.supportPointer!==!1&&"PointerEvent"in window&&!or,emptyInsertThreshold:5};dr.initializePlugins(this,e,n);for(var a in n)!(a in r)&&(r[a]=n[a]);Pi(r);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=r.forceFallback?!1:uc,this.nativeDraggable&&(this.options.touchStartThreshold=1),r.supportPointer?Pe(e,"pointerdown",this._onTapStart):(Pe(e,"mousedown",this._onTapStart),Pe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pe(e,"dragover",this),Pe(e,"dragenter",this)),Lr.push(this.el),r.store&&r.store.get&&this.sort(r.store.get(this)||[]),tn(this,ac())}ae.prototype={constructor:ae,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Dn=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,a=this.options,l=a.preventOnFilter,s=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,h=(u||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||h,m=a.filter;if(bc(n),!U&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&or&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=Ft(h,a.draggable,n,!1),!(h&&h.animated)&&Er!==h)){if(Mn=Pt(h),lr=Pt(h,a.draggable),typeof m=="function"){if(m.call(this,e,h,this)){bt({sortable:r,rootEl:c,name:"filter",targetEl:h,toEl:n,fromEl:n}),St("filter",r,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(p){if(p=Ft(c,p.trim(),n,!1),p)return bt({sortable:r,rootEl:p,name:"filter",targetEl:h,fromEl:n,toEl:n}),St("filter",r,{evt:e}),!0}),m)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ft(c,a.handle,n,!1)||this._prepareDragStart(e,u,h)}}},_prepareDragStart:function(e,r,n){var a=this,l=a.el,s=a.options,u=l.ownerDocument,h;if(n&&!U&&n.parentNode===l){var c=et(n);if(je=l,U=n,Ve=U.parentNode,bn=U.nextSibling,Er=n,xr=s.group,ae.dragged=U,_n={target:U,clientX:(r||e).clientX,clientY:(r||e).clientY},Vo=_n.clientX-c.left,Xo=_n.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,U.style["will-change"]="all",h=function(){if(St("delayEnded",a,{evt:e}),ae.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!jo&&a.nativeDraggable&&(U.draggable=!0),a._triggerDragStart(e,r),bt({sortable:a,name:"choose",originalEvent:e}),It(U,s.chosenClass,!0)},s.ignore.split(",").forEach(function(m){Ii(U,m.trim(),ja)}),Pe(u,"dragover",yn),Pe(u,"mousemove",yn),Pe(u,"touchmove",yn),Pe(u,"mouseup",a._onDrop),Pe(u,"touchend",a._onDrop),Pe(u,"touchcancel",a._onDrop),jo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),St("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(fr||nn))){if(ae.eventCanceled){this._onDrop();return}Pe(u,"mouseup",a._disableDelayedDrag),Pe(u,"touchend",a._disableDelayedDrag),Pe(u,"touchcancel",a._disableDelayedDrag),Pe(u,"mousemove",a._delayedDragTouchMoveHandler),Pe(u,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&Pe(u,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(h,s.delay)}else h()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&ja(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._disableDelayedDrag),Oe(e,"touchend",this._disableDelayedDrag),Oe(e,"touchcancel",this._disableDelayedDrag),Oe(e,"mousemove",this._delayedDragTouchMoveHandler),Oe(e,"touchmove",this._delayedDragTouchMoveHandler),Oe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Pe(document,"pointermove",this._onTouchMove):r?Pe(document,"touchmove",this._onTouchMove):Pe(document,"mousemove",this._onTouchMove):(Pe(U,"dragend",this),Pe(je,"dragstart",this._onDragStart));try{document.selection?Ar(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Nn=!1,je&&U){St("dragStarted",this,{evt:r}),this.nativeDraggable&&Pe(document,"dragover",dc);var n=this.options;!e&&It(U,n.dragClass,!1),It(U,n.ghostClass,!0),ae.active=this,e&&this._appendGhost(),bt({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(zt){this._lastX=zt.clientX,this._lastY=zt.clientY,Mi();for(var e=document.elementFromPoint(zt.clientX,zt.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(zt.clientX,zt.clientY),e!==r);)r=e;if(U.parentNode[Et]._isOutsideThisEl(e),r)do{if(r[Et]){var n=void 0;if(n=r[Et]._onDragOver({clientX:zt.clientX,clientY:zt.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);Ri()}},_onTouchMove:function(e){if(_n){var r=this.options,n=r.fallbackTolerance,a=r.fallbackOffset,l=e.touches?e.touches[0]:e,s=ce&&Rn(ce,!0),u=ce&&s&&s.a,h=ce&&s&&s.d,c=Cr&&vt&&Wo(vt),m=(l.clientX-_n.clientX+a.x)/(u||1)+(c?c[0]-Ha[0]:0)/(u||1),p=(l.clientY-_n.clientY+a.y)/(h||1)+(c?c[1]-Ha[1]:0)/(h||1);if(!ae.active&&!Nn){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ce){s?(s.e+=m-(Ga||0),s.f+=p-(Ba||0)):s={a:1,b:0,c:0,d:1,e:m,f:p};var I="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");re(ce,"webkitTransform",I),re(ce,"mozTransform",I),re(ce,"msTransform",I),re(ce,"transform",I),Ga=m,Ba=p,zt=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ce){var e=this.options.fallbackOnBody?document.body:je,r=et(U,!0,Cr,!0,e),n=this.options;if(Cr){for(vt=e;re(vt,"position")==="static"&&re(vt,"transform")==="none"&&vt!==document;)vt=vt.parentNode;vt!==document.body&&vt!==document.documentElement?(vt===document&&(vt=Jt()),r.top+=vt.scrollTop,r.left+=vt.scrollLeft):vt=Jt(),Ha=Wo(vt)}ce=U.cloneNode(!0),It(ce,n.ghostClass,!1),It(ce,n.fallbackClass,!0),It(ce,n.dragClass,!0),re(ce,"transition",""),re(ce,"transform",""),re(ce,"box-sizing","border-box"),re(ce,"margin",0),re(ce,"top",r.top),re(ce,"left",r.left),re(ce,"width",r.width),re(ce,"height",r.height),re(ce,"opacity","0.8"),re(ce,"position",Cr?"absolute":"fixed"),re(ce,"zIndex","100000"),re(ce,"pointerEvents","none"),ae.ghost=ce,e.appendChild(ce),re(ce,"transform-origin",Vo/parseInt(ce.style.width)*100+"% "+Xo/parseInt(ce.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,a=e.dataTransfer,l=n.options;if(St("dragStart",this,{evt:e}),ae.eventCanceled){this._onDrop();return}St("setupClone",this),ae.eventCanceled||(We=Ti(U),We.removeAttribute("id"),We.draggable=!1,We.style["will-change"]="",this._hideClone(),It(We,this.options.chosenClass,!1),ae.clone=We),n.cloneId=Ar(function(){St("clone",n),!ae.eventCanceled&&(n.options.removeCloneOnHide||je.insertBefore(We,U),n._hideClone(),bt({sortable:n,name:"clone"}))}),!r&&It(U,l.dragClass,!0),r?($r=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Oe(document,"mouseup",n._onDrop),Oe(document,"touchend",n._onDrop),Oe(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(n,a,U)),Pe(document,"drop",n),re(U,"transform","translateZ(0)")),Nn=!0,n._dragStartId=Ar(n._dragStarted.bind(n,r,e)),Pe(document,"selectstart",n),tr=!0,or&&re(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,a,l,s,u=this.options,h=u.group,c=ae.active,m=xr===h,p=u.sort,I=pt||c,N,v=this,O=!1;if(Za)return;function M(pe,me){St(pe,v,qt({evt:e,isOwner:m,axis:N?"vertical":"horizontal",revert:s,dragRect:a,targetRect:l,canSort:p,fromSortable:I,target:n,completed:R,onMove:function(Te,Ae){return Ir(je,r,U,a,Te,et(Te),e,Ae)},changed:J},me))}function K(){M("dragOverAnimationCapture"),v.captureAnimationState(),v!==I&&I.captureAnimationState()}function R(pe){return M("dragOverCompleted",{insertion:pe}),pe&&(m?c._hideClone():c._showClone(v),v!==I&&(It(U,pt?pt.options.ghostClass:c.options.ghostClass,!1),It(U,u.ghostClass,!0)),pt!==v&&v!==ae.active?pt=v:v===ae.active&&pt&&(pt=null),I===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){M("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==I&&(I.animateAll(),I._ignoreWhileAnimating=null)),(n===U&&!U.animated||n===r&&!n.animated)&&(Dn=null),!u.dragoverBubble&&!e.rootEl&&n!==document&&(U.parentNode[Et]._isOutsideThisEl(e.target),!pe&&yn(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),O=!0}function J(){Ot=Pt(U),cn=Pt(U,u.draggable),bt({sortable:v,name:"change",toEl:r,newIndex:Ot,newDraggableIndex:cn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Ft(n,u.draggable,r,!0),M("dragOver"),ae.eventCanceled)return O;if(U.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return R(!1);if($r=!1,c&&!u.disabled&&(m?p||(s=Ve!==je):pt===this||(this.lastPutMode=xr.checkPull(this,c,U,e))&&h.checkPut(this,c,U,e))){if(N=this._getDirection(e,n)==="vertical",a=et(U),M("dragOverValid"),ae.eventCanceled)return O;if(s)return Ve=je,K(),this._hideClone(),M("revert"),ae.eventCanceled||(bn?je.insertBefore(U,bn):je.appendChild(U)),R(!0);var B=go(r,u.draggable);if(!B||gc(e,N,this)&&!B.animated){if(B===U)return R(!1);if(B&&r===e.target&&(n=B),n&&(l=et(n)),Ir(je,r,U,a,n,l,e,!!n)!==!1)return K(),B&&B.nextSibling?r.insertBefore(U,B.nextSibling):r.appendChild(U),Ve=r,J(),R(!0)}else if(B&&vc(e,N,this)){var P=$n(r,0,u,!0);if(P===U)return R(!1);if(n=P,l=et(n),Ir(je,r,U,a,n,l,e,!1)!==!1)return K(),r.insertBefore(U,P),Ve=r,J(),R(!0)}else if(n.parentNode===r){l=et(n);var E=0,$,x=U.parentNode!==r,S=!cc(U.animated&&U.toRect||a,n.animated&&n.toRect||l,N),b=N?"top":"left",L=qo(n,"top","top")||qo(U,"top","top"),H=L?L.scrollTop:void 0;Dn!==n&&($=l[b],ur=!1,Sr=!S&&u.invertSwap||x),E=mc(e,n,l,N,S?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Sr,Dn===n);var G;if(E!==0){var F=Pt(U);do F-=E,G=Ve.children[F];while(G&&(re(G,"display")==="none"||G===ce))}if(E===0||G===n)return R(!1);Dn=n,sr=E;var X=n.nextElementSibling,V=!1;V=E===1;var Q=Ir(je,r,U,a,n,l,e,V);if(Q!==!1)return(Q===1||Q===-1)&&(V=Q===1),Za=!0,setTimeout(hc,30),K(),V&&!X?r.appendChild(U):n.parentNode.insertBefore(U,V?X:n),L&&Ei(L,0,H-L.scrollTop),Ve=U.parentNode,$!==void 0&&!Sr&&(Tr=Math.abs($-et(n)[b])),J(),R(!0)}if(r.contains(U))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Oe(document,"mousemove",this._onTouchMove),Oe(document,"touchmove",this._onTouchMove),Oe(document,"pointermove",this._onTouchMove),Oe(document,"dragover",yn),Oe(document,"mousemove",yn),Oe(document,"touchmove",yn)},_offUpEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._onDrop),Oe(e,"touchend",this._onDrop),Oe(e,"pointerup",this._onDrop),Oe(e,"touchcancel",this._onDrop),Oe(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(Ot=Pt(U),cn=Pt(U,n.draggable),St("drop",this,{evt:e}),Ve=U&&U.parentNode,Ot=Pt(U),cn=Pt(U,n.draggable),ae.eventCanceled){this._nulling();return}Nn=!1,Sr=!1,ur=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),eo(this.cloneId),eo(this._dragStartId),this.nativeDraggable&&(Oe(document,"drop",this),Oe(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),or&&re(document.body,"user-select",""),re(U,"transform",""),e&&(tr&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ce&&ce.parentNode&&ce.parentNode.removeChild(ce),(je===Ve||pt&&pt.lastPutMode!=="clone")&&We&&We.parentNode&&We.parentNode.removeChild(We),U&&(this.nativeDraggable&&Oe(U,"dragend",this),ja(U),U.style["will-change"]="",tr&&!Nn&&It(U,pt?pt.options.ghostClass:this.options.ghostClass,!1),It(U,this.options.chosenClass,!1),bt({sortable:this,name:"unchoose",toEl:Ve,newIndex:null,newDraggableIndex:null,originalEvent:e}),je!==Ve?(Ot>=0&&(bt({rootEl:Ve,name:"add",toEl:Ve,fromEl:je,originalEvent:e}),bt({sortable:this,name:"remove",toEl:Ve,originalEvent:e}),bt({rootEl:Ve,name:"sort",toEl:Ve,fromEl:je,originalEvent:e}),bt({sortable:this,name:"sort",toEl:Ve,originalEvent:e})),pt&&pt.save()):Ot!==Mn&&Ot>=0&&(bt({sortable:this,name:"update",toEl:Ve,originalEvent:e}),bt({sortable:this,name:"sort",toEl:Ve,originalEvent:e})),ae.active&&((Ot==null||Ot===-1)&&(Ot=Mn,cn=lr),bt({sortable:this,name:"end",toEl:Ve,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){St("nulling",this),je=U=Ve=ce=bn=We=Er=fn=_n=zt=tr=Ot=cn=Mn=lr=Dn=sr=pt=xr=ae.dragged=ae.ghost=ae.clone=ae.active=null,kr.forEach(function(e){e.checked=!0}),kr.length=Ga=Ba=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),pc(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,a=0,l=n.length,s=this.options;a<l;a++)r=n[a],Ft(r,s.draggable,this.el,!1)&&e.push(r.getAttribute(s.dataIdAttr)||yc(r));return e},sort:function(e,r){var n={},a=this.el;this.toArray().forEach(function(l,s){var u=a.children[s];Ft(u,this.options.draggable,a,!1)&&(n[l]=u)},this),r&&this.captureAnimationState(),e.forEach(function(l){n[l]&&(a.removeChild(n[l]),a.appendChild(n[l]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Ft(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var a=dr.modifyOption(this,e,r);typeof a<"u"?n[e]=a:n[e]=r,e==="group"&&Pi(n)},destroy:function(){St("destroy",this);var e=this.el;e[Et]=null,Oe(e,"mousedown",this._onTapStart),Oe(e,"touchstart",this._onTapStart),Oe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Oe(e,"dragover",this),Oe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Lr.splice(Lr.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!fn){if(St("hideClone",this),ae.eventCanceled)return;re(We,"display","none"),this.options.removeCloneOnHide&&We.parentNode&&We.parentNode.removeChild(We),fn=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(fn){if(St("showClone",this),ae.eventCanceled)return;U.parentNode==je&&!this.options.group.revertClone?je.insertBefore(We,U):bn?je.insertBefore(We,bn):je.appendChild(We),this.options.group.revertClone&&this.animate(U,We),re(We,"display",""),fn=!1}}};function pc(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ir(e,r,n,a,l,s,u,h){var c,m=e[Et],p=m.options.onMove,I;return window.CustomEvent&&!nn&&!fr?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=r,c.from=e,c.dragged=n,c.draggedRect=a,c.related=l||r,c.relatedRect=s||et(r),c.willInsertAfter=h,c.originalEvent=u,e.dispatchEvent(c),p&&(I=p.call(m,c,u)),I}function ja(e){e.draggable=!1}function hc(){Za=!1}function vc(e,r,n){var a=et($n(n.el,0,n.options,!0)),l=Ai(n.el,n.options,ce),s=10;return r?e.clientX<l.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-s||e.clientY<a.bottom&&e.clientX<a.left}function gc(e,r,n){var a=et(go(n.el,n.options.draggable)),l=Ai(n.el,n.options,ce),s=10;return r?e.clientX>l.right+s||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+s||e.clientX>a.right&&e.clientY>a.top}function mc(e,r,n,a,l,s,u,h){var c=a?e.clientY:e.clientX,m=a?n.height:n.width,p=a?n.top:n.left,I=a?n.bottom:n.right,N=!1;if(!u){if(h&&Tr<m*l){if(!ur&&(sr===1?c>p+m*s/2:c<I-m*s/2)&&(ur=!0),ur)N=!0;else if(sr===1?c<p+Tr:c>I-Tr)return-sr}else if(c>p+m*(1-l)/2&&c<I-m*(1-l)/2)return _c(r)}return N=N||u,N&&(c<p+m*s/2||c>I-m*s/2)?c>p+m/2?1:-1:0}function _c(e){return Pt(U)<Pt(e)?1:-1}function yc(e){for(var r=e.tagName+e.className+e.src+e.href+e.textContent,n=r.length,a=0;n--;)a+=r.charCodeAt(n);return a.toString(36)}function bc(e){kr.length=0;for(var r=e.getElementsByTagName("input"),n=r.length;n--;){var a=r[n];a.checked&&kr.push(a)}}function Ar(e){return setTimeout(e,0)}function eo(e){return clearTimeout(e)}qr&&Pe(document,"touchmove",function(e){(ae.active||Nn)&&e.cancelable&&e.preventDefault()});ae.utils={on:Pe,off:Oe,css:re,find:Ii,is:function(e,r){return!!Ft(e,r,e,!1)},extend:nc,throttle:Oi,closest:Ft,toggleClass:It,clone:Ti,index:Pt,nextTick:Ar,cancelNextTick:eo,detectDirection:Ni,getChild:$n};ae.get=function(e){return e[Et]};ae.mount=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r[0].constructor===Array&&(r=r[0]),r.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(ae.utils=qt(qt({},ae.utils),a.utils)),dr.mount(a)})};ae.create=function(e,r){return new ae(e,r)};ae.version=Zu;var Ze=[],nr,to,no=!1,Ja,qa,zr,rr;function wc(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this))}return e.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pe(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Pe(document,"touchmove",this._handleFallbackAutoScroll):Pe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Oe(document,"dragover",this._handleAutoScroll):(Oe(document,"pointermove",this._handleFallbackAutoScroll),Oe(document,"touchmove",this._handleFallbackAutoScroll),Oe(document,"mousemove",this._handleFallbackAutoScroll)),Ko(),Dr(),rc()},nulling:function(){zr=to=nr=no=rr=Ja=qa=null,Ze.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var a=this,l=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,u=document.elementFromPoint(l,s);if(zr=r,n||this.options.forceAutoScrollFallback||fr||nn||or){Wa(r,this.options,u,n);var h=dn(u,!0);no&&(!rr||l!==Ja||s!==qa)&&(rr&&Ko(),rr=setInterval(function(){var c=dn(document.elementFromPoint(l,s),!0);c!==h&&(h=c,Dr()),Wa(r,a.options,c,n)},10),Ja=l,qa=s)}else{if(!this.options.bubbleScroll||dn(u,!0)===Jt()){Dr();return}Wa(r,this.options,dn(u,!1),!1)}}},tn(e,{pluginName:"scroll",initializeByDefault:!0})}function Dr(){Ze.forEach(function(e){clearInterval(e.pid)}),Ze=[]}function Ko(){clearInterval(rr)}var Wa=Oi(function(e,r,n,a){if(r.scroll){var l=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,u=r.scrollSensitivity,h=r.scrollSpeed,c=Jt(),m=!1,p;to!==n&&(to=n,Dr(),nr=r.scroll,p=r.scrollFn,nr===!0&&(nr=dn(n,!0)));var I=0,N=nr;do{var v=N,O=et(v),M=O.top,K=O.bottom,R=O.left,J=O.right,B=O.width,P=O.height,E=void 0,$=void 0,x=v.scrollWidth,S=v.scrollHeight,b=re(v),L=v.scrollLeft,H=v.scrollTop;v===c?(E=B<x&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),$=P<S&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(E=B<x&&(b.overflowX==="auto"||b.overflowX==="scroll"),$=P<S&&(b.overflowY==="auto"||b.overflowY==="scroll"));var G=E&&(Math.abs(J-l)<=u&&L+B<x)-(Math.abs(R-l)<=u&&!!L),F=$&&(Math.abs(K-s)<=u&&H+P<S)-(Math.abs(M-s)<=u&&!!H);if(!Ze[I])for(var X=0;X<=I;X++)Ze[X]||(Ze[X]={});(Ze[I].vx!=G||Ze[I].vy!=F||Ze[I].el!==v)&&(Ze[I].el=v,Ze[I].vx=G,Ze[I].vy=F,clearInterval(Ze[I].pid),(G!=0||F!=0)&&(m=!0,Ze[I].pid=setInterval((function(){a&&this.layer===0&&ae.active._onTouchMove(zr);var V=Ze[this.layer].vy?Ze[this.layer].vy*h:0,Q=Ze[this.layer].vx?Ze[this.layer].vx*h:0;typeof p=="function"&&p.call(ae.dragged.parentNode[Et],Q,V,e,zr,Ze[this.layer].el)!=="continue"||Ei(Ze[this.layer].el,Q,V)}).bind({layer:I}),24))),I++}while(r.bubbleScroll&&N!==c&&(N=dn(N,!1)));no=m}},30),$i=function(e){var r=e.originalEvent,n=e.putSortable,a=e.dragEl,l=e.activeSortable,s=e.dispatchSortableEvent,u=e.hideGhostForTarget,h=e.unhideGhostForTarget;if(r){var c=n||l;u();var m=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,p=document.elementFromPoint(m.clientX,m.clientY);h(),c&&!c.el.contains(p)&&(s("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function mo(){}mo.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=$n(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(r,a):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:$i};tn(mo,{pluginName:"revertOnSpill"});function _o(){}_o.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),a.animateAll()},drop:$i};tn(_o,{pluginName:"removeOnSpill"});ae.mount(new wc);ae.mount(_o,mo);function xc(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Sc(e){uo()&&ai(e)}function Cc(e){uo()?io(e):Rt(e)}let Li=null,ki=null;function Qo(e=null,r=null){Li=e,ki=r}function Ic(){return{data:Li,clonedData:ki}}const Zo=Symbol("cloneElement");function Oc(...e){var r,n;const a=(r=uo())==null?void 0:r.proxy;let l=null;const s=e[0];let[,u,h]=e;Array.isArray(d(u))||(h=u,u=null);let c=null;const{immediate:m=!0,clone:p=xc,customUpdate:I}=(n=d(h))!=null?n:{};function N(S){var b;const{from:L,oldIndex:H,item:G}=S;l=Array.from(L.childNodes);const F=d((b=d(u))==null?void 0:b[H]),X=p(F);Qo(F,X),G[Zo]=X}function v(S){const b=S.item[Zo];if(!Bu(b)){if(za(S.item),Tt(u)){const L=[...d(u)];u.value=Uo(L,S.newDraggableIndex,b);return}Uo(d(u),S.newDraggableIndex,b)}}function O(S){const{from:b,item:L,oldIndex:H,oldDraggableIndex:G,pullMode:F,clone:X}=S;if(Go(b,L,H),F==="clone"){za(X);return}if(Tt(u)){const V=[...d(u)];u.value=Fo(V,G);return}Fo(d(u),G)}function M(S){if(I){I(S);return}const{from:b,item:L,oldIndex:H,oldDraggableIndex:G,newDraggableIndex:F}=S;if(za(L),Go(b,L,H),Tt(u)){const X=[...d(u)];u.value=zo(X,G,F);return}zo(d(u),G,F)}function K(S){const{newIndex:b,oldIndex:L,from:H,to:G}=S;let F=null;const X=b===L&&H===G;try{if(X){let V=null;l==null||l.some((Q,pe)=>{if(V&&(l==null?void 0:l.length)!==G.childNodes.length)return H.insertBefore(V,Q.nextSibling),!0;const me=G.childNodes[pe];V=G==null?void 0:G.replaceChild(Q,me)})}}catch(V){F=V}finally{l=null}Rt(()=>{if(Qo(),F)throw F})}const R={onUpdate:M,onStart:N,onAdd:v,onRemove:O,onEnd:K};function J(S){const b=d(s);return S||(S=Hu(b)?ju(b,a==null?void 0:a.$el):b),S&&!Wu(S)&&(S=S.$el),S||Fu("Root element not found"),S}function B(){var S;const b=(S=d(h))!=null?S:{},{immediate:L,clone:H}=b,G=bi(b,["immediate","clone"]);return Bo(G,(F,X)=>{Vu(F)&&(G[F]=(V,...Q)=>{const pe=Ic();return Xu(V,pe),X(V,...Q)})}),qu(u===null?{}:R,G)}const P=S=>{S=J(S),c&&E.destroy(),c=new ae(S,B())};Lt(()=>h,()=>{c&&Bo(B(),(S,b)=>{c==null||c.option(S,b)})},{deep:!0});const E={option:(S,b)=>c==null?void 0:c.option(S,b),destroy:()=>{c==null||c.destroy(),c=null},save:()=>c==null?void 0:c.save(),toArray:()=>c==null?void 0:c.toArray(),closest:(...S)=>c==null?void 0:c.closest(...S)},$=()=>E==null?void 0:E.option("disabled",!0),x=()=>E==null?void 0:E.option("disabled",!1);return Cc(()=>{m&&P()}),Sc(E.destroy),Pn({start:P,pause:$,resume:x},E)}const ro=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Ec=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...ro.map(e=>`on${e.replace(/^\S/,r=>r.toUpperCase())}`)],Tc=it({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Ec,emits:["update:modelValue",...ro],setup(e,{slots:r,emit:n,expose:a,attrs:l}){const s=ro.reduce((p,I)=>{const N=`on${I.replace(/^\S/,v=>v.toUpperCase())}`;return p[N]=(...v)=>n(I,...v),p},{}),u=Ct(()=>{const p=al(e),{modelValue:I}=p,N=bi(p,["modelValue"]),v=Object.entries(N).reduce((O,[M,K])=>{const R=d(K);return R!==void 0&&(O[M]=R),O},{});return Pn(Pn({},s),Gu(Pn(Pn({},l),v)))}),h=Ct({get:()=>e.modelValue,set:p=>n("update:modelValue",p)}),c=he(),m=li(Oc(e.target||c,h,u));return a(m),()=>{var p;return Mt(e.tag||"div",{ref:c},(p=r==null?void 0:r.default)==null?void 0:p.call(r,m))}}});var Va,ei;function Ac(){if(ei)return Va;ei=1;var e=9007199254740991,r="[object Arguments]",n="[object Function]",a="[object GeneratorFunction]",l=typeof tt=="object"&&tt&&tt.Object===Object&&tt,s=typeof self=="object"&&self&&self.Object===Object&&self,u=l||s||Function("return this")();function h(b,L){for(var H=-1,G=L.length,F=b.length;++H<G;)b[F+H]=L[H];return b}var c=Object.prototype,m=c.hasOwnProperty,p=c.toString,I=u.Symbol,N=c.propertyIsEnumerable,v=I?I.isConcatSpreadable:void 0;function O(b,L,H,G,F){var X=-1,V=b.length;for(H||(H=M),F||(F=[]);++X<V;){var Q=b[X];H(Q)?h(F,Q):F[F.length]=Q}return F}function M(b){return J(b)||R(b)||!!(v&&b&&b[v])}function K(b){var L=b?b.length:0;return L?O(b):[]}function R(b){return P(b)&&m.call(b,"callee")&&(!N.call(b,"callee")||p.call(b)==r)}var J=Array.isArray;function B(b){return b!=null&&$(b.length)&&!E(b)}function P(b){return S(b)&&B(b)}function E(b){var L=x(b)?p.call(b):"";return L==n||L==a}function $(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=e}function x(b){var L=typeof b;return!!b&&(L=="object"||L=="function")}function S(b){return!!b&&typeof b=="object"}return Va=K,Va}var Dc=Ac();const Nc=cr(Dc),Pc={class:"tbody"},Mc={class:"td"},Rc={class:"p-3"},$c=it({__name:"ExpWaveforms",setup(e){ri(E=>({b8546664:d(r).dividerColor,b893f9a8:d(r).tableHeaderColor}));const r=Ln(),n=Un(),{allQubits:a,layers:l,gates:s,expInfo:u,program:h}=Ur(n),c=Ct(()=>a.value.filter(E=>E.visible)),m=he(),p=he(),I=()=>{p.value=void 0},N=E=>{var b;const $=JSON.parse(JSON.stringify(s.value||{})),x=JSON.parse(JSON.stringify(l.value||[])),S=co();$[S]={gate_name:E.gate_name,entity:E.entity},x[p.value.layerIdx].push(S),s.value=$,l.value=x,p.value=void 0,(b=m.value)==null||b.close()},v=E=>{p.value=JSON.parse(JSON.stringify({...E||{},show:!0})),Rt(()=>{var $;($=m.value)==null||$.open()})},O=li({}),M=(E,$)=>{O[$]=E},K=he(),R=E=>{var S,b,L;const $=(S=E.item)==null?void 0:S.id,x=(L=Array.from((b=E.to)==null?void 0:b.querySelectorAll(".cell-group")))==null?void 0:L.map(H=>H.id);ar(x,$),K.value=x[0]},J=(E,$)=>{var x;(x=O[`${E}-${$}`])==null||x.handleEdit()},B=E=>{var pe,me,Te,Ae,Ue,le;K.value=void 0;const[$,x,S,b]=(me=(pe=E.to)==null?void 0:pe.querySelector(".cell-group"))==null?void 0:me.getAttribute("id").split("__**__"),[L,H,G,F]=(Ae=(Te=E.item)==null?void 0:Te.id)==null?void 0:Ae.split("__**__");let X=JSON.parse(JSON.stringify(s.value)),V=JSON.parse(JSON.stringify(l.value));if(X&&((Ue=X[F])==null||Ue.entity.some((ve,fe)=>{var oe;ve===H&&(X[F].entity[fe]=x,(oe=X[F].waves)==null||oe.forEach(Ie=>{var y;Ie.channel=(y=Ie.channel)==null?void 0:y.replace(H,x)}))})),b===F)return;b&&(X=zl(X,b),ar(V[+S],b)),ar(V[+G],F),V[+S]=[...V[+S]||[],F];const Q=JSON.parse(JSON.stringify(h.value));Q==null||Q.waveform_script.forEach(ve=>{var fe;ve.entity===H&&ve.layer===+G&&(ve.entity=x,ve.layer=+S,ve.channel=(fe=ve.channel)==null?void 0:fe.replace(H,x))}),l.value=V,s.value=X,h.value={space_parameter_script:(le=h.value)==null?void 0:le.space_parameter_script,waveform_script:Q.waveform_script},Rt(()=>{setTimeout(()=>{J(x,S)},200)})},P=Ct(()=>l.value.map(E=>E.map($=>[$])));return(E,$)=>{const x=Xl,S=lo;return W(),ge("div",null,[C(S,{show:d(n).loading},{default:D(()=>{var b,L,H,G,F,X,V;return[((H=(L=(b=d(n))==null?void 0:b.expInfo)==null?void 0:L.exp)==null?void 0:H.exp_mode)==="normal"?(W(),ge(ht,{key:0},[d(u)?(W(),ge(ht,{key:1},[C(Us),C($s,null,{header:D(()=>[C(Rs,{layers:d(l)},null,8,["layers"])]),default:D(()=>[Y("table",{class:"table !border-t-0",size:"small",style:Zt({width:`${100+d(Nr)*d(l).length}px`})},[Y("colgroup",null,[$[0]||($[0]=Y("col",{class:"w-[100px]"},null,-1)),(W(!0),ge(ht,null,Ut(d(l),(Q,pe)=>(W(),ge("col",{key:pe,class:ao(`w-[${d(Nr)}px]`)},null,2))),128))]),Y("tbody",Pc,[(W(!0),ge(ht,null,Ut(d(c),Q=>(W(),ge("tr",{class:"tr",key:Q.id},[Y("td",Mc,[Y("div",Rc,we(Q.value),1)]),(W(!0),ge(ht,null,Ut(d(P),(pe,me)=>{var Te,Ae;return W(),ge("td",{key:me,class:"td"},[C(d(Tc),{modelValue:d(P)[me],"onUpdate:modelValue":Ue=>d(P)[me]=Ue,onEnd:B,group:"gateGroup",handle:".gate-handle",disabled:!!((Ae=(Te=d(n))==null?void 0:Te.expInfo)!=null&&Ae.exp_id),onChange:R},{default:D(()=>[C(Qs,{qubit:Q,layer:d(Nc)(pe),"layer-idx":me,info:d(p),"change-id":d(K),ref_for:!0,ref:Ue=>M(Ue,`${Q.value}-${me}`),onOpenGateModal:v,onOpenEditModal:J},null,8,["qubit","layer","layer-idx","info","change-id"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])}),128))]))),128))])],4)]),_:1})],64)):(W(),$e(x,{key:0,text:"",sharp:!1,size:"small",repeat:10})),(G=d(p))!=null&&G.show?(W(),$e(Lu,{key:2,ref_key:"gateModalRef",ref:m,onOk:N,info:d(p),onClose:I},null,8,["info"])):Je("",!0)],64)):((V=(X=(F=d(n))==null?void 0:F.expInfo)==null?void 0:X.exp)==null?void 0:V.exp_mode)==="batch_circuit"?(W(),$e(Bl,{key:1},{default:D(()=>$[1]||($[1]=[Y("div",{class:"w-72 text-center"}," 当前实验为“量子电路批处理（batch_circuit）”类型，暂不支持Web GUI展示和编辑。 ",-1)])),_:1})):Je("",!0)]}),_:1},8,["show"])])}}}),Zc=Gr($c,[["__scopeId","data-v-bac71487"]]);export{Zc as default};

// ğŸ“¦ Product Service
// @Service

print "âš™ï¸ Loading Product Service...";

// @Service
function ProductService_createProduct(name, price, category) {
    print "ğŸ”„ ProductService.createProduct()";
    
    if (price <= 0) {
        print "âŒ Validation error: Price must be positive";
        return false;
    }
    
    if (len(name) < 2) {
        print "âŒ Validation error: Product name too short";
        return false;
    }
    
    // Business logic: Set default category if empty
    if (len(category) == 0) {
        category = "General";
        print "ğŸ“ Setting default category: General";
    }
    
    // Check for duplicate product name
    print "ğŸ” Checking for duplicate product names...";
    
    return ProductRepository_save(name, price, category);
}

function ProductService_getAllProducts() {
    print "ğŸ“‹ ProductService.getAllProducts()";
    return ProductRepository_findAll();
}

function ProductService_getProductsByCategory(category) {
    print "ğŸ” ProductService.getProductsByCategory('" + category + "')";
    return ProductRepository_findByCategory(category);
}

function ProductService_updateProduct(id, name, price, category) {
    print "ğŸ”„ ProductService.updateProduct(" + str(id) + ")";
    
    // Validation
    if (price <= 0) {
        print "âŒ Validation error: Price must be positive";
        return false;
    }
    
    if (len(name) < 2) {
        print "âŒ Validation error: Product name too short";
        return false;
    }
    
    // Business logic: Price change notification
    print "ğŸ“¢ Notifying about price change for product: " + name;
    
    return ProductRepository_updateById(id, name, price, category);
}

function ProductService_deleteProduct(id) {
    print "ğŸ—‘ï¸ ProductService.deleteProduct(" + str(id) + ")";
    
    // Business logic: Check if product has orders
    print "ğŸ” Checking for existing orders...";
    print "âœ… Safe to delete product";
    
    return ProductRepository_deleteById(id);
}

function ProductService_getProductById(id) {
    print "ğŸ” ProductService.getProductById(" + str(id) + ")";
    return ProductRepository_findById(id);
}

print "âœ… Product Service loaded successfully";

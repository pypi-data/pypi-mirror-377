<?xml version="1.0" encoding="utf-8" ?>
<!--
  Copyright 2025 Akretion France (https://www.akretion.com/)
  @author: Alexis de Lattre <alexis.delattre@akretion.com>
  License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->
<odoo>
    <record id="account_payment_lot_form" model="ir.ui.view">
        <field name="model">account.payment.lot</field>
        <field name="arch" type="xml">
            <form>
                <div class="oe_title">
                    <h1>
                        <field name="name" />
                    </h1>
                </div>
                <group name="main">
                    <field
                        name="order_id"
                        invisible="not context.get('account_payment_lot_main_view')"
                    />
                    <field
                        name="journal_id"
                        invisible="not context.get('account_payment_lot_main_view')"
                    />
                    <field name="date" />
                    <field name="amount" />
                    <field name="currency_id" invisible="1" />
                </group>
                <group name="payment_ids" string="Payments">
                    <field name="payment_ids" colspan="2" nolabel="1" />
                </group>
            </form>
        </field>
    </record>

    <record id="account_payment_lot_list" model="ir.ui.view">
        <field name="model">account.payment.lot</field>
        <field name="arch" type="xml">
            <list>
                <field
                    name="order_id"
                    decoration-bf="1"
                    column_invisible="not context.get('account_payment_lot_main_view')"
                />
                <field name="name" decoration-bf="1" />
                <field
                    name="journal_id"
                    column_invisible="not context.get('account_payment_lot_main_view')"
                    optional="hide"
                />
                <field name="date" />
                <field name="amount" />
                <field name="payment_count" string="Payments" />
                <field name="currency_id" column_invisible="1" />
            </list>
        </field>
    </record>

    <record id="account_payment_lot_search" model="ir.ui.view">
        <field name="model">account.payment.lot</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="journal_id" />
                <separator />
                <filter
                    name="inbound"
                    string="Inbound"
                    domain="[('payment_type', '=', 'inbound')]"
                />
                <filter
                    name="outbound"
                    string="Outbound"
                    domain="[('payment_type', '=', 'outbound')]"
                />
                <separator />
                <filter name="date" date="date" />
                <group name="groupby">
                    <filter
                        name="order_groupby"
                        string="Payment Order"
                        context="{'group_by': 'order_id'}"
                    />
                    <filter
                        name="journal_groupby"
                        string="Bank Journal"
                        context="{'group_by': 'journal_id'}"
                    />
                </group>
            </search>
        </field>
    </record>

    <record id="account_payment_lot_action" model="ir.actions.act_window">
        <field name="name">Payment Lots</field>
        <field name="res_model">account.payment.lot</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'account_payment_lot_main_view': True}</field>
    </record>
</odoo>

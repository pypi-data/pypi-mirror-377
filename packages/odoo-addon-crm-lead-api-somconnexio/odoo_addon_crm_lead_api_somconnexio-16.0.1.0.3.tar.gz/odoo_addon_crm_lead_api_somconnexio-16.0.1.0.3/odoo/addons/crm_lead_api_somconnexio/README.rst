############################
 CRM Lead API - SomConnexio
############################

..
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:1614423d340008335f552b55056ced34554a9187993e584db2ccb85c9738b530
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
   :alt: Beta
   :target: https://odoo-community.org/page/development-status

.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
   :alt: License: AGPL-3
   :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html

.. |badge3| image:: https://img.shields.io/badge/gitlab-coopdevs%2Fodoo--somconnexio-lightgray.png?logo=gitlab
   :alt: coopdevs/som-connexio/odoo-somconnexio
   :target: https://git.coopdevs.org/coopdevs/som-connexio/odoo-somconnexio

|badge1| |badge2| |badge3|

This module is a part of SomConnexió original module.

We are working to separate the monolitic original module in small
modules splited by functionalities.

This module provides a REST API for creating CRMLeads (service requests)
with all the necessary data to activate the services offered by
SomConnexió.

**Table of contents**

.. contents::
   :local:

***************
 Configuration
***************

To configure this addon in your Odoo project, follow these steps:

#. Install the package.
#. Go to Settings > Technical > Auth Api Key.
#. Create an API Key related with an user allowed to create CRMLeads.

*******
 Usage
*******

Here's an example of how to use the REST API to create a CRMLead:

.. code:: python

   import requests

   url = "https://your-odoo-server/api/crmlead"
   payload = {
       "partner_id": "1234",
       "iban": "ES62 3025 0011 7814 0009 1223",
       "lead_line_ids": [
           {
               "product_code": "SE_SC_REC_MOBILE_PACK_UNL_20480",
               "mobile_isp_info": {
                   "icc_donor": "123",
                   "phone_number": "654121234",
                   "type": "new",
                   "delivery_address": {
                       "street": "Carrer Oliva 4b",
                       "street2": "",
                       "zip_code": "08640",
                       "city": "Banyoles",
                       "country": "ES",
                       "state": "B",
                   },
                   "invoice_address": {
                       "street": "Carrer Oliva 4b",
                       "street2": "",
                       "zip_code": "08640",
                       "city": "Banyoles",
                       "country": "ES",
                       "state": "B",
                   },
               },
               "broadband_isp_info": {},
           },
           # Add here other CRMLeadLine if is required.
           # One CRMLeadLine per service.
       ],
   }

   response = requests.post(url, json=payload)
   print(response.json())

**************
 Contributors
**************

-  ``Som Connexió SCCL <https://somconnexio.coop/>``

   -  Gerard Funonsas gerard.funosas@somconnexio.coop
   -  Borja Gimeno borja.gimeno@somconnexio.coop

-  ``Coopdevs Treball SCCL <https://coopdevs.coop/>``

   -  Daniel Palomar daniel.palomar@coopdevs.org
   -  César Lopez cesar.lopez@coopdevs.org
   -  Carla Berenguer carla.berenguer@coopdevs.org

.. image:: https://odoo-community.org/readme-banner-image
   :target: https://odoo-community.org/get-involved?utm_source=readme
   :alt: Odoo Community Association

===============================
Stock Rule Reserve Max Quantity
===============================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:203f47972a51977db562efc87b6314d86bb70d62378d816f1f4d72e7330b2818
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
    :target: https://odoo-community.org/page/development-status
    :alt: Alpha
.. |badge2| image:: https://img.shields.io/badge/license-LGPL--3-blue.png
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: LGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstock--logistics--reservation-lightgray.png?logo=github
    :target: https://github.com/OCA/stock-logistics-reservation/tree/18.0/stock_rule_reserve_max_quantity
    :alt: OCA/stock-logistics-reservation
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/stock-logistics-reservation-18-0/stock-logistics-reservation-18-0-stock_rule_reserve_max_quantity
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
    :target: https://runboat.odoo-community.org/builds?repo=OCA/stock-logistics-reservation&target_branch=18.0
    :alt: Try me on Runboat

|badge1| |badge2| |badge3| |badge4| |badge5|

This module extends the functionality of chained (pull) stock
reservation to support the reservation of the total quantity brought by
the done and pregenerated chained move lines. By default, the
reservation on each step of the chain is limited to the need. If you
pick more than the need, with this module the chained moves will reserve
the total picked quantity.

This operation will only apply when the available quantity exceeds the
demanded quantity and the stock rule linked to the stock move has the
field *Reserve Max Quantity* activated.

This module is not needed if you use chained pickings and the creation
of those is placed when the a picking is validated.

.. IMPORTANT::
   This is an alpha version, the data model and design can change at any time without warning.
   Only for development or testing purpose, do not use in production.
   `More details on development status <https://odoo-community.org/page/development-status>`_

**Table of contents**

.. contents::
   :local:

Use Cases / Context
===================

This module was developed because if you want to send variable product
weights with Warehouse configured with 2 or 3 steps for Outgoing
Shipments, you have to double check the quantity done on every picking
if the quantity done exceedes the demand quantity.

It will be useful for you if you want to auto-reserve all the quantities
done in the last steps for Outgoing Shipments.

Usage
=====

To use this module, you need to:

1. Enter on debug mode
2. On your Warehouse, activate 2 or 3 steps for Outgoing Shipments
3. Go to Warehouse routes and open *pick + ship* (2 steps) or *pick +
   pack + ship* (3 steps)
4. Activate Reserve Max Quantity under the Propagation group in all rule
   steps except the first one
5. Create a sale with a storeable product and confirm it and has enough
   stock.
6. Go to the first picking and set quantity done over the quantity
   demanded and validate it.
7. Check that the next picking will reserve the entire quantity
   previously made instead of the quantity demanded.

Known issues / Roadmap
======================

When reserving stock on the delivery note that has activated the
``reserve_max_quantity`` flag, if you reserve stock and it matches
exactly the initially demanded quantity, it will stop reserving.

Example: Pick: 2 units requested, 3 units made in 3 different move
lines. (1 + 1 + 1) Ship: 2 units requested. Stock will only be taken
until the 2 units are reached. (1 + 1)

This happens because there comes a time when the demand to cover the
initial need is 0, and the line of 1 unit will be left untaken because
all has been satisfied.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/stock-logistics-reservation/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OCA/stock-logistics-reservation/issues/new?body=module:%20stock_rule_reserve_max_quantity%0Aversion:%2018.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* Moduon

Contributors
------------

- Eduardo de Miguel (`Moduon <https://www.moduon.team/>`__)
- Rafael Blasco (`Moduon <https://www.moduon.team/>`__)

Other credits
-------------

The development of this module has been financially supported by:

- Ulzama

Maintainers
-----------

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

.. |maintainer-Shide| image:: https://github.com/Shide.png?size=40px
    :target: https://github.com/Shide
    :alt: Shide
.. |maintainer-rafaelbn| image:: https://github.com/rafaelbn.png?size=40px
    :target: https://github.com/rafaelbn
    :alt: rafaelbn

Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:

|maintainer-Shide| |maintainer-rafaelbn| 

This module is part of the `OCA/stock-logistics-reservation <https://github.com/OCA/stock-logistics-reservation/tree/18.0/stock_rule_reserve_max_quantity>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.

[runtime]
sampler = test
root = ${COSMOSIS_SRC_DIR}

[test]
save_dir=/Users/constancemahony/Desktop/halo_model_development/runs/bnl_testing/output_andrej_new_code2
fatal-errors = T
fatal_errors = T

[DEFAULT]
nz_def = 6
zmin_def =  0.0 ;0.2
zmax_def = 1.2
nmass_def = 200
logmassmin_def = 9.0
logmassmax_def = 16.0
pipeline_path = /Users/constancemahony/Desktop/halo_model_development/halomodel_for_cosmosis
cosmosis-standard-library_path = /Users/constancemahony/Desktop/cosmosis-standard-library

[pipeline]
quiet=F
timing=T
debug=T
modules =consistency camb extrapolate hmf_and_halo_bias hod_red nfw_halo pk_red
values = /Users/constancemahony/Desktop/halo_model_development/halomodel_for_cosmosis/example_ini_files/values_bnl_testing.ini
likelihoods =

[consistency]
file = %(cosmosis-standard-library_path)s/utility/consistency/consistency_interface.py

;[camb]
;file = %(cosmosis-standard-library_path)s/boltzmann/camb/camb.so
;mode=all
;lmax=5000
;feedback=0
;zmin= 0.

[camb]
file = %(cosmosis-standard-library_path)s/boltzmann/camb/camb_interface.py
mode=all
lmax=5000
feedback=0
zmin= 0.
nonlinear=pk
halofit_version=takahashi
kmin=1e-5
kmax=500.0
nk=1000

[extrapolate]
file = %(cosmosis-standard-library_path)s/boltzmann/extrapolate/extrapolate_power.py
kmax = 1e8
nmax = 2580

;[hmf_and_halo_bias]
;file = %(pipeline_path)s/hmf_and_hbf_tinker.py
;log_mass_min = %(logmassmin_def)s
;log_mass_max = %(logmassmax_def)s
;nmass = %(nmass_def)s
;zmin= %(zmin_def)s
;zmax= %(zmax_def)s
;nz= %(nz_def)s
;do_halo_bias = True

[hmf_and_halo_bias]
file = %(pipeline_path)s/hmf_and_hbf_tinker.py
log_mass_min = %(logmassmin_def)s
log_mass_max = %(logmassmax_def)s
nmass = %(nmass_def)s
zmin= %(zmin_def)s
zmax= %(zmax_def)s
nz= %(nz_def)s
hmf_model = Tinker10
bias_model = Tinker10
mdef_model = SOMean
overdensity = 200
delta_c = 1.686

;[hod_red]
;file = %(pipeline_path)s/hod_interface.py
; if luminosities_z = True, then the luminosities are read from the luminosities_file [z_mid, lum_min(z), lum_max(z)]
;luminosities_z = True
;luminosities_file = /Users/constancemahony/Desktop/halo_model_development/halomodel_for_cosmosis/input_files/red_cen_lum_pdf.txt
;nlum = 200
; -
; lum_min, lum_max, zmin, zmax and nz are only needed if luminosities_z = False
; -
;lum_min = 4.698941e+08
;lum_max = 1.180321e+11
;zmin = %(zmin_def)s
;zmax = %(zmax_def)s
;nz = %(nz_def)s
;abs_mag_sun = 4.68
;log_mass_min = %(logmassmin_def)s
;log_mass_max = %(logmassmax_def)s
;nmass = %(nmass_def)s
;z_median = 0.4
;do_hod = True
;do_number_density = True
;do_galaxy_linear_bias = True
;do_luminosity_function = False
; options are: "lf_z" or "lf_zmed" depending if you want to calculate the LF per each redshift or on the median one
;lf_mode = "lf_z"
;do_clf_quantities = False
;name = red

[hod_red]
file = %(pipeline_path)s/hod_interface.py
; if luminosities_z = True, then the luminosities are read from the luminosities_file [z_mid, lum_min(z), lum_max(z)]
observables_z = True
observables_file = /Users/constancemahony/Desktop/halo_model_development/halomodel_for_cosmosis/input_files/red_cen_lum_pdf.txt
nobs = 200
; -
; obs_min, obs_max, zmin, zmax and nz are only needed if observables_z = False
; -
;obs_min = 4.698941e+08
;obs_max = 1.180321e+11
;zmin = %(zmin_def)s
;zmax = %(zmax_def)s
;nz = %(nz_def)s
abs_mag_sun = 4.68
log_mass_min = %(logmassmin_def)s
log_mass_max = %(logmassmax_def)s
nmass = %(nmass_def)s
z_median = 0.4
do_hod = True
do_number_density = True
do_galaxy_linear_bias = True
do_observable_function = True
; options are: "obs_z" or "obs_zmed" depending if you want to calculate the LF per each redshift or on the median one
observable_mode = "obs_z"
do_cf_quantities = False
name = red

;[nfw_halo]
;file = %(pipeline_path)s/nfw_halo.py
;zmin = %(zmin_def)s
;zmax = %(zmax_def)s
;nz = %(nz_def)s
;log_mass_min = %(logmassmin_def)s
;log_mass_max = %(logmassmax_def)s
;nmass = 20
;nmass_fast =

[nfw_halo]
file = %(pipeline_path)s/nfw_halo.py
zmin = %(zmin_def)s
zmax = %(zmax_def)s
nz = %(nz_def)s
log_mass_min = %(logmassmin_def)s
log_mass_max = %(logmassmax_def)s
nmass = 100 ;20 was original
; AD: increase number of mass bins for NFW!
; AD: maybe not, would need to rething IA part to do so, interpolation is accurate enought for the other parts!
model = duffy08
mdef_model = SOMean
overdensity = 200
nmass_fast =

[pk_red]
file= %(pipeline_path)s/pk_interface.py
;log-spaced mass in units of M_sun/h
log_mass_min = %(logmassmin_def)s
log_mass_max = %(logmassmax_def)s
nmass = 50 ;%(nmass_def)s
;nmass_bnl = 10
zmin = %(zmin_def)s
zmax = %(zmax_def)s
nz = %(nz_def)s
nk = 300 ;300
pipeline = False
p_mm = False
p_mm_bnl = False
p_gg = True
p_gg_bnl = False
p_gm = False
p_gm_bnl = False
p_gI = False
p_GI = False
p_II = False
two_halo_only = False
hod_section_name = hod_red
name = red
interpolate_bnl=False
update_bnl = 10

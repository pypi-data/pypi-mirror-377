import{S as ye,i as De,s as we,W as Me,X as Ee,a as L,d as _,f as m,g as O,h as H,n as _e,H as Ue,I as Ze,C as W,D as F,E as q,K as Ge,q as b,r as C,F as R,k as pe,v as Ke,l as A,p as U,x as At,z as Ut,A as Wt,B as Ft,e as T,c as z,y as ae,u as se,t as te,b as le,j as ne,G as fe,V as et,m as je,N as Ce,a0 as Ae,P as Jt,w as Xt,M as tt,L as lt,O as Qt}from"./G5mHU2ZO.js";import{e as ge}from"./Bno_0ZUi.js";import"./IHki7fMi.js";import"./DcZItv_e.js";import{M as qt,a as Rt,b as Zt,c as nt}from"./BEEpJ9XI.js";import{m as rt,x as ot,f as xt,i as el}from"./CueazCI5.js";import{F as tl}from"./CU2r43ac.js";import{d as Re,r as ll}from"./I1CDPYOB.js";import"./BXP-4RTu.js";import{S as nl}from"./DQCAYDYi.js";import{f as Gt}from"./g5t9vw8M.js";import"./CN4oNWyW.js";import{g as rl,p as ol,d as al,u as sl}from"./BEckdsX7.js";import{a as Kt,u as Yt,e as at,c as il,M as be,m as fl,d as Fe}from"./C7CLP60P.js";import{t as de}from"./DjBxNUjk.js";import{g as qe}from"./BHZEP5oj.js";import{C as ul}from"./CB6nYVFE.js";import{S as cl}from"./Dy7DAqol.js";import{T as ce}from"./BOU1-HoI.js";import{C as dl}from"./DWnH1e1n.js";import{L as ml}from"./CfLTSF_5.js";import{E as _l}from"./dfVtmH8R.js";import{E as hl}from"./BnGKjuQC.js";import{E as pl}from"./Cos11Dic.js";function gl(o){let e,l;return{c(){e=Me("svg"),l=Me("path"),this.h()},l(t){e=Ee(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=L(e);l=Ee(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(l).forEach(_),n.forEach(_),this.h()},h(){m(l,"stroke-linecap","round"),m(l,"stroke-linejoin","round"),m(l,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",o[1]),m(e,"stroke","currentColor"),m(e,"class",o[0])},m(t,n){O(t,e,n),H(e,l)},p(t,[n]){n&2&&m(e,"stroke-width",t[1]),n&1&&m(e,"class",t[0])},i:_e,o:_e,d(t){t&&_(e)}}}function vl(o,e,l){let{className:t="size-4"}=e,{strokeWidth:n="1.5"}=e;return o.$$set=r=>{"className"in r&&l(0,t=r.className),"strokeWidth"in r&&l(1,n=r.strokeWidth)},[t,n]}class bl extends ye{constructor(e){super(),De(this,e,vl,gl,we,{className:0,strokeWidth:1})}}function wl(o){let e;const l=o[8].default,t=At(l,o,o[13],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&8192)&&Ut(t,l,n,n[13],e?Ft(l,n[13],r,null):Wt(n[13]),null)},i(n){e||(b(t,n),e=!0)},o(n){C(t,n),e=!1},d(n){t&&t.d(n)}}}function kl(o){var t;let e,l;return e=new ce({props:{content:o[5].t("More"),className:((t=o[6])==null?void 0:t.highContrastMode)??!1?"":"group-hover/item:opacity-100 opacity-0",$$slots:{default:[wl]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){q(e,n,r),l=!0},p(n,r){var s;const a={};r&32&&(a.content=n[5].t("More")),r&64&&(a.className=((s=n[6])==null?void 0:s.highContrastMode)??!1?"":"group-hover/item:opacity-100 opacity-0"),r&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function $l(o){let e,l;return e=new _l({}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ml(o){let e,l;return e=new hl({}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function El(o){let e=o[5].t("Keep in Sidebar")+"",l;return{c(){l=te(e)},l(t){l=le(t,e)},m(t,n){O(t,l,n)},p(t,n){n&32&&e!==(e=t[5].t("Keep in Sidebar")+"")&&ne(l,e)},d(t){t&&_(l)}}}function yl(o){let e=o[5].t("Hide from Sidebar")+"",l;return{c(){l=te(e)},l(t){l=le(t,e)},m(t,n){O(t,l,n)},p(t,n){n&32&&e!==(e=t[5].t("Hide from Sidebar")+"")&&ne(l,e)},d(t){t&&_(l)}}}function Dl(o){let e,l,t,n,r,a,s;const i=[Ml,$l],u=[];function c(p,I){var M,g;return I&66&&(e=null),e==null&&(e=!!(((M=p[6])==null?void 0:M.pinnedModels)??[]).includes((g=p[1])==null?void 0:g.id)),e?0:1}l=c(o,-1),t=u[l]=i[l](o);function d(p,I){var M,g;return I&66&&(a=null),a==null&&(a=!!(((M=p[6])==null?void 0:M.pinnedModels)??[]).includes((g=p[1])==null?void 0:g.id)),a?yl:El}let D=d(o,-1),$=D(o);return{c(){t.c(),n=A(),r=T("div"),$.c(),this.h()},l(p){t.l(p),n=U(p),r=z(p,"DIV",{class:!0});var I=L(r);$.l(I),I.forEach(_),this.h()},h(){m(r,"class","flex items-center")},m(p,I){u[l].m(p,I),O(p,n,I),O(p,r,I),$.m(r,null),s=!0},p(p,I){let M=l;l=c(p,I),l!==M&&(ae(),C(u[M],1,1,()=>{u[M]=null}),se(),t=u[l],t||(t=u[l]=i[l](p),t.c()),b(t,1),t.m(n.parentNode,n)),D===(D=d(p,I))&&$?$.p(p,I):($.d(1),$=D(p),$&&($.c(),$.m(r,null)))},i(p){s||(b(t),s=!0)},o(p){C(t),s=!1},d(p){p&&(_(n),_(r)),u[l].d(p),$.d()}}}function Cl(o){let e,l,t,n=o[5].t("Copy Link")+"",r,a;return e=new ml({}),{c(){W(e.$$.fragment),l=A(),t=T("div"),r=te(n),this.h()},l(s){F(e.$$.fragment,s),l=U(s),t=z(s,"DIV",{class:!0});var i=L(t);r=le(i,n),i.forEach(_),this.h()},h(){m(t,"class","flex items-center")},m(s,i){q(e,s,i),O(s,l,i),O(s,t,i),H(t,r),a=!0},p(s,i){(!a||i&32)&&n!==(n=s[5].t("Copy Link")+"")&&ne(r,n)},i(s){a||(b(e.$$.fragment,s),a=!0)},o(s){C(e.$$.fragment,s),a=!1},d(s){s&&(_(l),_(t)),R(e,s)}}}function Il(o){var r,a;let e,l,t,n;return e=new nt({props:{type:"button","aria-pressed":(((r=o[6])==null?void 0:r.pinnedModels)??[]).includes((a=o[1])==null?void 0:a.id),class:"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2",$$slots:{default:[Dl]},$$scope:{ctx:o}}}),e.$on("click",o[9]),t=new nt({props:{type:"button",class:"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2",$$slots:{default:[Cl]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){W(e.$$.fragment),l=A(),W(t.$$.fragment)},l(s){F(e.$$.fragment,s),l=U(s),F(t.$$.fragment,s)},m(s,i){q(e,s,i),O(s,l,i),q(t,s,i),n=!0},p(s,i){var d,D;const u={};i&66&&(u["aria-pressed"]=(((d=s[6])==null?void 0:d.pinnedModels)??[]).includes((D=s[1])==null?void 0:D.id)),i&8290&&(u.$$scope={dirty:i,ctx:s}),e.$set(u);const c={};i&8224&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(s){n||(b(e.$$.fragment,s),b(t.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),C(t.$$.fragment,s),n=!1},d(s){s&&_(l),R(e,s),R(t,s)}}}function Nl(o){let e,l,t,n;return e=new Rt({props:{$$slots:{default:[kl]},$$scope:{ctx:o}}}),t=new Zt({props:{strategy:"fixed",class:"w-full max-w-[180px] text-sm rounded-2xl p-1 z-[9999999] bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-100  dark:border-gray-800",sideOffset:-2,side:"bottom",align:"end",transition:Gt,$$slots:{default:[Il]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment),l=A(),W(t.$$.fragment)},l(r){F(e.$$.fragment,r),l=U(r),F(t.$$.fragment,r)},m(r,a){q(e,r,a),O(r,l,a),q(t,r,a),n=!0},p(r,a){const s={};a&8288&&(s.$$scope={dirty:a,ctx:r}),e.$set(s);const i={};a&8303&&(i.$$scope={dirty:a,ctx:r}),t.$set(i)},i(r){n||(b(e.$$.fragment,r),b(t.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),C(t.$$.fragment,r),n=!1},d(r){r&&_(l),R(e,r),R(t,r)}}}function Vl(o){let e,l,t;function n(a){o[12](a)}let r={closeFocus:!1,onOpenChange:o[11],typeahead:!1,$$slots:{default:[Nl]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.open=o[0]),e=new qt({props:r}),Ue.push(()=>Ze(e,"open",n)),{c(){W(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,s){q(e,a,s),t=!0},p(a,[s]){const i={};s&16&&(i.onOpenChange=a[11]),s&8303&&(i.$$scope={dirty:s,ctx:a}),!l&&s&1&&(l=!0,i.open=a[0],Ge(()=>l=!1)),e.$set(i)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){R(e,a)}}}function Hl(o,e,l){let t,n;pe(o,Kt,g=>l(6,n=g));let{$$slots:r={},$$scope:a}=e;const s=Ke("i18n");pe(o,s,g=>l(5,t=g));let{show:i=!1}=e,{model:u}=e,{pinModelHandler:c=()=>{}}=e,{copyLinkHandler:d=()=>{}}=e,{onClose:D=()=>{}}=e;const $=g=>{g.stopPropagation(),g.preventDefault(),c(u==null?void 0:u.id),l(0,i=!1)},p=g=>{g.stopPropagation(),g.preventDefault(),d(),l(0,i=!1)},I=g=>{g===!1&&D()};function M(g){i=g,l(0,i)}return o.$$set=g=>{"show"in g&&l(0,i=g.show),"model"in g&&l(1,u=g.model),"pinModelHandler"in g&&l(2,c=g.pinModelHandler),"copyLinkHandler"in g&&l(3,d=g.copyLinkHandler),"onClose"in g&&l(4,D=g.onClose),"$$scope"in g&&l(13,a=g.$$scope)},[i,u,c,d,D,t,n,s,r,$,p,I,M,a]}class Ol extends ye{constructor(e){super(),De(this,e,Hl,Vl,we,{show:0,model:1,pinModelHandler:2,copyLinkHandler:3,onClose:4})}}function Tl(o){let e,l,t;return{c(){e=Me("svg"),l=Me("path"),t=Me("circle"),this.h()},l(n){e=Ee(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=L(e);l=Ee(r,"path",{d:!0,stroke:!0,fill:!0}),L(l).forEach(_),t=Ee(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(t).forEach(_),r.forEach(_),this.h()},h(){m(l,"d","M4 12 L8 7 H21 V17 H8 L4 12 Z"),m(l,"stroke","currentColor"),m(l,"fill","none"),m(t,"cx","10"),m(t,"cy","12"),m(t,"r","0.75"),m(t,"fill","currentColor"),m(t,"stroke","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",o[1]),m(e,"stroke","currentColor"),m(e,"class",o[0])},m(n,r){O(n,e,r),H(e,l),H(e,t)},p(n,[r]){r&2&&m(e,"stroke-width",n[1]),r&1&&m(e,"class",n[0])},i:_e,o:_e,d(n){n&&_(e)}}}function zl(o,e,l){let{className:t="size-4"}=e,{strokeWidth:n="1.8"}=e;return o.$$set=r=>{"className"in r&&l(0,t=r.className),"strokeWidth"in r&&l(1,n=r.strokeWidth)},[t,n]}class Ll extends ye{constructor(e){super(),De(this,e,zl,Tl,we,{className:0,strokeWidth:1})}}function st(o,e,l){const t=o.slice();return t[17]=e[l],t}function Sl(o){let e,l;return{c(){e=T("img"),this.h()},l(t){e=z(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){var t,n,r;et(e.src,l=((r=(n=(t=o[1].model)==null?void 0:t.info)==null?void 0:n.meta)==null?void 0:r.profile_image_url)??`${at}/static/favicon.png`)||m(e,"src",l),m(e,"alt","Model"),m(e,"class","rounded-full size-5 flex items-center")},m(t,n){O(t,e,n)},p(t,n){var r,a,s;n&2&&!et(e.src,l=((s=(a=(r=t[1].model)==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:s.profile_image_url)??`${at}/static/favicon.png`)&&m(e,"src",l)},d(t){t&&_(e)}}}function Bl(o){let e,l=o[1].label+"",t;return{c(){e=T("div"),t=te(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);t=le(r,l),r.forEach(_),this.h()},h(){m(e,"class","line-clamp-1")},m(n,r){O(n,e,r),H(e,t)},p(n,r){r&2&&l!==(l=n[1].label+"")&&ne(t,l)},d(n){n&&_(e)}}}function it(o){var s,i,u,c;let e,l=((s=o[1].model.ollama)==null?void 0:s.expires_at)&&new Date(((i=o[1].model.ollama)==null?void 0:i.expires_at)*1e3)>new Date,t,n,r=(((c=(u=o[1].model.ollama)==null?void 0:u.details)==null?void 0:c.parameter_size)??"")!==""&&ft(o),a=l&&ut(o);return{c(){r&&r.c(),e=A(),a&&a.c(),t=je()},l(d){r&&r.l(d),e=U(d),a&&a.l(d),t=je()},m(d,D){r&&r.m(d,D),O(d,e,D),a&&a.m(d,D),O(d,t,D),n=!0},p(d,D){var $,p,I,M;(((p=($=d[1].model.ollama)==null?void 0:$.details)==null?void 0:p.parameter_size)??"")!==""?r?(r.p(d,D),D&2&&b(r,1)):(r=ft(d),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(ae(),C(r,1,1,()=>{r=null}),se()),D&2&&(l=((I=d[1].model.ollama)==null?void 0:I.expires_at)&&new Date(((M=d[1].model.ollama)==null?void 0:M.expires_at)*1e3)>new Date),l?a?(a.p(d,D),D&2&&b(a,1)):(a=ut(d),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(ae(),C(a,1,1,()=>{a=null}),se())},i(d){n||(b(r),b(a),n=!0)},o(d){C(r),C(a),n=!1},d(d){d&&(_(e),_(t)),r&&r.d(d),a&&a.d(d)}}}function ft(o){var n,r,a,s,i,u;let e,l,t;return l=new ce({props:{content:`${(r=(n=o[1].model.ollama)==null?void 0:n.details)!=null&&r.quantization_level?((s=(a=o[1].model.ollama)==null?void 0:a.details)==null?void 0:s.quantization_level)+" ":""}${(i=o[1].model.ollama)!=null&&i.size?`(${(((u=o[1].model.ollama)==null?void 0:u.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[Pl]},$$scope:{ctx:o}}}),{c(){e=T("div"),W(l.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0});var d=L(e);F(l.$$.fragment,d),d.forEach(_),this.h()},h(){m(e,"class","flex items-center translate-y-[0.5px]")},m(c,d){O(c,e,d),q(l,e,null),t=!0},p(c,d){var $,p,I,M,g,S;const D={};d&2&&(D.content=`${(p=($=c[1].model.ollama)==null?void 0:$.details)!=null&&p.quantization_level?((M=(I=c[1].model.ollama)==null?void 0:I.details)==null?void 0:M.quantization_level)+" ":""}${(g=c[1].model.ollama)!=null&&g.size?`(${(((S=c[1].model.ollama)==null?void 0:S.size)/1024**3).toFixed(1)}GB)`:""}`),d&1048578&&(D.$$scope={dirty:d,ctx:c}),l.$set(D)},i(c){t||(b(l.$$.fragment,c),t=!0)},o(c){C(l.$$.fragment,c),t=!1},d(c){c&&_(e),R(l)}}}function Pl(o){var n,r;let e,l=(((r=(n=o[1].model.ollama)==null?void 0:n.details)==null?void 0:r.parameter_size)??"")+"",t;return{c(){e=T("span"),t=te(l),this.h()},l(a){e=z(a,"SPAN",{class:!0});var s=L(e);t=le(s,l),s.forEach(_),this.h()},h(){m(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(a,s){O(a,e,s),H(e,t)},p(a,s){var i,u;s&2&&l!==(l=(((u=(i=a[1].model.ollama)==null?void 0:i.details)==null?void 0:u.parameter_size)??"")+"")&&ne(t,l)},d(a){a&&_(e)}}}function ut(o){var n;let e,l,t;return l=new ce({props:{content:`${o[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Re(((n=o[1].model.ollama)==null?void 0:n.expires_at)*1e3).fromNow()})}`,className:"self-end",$$slots:{default:[jl]},$$scope:{ctx:o}}}),{c(){e=T("div"),W(l.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);F(l.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","flex items-center translate-y-[0.5px] px-0.5")},m(r,a){O(r,e,a),q(l,e,null),t=!0},p(r,a){var i;const s={};a&258&&(s.content=`${r[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Re(((i=r[1].model.ollama)==null?void 0:i.expires_at)*1e3).fromNow()})}`),a&1048576&&(s.$$scope={dirty:a,ctx:r}),l.$set(s)},i(r){t||(b(l.$$.fragment,r),t=!0)},o(r){C(l.$$.fragment,r),t=!1},d(r){r&&_(e),R(l)}}}function jl(o){let e,l='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-pq0hxj"&&(e.innerHTML=l),this.h()},h(){m(e,"class","flex items-center")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function ct(o){let e=o[1].model.id,l,t,n=mt(o);return{c(){n.c(),l=je()},l(r){n.l(r),l=je()},m(r,a){n.m(r,a),O(r,l,a),t=!0},p(r,a){a&2&&we(e,e=r[1].model.id)?(ae(),C(n,1,1,_e),se(),n=mt(r),n.c(),b(n,1),n.m(l.parentNode,l)):n.p(r,a)},i(r){t||(b(n),t=!0)},o(r){C(n),t=!1},d(r){r&&_(l),n.d(r)}}}function Al(o){let e,l,t;return l=new Ll({}),{c(){e=T("div"),W(l.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);F(l.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","translate-y-[1px]")},m(n,r){O(n,e,r),q(l,e,null),t=!0},p:_e,i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){C(l.$$.fragment,n),t=!1},d(n){n&&_(e),R(l)}}}function Ul(o){let e,l=o[17].name+"",t,n;return{c(){e=T("div"),t=te(l),n=A(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);t=le(a,l),a.forEach(_),n=U(r),this.h()},h(){m(e,"class","text-xs font-medium rounded-sm uppercase text-white")},m(r,a){O(r,e,a),H(e,t),O(r,n,a)},p(r,a){a&2&&l!==(l=r[17].name+"")&&ne(t,l)},d(r){r&&(_(e),_(n))}}}function dt(o){let e,l;return e=new ce({props:{content:o[17].name,className:"flex-shrink-0",$$slots:{default:[Ul]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.content=t[17].name),n&1048578&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Wl(o){var s;let e,l,t,n=ge((s=o[1].model)==null?void 0:s.tags.sort(gt)),r=[];for(let i=0;i<n.length;i+=1)r[i]=dt(st(o,n,i));const a=i=>C(r[i],1,1,()=>{r[i]=null});return{c(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=z(i,"DIV",{slot:!0,id:!0});var u=L(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(_),this.h()},h(){m(e,"slot","tooltip"),m(e,"id",l="tags-"+o[1].model.id)},m(i,u){O(i,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t=!0},p(i,u){var c;if(u&2){n=ge((c=i[1].model)==null?void 0:c.tags.sort(gt));let d;for(d=0;d<n.length;d+=1){const D=st(i,n,d);r[d]?(r[d].p(D,u),b(r[d],1)):(r[d]=dt(D),r[d].c(),b(r[d],1),r[d].m(e,null))}for(ae(),d=n.length;d<r.length;d+=1)a(d);se()}(!t||u&2&&l!==(l="tags-"+i[1].model.id))&&m(e,"id",l)},i(i){if(!t){for(let u=0;u<n.length;u+=1)b(r[u]);t=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)C(r[u]);t=!1},d(i){i&&_(e),Ae(r,i)}}}function mt(o){let e,l;return e=new ce({props:{elementId:"tags-"+o[1].model.id,$$slots:{tooltip:[Wl],default:[Al]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.elementId="tags-"+t[1].model.id),n&1048578&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Fl(o){let e,l;return e=new ce({props:{content:`${o[8].t("External")}`,$$slots:{default:[Rl]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("External")}`),n&1048576&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ql(o){let e,l;return e=new ce({props:{content:`${o[8].t("Direct")}`,$$slots:{default:[Zl]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("Direct")}`),n&1048576&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Rl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1we9nfa"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function Zl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1pvx0j8"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function _t(o){var t,n,r;let e,l;return e=new ce({props:{content:`${rt.parse(ot((r=(n=(t=o[1].model)==null?void 0:t.info)==null?void 0:n.meta)==null?void 0:r.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[Gl]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,s){q(e,a,s),l=!0},p(a,s){var u,c,d;const i={};s&2&&(i.content=`${rt.parse(ot((d=(c=(u=a[1].model)==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:d.description).replaceAll(`
`,"<br>"))}`),s&1048576&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){C(e.$$.fragment,a),l=!1},d(a){R(e,a)}}}function Gl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-i7zoyb"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function ht(o){let e,l;return e=new ce({props:{content:`${o[8].t("Eject")}`,className:"flex-shrink-0 group-hover/item:opacity-100 opacity-0 ",$$slots:{default:[Kl]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("Eject")}`),n&1048594&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Kl(o){let e,l,t,n,r;return l=new bl({props:{className:"size-3"}}),{c(){e=T("button"),W(l.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{class:!0});var s=L(e);F(l.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex")},m(a,s){O(a,e,s),q(l,e,null),t=!0,n||(r=fe(e,"click",o[12]),n=!0)},p:_e,i(a){t||(b(l.$$.fragment,a),t=!0)},o(a){C(l.$$.fragment,a),t=!1},d(a){a&&_(e),R(l),n=!1,r()}}}function Yl(o){let e,l,t,n,r,a;return l=new pl({}),{c(){e=T("button"),W(l.$$.fragment),this.h()},l(s){e=z(s,"BUTTON",{"aria-label":!0,class:!0});var i=L(e);F(l.$$.fragment,i),i.forEach(_),this.h()},h(){m(e,"aria-label",t=`${o[8].t("More Options")}`),m(e,"class","flex")},m(s,i){O(s,e,i),q(l,e,null),n=!0,r||(a=fe(e,"click",o[13]),r=!0)},p(s,i){(!n||i&256&&t!==(t=`${s[8].t("More Options")}`))&&m(e,"aria-label",t)},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){C(l.$$.fragment,s),n=!1},d(s){s&&_(e),R(l),r=!1,a()}}}function pt(o){let e,l,t;return l=new dl({props:{className:"size-3"}}),{c(){e=T("div"),W(l.$$.fragment)},l(n){e=z(n,"DIV",{});var r=L(e);F(l.$$.fragment,r),r.forEach(_)},m(n,r){O(n,e,r),q(l,e,null),t=!0},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){C(l.$$.fragment,n),t=!1},d(n){n&&_(e),R(l)}}}function Jl(o){var Ne,Ve,He,Oe,Te,ze,Le,Se,Be,Pe;let e,l,t,n,r,a,s,i,u,c,d,D,$,p,I,M,g,S=((Ne=o[9])==null?void 0:Ne.role)==="admin"&&o[1].model.owned_by==="ollama"&&((Ve=o[1].model.ollama)==null?void 0:Ve.expires_at)&&new Date(((He=o[1].model.ollama)==null?void 0:He.expires_at)*1e3)>new Date,k,E,V,B,j,N,Y,J,h,y,Z;r=new ce({props:{content:((Oe=o[9])==null?void 0:Oe.role)==="admin"?((Te=o[1])==null?void 0:Te.value)??"":"",placement:"top-start",$$slots:{default:[Sl]},$$scope:{ctx:o}}}),i=new ce({props:{content:`${o[1].label} (${o[1].value})`,placement:"top-start",$$slots:{default:[Bl]},$$scope:{ctx:o}}});let w=o[1].model.owned_by==="ollama"&&it(o),G=(((Le=(ze=o[1])==null?void 0:ze.model)==null?void 0:Le.tags)??[]).length>0&&ct(o);const he=[ql,Fl],me=[];function ke(f,v){var P;return(P=f[1].model)!=null&&P.direct?0:f[1].model.connection_type==="external"?1:-1}~($=ke(o))&&(p=me[$]=he[$](o));let X=((Pe=(Be=(Se=o[1].model)==null?void 0:Se.info)==null?void 0:Be.meta)==null?void 0:Pe.description)&&_t(o),Q=S&&ht(o);function We(f){o[15](f)}let Ie={model:o[1].model,pinModelHandler:o[5],copyLinkHandler:o[14],$$slots:{default:[Yl]},$$scope:{ctx:o}};o[7]!==void 0&&(Ie.show=o[7]),E=new Ol({props:Ie}),Ue.push(()=>Ze(E,"show",We));let x=o[3]===o[1].value&&pt();return{c(){e=T("button"),l=T("div"),t=T("div"),n=T("div"),W(r.$$.fragment),a=A(),s=T("div"),W(i.$$.fragment),u=A(),c=T("div"),w&&w.c(),d=A(),G&&G.c(),D=A(),p&&p.c(),I=A(),X&&X.c(),M=A(),g=T("div"),Q&&Q.c(),k=A(),W(E.$$.fragment),B=A(),x&&x.c(),this.h()},l(f){e=z(f,"BUTTON",{"aria-roledescription":!0,"aria-label":!0,class:!0,"data-arrow-selected":!0,"data-value":!0});var v=L(e);l=z(v,"DIV",{class:!0});var P=L(l);t=z(P,"DIV",{class:!0});var K=L(t);n=z(K,"DIV",{class:!0});var ie=L(n);F(r.$$.fragment,ie),ie.forEach(_),a=U(K),s=z(K,"DIV",{class:!0});var ee=L(s);F(i.$$.fragment,ee),ee.forEach(_),u=U(K),c=z(K,"DIV",{class:!0});var re=L(c);w&&w.l(re),d=U(re),G&&G.l(re),D=U(re),p&&p.l(re),I=U(re),X&&X.l(re),re.forEach(_),K.forEach(_),P.forEach(_),M=U(v),g=z(v,"DIV",{class:!0});var ue=L(g);Q&&Q.l(ue),k=U(ue),F(E.$$.fragment,ue),B=U(ue),x&&x.l(ue),ue.forEach(_),v.forEach(_),this.h()},h(){m(n,"class","flex items-center min-w-fit"),m(s,"class","flex items-center"),m(c,"class","shrink-0 flex items-center gap-2"),m(t,"class","flex items-center gap-2"),m(l,"class","flex flex-col flex-1 gap-1.5"),m(g,"class","ml-auto pl-2 pr-1 flex items-center gap-1.5 shrink-0"),m(e,"aria-roledescription","model-item"),m(e,"aria-label",j=o[1].label),m(e,"class",N="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted "+(o[2]===o[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),m(e,"data-arrow-selected",Y=o[2]===o[0]),m(e,"data-value",J=o[1].value)},m(f,v){O(f,e,v),H(e,l),H(l,t),H(t,n),q(r,n,null),H(t,a),H(t,s),q(i,s,null),H(t,u),H(t,c),w&&w.m(c,null),H(c,d),G&&G.m(c,null),H(c,D),~$&&me[$].m(c,null),H(c,I),X&&X.m(c,null),H(e,M),H(e,g),Q&&Q.m(g,null),H(g,k),q(E,g,null),H(g,B),x&&x.m(g,null),h=!0,y||(Z=fe(e,"click",o[16]),y=!0)},p(f,[v]){var re,ue,$e,oe,ve,Ye,Je,Xe,Qe,xe;const P={};v&514&&(P.content=((re=f[9])==null?void 0:re.role)==="admin"?((ue=f[1])==null?void 0:ue.value)??"":""),v&1048578&&(P.$$scope={dirty:v,ctx:f}),r.$set(P);const K={};v&2&&(K.content=`${f[1].label} (${f[1].value})`),v&1048578&&(K.$$scope={dirty:v,ctx:f}),i.$set(K),f[1].model.owned_by==="ollama"?w?(w.p(f,v),v&2&&b(w,1)):(w=it(f),w.c(),b(w,1),w.m(c,d)):w&&(ae(),C(w,1,1,()=>{w=null}),se()),(((oe=($e=f[1])==null?void 0:$e.model)==null?void 0:oe.tags)??[]).length>0?G?(G.p(f,v),v&2&&b(G,1)):(G=ct(f),G.c(),b(G,1),G.m(c,D)):G&&(ae(),C(G,1,1,()=>{G=null}),se());let ie=$;$=ke(f),$===ie?~$&&me[$].p(f,v):(p&&(ae(),C(me[ie],1,1,()=>{me[ie]=null}),se()),~$?(p=me[$],p?p.p(f,v):(p=me[$]=he[$](f),p.c()),b(p,1),p.m(c,I)):p=null),(Je=(Ye=(ve=f[1].model)==null?void 0:ve.info)==null?void 0:Ye.meta)!=null&&Je.description?X?(X.p(f,v),v&2&&b(X,1)):(X=_t(f),X.c(),b(X,1),X.m(c,null)):X&&(ae(),C(X,1,1,()=>{X=null}),se()),v&514&&(S=((Xe=f[9])==null?void 0:Xe.role)==="admin"&&f[1].model.owned_by==="ollama"&&((Qe=f[1].model.ollama)==null?void 0:Qe.expires_at)&&new Date(((xe=f[1].model.ollama)==null?void 0:xe.expires_at)*1e3)>new Date),S?Q?(Q.p(f,v),v&514&&b(Q,1)):(Q=ht(f),Q.c(),b(Q,1),Q.m(g,k)):Q&&(ae(),C(Q,1,1,()=>{Q=null}),se());const ee={};v&2&&(ee.model=f[1].model),v&32&&(ee.pinModelHandler=f[5]),v&2&&(ee.copyLinkHandler=f[14]),v&1048960&&(ee.$$scope={dirty:v,ctx:f}),!V&&v&128&&(V=!0,ee.show=f[7],Ge(()=>V=!1)),E.$set(ee),f[3]===f[1].value?x?v&10&&b(x,1):(x=pt(),x.c(),b(x,1),x.m(g,null)):x&&(ae(),C(x,1,1,()=>{x=null}),se()),(!h||v&2&&j!==(j=f[1].label))&&m(e,"aria-label",j),(!h||v&5&&N!==(N="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted "+(f[2]===f[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&m(e,"class",N),(!h||v&5&&Y!==(Y=f[2]===f[0]))&&m(e,"data-arrow-selected",Y),(!h||v&2&&J!==(J=f[1].value))&&m(e,"data-value",J)},i(f){h||(b(r.$$.fragment,f),b(i.$$.fragment,f),b(w),b(G),b(p),b(X),b(Q),b(E.$$.fragment,f),b(x),h=!0)},o(f){C(r.$$.fragment,f),C(i.$$.fragment,f),C(w),C(G),C(p),C(X),C(Q),C(E.$$.fragment,f),C(x),h=!1},d(f){f&&_(e),R(r),R(i),w&&w.d(),G&&G.d(),~$&&me[$].d(),X&&X.d(),Q&&Q.d(),R(E),x&&x.d(),y=!1,Z()}}}const gt=(o,e)=>o.name.localeCompare(e.name);function Xl(o,e,l){let t,n;pe(o,Yt,E=>l(9,n=E));const r=Ke("i18n");pe(o,r,E=>l(8,t=E));let{selectedModelIdx:a=-1}=e,{item:s={}}=e,{index:i=-1}=e,{value:u=""}=e,{unloadModelHandler:c=()=>{}}=e,{pinModelHandler:d=()=>{}}=e,{onClick:D=()=>{}}=e;const $=async E=>{const V=window.location.origin;await xt(`${V}/?model=${encodeURIComponent(E.id)}`)?de.success(t.t("Copied link to clipboard")):de.error(t.t("Failed to copy link"))};let p=!1;const I=E=>{E.preventDefault(),E.stopPropagation(),c(s.value)},M=E=>{E.preventDefault(),E.stopPropagation(),l(7,p=!p)},g=()=>{$(s.model)};function S(E){p=E,l(7,p)}const k=()=>{D()};return o.$$set=E=>{"selectedModelIdx"in E&&l(0,a=E.selectedModelIdx),"item"in E&&l(1,s=E.item),"index"in E&&l(2,i=E.index),"value"in E&&l(3,u=E.value),"unloadModelHandler"in E&&l(4,c=E.unloadModelHandler),"pinModelHandler"in E&&l(5,d=E.pinModelHandler),"onClick"in E&&l(6,D=E.onClick)},[a,s,i,u,c,d,D,p,t,n,r,$,I,M,g,S,k]}class Ql extends ye{constructor(e){super(),De(this,e,Xl,Jl,we,{selectedModelIdx:0,item:1,index:2,value:3,unloadModelHandler:4,pinModelHandler:5,onClick:6})}}function vt(o,e,l){const t=o.slice();return t[48]=e[l],t}function bt(o,e,l){const t=o.slice();return t[51]=e[l],t[53]=l,t}function wt(o,e,l){const t=o.slice();return t[54]=e[l],t}function xl(o){let e;return{c(){e=te(o[2])},l(l){e=le(l,o[2])},m(l,t){O(l,e,t)},p(l,t){t[0]&4&&ne(e,l[2])},d(l){l&&_(e)}}}function en(o){let e=o[15].label+"",l;return{c(){l=te(e)},l(t){l=le(t,e)},m(t,n){O(t,l,n)},p(t,n){n[0]&32768&&e!==(e=t[15].label+"")&&ne(l,e)},d(t){t&&_(l)}}}function tn(o){let e,l,t,n,r,a,s;function i(d,D){return d[15]?en:xl}let u=i(o),c=u(o);return t=new ul({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=T("div"),c.c(),l=A(),W(t.$$.fragment),this.h()},l(d){e=z(d,"DIV",{class:!0});var D=L(e);c.l(D),l=U(D),F(t.$$.fragment,D),D.forEach(_),this.h()},h(){var d;m(e,"class",n="flex w-full text-left px-0.5 bg-transparent truncate "+o[7]+" justify-between "+(((d=o[19])==null?void 0:d.highContrastMode)??!1?"dark:placeholder-gray-100 placeholder-gray-800":"placeholder-gray-400"))},m(d,D){O(d,e,D),c.m(e,null),H(e,l),q(t,e,null),r=!0,a||(s=fe(e,"mouseenter",o[31]),a=!0)},p(d,D){var $;u===(u=i(d))&&c?c.p(d,D):(c.d(1),c=u(d),c&&(c.c(),c.m(e,l))),(!r||D[0]&524416&&n!==(n="flex w-full text-left px-0.5 bg-transparent truncate "+d[7]+" justify-between "+((($=d[19])==null?void 0:$.highContrastMode)??!1?"dark:placeholder-gray-100 placeholder-gray-800":"placeholder-gray-400")))&&m(e,"class",n)},i(d){r||(b(t.$$.fragment,d),r=!0)},o(d){C(t.$$.fragment,d),r=!1},d(d){d&&_(e),c.d(),R(t),a=!1,s()}}}function kt(o){let e,l,t,n,r,a,s,i;return l=new cl({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=T("div"),W(l.$$.fragment),t=A(),n=T("input"),this.h()},l(u){e=z(u,"DIV",{class:!0});var c=L(e);F(l.$$.fragment,c),t=U(c),n=z(c,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0,"aria-label":!0}),c.forEach(_),this.h()},h(){m(n,"id","model-search-input"),m(n,"class","w-full text-sm bg-transparent outline-hidden"),m(n,"placeholder",o[4]),m(n,"autocomplete","off"),m(n,"aria-label",r=o[21].t("Search In Models")),m(e,"class","flex items-center gap-2.5 px-4.5 mt-3.5 mb-1.5")},m(u,c){O(u,e,c),q(l,e,null),H(e,t),H(e,n),lt(n,o[9]),a=!0,s||(i=[fe(n,"input",o[32]),fe(n,"keydown",o[33])],s=!0)},p(u,c){(!a||c[0]&16)&&m(n,"placeholder",u[4]),(!a||c[0]&2097152&&r!==(r=u[21].t("Search In Models")))&&m(n,"aria-label",r),c[0]&512&&n.value!==u[9]&&lt(n,u[9])},i(u){a||(b(l.$$.fragment,u),a=!0)},o(u){C(l.$$.fragment,u),a=!1},d(u){u&&_(e),R(l),s=!1,Qt(i)}}}function $t(o){let e,l,t=o[5].find(Bt)||o[5].find(Pt)||o[5].find(jt)||o[14].length>0,n,r=o[5].find(St),a,s=o[5].find(Lt),i,u=o[5].find(zt),c,d,D,$=t&&Mt(o),p=r&&Et(o),I=s&&yt(o),M=u&&Dt(o),g=ge(o[14]),S=[];for(let k=0;k<g.length;k+=1)S[k]=Ct(wt(o,g,k));return{c(){e=T("div"),l=T("div"),$&&$.c(),n=A(),p&&p.c(),a=A(),I&&I.c(),i=A(),M&&M.c(),c=A();for(let k=0;k<S.length;k+=1)S[k].c();this.h()},l(k){e=z(k,"DIV",{class:!0});var E=L(e);l=z(E,"DIV",{class:!0});var V=L(l);$&&$.l(V),n=U(V),p&&p.l(V),a=U(V),I&&I.l(V),i=U(V),M&&M.l(V),c=U(V);for(let B=0;B<S.length;B+=1)S[B].l(V);V.forEach(_),E.forEach(_),this.h()},h(){m(l,"class","flex gap-1 w-fit text-center text-sm rounded-full bg-transparent px-1.5"),m(e,"class","flex w-full bg-white dark:bg-gray-850 overflow-x-auto scrollbar-none font-[450] mb-0.5")},m(k,E){O(k,e,E),H(e,l),$&&$.m(l,null),H(l,n),p&&p.m(l,null),H(l,a),I&&I.m(l,null),H(l,i),M&&M.m(l,null),H(l,c);for(let V=0;V<S.length;V+=1)S[V]&&S[V].m(l,null);o[39](l),d||(D=fe(e,"wheel",fn),d=!0)},p(k,E){if(E[0]&16416&&(t=k[5].find(Bt)||k[5].find(Pt)||k[5].find(jt)||k[14].length>0),t?$?$.p(k,E):($=Mt(k),$.c(),$.m(l,n)):$&&($.d(1),$=null),E[0]&32&&(r=k[5].find(St)),r?p?p.p(k,E):(p=Et(k),p.c(),p.m(l,a)):p&&(p.d(1),p=null),E[0]&32&&(s=k[5].find(Lt)),s?I?I.p(k,E):(I=yt(k),I.c(),I.m(l,i)):I&&(I.d(1),I=null),E[0]&32&&(u=k[5].find(zt)),u?M?M.p(k,E):(M=Dt(k),M.c(),M.m(l,c)):M&&(M.d(1),M=null),E[0]&19456){g=ge(k[14]);let V;for(V=0;V<g.length;V+=1){const B=wt(k,g,V);S[V]?S[V].p(B,E):(S[V]=Ct(B),S[V].c(),S[V].m(l,null))}for(;V<S.length;V+=1)S[V].d(1);S.length=g.length}},d(k){k&&_(e),$&&$.d(),p&&p.d(),I&&I.d(),M&&M.d(),Ae(S,k),o[39](null),d=!1,D()}}}function Mt(o){let e,l=o[21].t("All")+"",t,n,r,a,s;return{c(){e=T("button"),t=te(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=le(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[10]===""&&o[11]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[10]===""&&o[11]==="")},m(i,u){O(i,e,u),H(e,t),a||(s=fe(e,"click",o[34]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("All")+"")&&ne(t,l),u[0]&3072&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[10]===""&&i[11]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&3072&&r!==(r=i[10]===""&&i[11]==="")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Et(o){let e,l=o[21].t("Local")+"",t,n,r,a,s;return{c(){e=T("button"),t=te(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=le(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[11]==="local")},m(i,u){O(i,e,u),H(e,t),a||(s=fe(e,"click",o[35]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("Local")+"")&&ne(t,l),u[0]&2048&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[11]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&2048&&r!==(r=i[11]==="local")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function yt(o){let e,l=o[21].t("External")+"",t,n,r,a,s;return{c(){e=T("button"),t=te(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=le(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[11]==="external")},m(i,u){O(i,e,u),H(e,t),a||(s=fe(e,"click",o[36]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("External")+"")&&ne(t,l),u[0]&2048&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[11]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&2048&&r!==(r=i[11]==="external")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Dt(o){let e,l=o[21].t("Direct")+"",t,n,r,a,s;return{c(){e=T("button"),t=te(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=le(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[11]==="direct")},m(i,u){O(i,e,u),H(e,t),a||(s=fe(e,"click",o[37]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("Direct")+"")&&ne(t,l),u[0]&2048&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[11]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&2048&&r!==(r=i[11]==="direct")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Ct(o){let e,l=o[54]+"",t,n,r,a,s,i;function u(){return o[38](o[54])}return{c(){e=T("button"),t=te(l),n=A(),this.h()},l(c){e=z(c,"BUTTON",{class:!0,"aria-pressed":!0});var d=L(e);t=le(d,l),n=U(d),d.forEach(_),this.h()},h(){m(e,"class",r="min-w-fit outline-none px-1.5 py-0.5 "+(o[10]===o[54]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",a=o[10]===o[54])},m(c,d){O(c,e,d),H(e,t),H(e,n),s||(i=fe(e,"click",u),s=!0)},p(c,d){o=c,d[0]&16384&&l!==(l=o[54]+"")&&ne(t,l),d[0]&17408&&r!==(r="min-w-fit outline-none px-1.5 py-0.5 "+(o[10]===o[54]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",r),d[0]&17408&&a!==(a=o[10]===o[54])&&m(e,"aria-pressed",a)},d(c){c&&_(e),s=!1,i()}}}function It(o){let e,l,t=o[21].t("No results found")+"",n;return{c(){e=T("div"),l=T("div"),n=te(t),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);l=z(a,"DIV",{class:!0});var s=L(l);n=le(s,t),s.forEach(_),a.forEach(_),this.h()},h(){m(l,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100"),m(e,"class","")},m(r,a){O(r,e,a),H(e,l),H(l,n)},p(r,a){a[0]&2097152&&t!==(t=r[21].t("No results found")+"")&&ne(n,t)},d(r){r&&_(e)}}}function Nt(o){let e,l;function t(){return o[40](o[51],o[53])}return e=new Ql({props:{selectedModelIdx:o[17],item:o[51],index:o[53],value:o[0],pinModelHandler:o[8],unloadModelHandler:o[29],onClick:t}}),{c(){W(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){q(e,n,r),l=!0},p(n,r){o=n;const a={};r[0]&131072&&(a.selectedModelIdx=o[17]),r[0]&262144&&(a.item=o[51]),r[0]&1&&(a.value=o[0]),r[0]&256&&(a.pinModelHandler=o[8]),r[0]&401409&&(a.onClick=t),e.$set(a)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function Vt(o){let e,l;return e=new ce({props:{content:o[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[9]}),placement:"top-start",$$slots:{default:[ln]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const r={};n[0]&2097664&&(r.content=t[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:t[9]})),n[0]&2097664|n[1]&16384&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ln(o){let e,l,t=o[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[9]})+"",n,r,a;return{c(){e=T("button"),l=T("div"),n=te(t),this.h()},l(s){e=z(s,"BUTTON",{class:!0});var i=L(e);l=z(i,"DIV",{class:!0});var u=L(l);n=le(u,t),u.forEach(_),i.forEach(_),this.h()},h(){m(l,"class","truncate"),m(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted")},m(s,i){O(s,e,i),H(e,l),H(l,n),r||(a=fe(e,"click",o[41]),r=!0)},p(s,i){i[0]&2097664&&t!==(t=s[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:s[9]})+"")&&ne(n,t)},d(s){s&&_(e),r=!1,a()}}}function Ht(o){let e,l=o[22][o[48]].digest+"",t;return{c(){e=T("div"),t=te(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);t=le(r,l),r.forEach(_),this.h()},h(){m(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(n,r){O(n,e,r),H(e,t)},p(n,r){r[0]&4194304&&l!==(l=n[22][n[48]].digest+"")&&ne(t,l)},d(n){n&&_(e)}}}function nn(o){let e,l='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',t,n;function r(){return o[42](o[48])}return{c(){e=T("button"),e.innerHTML=l,this.h()},l(a){e=z(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-19bzgft"&&(e.innerHTML=l),this.h()},h(){m(e,"class","text-gray-800 dark:text-gray-100")},m(a,s){O(a,e,s),t||(n=fe(e,"click",r),t=!0)},p(a,s){o=a},d(a){a&&_(e),t=!1,n()}}}function Ot(o){let e,l,t,n,r,a,s,i,u,c=o[48]+"",d,D,$,p,I="pullProgress"in o[22][o[48]]?`(${o[22][o[48]].pullProgress}%)`:"",M,g,S,k,E,V,B;n=new nl({});let j="digest"in o[22][o[48]]&&o[22][o[48]].digest&&Ht(o);return E=new ce({props:{content:o[21].t("Cancel"),$$slots:{default:[nn]},$$scope:{ctx:o}}}),{c(){e=T("div"),l=T("div"),t=T("div"),W(n.$$.fragment),r=A(),a=T("div"),s=T("div"),i=T("div"),u=te('Downloading "'),d=te(c),D=te('"'),$=A(),p=T("div"),M=te(I),g=A(),j&&j.c(),S=A(),k=T("div"),W(E.$$.fragment),V=A(),this.h()},l(N){e=z(N,"DIV",{class:!0});var Y=L(e);l=z(Y,"DIV",{class:!0});var J=L(l);t=z(J,"DIV",{class:!0});var h=L(t);F(n.$$.fragment,h),h.forEach(_),r=U(J),a=z(J,"DIV",{class:!0});var y=L(a);s=z(y,"DIV",{class:!0});var Z=L(s);i=z(Z,"DIV",{class:!0});var w=L(i);u=le(w,'Downloading "'),d=le(w,c),D=le(w,'"'),w.forEach(_),$=U(Z),p=z(Z,"DIV",{class:!0});var G=L(p);M=le(G,I),G.forEach(_),Z.forEach(_),g=U(y),j&&j.l(y),y.forEach(_),J.forEach(_),S=U(Y),k=z(Y,"DIV",{class:!0});var he=L(k);F(E.$$.fragment,he),he.forEach(_),V=U(Y),Y.forEach(_),this.h()},h(){m(t,"class","mr-2.5 translate-y-0.5"),m(i,"class","line-clamp-1"),m(p,"class","shrink-0"),m(s,"class","flex gap-1"),m(a,"class","flex flex-col self-start"),m(l,"class","flex"),m(k,"class","mr-2 ml-1 translate-y-0.5"),m(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-xl cursor-pointer data-highlighted:bg-muted")},m(N,Y){O(N,e,Y),H(e,l),H(l,t),q(n,t,null),H(l,r),H(l,a),H(a,s),H(s,i),H(i,u),H(i,d),H(i,D),H(s,$),H(s,p),H(p,M),H(a,g),j&&j.m(a,null),H(e,S),H(e,k),q(E,k,null),H(e,V),B=!0},p(N,Y){(!B||Y[0]&4194304)&&c!==(c=N[48]+"")&&ne(d,c),(!B||Y[0]&4194304)&&I!==(I="pullProgress"in N[22][N[48]]?`(${N[22][N[48]].pullProgress}%)`:"")&&ne(M,I),"digest"in N[22][N[48]]&&N[22][N[48]].digest?j?j.p(N,Y):(j=Ht(N),j.c(),j.m(a,null)):j&&(j.d(1),j=null);const J={};Y[0]&2097152&&(J.content=N[21].t("Cancel")),Y[0]&4194304|Y[1]&16384&&(J.$$scope={dirty:Y,ctx:N}),E.$set(J)},i(N){B||(b(n.$$.fragment,N),b(E.$$.fragment,N),B=!0)},o(N){C(n.$$.fragment,N),C(E.$$.fragment,N),B=!1},d(N){N&&_(e),R(n),j&&j.d(),R(E)}}}function rn(o){var J;let e,l,t=o[14]&&o[5].filter(Tt).length>0,n,r,a,s=!(o[9].trim()in o[22])&&o[9]&&o[16]&&((J=o[24])==null?void 0:J.role)==="admin",i,u,c,d,D,$,p,I,M=o[3]&&kt(o),g=t&&$t(o),S=ge(o[18]),k=[];for(let h=0;h<S.length;h+=1)k[h]=Nt(bt(o,S,h));const E=h=>C(k[h],1,1,()=>{k[h]=null});let V=null;S.length||(V=It(o));let B=s&&Vt(o),j=ge(Object.keys(o[22])),N=[];for(let h=0;h<j.length;h+=1)N[h]=Ot(vt(o,j,h));const Y=h=>C(N[h],1,1,()=>{N[h]=null});return{c(){M&&M.c(),e=A(),l=T("div"),g&&g.c(),n=A(),r=T("div");for(let h=0;h<k.length;h+=1)k[h].c();V&&V.c(),a=A(),B&&B.c(),i=A();for(let h=0;h<N.length;h+=1)N[h].c();u=A(),c=T("div"),d=A(),D=T("div"),$=A(),p=T("div"),this.h()},l(h){M&&M.l(h),e=U(h),l=z(h,"DIV",{class:!0});var y=L(l);g&&g.l(y),y.forEach(_),n=U(h),r=z(h,"DIV",{class:!0});var Z=L(r);for(let w=0;w<k.length;w+=1)k[w].l(Z);V&&V.l(Z),a=U(Z),B&&B.l(Z),i=U(Z);for(let w=0;w<N.length;w+=1)N[w].l(Z);Z.forEach(_),u=U(h),c=z(h,"DIV",{class:!0}),L(c).forEach(_),d=U(h),D=z(h,"DIV",{class:!0}),L(D).forEach(_),$=U(h),p=z(h,"DIV",{class:!0}),L(p).forEach(_),this.h()},h(){m(l,"class","px-2"),m(r,"class","px-2.5 max-h-64 overflow-y-auto group relative"),m(c,"class","mb-2.5"),m(D,"class","hidden w-[42rem]"),m(p,"class","hidden w-[32rem]")},m(h,y){M&&M.m(h,y),O(h,e,y),O(h,l,y),g&&g.m(l,null),O(h,n,y),O(h,r,y);for(let Z=0;Z<k.length;Z+=1)k[Z]&&k[Z].m(r,null);V&&V.m(r,null),H(r,a),B&&B.m(r,null),H(r,i);for(let Z=0;Z<N.length;Z+=1)N[Z]&&N[Z].m(r,null);O(h,u,y),O(h,c,y),O(h,d,y),O(h,D,y),O(h,$,y),O(h,p,y),I=!0},p(h,y){var Z;if(h[3]?M?(M.p(h,y),y[0]&8&&b(M,1)):(M=kt(h),M.c(),b(M,1),M.m(e.parentNode,e)):M&&(ae(),C(M,1,1,()=>{M=null}),se()),y[0]&16416&&(t=h[14]&&h[5].filter(Tt).length>0),t?g?g.p(h,y):(g=$t(h),g.c(),g.m(l,null)):g&&(g.d(1),g=null),y[0]&539369729){S=ge(h[18]);let w;for(w=0;w<S.length;w+=1){const G=bt(h,S,w);k[w]?(k[w].p(G,y),b(k[w],1)):(k[w]=Nt(G),k[w].c(),b(k[w],1),k[w].m(r,a))}for(ae(),w=S.length;w<k.length;w+=1)E(w);se(),!S.length&&V?V.p(h,y):S.length?V&&(V.d(1),V=null):(V=It(h),V.c(),V.m(r,a))}if(y[0]&21037568&&(s=!(h[9].trim()in h[22])&&h[9]&&h[16]&&((Z=h[24])==null?void 0:Z.role)==="admin"),s?B?(B.p(h,y),y[0]&21037568&&b(B,1)):(B=Vt(h),B.c(),b(B,1),B.m(r,i)):B&&(ae(),C(B,1,1,()=>{B=null}),se()),y[0]&274726912){j=ge(Object.keys(h[22]));let w;for(w=0;w<j.length;w+=1){const G=vt(h,j,w);N[w]?(N[w].p(G,y),b(N[w],1)):(N[w]=Ot(G),N[w].c(),b(N[w],1),N[w].m(r,null))}for(ae(),w=j.length;w<N.length;w+=1)Y(w);se()}},i(h){if(!I){b(M);for(let y=0;y<S.length;y+=1)b(k[y]);b(B);for(let y=0;y<j.length;y+=1)b(N[y]);I=!0}},o(h){C(M),k=k.filter(Boolean);for(let y=0;y<k.length;y+=1)C(k[y]);C(B),N=N.filter(Boolean);for(let y=0;y<N.length;y+=1)C(N[y]);I=!1},d(h){h&&(_(e),_(l),_(n),_(r),_(u),_(c),_(d),_(D),_($),_(p)),M&&M.d(h),g&&g.d(),Ae(k,h),V&&V.d(),B&&B.d(),Ae(N,h)}}}function on(o){let e;const l=o[30].default,t=At(l,o,o[45],null),n=t||rn(o);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,a){n&&n.m(r,a),e=!0},p(r,a){t?t.p&&(!e||a[1]&16384)&&Ut(t,l,r,r[45],e?Ft(l,r[45],a,null):Wt(r[45]),null):n&&n.p&&(!e||a[0]&23559993)&&n.p(r,e?a:[-1,-1])},i(r){e||(b(n,r),e=!0)},o(r){C(n,r),e=!1},d(r){n&&n.d(r)}}}function an(o){var r;let e,l,t,n;return e=new Rt({props:{class:"relative w-full "+(((r=o[19])==null?void 0:r.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden"),"aria-label":o[2],id:"model-selector-"+o[1]+"-button",$$slots:{default:[tn]},$$scope:{ctx:o}}}),t=new Zt({props:{class:" z-40 "+(o[23]?"w-full":`${o[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-2xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Gt,side:o[23]?"bottom":"bottom-start",sideOffset:2,alignOffset:-1,$$slots:{default:[on]},$$scope:{ctx:o}}}),{c(){W(e.$$.fragment),l=A(),W(t.$$.fragment)},l(a){F(e.$$.fragment,a),l=U(a),F(t.$$.fragment,a)},m(a,s){q(e,a,s),O(a,l,s),q(t,a,s),n=!0},p(a,s){var c;const i={};s[0]&524288&&(i.class="relative w-full "+(((c=a[19])==null?void 0:c.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden")),s[0]&4&&(i["aria-label"]=a[2]),s[0]&2&&(i.id="model-selector-"+a[1]+"-button"),s[0]&1605764|s[1]&16384&&(i.$$scope={dirty:s,ctx:a}),e.$set(i);const u={};s[0]&8388672&&(u.class=" z-40 "+(a[23]?"w-full":`${a[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-2xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),s[0]&8388608&&(u.side=a[23]?"bottom":"bottom-start"),s[0]&23559993|s[1]&16384&&(u.$$scope={dirty:s,ctx:a}),t.$set(u)},i(a){n||(b(e.$$.fragment,a),b(t.$$.fragment,a),n=!0)},o(a){C(e.$$.fragment,a),C(t.$$.fragment,a),n=!1},d(a){a&&_(l),R(e,a),R(t,a)}}}function sn(o){let e,l,t;function n(a){o[44](a)}let r={onOpenChange:o[43],closeFocus:!1,$$slots:{default:[an]},$$scope:{ctx:o}};return o[13]!==void 0&&(r.open=o[13]),e=new qt({props:r}),Ue.push(()=>Ze(e,"open",n)),{c(){W(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,s){q(e,a,s),t=!0},p(a,s){const i={};s[0]&512&&(i.onOpenChange=a[43]),s[0]&33554431|s[1]&16384&&(i.$$scope={dirty:s,ctx:a}),!l&&s[0]&8192&&(l=!0,i.open=a[13],Ge(()=>l=!1)),e.$set(i)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){C(e.$$.fragment,a),t=!1},d(a){R(e,a)}}}const Tt=o=>{var e,l,t;return!(((t=(l=(e=o.model)==null?void 0:e.info)==null?void 0:l.meta)==null?void 0:t.hidden)??!1)},zt=o=>{var e;return(e=o.model)==null?void 0:e.direct},Lt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},St=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},Bt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},Pt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},jt=o=>{var e;return(e=o.model)==null?void 0:e.direct},fn=o=>{o.deltaY!==0&&(o.preventDefault(),o.currentTarget.scrollLeft+=o.deltaY)};function un(o,e,l){let t,n,r,a,s,i,u;pe(o,Kt,f=>l(19,n=f)),pe(o,il,f=>l(20,r=f)),pe(o,be,f=>l(22,s=f)),pe(o,fl,f=>l(23,i=f)),pe(o,Yt,f=>l(24,u=f));let{$$slots:c={},$$scope:d}=e;Re.extend(ll);const D=Ke("i18n");pe(o,D,f=>l(21,a=f)),Jt();let{id:$=""}=e,{value:p=""}=e,{placeholder:I=a.t("Select a model")}=e,{searchEnabled:M=!0}=e,{searchPlaceholder:g=a.t("Search a model")}=e,{items:S=[]}=e,{className:k="w-[32rem]"}=e,{triggerClassName:E="text-lg"}=e,{pinModelHandler:V=()=>{}}=e,B,j=!1,N=[],Y="",J="",h="",y="",Z=null,w=0;const G=new tl(S.map(f=>{var P,K,ie,ee,re;return{...f,modelName:(P=f.model)==null?void 0:P.name,tags:(((K=f.model)==null?void 0:K.tags)??[]).map(ue=>ue.name).join(" "),desc:(re=(ee=(ie=f.model)==null?void 0:ie.info)==null?void 0:ee.meta)==null?void 0:re.description}}),{keys:["value","tags","modelName"],threshold:.4}),he=async()=>{await tt();const f=t.findIndex(P=>P.value===p);f>=0?l(17,w=f):l(17,w=0),await tt();const v=document.querySelector('[data-arrow-selected="true"]');v==null||v.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},me=async()=>{var K;const f=J.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(s[f]){de.error(a.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:f}));return}if(Object.keys(s).length===3){de.error(a.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[v,P]=await ol(localStorage.token,f,"0").catch(ie=>(de.error(`${ie}`),null));if(v){const ie=v.body.pipeThrough(new TextDecoderStream).pipeThrough(el(`
`)).getReader();for(be.set({...s,[f]:{...s[f],abortController:P,reader:ie,done:!1}});;)try{const{value:ee,done:re}=await ie.read();if(re)break;let ue=ee.split(`
`);for(const $e of ue)if($e!==""){let oe=JSON.parse($e);if(oe.error)throw oe.error;if(oe.detail)throw oe.detail;if(oe.status)if(oe.digest){let ve=0;oe.completed?ve=Math.round(oe.completed/oe.total*1e3)/10:ve=100,be.set({...s,[f]:{...s[f],pullProgress:ve,digest:oe.digest}})}else de.success(oe.status),be.set({...s,[f]:{...s[f],done:oe.status==="success"}})}}catch(ee){typeof ee!="string"&&(ee=ee.message),de.error(`${ee}`);break}s[f].done?(de.success(a.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:f})),Fe.set(await qe(localStorage.token,((K=r==null?void 0:r.features)==null?void 0:K.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))):de.error(a.t("Download canceled")),delete s[f],be.set({...s})}};Xt(async()=>{l(16,Z=await rl(localStorage.token).catch(f=>!1)),S&&(l(14,N=S.filter(f=>{var v,P,K;return!(((K=(P=(v=f.model)==null?void 0:v.info)==null?void 0:P.meta)==null?void 0:K.hidden)??!1)}).flatMap(f=>{var v;return((v=f.model)==null?void 0:v.tags)??[]}).map(f=>f.name)),l(14,N=Array.from(new Set(N)).sort((f,v)=>f.localeCompare(v))))});const ke=async f=>{const{reader:v,abortController:P}=s[f];P&&P.abort(),v&&(await v.cancel(),delete s[f],be.set({...s}),await al(localStorage.token,f),de.success(a.t("{{model}} download has been canceled",{model:f})))},X=async f=>{var P;await sl(localStorage.token,f).catch(K=>{de.error(a.t("Error unloading model: {{error}}",{error:K}))})&&(de.success(a.t("Model unloaded successfully")),Fe.set(await qe(localStorage.token,((P=r==null?void 0:r.features)==null?void 0:P.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null))))},Q=async()=>{var f;Fe.set(await qe(localStorage.token,((f=r==null?void 0:r.features)==null?void 0:f.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))};function We(){J=this.value,l(9,J)}const Ie=f=>{if(f.code==="Enter"&&t.length>0){l(0,p=t[w].value),l(13,j=!1);return}else f.code==="ArrowDown"?(f.stopPropagation(),l(17,w=Math.min(w+1,t.length-1))):f.code==="ArrowUp"?(f.stopPropagation(),l(17,w=Math.max(w-1,0))):l(17,w=0);const v=document.querySelector('[data-arrow-selected="true"]');v==null||v.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},x=()=>{l(11,y=""),l(10,h="")},Ne=()=>{l(10,h=""),l(11,y="local")},Ve=()=>{l(10,h=""),l(11,y="external")},He=()=>{l(10,h=""),l(11,y="direct")},Oe=f=>{l(11,y=""),l(10,h=f)};function Te(f){Ue[f?"unshift":"push"](()=>{B=f,l(12,B)})}const ze=(f,v)=>{l(0,p=f.value),l(17,w=v),l(13,j=!1)},Le=()=>{me()},Se=f=>{ke(f)},Be=async()=>{l(9,J=""),window.setTimeout(()=>{var f;return(f=document.getElementById("model-search-input"))==null?void 0:f.focus()},0),he()};function Pe(f){j=f,l(13,j)}return o.$$set=f=>{"id"in f&&l(1,$=f.id),"value"in f&&l(0,p=f.value),"placeholder"in f&&l(2,I=f.placeholder),"searchEnabled"in f&&l(3,M=f.searchEnabled),"searchPlaceholder"in f&&l(4,g=f.searchPlaceholder),"items"in f&&l(5,S=f.items),"className"in f&&l(6,k=f.className),"triggerClassName"in f&&l(7,E=f.triggerClassName),"pinModelHandler"in f&&l(8,V=f.pinModelHandler),"$$scope"in f&&l(45,d=f.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&33&&l(15,Y=S.find(f=>f.value===p)??""),o.$$.dirty[0]&3616&&l(18,t=(J?G.search(J).map(f=>f.item).filter(f=>{var v;return h===""?!0:(((v=f.model)==null?void 0:v.tags)??[]).map(P=>P.name).includes(h)}).filter(f=>{var v,P,K;if(y==="")return!0;if(y==="local")return((v=f.model)==null?void 0:v.connection_type)==="local";if(y==="external")return((P=f.model)==null?void 0:P.connection_type)==="external";if(y==="direct")return(K=f.model)==null?void 0:K.direct}):S.filter(f=>{var v;return h===""?!0:(((v=f.model)==null?void 0:v.tags)??[]).map(P=>P.name).includes(h)}).filter(f=>{var v,P,K;if(y==="")return!0;if(y==="local")return((v=f.model)==null?void 0:v.connection_type)==="local";if(y==="external")return((P=f.model)==null?void 0:P.connection_type)==="external";if(y==="direct")return(K=f.model)==null?void 0:K.direct})).filter(f=>{var v,P,K;return!(((K=(P=(v=f.model)==null?void 0:v.info)==null?void 0:P.meta)==null?void 0:K.hidden)??!1)})),o.$$.dirty[0]&3072&&he()},[p,$,I,M,g,S,k,E,V,J,h,y,B,j,N,Y,Z,w,t,n,r,a,s,i,u,D,he,me,ke,X,c,Q,We,Ie,x,Ne,Ve,He,Oe,Te,ze,Le,Se,Be,Pe,d]}class Ln extends ye{constructor(e){super(),De(this,e,un,sn,we,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,items:5,className:6,triggerClassName:7,pinModelHandler:8},null,[-1,-1])}}export{Ln as S};
//# sourceMappingURL=DR2JaD-t.js.map

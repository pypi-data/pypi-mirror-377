const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/h22AL3a0.js","../chunks/C1FmrZbK.js","../chunks/QjJsDpFa.js"])))=>i.map(i=>d[i]);
import{S as Be,i as Ae,s as We,W as Se,X as ze,a as b,d as u,f as c,g as z,h as w,n as ae,m as tt,y as Je,r as C,u as Ye,q as N,w as yt,_ as mn,H as pe,I as ke,C as B,l as Y,D as A,p as q,E as W,K as Ee,F as U,e as I,c as $,x as gt,z as _t,A as pt,B as vt,t as ue,b as de,L as ct,T as hn,$ as Ct,G as me,j as ve,a0 as wt,O as ut,k as Re,v as dt,a1 as gn,N as ls,M as rt,J as os,P as rs,o as as}from"../chunks/G5mHU2ZO.js";import"../chunks/IHki7fMi.js";import{p as is}from"../chunks/BWEezxAV.js";import{d as Bt,e as zt,r as fs,c as cs,a as us,W as ds,m as ms,s as Vt,u as hs,g as gs}from"../chunks/Bf22bvAJ.js";import{_ as At}from"../chunks/C1FmrZbK.js";import{g as _s}from"../chunks/D0QH3NT1.js";import{f as ps}from"../chunks/DJe0zG-O.js";import{m as Ot,i as _n,v as Wt,k as vs,f as Ut,w as ws}from"../chunks/Ck_mPZiz.js";import{t as ye}from"../chunks/BLy842NA.js";import{g as jt}from"../chunks/Bk82nkIB.js";import{d as He,r as bs}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{P as ks,c as Es}from"../chunks/CQ6PdODF.js";import{d as Is}from"../chunks/BQWQRICs.js";import{d as $s,c as pn,P as Ns}from"../chunks/BI6mrJiD.js";import{F as Cs,u as Ds}from"../chunks/BLKxGraN.js";import{c as vn,g as Ts}from"../chunks/CDuVIMJ0.js";import{D as Ms,R as Ss,V as zs}from"../chunks/DrnjVoUR.js";import{e as et}from"../chunks/Bno_0ZUi.js";import{X as wn}from"../chunks/CGPqWpxc.js";import{I as Vs,M as Os}from"../chunks/CJ2zt8ZP.js";import"../chunks/BFmuJLeH.js";import"../chunks/DJ_9eQT6.js";import{S as ys}from"../chunks/CJLQ23NZ.js";import{P as Bs}from"../chunks/DNShH5W1.js";import{T as As}from"../chunks/CzR6yjHk.js";import{T as Ze}from"../chunks/BOU1-HoI.js";import{M as Ws}from"../chunks/qkXMBjp5.js";import{A as Us}from"../chunks/DBG97xPh.js";import{b as js,u as Ps,d as Rs}from"../chunks/m1dP9bvT.js";import{S as bn}from"../chunks/DQCAYDYi.js";import{M as Hs}from"../chunks/CyCtds1a.js";import{C as Ls}from"../chunks/2iWpB1LN.js";import"../chunks/CvV1yQz2.js";import{F as Fs}from"../chunks/DxBA1Qqr.js";import{M as kn,a as En,b as In}from"../chunks/ezDYOw75.js";import{f as $n}from"../chunks/DhaxEZ_C.js";import{C as Js}from"../chunks/Eeabm2i0.js";import{N as Ys}from"../chunks/B34Kkw9F.js";import{E as qs}from"../chunks/Cos11Dic.js";import{S as Nn}from"../chunks/D44Gd9gL.js";import{S as Gs}from"../chunks/DKWVN9N5.js";function Zs(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"aria-hidden":!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"aria-hidden","true"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function Xs(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Cn extends Be{constructor(e){super(),Ae(this,e,Xs,Zs,We,{className:0,strokeWidth:1})}}function Qs(l){let e,t,n,s,o;e=new $s({props:{class:"relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850 hover:border-gray-200 dark:hover:border-gray-800  transition z-20",id:"controls-resizer",$$slots:{default:[xs]},$$scope:{ctx:l}}});function r(i){l[8](i)}let a={defaultSize:Math.max(20,l[3]),minSize:l[3],onCollapse:l[7],collapsible:!0,class:" z-10 ",$$slots:{default:[el]},$$scope:{ctx:l}};return l[1]!==void 0&&(a.pane=l[1]),n=new pn({props:a}),pe.push(()=>ke(n,"pane",r)),{c(){B(e.$$.fragment),t=Y(),B(n.$$.fragment)},l(i){A(e.$$.fragment,i),t=q(i),A(n.$$.fragment,i)},m(i,f){W(e,i,f),z(i,t,f),W(n,i,f),o=!0},p(i,f){const g={};f&512&&(g.$$scope={dirty:f,ctx:i}),e.$set(g);const v={};f&8&&(v.defaultSize=Math.max(20,i[3])),f&8&&(v.minSize=i[3]),f&1&&(v.onCollapse=i[7]),f&513&&(v.$$scope={dirty:f,ctx:i}),!s&&f&2&&(s=!0,v.pane=i[1],Ee(()=>s=!1)),n.$set(v)},i(i){o||(N(e.$$.fragment,i),N(n.$$.fragment,i),o=!0)},o(i){C(e.$$.fragment,i),C(n.$$.fragment,i),o=!1},d(i){i&&u(t),U(e,i),U(n,i)}}}function Ks(l){let e,t,n=l[0]&&Rt(l);return{c(){n&&n.c(),e=tt()},l(s){n&&n.l(s),e=tt()},m(s,o){n&&n.m(s,o),z(s,e,o),t=!0},p(s,o){s[0]?n?(n.p(s,o),o&1&&N(n,1)):(n=Rt(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Je(),C(n,1,1,()=>{n=null}),Ye())},i(s){t||(N(n),t=!0)},o(s){C(n),t=!1},d(s){s&&u(e),n&&n.d(s)}}}function xs(l){let e;return{c(){e=I("div"),this.h()},l(t){e=$(t,"DIV",{class:!0}),b(e).forEach(u),this.h()},h(){c(e,"class","absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent")},m(t,n){z(t,e,n)},p:ae,d(t){t&&u(e)}}}function Pt(l){let e,t,n;const s=l[5].default,o=gt(s,l,l[9],null);return{c(){e=I("div"),t=I("div"),o&&o.c(),this.h()},l(r){e=$(r,"DIV",{class:!0});var a=b(e);t=$(a,"DIV",{class:!0});var i=b(t);o&&o.l(i),i.forEach(u),a.forEach(u),this.h()},h(){c(t,"class","w-full pt-2 bg-white dark:shadow-lg dark:bg-gray-850 z-40 pointer-events-auto overflow-y-auto scrollbar-hidden flex flex-col"),c(e,"class","flex max-h-full min-h-full")},m(r,a){z(r,e,a),w(e,t),o&&o.m(t,null),n=!0},p(r,a){o&&o.p&&(!n||a&512)&&_t(o,s,r,r[9],n?vt(s,r[9],a,null):pt(r[9]),null)},i(r){n||(N(o,r),n=!0)},o(r){C(o,r),n=!1},d(r){r&&u(e),o&&o.d(r)}}}function el(l){let e,t,n=l[0]&&Pt(l);return{c(){n&&n.c(),e=tt()},l(s){n&&n.l(s),e=tt()},m(s,o){n&&n.m(s,o),z(s,e,o),t=!0},p(s,o){s[0]?n?(n.p(s,o),o&1&&N(n,1)):(n=Pt(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Je(),C(n,1,1,()=>{n=null}),Ye())},i(s){t||(N(n),t=!0)},o(s){C(n),t=!1},d(s){s&&u(e),n&&n.d(s)}}}function Rt(l){let e,t;return e=new Ms({props:{show:l[0],onClose:l[6],$$slots:{default:[tl]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.show=n[0]),s&1&&(o.onClose=n[6]),s&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function tl(l){let e,t;const n=l[5].default,s=gt(n,l,l[9],null);return{c(){e=I("div"),s&&s.c(),this.h()},l(o){e=$(o,"DIV",{class:!0});var r=b(e);s&&s.l(r),r.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2.5 h-screen max-h-dvh flex flex-col")},m(o,r){z(o,e,r),s&&s.m(e,null),t=!0},p(o,r){s&&s.p&&(!t||r&512)&&_t(s,n,o,o[9],t?vt(n,o[9],r,null):pt(o[9]),null)},i(o){t||(N(s,o),t=!0)},o(o){C(s,o),t=!1},d(o){o&&u(e),s&&s.d(o)}}}function nl(l){let e,t,n,s;const o=[Ks,Qs],r=[];function a(i,f){return i[2]?i[0]?1:-1:0}return~(e=a(l))&&(t=r[e]=o[e](l)),{c(){t&&t.c(),n=tt()},l(i){t&&t.l(i),n=tt()},m(i,f){~e&&r[e].m(i,f),z(i,n,f),s=!0},p(i,[f]){let g=e;e=a(i),e===g?~e&&r[e].p(i,f):(t&&(Je(),C(r[g],1,1,()=>{r[g]=null}),Ye()),~e?(t=r[e],t?t.p(i,f):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(i){s||(N(t),s=!0)},o(i){C(t),s=!1},d(i){i&&u(n),~e&&r[e].d(i)}}}function sl(l,e,t){let{$$slots:n={},$$scope:s}=e,{show:o=!1}=e,{pane:r=null}=e,{containerId:a="note-container"}=e,i,f=!1,g=0;const v=async p=>{p.matches?t(2,f=!0):(t(2,f=!1),t(1,r=null))};yt(()=>{i=window.matchMedia("(min-width: 1000px)"),i.addEventListener("change",v),v(i);const p=document.getElementById(a);t(3,g=Math.floor(400/p.clientWidth*100)),new ResizeObserver(m=>{for(let d of m){const V=400/d.contentRect.width*100;t(3,g=Math.floor(V)),o&&r&&r.isExpanded()&&r.getSize()<g&&r.resize(g)}}).observe(p)}),mn(()=>{i.removeEventListener("change",v)});const E=()=>{t(0,o=!1)},D=()=>{t(0,o=!1)};function T(p){r=p,t(1,r)}return l.$$set=p=>{"show"in p&&t(0,o=p.show),"pane"in p&&t(1,r=p.pane),"containerId"in p&&t(4,a=p.containerId),"$$scope"in p&&t(9,s=p.$$scope)},[o,r,f,g,a,n,E,D,T,s]}class ll extends Be{constructor(e){super(),Ae(this,e,sl,nl,We,{show:0,pane:1,containerId:4})}}function Ht(l,e,t){const n=l.slice();return n[12]=e[t],n}function Lt(l,e,t){const n=l.slice();return n[15]=e[t],n[17]=t,n}function Ft(l,e,t){const n=l.slice();return n[15]=e[t],n[17]=t,n}function Jt(l){let e,t=l[4].t("Files")+"",n,s,o,r,a,i,f,g,v=et(l[2].filter(Zt)),E=[];for(let m=0;m<v.length;m+=1)E[m]=Yt(Ft(l,v,m));const D=m=>C(E[m],1,1,()=>{E[m]=null});let T=et(l[2].filter(Xt)),p=[];for(let m=0;m<T.length;m+=1)p[m]=qt(Lt(l,T,m));const k=m=>C(p[m],1,1,()=>{p[m]=null});return{c(){e=I("div"),n=ue(t),s=Y(),o=I("div");for(let m=0;m<E.length;m+=1)E[m].c();r=Y(),a=I("div");for(let m=0;m<p.length;m+=1)p[m].c();i=Y(),f=I("hr"),this.h()},l(m){e=$(m,"DIV",{class:!0});var d=b(e);n=de(d,t),d.forEach(u),s=q(m),o=$(m,"DIV",{class:!0});var h=b(o);for(let S=0;S<E.length;S+=1)E[S].l(h);r=q(h),a=$(h,"DIV",{class:!0});var V=b(a);for(let S=0;S<p.length;S+=1)p[S].l(V);V.forEach(u),h.forEach(u),i=q(m),f=$(m,"HR",{class:!0}),this.h()},h(){c(e,"class","text-xs font-medium pb-1"),c(a,"class","flex items-center flex-wrap gap-2 mt-1.5"),c(o,"class","flex flex-col gap-1"),c(f,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(m,d){z(m,e,d),w(e,n),z(m,s,d),z(m,o,d);for(let h=0;h<E.length;h+=1)E[h]&&E[h].m(o,null);w(o,r),w(o,a);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(a,null);z(m,i,d),z(m,f,d),g=!0},p(m,d){if((!g||d&16)&&t!==(t=m[4].t("Files")+"")&&ve(n,t),d&12){v=et(m[2].filter(Zt));let h;for(h=0;h<v.length;h+=1){const V=Ft(m,v,h);E[h]?(E[h].p(V,d),N(E[h],1)):(E[h]=Yt(V),E[h].c(),N(E[h],1),E[h].m(o,r))}for(Je(),h=v.length;h<E.length;h+=1)D(h);Ye()}if(d&12){T=et(m[2].filter(Xt));let h;for(h=0;h<T.length;h+=1){const V=Lt(m,T,h);p[h]?(p[h].p(V,d),N(p[h],1)):(p[h]=qt(V),p[h].c(),N(p[h],1),p[h].m(a,null))}for(Je(),h=T.length;h<p.length;h+=1)k(h);Ye()}},i(m){if(!g){for(let d=0;d<v.length;d+=1)N(E[d]);for(let d=0;d<T.length;d+=1)N(p[d]);g=!0}},o(m){E=E.filter(Boolean);for(let d=0;d<E.length;d+=1)C(E[d]);p=p.filter(Boolean);for(let d=0;d<p.length;d+=1)C(p[d]);g=!1},d(m){m&&(u(e),u(s),u(o),u(i),u(f)),wt(E,m),wt(p,m)}}}function Yt(l){var o;let e,t;function n(){return l[8](l[15])}function s(){return l[9](l[15])}return e=new Cs({props:{className:"w-full",item:l[15],small:!0,edit:!0,dismissible:!0,url:l[15].url,name:l[15].name,type:l[15].type,size:(o=l[15])==null?void 0:o.size,loading:l[15].status==="uploading"}}),e.$on("dismiss",n),e.$on("click",s),{c(){B(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p(r,a){var f;l=r;const i={};a&4&&(i.item=l[15]),a&4&&(i.url=l[15].url),a&4&&(i.name=l[15].name),a&4&&(i.type=l[15].type),a&4&&(i.size=(f=l[15])==null?void 0:f.size),a&4&&(i.loading=l[15].status==="uploading"),e.$set(i)},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function qt(l){let e,t;function n(){return l[10](l[15])}return e=new Vs({props:{src:l[15].url,imageClassName:" size-14 rounded-xl object-cover",dismissible:!0,onDismiss:n}}),{c(){B(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,o){W(e,s,o),t=!0},p(s,o){l=s;const r={};o&4&&(r.src=l[15].url),o&12&&(r.onDismiss=n),e.$set(r)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Gt(l){let e,t=l[12].name+"",n,s;return{c(){e=I("option"),n=ue(t),this.h()},l(o){e=$(o,"OPTION",{class:!0});var r=b(e);n=de(r,t),r.forEach(u),this.h()},h(){e.__value=s=l[12].id,ct(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(o,r){z(o,e,r),w(e,n)},p(o,r){r&32&&t!==(t=o[12].name+"")&&ve(n,t),r&32&&s!==(s=o[12].id)&&(e.__value=s,ct(e,e.__value))},d(o){o&&u(e)}}}function ol(l){let e,t,n,s,o,r,a,i=l[4].t("Controls")+"",f,g,v,E,D,T,p=l[4].t("Model")+"",k,m,d,h,V,S=l[4].t("Select a model")+"",P,H,R,K,G;s=new wn({props:{className:"size-5",strokeWidth:"2.5"}});let j=l[2].length>0&&Jt(l),Q=et(l[5].filter(Qt)),te=[];for(let Z=0;Z<Q.length;Z+=1)te[Z]=Gt(Ht(l,Q,Z));return{c(){e=I("div"),t=I("div"),n=I("button"),B(s.$$.fragment),o=Y(),r=I("div"),a=I("div"),f=ue(i),g=Y(),v=I("div"),E=I("div"),j&&j.c(),D=Y(),T=I("div"),k=ue(p),m=Y(),d=I("div"),h=I("select"),V=I("option"),P=ue(S),H=Y();for(let Z=0;Z<te.length;Z+=1)te[Z].c();this.h()},l(Z){e=$(Z,"DIV",{class:!0});var le=b(e);t=$(le,"DIV",{class:!0});var se=b(t);n=$(se,"BUTTON",{class:!0});var oe=b(n);A(s.$$.fragment,oe),oe.forEach(u),se.forEach(u),o=q(le),r=$(le,"DIV",{class:!0});var Ue=b(r);a=$(Ue,"DIV",{});var je=b(a);f=de(je,i),je.forEach(u),Ue.forEach(u),le.forEach(u),g=q(Z),v=$(Z,"DIV",{class:!0});var J=b(v);E=$(J,"DIV",{class:!0});var X=b(E);j&&j.l(X),D=q(X),T=$(X,"DIV",{class:!0});var O=b(T);k=de(O,p),O.forEach(u),m=q(X),d=$(X,"DIV",{class:!0});var x=b(d);h=$(x,"SELECT",{class:!0});var re=b(h);V=$(re,"OPTION",{class:!0});var Ce=b(V);P=de(Ce,S),H=q(Ce),Ce.forEach(u);for(let he=0;he<te.length;he+=1)te[he].l(re);re.forEach(u),x.forEach(u),X.forEach(u),J.forEach(u),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","mr-1 flex items-center"),c(r,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5 px-2.5"),c(T,"class","text-xs font-medium mb-1"),V.__value="",ct(V,V.__value),c(V,"class","bg-gray-50 dark:bg-gray-700"),V.disabled=!0,c(h,"class","w-full bg-transparent text-sm outline-hidden"),l[1]===void 0&&hn(()=>l[11].call(h)),c(d,"class","w-full"),c(E,"class","pb-10"),c(v,"class","mt-1 px-2.5")},m(Z,le){z(Z,e,le),w(e,t),w(t,n),W(s,n,null),w(e,o),w(e,r),w(r,a),w(a,f),z(Z,g,le),z(Z,v,le),w(v,E),j&&j.m(E,null),w(E,D),w(E,T),w(T,k),w(E,m),w(E,d),w(d,h),w(h,V),w(V,P),w(V,H);for(let se=0;se<te.length;se+=1)te[se]&&te[se].m(h,null);Ct(h,l[1],!0),R=!0,K||(G=[me(n,"click",l[7]),me(h,"change",l[11])],K=!0)},p(Z,[le]){if((!R||le&16)&&i!==(i=Z[4].t("Controls")+"")&&ve(f,i),Z[2].length>0?j?(j.p(Z,le),le&4&&N(j,1)):(j=Jt(Z),j.c(),N(j,1),j.m(E,D)):j&&(Je(),C(j,1,1,()=>{j=null}),Ye()),(!R||le&16)&&p!==(p=Z[4].t("Model")+"")&&ve(k,p),(!R||le&16)&&S!==(S=Z[4].t("Select a model")+"")&&ve(P,S),le&32){Q=et(Z[5].filter(Qt));let se;for(se=0;se<Q.length;se+=1){const oe=Ht(Z,Q,se);te[se]?te[se].p(oe,le):(te[se]=Gt(oe),te[se].c(),te[se].m(h,null))}for(;se<te.length;se+=1)te[se].d(1);te.length=Q.length}le&34&&Ct(h,Z[1])},i(Z){R||(N(s.$$.fragment,Z),N(j),R=!0)},o(Z){C(s.$$.fragment,Z),C(j),R=!1},d(Z){Z&&(u(e),u(g),u(v)),U(s),j&&j.d(),wt(te,Z),K=!1,ut(G)}}}const Zt=l=>l.type!=="image",Xt=l=>l.type==="image",Qt=l=>{var e,t;return!(((t=(e=l==null?void 0:l.info)==null?void 0:e.meta)==null?void 0:t.hidden)??!1)};function rl(l,e,t){let n,s;Re(l,Bt,p=>t(5,s=p));const o=dt("i18n");Re(l,o,p=>t(4,n=p));let{show:r=!1}=e,{selectedModelId:a=""}=e,{files:i=[]}=e,{onUpdate:f=p=>{}}=e;const g=()=>{t(0,r=!r)},v=p=>{t(2,i=i.filter(k=>k.id!==p.id)),t(2,i),f(i)},E=p=>{},D=p=>{t(2,i=i.filter(k=>k.id!==p.id)),t(2,i),f(i)};function T(){a=gn(this),t(1,a)}return l.$$set=p=>{"show"in p&&t(0,r=p.show),"selectedModelId"in p&&t(1,a=p.selectedModelId),"files"in p&&t(2,i=p.files),"onUpdate"in p&&t(3,f=p.onUpdate)},[r,a,i,f,n,s,o,g,v,E,D,T]}class al extends Be{constructor(e){super(),Ae(this,e,rl,ol,We,{show:0,selectedModelId:1,files:2,onUpdate:3})}}function il(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m19.5 19.5-15-15m0 0v11.25m0-11.25h11.25"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function fl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class cl extends Be{constructor(e){super(),Ae(this,e,fl,il,We,{className:0,strokeWidth:1})}}function ul(l){let e,t,n,s,o;return t=new cl({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(r){e=$(r,"BUTTON",{class:!0});var a=b(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(r,a){z(r,e,a),W(t,e,null),n=!0,s||(o=me(e,"click",l[7]),s=!0)},p:ae,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){C(t.$$.fragment,r),n=!1},d(r){r&&u(e),U(t),s=!1,o()}}}function dl(l){let e,t,n,s,o;return t=new Bs({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(r){e=$(r,"BUTTON",{class:!0});var a=b(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(r,a){z(r,e,a),W(t,e,null),n=!0,s||(o=me(e,"click",l[8]),s=!0)},p:ae,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){C(t.$$.fragment,r),n=!1},d(r){r&&u(e),U(t),s=!1,o()}}}function ml(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',n,s;return{c(){e=I("button"),e.innerHTML=t,this.h()},l(o){e=$(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ls(e)!=="svelte-n6kawc"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(o,r){z(o,e,r),n||(s=me(e,"click",l[9]),n=!0)},p:ae,d(o){o&&u(e),n=!1,s()}}}function hl(l){let e,t,n;return t=new Os({props:{id:`note-message-${l[1]}`,content:l[0].content}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","markdown-prose-sm text-sm")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p(s,o){const r={};o&2&&(r.id=`note-message-${s[1]}`),o&1&&(r.content=s[0].content),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function gl(l){let e,t,n;function s(r){l[11](r)}let o={className:"w-full bg-transparent outline-hidden text-sm resize-none overflow-hidden",placeholder:l[5].t("Enter {{role}} message here",{role:l[0].role==="user"?l[5].t("a user"):l[5].t("an assistant")}),onBlur:l[10]};return l[0].content!==void 0&&(o.value=l[0].content),e=new As({props:o}),pe.push(()=>ke(e,"value",s)),{c(){B(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,a){W(e,r,a),n=!0},p(r,a){const i={};a&33&&(i.placeholder=r[5].t("Enter {{role}} message here",{role:r[0].role==="user"?r[5].t("a user"):r[5].t("an assistant")})),a&1&&(i.onBlur=r[10]),!t&&a&1&&(t=!0,i.value=r[0].content,Ee(()=>t=!1)),e.$set(i)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function _l(l){let e,t,n;return t=new ys({props:{size:"sm"}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p:ae,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function pl(l){let e,t,n,s=l[5].t(l[0].role)+"",o,r,a,i,f,g,v,E,D,T,p,k,m;i=new Ze({props:{placement:"top",content:l[5].t("Insert"),$$slots:{default:[ul]},$$scope:{ctx:l}}}),g=new Ze({props:{placement:"top",content:l[5].t("Edit"),$$slots:{default:[dl]},$$scope:{ctx:l}}}),E=new Ze({props:{placement:"top",content:l[5].t("Delete"),$$slots:{default:[ml]},$$scope:{ctx:l}}});const d=[_l,gl,hl],h=[];function V(S,P){var H,R,K;return!(((H=S[0])==null?void 0:H.done)??!0)&&((R=S[0])==null?void 0:R.content)===""?0:((K=S[0])==null?void 0:K.edit)===!0?1:2}return p=V(l),k=h[p]=d[p](l),{c(){e=I("div"),t=I("div"),n=I("div"),o=ue(s),r=Y(),a=I("div"),B(i.$$.fragment),f=Y(),B(g.$$.fragment),v=Y(),B(E.$$.fragment),D=Y(),T=I("div"),k.c(),this.h()},l(S){e=$(S,"DIV",{class:!0});var P=b(e);t=$(P,"DIV",{class:!0});var H=b(t);n=$(H,"DIV",{class:!0});var R=b(n);o=de(R,s),R.forEach(u),r=q(H),a=$(H,"DIV",{class:!0});var K=b(a);A(i.$$.fragment,K),f=q(K),A(g.$$.fragment,K),v=q(K),A(E.$$.fragment,K),K.forEach(u),H.forEach(u),D=q(P),T=$(P,"DIV",{class:!0});var G=b(T);k.l(G),G.forEach(u),P.forEach(u),this.h()},h(){c(n,"class","py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),c(a,"class","flex items-center gap-2"),c(t,"class","flex items-center justify-between pt-1"),c(T,"class","flex-1"),c(e,"class","flex flex-col gap-1 group")},m(S,P){z(S,e,P),w(e,t),w(t,n),w(n,o),w(t,r),w(t,a),W(i,a,null),w(a,f),W(g,a,null),w(a,v),W(E,a,null),w(e,D),w(e,T),h[p].m(T,null),m=!0},p(S,[P]){(!m||P&33)&&s!==(s=S[5].t(S[0].role)+"")&&ve(o,s);const H={};P&32&&(H.content=S[5].t("Insert")),P&8208&&(H.$$scope={dirty:P,ctx:S}),i.$set(H);const R={};P&32&&(R.content=S[5].t("Edit")),P&8200&&(R.$$scope={dirty:P,ctx:S}),g.$set(R);const K={};P&32&&(K.content=S[5].t("Delete")),P&8196&&(K.$$scope={dirty:P,ctx:S}),E.$set(K);let G=p;p=V(S),p===G?h[p].p(S,P):(Je(),C(h[G],1,1,()=>{h[G]=null}),Ye(),k=h[p],k?k.p(S,P):(k=h[p]=d[p](S),k.c()),N(k,1),k.m(T,null))},i(S){m||(N(i.$$.fragment,S),N(g.$$.fragment,S),N(E.$$.fragment,S),N(k),m=!0)},o(S){C(i.$$.fragment,S),C(g.$$.fragment,S),C(E.$$.fragment,S),C(k),m=!1},d(S){S&&u(e),U(i),U(g),U(E),h[p].d()}}}function vl(l,e,t){let n;const s=dt("i18n");Re(l,s,p=>t(5,n=p));let{message:o}=e,{idx:r}=e,{onDelete:a}=e,{onEdit:i}=e,{onInsert:f}=e;const g=()=>{f()},v=()=>{i()},E=()=>{a()},D=()=>{t(0,o.edit=!1,o)};function T(p){l.$$.not_equal(o.content,p)&&(o.content=p,t(0,o))}return l.$$set=p=>{"message"in p&&t(0,o=p.message),"idx"in p&&t(1,r=p.idx),"onDelete"in p&&t(2,a=p.onDelete),"onEdit"in p&&t(3,i=p.onEdit),"onInsert"in p&&t(4,f=p.onInsert)},[o,r,a,i,f,n,s,g,v,E,D,T]}class wl extends Be{constructor(e){super(),Ae(this,e,vl,pl,We,{message:0,idx:1,onDelete:2,onEdit:3,onInsert:4})}}function Kt(l,e,t){const n=l.slice();return n[6]=e[t],n[8]=t,n}function xt(l){let e,t;function n(){return l[2](l[6])}function s(){return l[3](l[8])}function o(){return l[4](l[8])}return e=new wl({props:{message:l[6],idx:l[8],onInsert:n,onEdit:s,onDelete:o}}),{c(){B(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p(r,a){l=r;const i={};a&1&&(i.message=l[6]),a&3&&(i.onInsert=n),a&1&&(i.onEdit=s),a&1&&(i.onDelete=o),e.$set(i)},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function bl(l){let e,t,n=et(l[0]),s=[];for(let r=0;r<n.length;r+=1)s[r]=xt(Kt(l,n,r));const o=r=>C(s[r],1,1,()=>{s[r]=null});return{c(){e=I("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=$(r,"DIV",{class:!0});var a=b(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","space-y-3 pb-12")},m(r,a){z(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(r,[a]){if(a&3){n=et(r[0]);let i;for(i=0;i<n.length;i+=1){const f=Kt(r,n,i);s[i]?(s[i].p(f,a),N(s[i],1)):(s[i]=xt(f),s[i].c(),N(s[i],1),s[i].m(e,null))}for(Je(),i=n.length;i<s.length;i+=1)o(i);Ye()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)C(s[a]);t=!1},d(r){r&&u(e),wt(s,r)}}}function kl(l,e,t){dt("i18n");let{messages:n=[]}=e,{onInsert:s=i=>{}}=e;const o=i=>{s((i==null?void 0:i.content)??"")},r=i=>{t(0,n=n.map((f,g)=>g===i?{...f,edit:!0}:f))},a=i=>{t(0,n=n.filter((f,g)=>g!==i))};return l.$$set=i=>{"messages"in i&&t(0,n=i.messages),"onInsert"in i&&t(1,s=i.onInsert)},[n,s,o,r,a]}class El extends Be{constructor(e){super(),Ae(this,e,kl,bl,We,{messages:0,onInsert:1})}}function en(l,e,t){const n=l.slice();return n[36]=e[t],n}function Il(l){let e,t,n=l[11].t("Experimental")+"",s,o;return{c(){e=I("span"),t=ue("("),s=ue(n),o=ue(")"),this.h()},l(r){e=$(r,"SPAN",{class:!0});var a=b(e);t=de(a,"("),s=de(a,n),o=de(a,")"),a.forEach(u),this.h()},h(){c(e,"class","text-gray-500 text-sm")},m(r,a){z(r,e,a),w(e,t),w(e,s),w(e,o)},p(r,a){a[0]&2048&&n!==(n=r[11].t("Experimental")+"")&&ve(s,n)},d(r){r&&u(e)}}}function tn(l){var r;let e,t,n,s=((r=l[3])==null?void 0:r.text)+"",o;return{c(){e=I("div"),t=I("blockquote"),n=I("div"),o=ue(s),this.h()},l(a){e=$(a,"DIV",{class:!0});var i=b(e);t=$(i,"BLOCKQUOTE",{});var f=b(t);n=$(f,"DIV",{class:!0});var g=b(n);o=de(g,s),g.forEach(u),f.forEach(u),i.forEach(u),this.h()},h(){c(n,"class","line-clamp-3"),c(e,"class","text-xs rounded-xl px-3.5 py-3 w-full markdown-prose-xs")},m(a,i){z(a,e,i),w(e,t),w(t,n),w(n,o)},p(a,i){var f;i[0]&8&&s!==(s=((f=a[3])==null?void 0:f.text)+"")&&ve(o,s)},d(a){a&&u(e)}}}function $l(l){let e,t,n,s,o=l[11].t("Edit")+"",r,a,i,f,g,v;return t=new ks({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=I("button"),B(t.$$.fragment),n=Y(),s=I("span"),r=ue(o),this.h()},l(E){e=$(E,"BUTTON",{type:!0,class:!0});var D=b(e);A(t.$$.fragment,D),n=q(D),s=$(D,"SPAN",{class:!0});var T=b(s);r=de(T,o),T.forEach(u),D.forEach(u),this.h()},h(){c(s,"class","block whitespace-nowrap overflow-hidden text-ellipsis leading-none pr-0.5"),e.disabled=a=l[2]||l[7],c(e,"type","button"),c(e,"class",i="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(l[9]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 ")+" disabled:opacity-50 disabled:pointer-events-none")},m(E,D){z(E,e,D),W(t,e,null),w(e,n),w(e,s),w(s,r),f=!0,g||(v=me(e,"click",os(l[27])),g=!0)},p(E,D){(!f||D[0]&2048)&&o!==(o=E[11].t("Edit")+"")&&ve(r,o),(!f||D[0]&132&&a!==(a=E[2]||E[7]))&&(e.disabled=a),(!f||D[0]&512&&i!==(i="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(E[9]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 ")+" disabled:opacity-50 disabled:pointer-events-none"))&&c(e,"class",i)},i(E){f||(N(t.$$.fragment,E),f=!0)},o(E){C(t.$$.fragment,E),f=!1},d(E){E&&u(e),U(t),g=!1,v()}}}function nn(l){let e,t=l[36].name+"",n,s;return{c(){e=I("option"),n=ue(t),this.h()},l(o){e=$(o,"OPTION",{class:!0});var r=b(e);n=de(r,t),r.forEach(u),this.h()},h(){e.__value=s=l[36].id,ct(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(o,r){z(o,e,r),w(e,n)},p(o,r){r[0]&4096&&t!==(t=o[36].name+"")&&ve(n,t),r[0]&4096&&s!==(s=o[36].id)&&(e.__value=s,ct(e,e.__value))},d(o){o&&u(e)}}}function Nl(l){let e,t,n,s=et(l[12]),o=[];for(let r=0;r<s.length;r+=1)o[r]=nn(en(l,s,r));return{c(){e=I("select");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=$(r,"SELECT",{class:!0});var a=b(e);for(let i=0;i<o.length;i+=1)o[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","bg-transparent rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full text-right pr-5"),l[1]===void 0&&hn(()=>l[28].call(e))},m(r,a){z(r,e,a);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null);Ct(e,l[1],!0),t||(n=me(e,"change",l[28]),t=!0)},p(r,a){if(a[0]&4096){s=et(r[12]);let i;for(i=0;i<s.length;i+=1){const f=en(r,s,i);o[i]?o[i].p(f,a):(o[i]=nn(f),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}a[0]&4098&&Ct(e,r[1])},d(r){r&&u(e),wt(o,r),t=!1,n()}}}function Cl(l){let e,t,n,s,o,r;return n=new Ze({props:{content:l[11].t("Edit"),placement:"top",$$slots:{default:[$l]},$$scope:{ctx:l}}}),o=new Ze({props:{content:l[1],$$slots:{default:[Nl]},$$scope:{ctx:l}}}),{c(){e=I("div"),t=I("div"),B(n.$$.fragment),s=Y(),B(o.$$.fragment),this.h()},l(a){e=$(a,"DIV",{slot:!0,class:!0});var i=b(e);t=$(i,"DIV",{});var f=b(t);A(n.$$.fragment,f),f.forEach(u),s=q(i),A(o.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"slot","menu"),c(e,"class","flex items-center justify-between gap-2 w-full pr-1")},m(a,i){z(a,e,i),w(e,t),W(n,t,null),w(e,s),W(o,e,null),r=!0},p(a,i){const f={};i[0]&2048&&(f.content=a[11].t("Edit")),i[0]&2692|i[1]&256&&(f.$$scope={dirty:i,ctx:a}),n.$set(f);const g={};i[0]&2&&(g.content=a[1]),i[0]&4098|i[1]&256&&(g.$$scope={dirty:i,ctx:a}),o.$set(g)},i(a){r||(N(n.$$.fragment,a),N(o.$$.fragment,a),r=!0)},o(a){C(n.$$.fragment,a),C(o.$$.fragment,a),r=!1},d(a){a&&u(e),U(n),U(o)}}}function Dl(l){let e,t,n,s,o,r,a,i=l[11].t("Chat")+"",f,g,v,E,D,T,p,k,m,d,h,V,S,P,H,R,K,G,j,Q,te,Z;s=new wn({props:{className:"size-5",strokeWidth:"2.5"}}),E=new Ze({props:{content:l[11].t("This feature is experimental and may be modified or discontinued without notice."),position:"top",className:"inline-block",$$slots:{default:[Il]},$$scope:{ctx:l}}});function le(J){l[25](J)}let se={onInsert:l[5]};l[4]!==void 0&&(se.messages=l[4]),S=new El({props:se}),pe.push(()=>ke(S,"messages",le));let oe=l[3]&&tn(l);function Ue(J){l[29](J)}let je={acceptFiles:!1,inputLoading:l[7],showFormattingToolbar:!1,onSubmit:l[15],onStop:l[6],$$slots:{menu:[Cl]},$$scope:{ctx:l}};return l[10]!==void 0&&(je.chatInputElement=l[10]),G=new Ws({props:je}),pe.push(()=>ke(G,"chatInputElement",Ue)),{c(){e=I("div"),t=I("div"),n=I("button"),B(s.$$.fragment),o=Y(),r=I("div"),a=I("div"),f=ue(i),g=Y(),v=I("div"),B(E.$$.fragment),D=Y(),T=I("div"),p=I("div"),k=I("div"),m=I("div"),d=I("div"),h=I("div"),V=I("div"),B(S.$$.fragment),H=Y(),R=I("div"),oe&&oe.c(),K=Y(),B(G.$$.fragment),this.h()},l(J){e=$(J,"DIV",{class:!0});var X=b(e);t=$(X,"DIV",{class:!0});var O=b(t);n=$(O,"BUTTON",{class:!0});var x=b(n);A(s.$$.fragment,x),x.forEach(u),O.forEach(u),o=q(X),r=$(X,"DIV",{class:!0});var re=b(r);a=$(re,"DIV",{});var Ce=b(a);f=de(Ce,i),Ce.forEach(u),g=q(re),v=$(re,"DIV",{});var he=b(v);A(E.$$.fragment,he),he.forEach(u),re.forEach(u),X.forEach(u),D=q(J),T=$(J,"DIV",{class:!0});var Ve=b(T);p=$(Ve,"DIV",{class:!0});var Ge=b(p);k=$(Ge,"DIV",{class:!0});var Xe=b(k);m=$(Xe,"DIV",{class:!0});var ie=b(m);d=$(ie,"DIV",{class:!0,id:!0});var fe=b(d);h=$(fe,"DIV",{class:!0});var ce=b(h);V=$(ce,"DIV",{class:!0});var qe=b(V);A(S.$$.fragment,qe),qe.forEach(u),ce.forEach(u),fe.forEach(u),H=q(ie),R=$(ie,"DIV",{class:!0});var De=b(R);oe&&oe.l(De),K=q(De),A(G.$$.fragment,De),De.forEach(u),ie.forEach(u),Xe.forEach(u),Ge.forEach(u),Ve.forEach(u),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","flex items-center mr-1"),c(r,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5 px-2.5"),c(V,"class","flex-1 p-1"),c(h,"class","h-full w-full flex flex-col"),c(d,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 scrollbar-hidden"),c(d,"id","messages-container"),c(R,"class","pb-[1rem]"),c(m,"class","flex flex-col h-full"),c(k,"class","mx-auto w-full md:px-0 h-full relative"),c(p,"class","flex flex-col justify-between w-full overflow-y-auto h-full"),c(T,"class","flex flex-col items-center flex-1 @container px-2.5")},m(J,X){z(J,e,X),w(e,t),w(t,n),W(s,n,null),w(e,o),w(e,r),w(r,a),w(a,f),w(r,g),w(r,v),W(E,v,null),z(J,D,X),z(J,T,X),w(T,p),w(p,k),w(k,m),w(m,d),w(d,h),w(h,V),W(S,V,null),l[26](d),w(m,H),w(m,R),oe&&oe.m(R,null),w(R,K),W(G,R,null),Q=!0,te||(Z=[me(n,"click",l[24]),me(d,"scroll",l[14])],te=!0)},p(J,X){(!Q||X[0]&2048)&&i!==(i=J[11].t("Chat")+"")&&ve(f,i);const O={};X[0]&2048&&(O.content=J[11].t("This feature is experimental and may be modified or discontinued without notice.")),X[0]&2048|X[1]&256&&(O.$$scope={dirty:X,ctx:J}),E.$set(O);const x={};X[0]&32&&(x.onInsert=J[5]),!P&&X[0]&16&&(P=!0,x.messages=J[4],Ee(()=>P=!1)),S.$set(x),J[3]?oe?oe.p(J,X):(oe=tn(J),oe.c(),oe.m(R,K)):oe&&(oe.d(1),oe=null);const re={};X[0]&128&&(re.inputLoading=J[7]),X[0]&64&&(re.onStop=J[6]),X[0]&6790|X[1]&256&&(re.$$scope={dirty:X,ctx:J}),!j&&X[0]&1024&&(j=!0,re.chatInputElement=J[10],Ee(()=>j=!1)),G.$set(re)},i(J){Q||(N(s.$$.fragment,J),N(E.$$.fragment,J),N(S.$$.fragment,J),N(G.$$.fragment,J),Q=!0)},o(J){C(s.$$.fragment,J),C(E.$$.fragment,J),C(S.$$.fragment,J),C(G.$$.fragment,J),Q=!1},d(J){J&&(u(e),u(D),u(T)),U(s),U(E),U(S),l[26](null),oe&&oe.d(),U(G),te=!1,ut(Z)}}}function Tl(l,e,t){let n,s;Re(l,Bt,O=>t(12,s=O));let{show:o=!1}=e,{selectedModelId:r=""}=e;Ot.use({breaks:!0,gfm:!0,renderer:{list(O,x,re){if(O.includes("data-checked="))return`<ul data-type="taskList">${O}</ul>`;const he=x?"ol":"ul",Ve=x&&re!==1?` start="${re}"`:"";return`<${he}${Ve}>${O}</${he}>`},listitem(O,x,re){return x?`<li data-type="taskItem" data-checked="${re?"true":"false"}">${O}</li>`:`<li>${O}</li>`}}});const a=dt("i18n");Re(l,a,O=>t(11,n=O));let{editor:i=null}=e,{editing:f=!1}=e,{streaming:g=!1}=e,{stopResponseFlag:v=!1}=e,{note:E=null}=e,{selectedContent:D=null}=e,{files:T=[]}=e,{messages:p=[]}=e,{onInsert:k=O=>{}}=e,{onStop:m=()=>{}}=e,{onEdited:d=()=>{}}=e,{insertNoteHandler:h=()=>{}}=e,{scrollToBottomHandler:V=()=>{}}=e,S=!1,P,H="",R=!1,K=null;const G=`You are an expert document editor.

## Task
Based on the user's instruction, update and enhance the existing notes or selection by incorporating relevant and accurate information from the provided context in the content's primary language. Ensure all edits strictly follow the user’s intent.

## Input Structure
- Existing notes: Enclosed within <notes></notes> XML tags.
- Additional context: Enclosed within <context></context> XML tags.
- Current note selection: Enclosed within <selection></selection> XML tags.
- Editing instruction: Provided in the user message.

## Output Instructions
- If a selection is provided, edit **only** the content within <selection></selection>. Leave unselected parts unchanged.
- If no selection is provided, edit the entire notes.
- Deliver a single, rewritten version of the notes in markdown format.
- Integrate information from the context only if it directly supports the user's instruction.
- Use clear, organized markdown elements: headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, bold and italic text as appropriate.
- Focus on improving clarity, completeness, and usefulness of the notes.
- Return only the final, fully-edited markdown notes—do not include explanations, reasoning, or XML tags.
`;let j=!0;const Q=()=>{P&&j&&t(8,P.scrollTop=P.scrollHeight,P)},te=()=>{P&&(j=P.scrollHeight-P.scrollTop<=P.clientHeight+10)},Z=async()=>{var Xe,ie,fe,ce,qe;if(r===""){ye.error(n.t("Please select a model."));return}const O=s.find(De=>De.id===r);if(!O){t(1,r="");return}let x;((Xe=p.at(-1))==null?void 0:Xe.role)==="assistant"?x=p.at(-1):(x={role:"assistant",content:"",done:!1},p.push(x),t(4,p)),await rt(),Q(),t(17,v=!1);let re={json:null,html:"",md:""};H="",R?H=`${G}

`:H=`You are a helpful assistant. Please answer the user's questions based on the context provided.

`,H+=`<notes>${((fe=(ie=E==null?void 0:E.data)==null?void 0:ie.content)==null?void 0:fe.md)??""}</notes>`+(T&&T.length>0?`
<context>${T.map(De=>{var Pe,we;return`${De.name}: ${((we=(Pe=De==null?void 0:De.file)==null?void 0:Pe.data)==null?void 0:we.content)??"Could not extract content"}
`}).join("")}</context>`:"")+(D?`
<selection>${D==null?void 0:D.text}</selection>`:"");const Ce=JSON.parse(JSON.stringify([{role:"system",content:`${H}`},...p])),[he,Ve]=await vn(localStorage.token,{model:O.id,stream:!0,messages:Ce},`${zt}/api`);await rt(),Q();let Ge="";if(he&&he.ok){const De=he.body.pipeThrough(new TextDecoderStream).pipeThrough(_n(`
`)).getReader();for(;;){const{value:Pe,done:we}=await De.read();if(we||v){v&&Ve.abort("User: Stop Response"),R&&(t(16,f=!1),t(2,g=!1),d());break}try{let be=Pe.split(`
`);for(const at of be)if(at!=="")if(at==="data: [DONE]")R&&(x.content=`<status title="${n.t("Edited")}" done="true" />`,D&&(D!=null&&D.text)&&i&&(i.commands.insertContentAt({from:D.from,to:D.to},re.html||re.md||""),t(3,D=null))),x.done=!0,t(4,p);else{let mt=JSON.parse(at.replace(/^data: /,"")),xe=((qe=(ce=mt.choices[0])==null?void 0:ce.delta)==null?void 0:qe.content)??"";if(x.content==""&&xe==`
`)continue;R?(t(16,f=!0),t(2,g=!0),re.md+=xe,re.html=Ot.parse(re.md),(!D||!(D!=null&&D.text))&&(t(18,E.data.content.md=re.md,E),t(18,E.data.content.html=re.html,E),t(18,E.data.content.json=null,E)),V(),x.content=`<status title="${n.t("Editing")}" done="false" />`,t(4,p)):(Ge+=xe,x.content=Ge,t(4,p)),await rt()}}catch(be){}Q()}}},le=async O=>{const{content:x,data:re}=O;r&&x&&(p.push({role:"user",content:x}),t(4,p),await rt(),Q(),t(7,S=!0),await Z(),t(4,p=p.map(Ce=>(Ce.done=!0,Ce))),t(7,S=!1),t(17,v=!1))};yt(async()=>{t(9,R=localStorage.getItem("noteEditEnabled")==="true"),await rt(),Q()});const se=()=>{t(0,o=!o)};function oe(O){p=O,t(4,p)}function Ue(O){pe[O?"unshift":"push"](()=>{P=O,t(8,P)})}const je=()=>{t(9,R=!R),localStorage.setItem("noteEditEnabled",R?"true":"false")};function J(){r=gn(this),t(1,r)}function X(O){K=O,t(10,K)}return l.$$set=O=>{"show"in O&&t(0,o=O.show),"selectedModelId"in O&&t(1,r=O.selectedModelId),"editor"in O&&t(19,i=O.editor),"editing"in O&&t(16,f=O.editing),"streaming"in O&&t(2,g=O.streaming),"stopResponseFlag"in O&&t(17,v=O.stopResponseFlag),"note"in O&&t(18,E=O.note),"selectedContent"in O&&t(3,D=O.selectedContent),"files"in O&&t(20,T=O.files),"messages"in O&&t(4,p=O.messages),"onInsert"in O&&t(5,k=O.onInsert),"onStop"in O&&t(6,m=O.onStop),"onEdited"in O&&t(21,d=O.onEdited),"insertNoteHandler"in O&&t(22,h=O.insertNoteHandler),"scrollToBottomHandler"in O&&t(23,V=O.scrollToBottomHandler)},[o,r,g,D,p,k,m,S,P,R,K,n,s,a,te,le,f,v,E,i,T,d,h,V,se,oe,Ue,je,J,X]}class Ml extends Be{constructor(e){super(),Ae(this,e,Tl,Dl,We,{show:0,selectedModelId:1,editor:19,editing:16,streaming:2,stopResponseFlag:17,note:18,selectedContent:3,files:20,messages:4,onInsert:5,onStop:6,onEdited:21,insertNoteHandler:22,scrollToBottomHandler:23},null,[-1,-1])}}function Sl(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function zl(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Vl extends Be{constructor(e){super(),Ae(this,e,zl,Sl,We,{className:0,strokeWidth:1})}}function Ol(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function yl(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Bl extends Be{constructor(e){super(),Ae(this,e,yl,Ol,We,{className:0,strokeWidth:1})}}function Al(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function Wl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Ul extends Be{constructor(e){super(),Ae(this,e,Wl,Al,We,{className:0,strokeWidth:1})}}function jl(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function Pl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Rl extends Be{constructor(e){super(),Ae(this,e,Pl,jl,We,{className:0,strokeWidth:1})}}const Hl=l=>({}),sn=l=>({});function Ll(l){let e;const t=l[8].default,n=gt(t,l,l[15],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,o){n&&n.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o&32768)&&_t(n,t,s,s[15],e?vt(t,s[15],o,null):pt(s[15]),null)},i(s){e||(N(n,s),e=!0)},o(s){C(n,s),e=!1},d(s){n&&n.d(s)}}}function Fl(l){let e,t,n,s,o,r=l[5].t("Record")+"",a,i,f,g,v,E,D,T=l[5].t("Capture Audio")+"",p,k,m,d,h,V,S,P=l[5].t("Upload Audio")+"",H,R,K,G;return n=new Ul({props:{className:"size-4",strokeWidth:"2"}}),v=new Rl({props:{className:"size-4",strokeWidth:"2"}}),h=new Js({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=I("button"),t=I("div"),B(n.$$.fragment),s=Y(),o=I("div"),a=ue(r),i=Y(),f=I("button"),g=I("div"),B(v.$$.fragment),E=Y(),D=I("div"),p=ue(T),k=Y(),m=I("button"),d=I("div"),B(h.$$.fragment),V=Y(),S=I("div"),H=ue(P),this.h()},l(j){e=$(j,"BUTTON",{class:!0});var Q=b(e);t=$(Q,"DIV",{class:!0});var te=b(t);A(n.$$.fragment,te),te.forEach(u),s=q(Q),o=$(Q,"DIV",{class:!0});var Z=b(o);a=de(Z,r),Z.forEach(u),Q.forEach(u),i=q(j),f=$(j,"BUTTON",{class:!0});var le=b(f);g=$(le,"DIV",{class:!0});var se=b(g);A(v.$$.fragment,se),se.forEach(u),E=q(le),D=$(le,"DIV",{class:!0});var oe=b(D);p=de(oe,T),oe.forEach(u),le.forEach(u),k=q(j),m=$(j,"BUTTON",{class:!0});var Ue=b(m);d=$(Ue,"DIV",{class:!0});var je=b(d);A(h.$$.fragment,je),je.forEach(u),V=q(Ue),S=$(Ue,"DIV",{class:!0});var J=b(S);H=de(J,P),J.forEach(u),Ue.forEach(u),this.h()},h(){c(t,"class","self-center mr-2"),c(o,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(g,"class","self-center mr-2"),c(D,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(d,"class","self-center mr-2"),c(S,"class","self-center truncate"),c(m,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(j,Q){z(j,e,Q),w(e,t),W(n,t,null),w(e,s),w(e,o),w(o,a),z(j,i,Q),z(j,f,Q),w(f,g),W(v,g,null),w(f,E),w(f,D),w(D,p),z(j,k,Q),z(j,m,Q),w(m,d),W(h,d,null),w(m,V),w(m,S),w(S,H),R=!0,K||(G=[me(e,"click",l[9]),me(f,"click",l[10]),me(m,"click",l[11])],K=!0)},p(j,Q){(!R||Q&32)&&r!==(r=j[5].t("Record")+"")&&ve(a,r),(!R||Q&32)&&T!==(T=j[5].t("Capture Audio")+"")&&ve(p,T),(!R||Q&32)&&P!==(P=j[5].t("Upload Audio")+"")&&ve(H,P)},i(j){R||(N(n.$$.fragment,j),N(v.$$.fragment,j),N(h.$$.fragment,j),R=!0)},o(j){C(n.$$.fragment,j),C(v.$$.fragment,j),C(h.$$.fragment,j),R=!1},d(j){j&&(u(e),u(i),u(f),u(k),u(m)),U(n),U(v),U(h),K=!1,ut(G)}}}function Jl(l){let e,t;return e=new In({props:{class:"w-full "+l[1]+" text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"start",transition:l[12],$$slots:{default:[Fl]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const o={};s&2&&(o.class="w-full "+n[1]+" text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&32829&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Yl(l){let e,t,n;e=new En({props:{$$slots:{default:[Ll]},$$scope:{ctx:l}}});const s=l[8].content,o=gt(s,l,l[15],sn),r=o||Jl(l);return{c(){B(e.$$.fragment),t=Y(),r&&r.c()},l(a){A(e.$$.fragment,a),t=q(a),r&&r.l(a)},m(a,i){W(e,a,i),z(a,t,i),r&&r.m(a,i),n=!0},p(a,i){const f={};i&32768&&(f.$$scope={dirty:i,ctx:a}),e.$set(f),o?o.p&&(!n||i&32768)&&_t(o,s,a,a[15],n?vt(s,a[15],i,Hl):pt(a[15]),sn):r&&r.p&&(!n||i&63)&&r.p(a,n?i:-1)},i(a){n||(N(e.$$.fragment,a),N(r,a),n=!0)},o(a){C(e.$$.fragment,a),C(r,a),n=!1},d(a){a&&u(t),U(e,a),r&&r.d(a)}}}function ql(l){let e,t,n;function s(r){l[14](r)}let o={onOpenChange:l[13],$$slots:{default:[Yl]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new kn({props:o}),pe.push(()=>ke(e,"open",s)),{c(){B(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,a){W(e,r,a),n=!0},p(r,[a]){const i={};a&32831&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.open=r[0],Ee(()=>t=!1)),e.$set(i)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Gl(l,e,t){let n,{$$slots:s={},$$scope:o}=e;const r=dt("i18n");Re(l,r,h=>t(5,n=h));let{show:a=!1}=e,{className:i="max-w-[170px]"}=e,{onRecord:f=()=>{}}=e,{onCaptureAudio:g=()=>{}}=e,{onUpload:v=()=>{}}=e;const E=rs(),D=async()=>{f(),t(0,a=!1)},T=()=>{g(),t(0,a=!1)},p=()=>{v(),t(0,a=!1)},k=h=>$n(h,{duration:100}),m=h=>{E("change",h)};function d(h){a=h,t(0,a)}return l.$$set=h=>{"show"in h&&t(0,a=h.show),"className"in h&&t(1,i=h.className),"onRecord"in h&&t(2,f=h.onRecord),"onCaptureAudio"in h&&t(3,g=h.onCaptureAudio),"onUpload"in h&&t(4,v=h.onUpload),"$$scope"in h&&t(15,o=h.$$scope)},[a,i,f,g,v,n,r,E,s,D,T,p,k,m,d,o]}class Zl extends Be{constructor(e){super(),Ae(this,e,Gl,ql,We,{show:0,className:1,onRecord:2,onCaptureAudio:3,onUpload:4})}}function Xl(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=b(e);t=ze(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"fill-rule","evenodd"),c(t,"d","M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function Ql(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Kl extends Be{constructor(e){super(),Ae(this,e,Ql,Xl,We,{className:0,strokeWidth:1})}}function xl(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function eo(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class to extends Be{constructor(e){super(),Ae(this,e,eo,xl,We,{className:0,strokeWidth:1})}}function no(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function so(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class lo extends Be{constructor(e){super(),Ae(this,e,so,no,We,{className:0,strokeWidth:1})}}const oo=l=>({}),ln=l=>({});function ro(l){let e;const t=l[7].default,n=gt(t,l,l[12],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,o){n&&n.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o&4096)&&_t(n,t,s,s[12],e?vt(t,s[12],o,null):pt(s[12]),null)},i(s){e||(N(n,s),e=!0)},o(s){C(n,s),e=!1},d(s){n&&n.d(s)}}}function ao(l){let e,t,n,s,o,r=l[5].t("Enhance")+"",a,i,f,g,v,E,D,T=l[5].t("Chat")+"",p,k,m,d;return n=new Nn({props:{className:"size-4",strokeWidth:"2"}}),v=new Cn({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=I("button"),t=I("div"),B(n.$$.fragment),s=Y(),o=I("div"),a=ue(r),i=Y(),f=I("button"),g=I("div"),B(v.$$.fragment),E=Y(),D=I("div"),p=ue(T),this.h()},l(h){e=$(h,"BUTTON",{class:!0});var V=b(e);t=$(V,"DIV",{class:!0});var S=b(t);A(n.$$.fragment,S),S.forEach(u),s=q(V),o=$(V,"DIV",{class:!0});var P=b(o);a=de(P,r),P.forEach(u),V.forEach(u),i=q(h),f=$(h,"BUTTON",{class:!0});var H=b(f);g=$(H,"DIV",{class:!0});var R=b(g);A(v.$$.fragment,R),R.forEach(u),E=q(H),D=$(H,"DIV",{class:!0});var K=b(D);p=de(K,T),K.forEach(u),H.forEach(u),this.h()},h(){c(t,"class","self-center mr-2"),c(o,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(g,"class","self-center mr-2"),c(D,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(h,V){z(h,e,V),w(e,t),W(n,t,null),w(e,s),w(e,o),w(o,a),z(h,i,V),z(h,f,V),w(f,g),W(v,g,null),w(f,E),w(f,D),w(D,p),k=!0,m||(d=[me(e,"click",l[8]),me(f,"click",l[9])],m=!0)},p(h,V){(!k||V&32)&&r!==(r=h[5].t("Enhance")+"")&&ve(a,r),(!k||V&32)&&T!==(T=h[5].t("Chat")+"")&&ve(p,T)},i(h){k||(N(n.$$.fragment,h),N(v.$$.fragment,h),k=!0)},o(h){C(n.$$.fragment,h),C(v.$$.fragment,h),k=!1},d(h){h&&(u(e),u(i),u(f)),U(n),U(v),m=!1,ut(d)}}}function io(l){let e,t;return e=new In({props:{class:"w-full "+l[1]+" text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"end",transition:l[10],$$slots:{default:[ao]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const o={};s&2&&(o.class="w-full "+n[1]+" text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&4141&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function fo(l){let e,t,n;e=new En({props:{$$slots:{default:[ro]},$$scope:{ctx:l}}});const s=l[7].content,o=gt(s,l,l[12],ln),r=o||io(l);return{c(){B(e.$$.fragment),t=Y(),r&&r.c()},l(a){A(e.$$.fragment,a),t=q(a),r&&r.l(a)},m(a,i){W(e,a,i),z(a,t,i),r&&r.m(a,i),n=!0},p(a,i){const f={};i&4096&&(f.$$scope={dirty:i,ctx:a}),e.$set(f),o?o.p&&(!n||i&4096)&&_t(o,s,a,a[12],n?vt(s,a[12],i,oo):pt(a[12]),ln):r&&r.p&&(!n||i&47)&&r.p(a,n?i:-1)},i(a){n||(N(e.$$.fragment,a),N(r,a),n=!0)},o(a){C(e.$$.fragment,a),C(r,a),n=!1},d(a){a&&u(t),U(e,a),r&&r.d(a)}}}function co(l){let e,t,n;function s(r){l[11](r)}let o={onOpenChange:l[4],$$slots:{default:[fo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new kn({props:o}),pe.push(()=>ke(e,"open",s)),{c(){B(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,a){W(e,r,a),n=!0},p(r,[a]){const i={};a&16&&(i.onOpenChange=r[4]),a&4143&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.open=r[0],Ee(()=>t=!1)),e.$set(i)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function uo(l,e,t){let n,{$$slots:s={},$$scope:o}=e;const r=dt("i18n");Re(l,r,k=>t(5,n=k));let{show:a=!1}=e,{className:i="max-w-[170px]"}=e,{onEdit:f=()=>{}}=e,{onChat:g=()=>{}}=e,{onChange:v=()=>{}}=e;const E=async()=>{f(),t(0,a=!1)},D=()=>{g(),t(0,a=!1)},T=k=>$n(k,{duration:100});function p(k){a=k,t(0,a)}return l.$$set=k=>{"show"in k&&t(0,a=k.show),"className"in k&&t(1,i=k.className),"onEdit"in k&&t(2,f=k.onEdit),"onChat"in k&&t(3,g=k.onChat),"onChange"in k&&t(4,v=k.onChange),"$$scope"in k&&t(12,o=k.$$scope)},[a,i,f,g,v,n,r,s,E,D,T,p,o]}class mo extends Be{constructor(e){super(),Ae(this,e,uo,co,We,{show:0,className:1,onEdit:2,onChat:3,onChange:4})}}function ho(l){let e,t;return{c(){e=Se("svg"),t=Se("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){z(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:ae,o:ae,d(n){n&&u(e)}}}function go(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class _o extends Be{constructor(e){super(),Ae(this,e,go,ho,We,{className:0,strokeWidth:1})}}const{document:St}=_s;function on(l){let e,t,n,s;function o(i){l[44](i)}function r(i){l[45](i)}let a={accessRoles:["read","write"],onChange:l[43]};return l[15]!==void 0&&(a.show=l[15]),l[2].access_control!==void 0&&(a.accessControl=l[2].access_control),e=new Us({props:a}),pe.push(()=>ke(e,"show",o)),pe.push(()=>ke(e,"accessControl",r)),{c(){B(e.$$.fragment)},l(i){A(e.$$.fragment,i)},m(i,f){W(e,i,f),s=!0},p(i,f){const g={};!t&&f[0]&32768&&(t=!0,g.show=i[15],Ee(()=>t=!1)),!n&&f[0]&4&&(n=!0,g.accessControl=i[2].access_control,Ee(()=>n=!1)),e.$set(g)},i(i){s||(N(e.$$.fragment,i),s=!0)},o(i){C(e.$$.fragment,i),s=!1},d(i){U(e,i)}}}function po(l){let e,t=l[0].t("This will delete")+"",n,s,o,r=l[2].title+"",a,i;return{c(){e=I("div"),n=ue(t),s=Y(),o=I("span"),a=ue(r),i=ue("."),this.h()},l(f){e=$(f,"DIV",{class:!0});var g=b(e);n=de(g,t),s=q(g),o=$(g,"SPAN",{class:!0});var v=b(o);a=de(v,r),v.forEach(u),i=de(g,"."),g.forEach(u),this.h()},h(){c(o,"class","font-semibold"),c(e,"class","text-sm text-gray-500")},m(f,g){z(f,e,g),w(e,n),w(e,s),w(e,o),w(o,a),w(e,i)},p(f,g){g[0]&1&&t!==(t=f[0].t("This will delete")+"")&&ve(n,t),g[0]&4&&r!==(r=f[2].title+"")&&ve(a,r)},d(f){f&&u(e)}}}function vo(l){var bt,kt,Et;let e,t,n,s,o,r,a,i,f,g,v,E,D,T,p,k,m,d,h,V,S,P,H,R,K,G,j,Q,te,Z,le,se=((bt=l[2])!=null&&bt.access_control?l[0].t("Private"):l[0].t("Everyone"))+"",oe,Ue,je,J,X,O,x,re,Ce,he,Ve,Ge,Xe,ie=l[27]&&rn(l),fe=l[17]&&!l[18]&&an(l),ce=l[1]&&fn(l);E=new Ze({props:{placement:"top",content:l[0].t("Chat"),className:"cursor-pointer",$$slots:{default:[Eo]},$$scope:{ctx:l}}}),T=new Ze({props:{placement:"top",content:l[0].t("Controls"),className:"cursor-pointer",$$slots:{default:[Io]},$$scope:{ctx:l}}}),k=new Ys({props:{onDownload:l[58],onCopyLink:l[59],onCopyToClipboard:l[60],onDelete:l[61],$$slots:{default:[$o]},$$scope:{ctx:l}}}),P=new Vl({props:{className:"size-3.5",strokeWidth:"2"}});function qe(M,F){return F[0]&4&&(R=null),F[0]&4&&(K=null),F[0]&4&&(G=null),R==null&&(R=!!He(M[2].created_at/1e6).isSame(He(),"day")),R?To:(K==null&&(K=!!He(M[2].created_at/1e6).isSame(He().subtract(1,"day"),"day")),K?Do:(G==null&&(G=!!He(M[2].created_at/1e6).isSame(He().subtract(1,"week"),"week")),G?Co:No))}let De=qe(l,[-1,-1,-1,-1]),Pe=De(l);te=new Bl({props:{className:"size-3.5",strokeWidth:"2"}});let we=l[1]&&cn(l),be=l[21]&&un(l);function at(M){l[67](M)}function mt(M){l[68](M)}let xe={id:`note-${l[2].id}`,className:"input-prose-sm px-0.5",json:!0,html:(Et=(kt=l[2].data)==null?void 0:kt.content)==null?void 0:Et.html,documentId:`note:${l[2].id}`,collaboration:!0,socket:l[25],user:l[29],link:!0,image:!0,files:l[3],placeholder:l[0].t("Write something..."),editable:l[7]===null&&!l[21],onSelectionUpdate:l[63],onChange:l[64],fileHandler:!0,onFileDrop:l[65],onFilePaste:Jo};return l[1]!==void 0&&(xe.editor=l[1]),l[2].data.content.json!==void 0&&(xe.value=l[2].data.content.json),x=new Ss({props:xe}),l[66](x),pe.push(()=>ke(x,"editor",at)),pe.push(()=>ke(x,"value",mt)),x.$on("paste",l[69]),{c(){e=I("div"),t=I("div"),n=I("div"),ie&&ie.c(),s=Y(),o=I("input"),i=Y(),fe&&fe.c(),f=Y(),g=I("div"),ce&&ce.c(),v=Y(),B(E.$$.fragment),D=Y(),B(T.$$.fragment),p=Y(),B(k.$$.fragment),m=Y(),d=I("div"),h=I("div"),V=I("div"),S=I("button"),B(P.$$.fragment),H=Y(),Pe.c(),j=Y(),Q=I("button"),B(te.$$.fragment),Z=Y(),le=I("span"),oe=ue(se),je=Y(),we&&we.c(),J=Y(),X=I("div"),be&&be.c(),O=Y(),B(x.$$.fragment),this.h()},l(M){e=$(M,"DIV",{class:!0});var F=b(e);t=$(F,"DIV",{class:!0});var Qe=b(t);n=$(Qe,"DIV",{class:!0});var Le=b(n);ie&&ie.l(Le),s=q(Le),o=$(Le,"INPUT",{class:!0,type:!0,placeholder:!0}),i=q(Le),fe&&fe.l(Le),f=q(Le),g=$(Le,"DIV",{class:!0});var Oe=b(g);ce&&ce.l(Oe),v=q(Oe),A(E.$$.fragment,Oe),D=q(Oe),A(T.$$.fragment,Oe),p=q(Oe),A(k.$$.fragment,Oe),Oe.forEach(u),Le.forEach(u),Qe.forEach(u),m=q(F),d=$(F,"DIV",{class:!0});var Te=b(d);h=$(Te,"DIV",{class:!0});var it=b(h);V=$(it,"DIV",{class:!0});var Ke=b(V);S=$(Ke,"BUTTON",{class:!0});var nt=b(S);A(P.$$.fragment,nt),H=q(nt),Pe.l(nt),nt.forEach(u),j=q(Ke),Q=$(Ke,"BUTTON",{class:!0});var st=b(Q);A(te.$$.fragment,st),Z=q(st),le=$(st,"SPAN",{});var ft=b(le);oe=de(ft,se),ft.forEach(u),st.forEach(u),je=q(Ke),we&&we.l(Ke),Ke.forEach(u),it.forEach(u),Te.forEach(u),J=q(F),X=$(F,"DIV",{class:!0,id:!0});var lt=b(X);be&&be.l(lt),O=q(lt),A(x.$$.fragment,lt),lt.forEach(u),F.forEach(u),this.h()},h(){var M,F,Qe,Le,Oe,Te;c(o,"class","w-full text-2xl font-medium bg-transparent outline-hidden"),c(o,"type","text"),c(o,"placeholder",r=l[18]?l[0].t("Generating..."):l[0].t("Title")),o.disabled=a=((M=l[2])==null?void 0:M.user_id)!==((F=l[29])==null?void 0:F.id)&&((Qe=l[29])==null?void 0:Qe.role)!=="admin"||l[18],o.required=!0,c(g,"class","flex items-center gap-0.5 translate-x-1"),c(n,"class","w-full flex items-center"),c(t,"class","shrink-0 w-full flex justify-between items-center px-3.5 mb-1.5"),c(S,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),c(Q,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),Q.disabled=Ue=((Le=l[2])==null?void 0:Le.user_id)!==((Oe=l[29])==null?void 0:Oe.id)&&((Te=l[29])==null?void 0:Te.role)!=="admin",c(V,"class","flex gap-1 items-center text-xs font-medium text-gray-500 dark:text-gray-500 w-fit"),c(h,"class","flex w-full bg-transparent overflow-x-auto scrollbar-none"),c(d,"class","px-2.5"),c(X,"class","flex-1 w-full h-full overflow-auto px-3.5 pb-20 relative pt-2.5"),c(X,"id","note-content-container"),c(e,"class",he="w-full flex flex-col "+(l[20]?"opacity-20":""))},m(M,F){z(M,e,F),w(e,t),w(t,n),ie&&ie.m(n,null),w(n,s),w(n,o),ct(o,l[2].title),w(n,i),fe&&fe.m(n,null),w(n,f),w(n,g),ce&&ce.m(g,null),w(g,v),W(E,g,null),w(g,D),W(T,g,null),w(g,p),W(k,g,null),w(e,m),w(e,d),w(d,h),w(h,V),w(V,S),W(P,S,null),w(S,H),Pe.m(S,null),w(V,j),w(V,Q),W(te,Q,null),w(Q,Z),w(Q,le),w(le,oe),w(V,je),we&&we.m(V,null),w(e,J),w(e,X),be&&be.m(X,null),w(X,O),W(x,X,null),Ve=!0,Ge||(Xe=[me(o,"input",l[49]),me(o,"focus",l[50]),me(o,"blur",l[51]),me(Q,"click",l[62]),me(h,"wheel",Fo)],Ge=!0)},p(M,F){var it,Ke,nt,st,ft,lt,It,$t,Nt;M[27]?ie?(ie.p(M,F),F[0]&134217728&&N(ie,1)):(ie=rn(M),ie.c(),N(ie,1),ie.m(n,s)):ie&&(Je(),C(ie,1,1,()=>{ie=null}),Ye()),(!Ve||F[0]&262145&&r!==(r=M[18]?M[0].t("Generating..."):M[0].t("Title")))&&c(o,"placeholder",r),(!Ve||F[0]&537133060&&a!==(a=((it=M[2])==null?void 0:it.user_id)!==((Ke=M[29])==null?void 0:Ke.id)&&((nt=M[29])==null?void 0:nt.role)!=="admin"||M[18]))&&(o.disabled=a),F[0]&4&&o.value!==M[2].title&&ct(o,M[2].title),M[17]&&!M[18]?fe?(fe.p(M,F),F[0]&393216&&N(fe,1)):(fe=an(M),fe.c(),N(fe,1),fe.m(n,f)):fe&&(Je(),C(fe,1,1,()=>{fe=null}),Ye()),M[1]?ce?(ce.p(M,F),F[0]&2&&N(ce,1)):(ce=fn(M),ce.c(),N(ce,1),ce.m(g,v)):ce&&(Je(),C(ce,1,1,()=>{ce=null}),Ye());const Qe={};F[0]&1&&(Qe.content=M[0].t("Chat")),F[0]&6144|F[3]&131072&&(Qe.$$scope={dirty:F,ctx:M}),E.$set(Qe);const Le={};F[0]&1&&(Le.content=M[0].t("Controls")),F[0]&6144|F[3]&131072&&(Le.$$scope={dirty:F,ctx:M}),T.$set(Le);const Oe={};F[0]&5&&(Oe.onCopyLink=M[59]),F[0]&5&&(Oe.onCopyToClipboard=M[60]),F[0]&16384&&(Oe.onDelete=M[61]),F[3]&131072&&(Oe.$$scope={dirty:F,ctx:M}),k.$set(Oe),De===(De=qe(M,F))&&Pe?Pe.p(M,F):(Pe.d(1),Pe=De(M),Pe&&(Pe.c(),Pe.m(S,null))),(!Ve||F[0]&5)&&se!==(se=((st=M[2])!=null&&st.access_control?M[0].t("Private"):M[0].t("Everyone"))+"")&&ve(oe,se),(!Ve||F[0]&536870916&&Ue!==(Ue=((ft=M[2])==null?void 0:ft.user_id)!==((lt=M[29])==null?void 0:lt.id)&&((It=M[29])==null?void 0:It.role)!=="admin"))&&(Q.disabled=Ue),M[1]?we?we.p(M,F):(we=cn(M),we.c(),we.m(V,null)):we&&(we.d(1),we=null),M[21]?be?be.p(M,F):(be=un(M),be.c(),be.m(X,O)):be&&(be.d(1),be=null);const Te={};F[0]&4&&(Te.id=`note-${M[2].id}`),F[0]&4&&(Te.html=(Nt=($t=M[2].data)==null?void 0:$t.content)==null?void 0:Nt.html),F[0]&4&&(Te.documentId=`note:${M[2].id}`),F[0]&33554432&&(Te.socket=M[25]),F[0]&536870912&&(Te.user=M[29]),F[0]&8&&(Te.files=M[3]),F[0]&1&&(Te.placeholder=M[0].t("Write something...")),F[0]&2097280&&(Te.editable=M[7]===null&&!M[21]),F[0]&8192&&(Te.onSelectionUpdate=M[63]),F[0]&102&&(Te.onChange=M[64]),!re&&F[0]&2&&(re=!0,Te.editor=M[1],Ee(()=>re=!1)),!Ce&&F[0]&4&&(Ce=!0,Te.value=M[2].data.content.json,Ee(()=>Ce=!1)),x.$set(Te),(!Ve||F[0]&1048576&&he!==(he="w-full flex flex-col "+(M[20]?"opacity-20":"")))&&c(e,"class",he)},i(M){Ve||(N(ie),N(fe),N(ce),N(E.$$.fragment,M),N(T.$$.fragment,M),N(k.$$.fragment,M),N(P.$$.fragment,M),N(te.$$.fragment,M),N(x.$$.fragment,M),Ve=!0)},o(M){C(ie),C(fe),C(ce),C(E.$$.fragment,M),C(T.$$.fragment,M),C(k.$$.fragment,M),C(P.$$.fragment,M),C(te.$$.fragment,M),C(x.$$.fragment,M),Ve=!1},d(M){M&&u(e),ie&&ie.d(),fe&&fe.d(),ce&&ce.d(),U(E),U(T),U(k),U(P),Pe.d(),U(te),we&&we.d(),be&&be.d(),l[66](null),U(x),Ge=!1,ut(Xe)}}}function wo(l){let e,t,n,s;return n=new bn({props:{className:"size-5"}}),{c(){e=I("div"),t=I("div"),B(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var r=b(e);t=$(r,"DIV",{class:!0});var a=b(t);A(n.$$.fragment,a),a.forEach(u),r.forEach(u),this.h()},h(){c(t,"class","m-auto"),c(e,"class","absolute top-0 bottom-0 left-0 right-0 flex")},m(o,r){z(o,e,r),w(e,t),W(n,t,null),s=!0},p:ae,i(o){s||(N(n.$$.fragment,o),s=!0)},o(o){C(n.$$.fragment,o),s=!1},d(o){o&&u(e),U(n)}}}function rn(l){let e,t,n,s;return t=new Ze({props:{content:l[28]?l[0].t("Close Sidebar"):l[0].t("Open Sidebar"),$$slots:{default:[bo]},$$scope:{ctx:l}}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var r=b(e);A(t.$$.fragment,r),r.forEach(u),this.h()},h(){c(e,"class",n=(l[28]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1")},m(o,r){z(o,e,r),W(t,e,null),s=!0},p(o,r){const a={};r[0]&268435457&&(a.content=o[28]?o[0].t("Close Sidebar"):o[0].t("Open Sidebar")),r[0]&268435456|r[3]&131072&&(a.$$scope={dirty:r,ctx:o}),t.$set(a),(!s||r[0]&268435456&&n!==(n=(o[28]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1"))&&c(e,"class",n)},i(o){s||(N(t.$$.fragment,o),s=!0)},o(o){C(t.$$.fragment,o),s=!1},d(o){o&&u(e),U(t)}}}function bo(l){let e,t,n,s,o,r;return n=new Gs({}),{c(){e=I("button"),t=I("div"),B(n.$$.fragment),this.h()},l(a){e=$(a,"BUTTON",{id:!0,class:!0});var i=b(e);t=$(i,"DIV",{class:!0});var f=b(t);A(n.$$.fragment,f),f.forEach(u),i.forEach(u),this.h()},h(){c(t,"class","self-center p-1.5"),c(e,"id","sidebar-toggle-button"),c(e,"class","cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-")},m(a,i){z(a,e,i),w(e,t),W(n,t,null),s=!0,o||(r=me(e,"click",l[48]),o=!0)},p:ae,i(a){s||(N(n.$$.fragment,a),s=!0)},o(a){C(n.$$.fragment,a),s=!1},d(a){a&&u(e),U(n),o=!1,r()}}}function an(l){let e,t,n;return t=new Ze({props:{content:l[0].t("Generate"),$$slots:{default:[ko]},$$scope:{ctx:l}}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px] pl-2")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p(s,o){const r={};o[0]&1&&(r.content=s[0].t("Generate")),o[0]&537329668|o[3]&131072&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function ko(l){let e,t,n,s,o,r;return t=new Nn({props:{strokeWidth:"2"}}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(a){e=$(a,"BUTTON",{class:!0,id:!0});var i=b(e);A(t.$$.fragment,i),i.forEach(u),this.h()},h(){var a,i,f;c(e,"class","self-center dark:hover:text-white transition"),c(e,"id","generate-title-button"),e.disabled=n=((a=l[2])==null?void 0:a.user_id)!==((i=l[29])==null?void 0:i.id)&&((f=l[29])==null?void 0:f.role)!=="admin"||l[18]},m(a,i){z(a,e,i),W(t,e,null),s=!0,o||(r=[me(e,"mouseenter",l[52]),me(e,"click",l[53])],o=!0)},p(a,i){var f,g,v;(!s||i[0]&537133060&&n!==(n=((f=a[2])==null?void 0:f.user_id)!==((g=a[29])==null?void 0:g.id)&&((v=a[29])==null?void 0:v.role)!=="admin"||a[18]))&&(e.disabled=n)},i(a){s||(N(t.$$.fragment,a),s=!0)},o(a){C(t.$$.fragment,a),s=!1},d(a){a&&u(e),U(t),o=!1,ut(r)}}}function fn(l){let e,t,n,s,o,r,a,i,f,g,v,E;return s=new to({props:{className:"size-4"}}),i=new lo({props:{className:"size-4"}}),{c(){e=I("div"),t=I("div"),n=I("button"),B(s.$$.fragment),r=Y(),a=I("button"),B(i.$$.fragment),this.h()},l(D){e=$(D,"DIV",{});var T=b(e);t=$(T,"DIV",{class:!0,dir:!0});var p=b(t);n=$(p,"BUTTON",{class:!0});var k=b(n);A(s.$$.fragment,k),k.forEach(u),r=q(p),a=$(p,"BUTTON",{class:!0});var m=b(a);A(i.$$.fragment,m),m.forEach(u),p.forEach(u),T.forEach(u),this.h()},h(){c(n,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),n.disabled=o=!l[1].can().undo(),c(a,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),a.disabled=f=!l[1].can().redo(),c(t,"class","flex items-center gap-0.5 self-center min-w-fit"),c(t,"dir","ltr")},m(D,T){z(D,e,T),w(e,t),w(t,n),W(s,n,null),w(t,r),w(t,a),W(i,a,null),g=!0,v||(E=[me(n,"click",l[54]),me(a,"click",l[55])],v=!0)},p(D,T){(!g||T[0]&2&&o!==(o=!D[1].can().undo()))&&(n.disabled=o),(!g||T[0]&2&&f!==(f=!D[1].can().redo()))&&(a.disabled=f)},i(D){g||(N(s.$$.fragment,D),N(i.$$.fragment,D),g=!0)},o(D){C(s.$$.fragment,D),C(i.$$.fragment,D),g=!1},d(D){D&&u(e),U(s),U(i),v=!1,ut(E)}}}function Eo(l){let e,t,n,s,o;return t=new Cn({}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(r){e=$(r,"BUTTON",{class:!0});var a=b(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(r,a){z(r,e,a),W(t,e,null),n=!0,s||(o=me(e,"click",l[56]),s=!0)},p:ae,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){C(t.$$.fragment,r),n=!1},d(r){r&&u(e),U(t),s=!1,o()}}}function Io(l){let e,t,n,s,o;return t=new _o({}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(r){e=$(r,"BUTTON",{class:!0});var a=b(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(r,a){z(r,e,a),W(t,e,null),n=!0,s||(o=me(e,"click",l[57]),s=!0)},p:ae,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){C(t.$$.fragment,r),n=!1},d(r){r&&u(e),U(t),s=!1,o()}}}function $o(l){let e,t,n;return t=new qs({props:{className:"size-5"}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","p-1 bg-transparent hover:bg-white/5 transition rounded-lg")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p:ae,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function No(l){let e,t=He(l[2].created_at/1e6).format(l[0].t("DD/MM/YYYY"))+"",n;return{c(){e=I("span"),n=ue(t)},l(s){e=$(s,"SPAN",{});var o=b(e);n=de(o,t),o.forEach(u)},m(s,o){z(s,e,o),w(e,n)},p(s,o){o[0]&5&&t!==(t=He(s[2].created_at/1e6).format(s[0].t("DD/MM/YYYY"))+"")&&ve(n,t)},d(s){s&&u(e)}}}function Co(l){let e,t=He(l[2].created_at/1e6).format(l[0].t("[Last] dddd [at] h:mm A"))+"",n;return{c(){e=I("span"),n=ue(t)},l(s){e=$(s,"SPAN",{});var o=b(e);n=de(o,t),o.forEach(u)},m(s,o){z(s,e,o),w(e,n)},p(s,o){o[0]&5&&t!==(t=He(s[2].created_at/1e6).format(s[0].t("[Last] dddd [at] h:mm A"))+"")&&ve(n,t)},d(s){s&&u(e)}}}function Do(l){let e,t=He(l[2].created_at/1e6).format(l[0].t("[Yesterday at] h:mm A"))+"",n;return{c(){e=I("span"),n=ue(t)},l(s){e=$(s,"SPAN",{});var o=b(e);n=de(o,t),o.forEach(u)},m(s,o){z(s,e,o),w(e,n)},p(s,o){o[0]&5&&t!==(t=He(s[2].created_at/1e6).format(s[0].t("[Yesterday at] h:mm A"))+"")&&ve(n,t)},d(s){s&&u(e)}}}function To(l){let e,t=He(l[2].created_at/1e6).format(l[0].t("[Today at] h:mm A"))+"",n;return{c(){e=I("span"),n=ue(t)},l(s){e=$(s,"SPAN",{});var o=b(e);n=de(o,t),o.forEach(u)},m(s,o){z(s,e,o),w(e,n)},p(s,o){o[0]&5&&t!==(t=He(s[2].created_at/1e6).format(s[0].t("[Today at] h:mm A"))+"")&&ve(n,t)},d(s){s&&u(e)}}}function cn(l){let e,t,n=l[0].t("{{COUNT}} words",{COUNT:l[5]})+"",s,o,r,a=l[0].t("{{COUNT}} characters",{COUNT:l[6]})+"",i;return{c(){e=I("div"),t=I("div"),s=ue(n),o=Y(),r=I("div"),i=ue(a),this.h()},l(f){e=$(f,"DIV",{class:!0});var g=b(e);t=$(g,"DIV",{});var v=b(t);s=de(v,n),v.forEach(u),o=q(g),r=$(g,"DIV",{});var E=b(r);i=de(E,a),E.forEach(u),g.forEach(u),this.h()},h(){c(e,"class","flex items-center gap-1 px-1 min-w-fit")},m(f,g){z(f,e,g),w(e,t),w(t,s),w(e,o),w(e,r),w(r,i)},p(f,g){g[0]&33&&n!==(n=f[0].t("{{COUNT}} words",{COUNT:f[5]})+"")&&ve(s,n),g[0]&65&&a!==(a=f[0].t("{{COUNT}} characters",{COUNT:f[6]})+"")&&ve(i,a)},d(f){f&&u(e)}}}function un(l){let e,t;return{c(){e=I("div"),this.h()},l(n){e=$(n,"DIV",{class:!0}),b(e).forEach(u),this.h()},h(){c(e,"class",t="w-full h-full fixed top-0 left-0 "+(l[22]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")},m(n,s){z(n,e,s)},p(n,s){s[0]&4194304&&t!==(t="w-full h-full fixed top-0 left-0 "+(n[22]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")&&c(e,"class",t)},d(n){n&&u(e)}}}function Mo(l){let e,t,n,s,o;return e=new Zl({props:{onRecord:l[73],onCaptureAudio:l[74],onUpload:l[75],$$slots:{default:[Vo]},$$scope:{ctx:l}}}),s=new Ze({props:{content:l[0].t("AI"),placement:"top",$$slots:{default:[Ao]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),t=Y(),n=I("div"),B(s.$$.fragment),this.h()},l(r){A(e.$$.fragment,r),t=q(r),n=$(r,"DIV",{class:!0});var a=b(n);A(s.$$.fragment,a),a.forEach(u),this.h()},h(){c(n,"class","cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850 dark:bg-gray-850 transition shadow-xl")},m(r,a){W(e,r,a),z(r,t,a),z(r,n,a),W(s,n,null),o=!0},p(r,a){const i={};a[0]&1537&&(i.onRecord=r[73]),a[0]&1536&&(i.onCaptureAudio=r[74]),a[0]&1|a[3]&131072&&(i.$$scope={dirty:a,ctx:r}),e.$set(i);const f={};a[0]&1&&(f.content=r[0].t("AI")),a[0]&2103296|a[3]&131072&&(f.$$scope={dirty:a,ctx:r}),s.$set(f)},i(r){o||(N(e.$$.fragment,r),N(s.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),C(s.$$.fragment,r),o=!1},d(r){r&&(u(t),u(n)),U(e,r),U(s)}}}function So(l){let e,t,n,s;function o(a){l[72](a)}let r={className:"p-1 w-full max-w-full",transcribe:!1,displayMedia:l[10],echoCancellation:!1,noiseSuppression:!1,onCancel:l[70],onConfirm:l[71]};return l[9]!==void 0&&(r.recording=l[9]),t=new zs({props:r}),pe.push(()=>ke(t,"recording",o)),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(a){e=$(a,"DIV",{class:!0});var i=b(e);A(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","flex-1 w-full")},m(a,i){z(a,e,i),W(t,e,null),s=!0},p(a,i){const f={};i[0]&1024&&(f.displayMedia=a[10]),i[0]&1536&&(f.onCancel=a[70]),i[0]&1536&&(f.onConfirm=a[71]),!n&&i[0]&512&&(n=!0,f.recording=a[9],Ee(()=>n=!1)),t.$set(f)},i(a){s||(N(t.$$.fragment,a),s=!0)},o(a){C(t.$$.fragment,a),s=!1},d(a){a&&u(e),U(t)}}}function zo(l){let e,t,n;return t=new Hs({props:{className:"size-4.5"}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p:ae,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function Vo(l){let e,t;return e=new Ze({props:{content:l[0].t("Record"),placement:"top",$$slots:{default:[zo]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const o={};s[0]&1&&(o.content=n[0].t("Record")),s[3]&131072&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Oo(l){let e,t;return e=new mo({props:{onEdit:l[77],onChat:l[78],$$slots:{default:[Bo]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const o={};s[0]&6144&&(o.onChat=n[78]),s[3]&131072&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function yo(l){let e,t,n,s,o;return t=new bn({props:{className:"size-5"}}),{c(){e=I("button"),B(t.$$.fragment),this.h()},l(r){e=$(r,"BUTTON",{class:!0,type:!0});var a=b(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-2 flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0"),c(e,"type","button")},m(r,a){z(r,e,a),W(t,e,null),n=!0,s||(o=me(e,"click",l[76]),s=!0)},p:ae,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){C(t.$$.fragment,r),n=!1},d(r){r&&u(e),U(t),s=!1,o()}}}function Bo(l){let e,t,n;return t=new Kl({}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=b(e);A(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,o){z(s,e,o),W(t,e,null),n=!0},p:ae,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&u(e),U(t)}}}function Ao(l){let e,t,n,s;const o=[yo,Oo],r=[];function a(i,f){return i[21]?0:1}return e=a(l),t=r[e]=o[e](l),{c(){t.c(),n=tt()},l(i){t.l(i),n=tt()},m(i,f){r[e].m(i,f),z(i,n,f),s=!0},p(i,f){let g=e;e=a(i),e===g?r[e].p(i,f):(Je(),C(r[g],1,1,()=>{r[g]=null}),Ye(),t=r[e],t?t.p(i,f):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(n.parentNode,n))},i(i){s||(N(t),s=!0)},o(i){C(t),s=!1},d(i){i&&u(n),r[e].d(i)}}}function Wo(l){let e,t,n,s,o,r,a,i,f;const g=[wo,vo],v=[];function E(k,m){return k[20]?0:1}t=E(l),n=v[t]=g[t](l);const D=[So,Mo],T=[];function p(k,m){return k[9]?0:1}return a=p(l),i=T[a]=D[a](l),{c(){e=I("div"),n.c(),s=Y(),o=I("div"),r=I("div"),i.c(),this.h()},l(k){e=$(k,"DIV",{class:!0,id:!0});var m=b(e);n.l(m),m.forEach(u),s=q(k),o=$(k,"DIV",{class:!0});var d=b(o);r=$(d,"DIV",{class:!0});var h=b(r);i.l(h),h.forEach(u),d.forEach(u),this.h()},h(){c(e,"class","relative flex-1 w-full h-full flex justify-center pt-[11px]"),c(e,"id","note-editor"),c(r,"class","flex gap-1 w-full min-w-full justify-between"),c(o,"class","absolute z-20 bottom-0 right-0 p-3.5 max-w-full w-full flex")},m(k,m){z(k,e,m),v[t].m(e,null),z(k,s,m),z(k,o,m),w(o,r),T[a].m(r,null),f=!0},p(k,m){let d=t;t=E(k),t===d?v[t].p(k,m):(Je(),C(v[d],1,1,()=>{v[d]=null}),Ye(),n=v[t],n?n.p(k,m):(n=v[t]=g[t](k),n.c()),N(n,1),n.m(e,null));let h=a;a=p(k),a===h?T[a].p(k,m):(Je(),C(T[h],1,1,()=>{T[h]=null}),Ye(),i=T[a],i?i.p(k,m):(i=T[a]=D[a](k),i.c()),N(i,1),i.m(r,null))},i(k){f||(N(n),N(i),f=!0)},o(k){C(n),C(i),f=!1},d(k){k&&(u(e),u(s),u(o)),v[t].d(),T[a].d()}}}function Uo(l){let e,t,n,s,o;function r(g){l[88](g)}function a(g){l[89](g)}function i(g){l[90](g)}let f={onUpdate:l[87]};return l[11]!==void 0&&(f.show=l[11]),l[8]!==void 0&&(f.selectedModelId=l[8]),l[3]!==void 0&&(f.files=l[3]),e=new al({props:f}),pe.push(()=>ke(e,"show",r)),pe.push(()=>ke(e,"selectedModelId",a)),pe.push(()=>ke(e,"files",i)),{c(){B(e.$$.fragment)},l(g){A(e.$$.fragment,g)},m(g,v){W(e,g,v),o=!0},p(g,v){const E={};!t&&v[0]&2048&&(t=!0,E.show=g[11],Ee(()=>t=!1)),!n&&v[0]&256&&(n=!0,E.selectedModelId=g[8],Ee(()=>n=!1)),!s&&v[0]&8&&(s=!0,E.files=g[3],Ee(()=>s=!1)),e.$set(E)},i(g){o||(N(e.$$.fragment,g),o=!0)},o(g){C(e.$$.fragment,g),o=!1},d(g){U(e,g)}}}function jo(l){let e,t,n,s,o,r,a,i,f;function g(d){l[80](d)}function v(d){l[81](d)}function E(d){l[82](d)}function D(d){l[83](d)}function T(d){l[84](d)}function p(d){l[85](d)}function k(d){l[86](d)}let m={editor:l[1],inputElement:l[24],selectedContent:l[13],files:l[3],onInsert:l[41],onStop:l[35],onEdited:l[32],insertNoteHandler:l[79],scrollToBottomHandler:l[40]};return l[11]!==void 0&&(m.show=l[11]),l[8]!==void 0&&(m.selectedModelId=l[8]),l[4]!==void 0&&(m.messages=l[4]),l[2]!==void 0&&(m.note=l[2]),l[21]!==void 0&&(m.editing=l[21]),l[22]!==void 0&&(m.streaming=l[22]),l[23]!==void 0&&(m.stopResponseFlag=l[23]),e=new Ml({props:m}),pe.push(()=>ke(e,"show",g)),pe.push(()=>ke(e,"selectedModelId",v)),pe.push(()=>ke(e,"messages",E)),pe.push(()=>ke(e,"note",D)),pe.push(()=>ke(e,"editing",T)),pe.push(()=>ke(e,"streaming",p)),pe.push(()=>ke(e,"stopResponseFlag",k)),{c(){B(e.$$.fragment)},l(d){A(e.$$.fragment,d)},m(d,h){W(e,d,h),f=!0},p(d,h){const V={};h[0]&2&&(V.editor=d[1]),h[0]&16777216&&(V.inputElement=d[24]),h[0]&8192&&(V.selectedContent=d[13]),h[0]&8&&(V.files=d[3]),h[0]&4&&(V.insertNoteHandler=d[79]),!t&&h[0]&2048&&(t=!0,V.show=d[11],Ee(()=>t=!1)),!n&&h[0]&256&&(n=!0,V.selectedModelId=d[8],Ee(()=>n=!1)),!s&&h[0]&16&&(s=!0,V.messages=d[4],Ee(()=>s=!1)),!o&&h[0]&4&&(o=!0,V.note=d[2],Ee(()=>o=!1)),!r&&h[0]&2097152&&(r=!0,V.editing=d[21],Ee(()=>r=!1)),!a&&h[0]&4194304&&(a=!0,V.streaming=d[22],Ee(()=>a=!1)),!i&&h[0]&8388608&&(i=!0,V.stopResponseFlag=d[23],Ee(()=>i=!1)),e.$set(V)},i(d){f||(N(e.$$.fragment,d),f=!0)},o(d){C(e.$$.fragment,d),f=!1},d(d){U(e,d)}}}function Po(l){let e,t,n,s;const o=[jo,Uo],r=[];function a(i,f){return i[12]==="chat"?0:i[12]==="settings"?1:-1}return~(e=a(l))&&(t=r[e]=o[e](l)),{c(){t&&t.c(),n=tt()},l(i){t&&t.l(i),n=tt()},m(i,f){~e&&r[e].m(i,f),z(i,n,f),s=!0},p(i,f){let g=e;e=a(i),e===g?~e&&r[e].p(i,f):(t&&(Je(),C(r[g],1,1,()=>{r[g]=null}),Ye()),~e?(t=r[e],t?t.p(i,f):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(i){s||(N(t),s=!0)},o(i){C(t),s=!1},d(i){i&&u(n),~e&&r[e].d(i)}}}function Ro(l){let e,t,n,s,o;e=new pn({props:{defaultSize:70,minSize:30,class:"h-full flex flex-col w-full relative",$$slots:{default:[Wo]},$$scope:{ctx:l}}});function r(i){l[91](i)}let a={$$slots:{default:[Po]},$$scope:{ctx:l}};return l[11]!==void 0&&(a.show=l[11]),n=new ll({props:a}),pe.push(()=>ke(n,"show",r)),{c(){B(e.$$.fragment),t=Y(),B(n.$$.fragment)},l(i){A(e.$$.fragment,i),t=q(i),A(n.$$.fragment,i)},m(i,f){W(e,i,f),z(i,t,f),W(n,i,f),o=!0},p(i,f){const g={};f[0]&997719791|f[3]&131072&&(g.$$scope={dirty:f,ctx:i}),e.$set(g);const v={};f[0]&31471902|f[3]&131072&&(v.$$scope={dirty:f,ctx:i}),!s&&f[0]&2048&&(s=!0,v.show=i[11],Ee(()=>s=!1)),n.$set(v)},i(i){o||(N(e.$$.fragment,i),N(n.$$.fragment,i),o=!0)},o(i){C(e.$$.fragment,i),C(n.$$.fragment,i),o=!1},d(i){i&&u(t),U(e,i),U(n,i)}}}function Ho(l){var T,p,k,m;let e,t,n,s,o,r,a,i,f,g;St.title=e=`
		`+((T=l[2])!=null&&T.title?`${((p=l[2])==null?void 0:p.title.length)>30?`${(k=l[2])==null?void 0:k.title.slice(0,30)}...`:(m=l[2])==null?void 0:m.title} • ${l[26]}`:`${l[26]}`)+`
	`;let v=l[2]&&on(l);s=new Fs({props:{show:l[19]}});function E(d){l[46](d)}let D={title:l[0].t("Delete note?"),$$slots:{default:[po]},$$scope:{ctx:l}};return l[14]!==void 0&&(D.show=l[14]),r=new Ls({props:D}),pe.push(()=>ke(r,"show",E)),r.$on("confirm",l[47]),f=new Ns({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[Ro]},$$scope:{ctx:l}}}),{c(){t=Y(),v&&v.c(),n=Y(),B(s.$$.fragment),o=Y(),B(r.$$.fragment),i=Y(),B(f.$$.fragment)},l(d){as("svelte-zkgjga",St.head).forEach(u),t=q(d),v&&v.l(d),n=q(d),A(s.$$.fragment,d),o=q(d),A(r.$$.fragment,d),i=q(d),A(f.$$.fragment,d)},m(d,h){z(d,t,h),v&&v.m(d,h),z(d,n,h),W(s,d,h),z(d,o,h),W(r,d,h),z(d,i,h),W(f,d,h),g=!0},p(d,h){var H,R,K,G;(!g||h[0]&67108868)&&e!==(e=`
		`+((H=d[2])!=null&&H.title?`${((R=d[2])==null?void 0:R.title.length)>30?`${(K=d[2])==null?void 0:K.title.slice(0,30)}...`:(G=d[2])==null?void 0:G.title} • ${d[26]}`:`${d[26]}`)+`
	`)&&(St.title=e),d[2]?v?(v.p(d,h),h[0]&4&&N(v,1)):(v=on(d),v.c(),N(v,1),v.m(n.parentNode,n)):v&&(Je(),C(v,1,1,()=>{v=null}),Ye());const V={};h[0]&524288&&(V.show=d[19]),s.$set(V);const S={};h[0]&1&&(S.title=d[0].t("Delete note?")),h[0]&5|h[3]&131072&&(S.$$scope={dirty:h,ctx:d}),!a&&h[0]&16384&&(a=!0,S.show=d[14],Ee(()=>a=!1)),r.$set(S);const P={};h[0]&1006108671|h[3]&131072&&(P.$$scope={dirty:h,ctx:d}),f.$set(P)},i(d){g||(N(v),N(s.$$.fragment,d),N(r.$$.fragment,d),N(f.$$.fragment,d),g=!0)},o(d){C(v),C(s.$$.fragment,d),C(r.$$.fragment,d),C(f.$$.fragment,d),g=!1},d(d){d&&(u(t),u(n),u(o),u(i)),v&&v.d(d),U(s,d),U(r,d),U(f,d)}}}function Lo(l,e){return JSON.stringify(l)===JSON.stringify(e)}function dn(l){var n;const e={json:l.data.content.json,html:l.data.content.html,md:l.data.content.md},t=(n=l.data.versions)==null?void 0:n.at(-1);return!t||!Lo(t,e)?(l.data.versions=(l.data.versions??[]).concat(e),!0):!1}const Fo=l=>{l.deltaY!==0&&(l.preventDefault(),l.currentTarget.scrollLeft+=l.deltaY)},Jo=()=>{};function Yo(l,e,t){let n,s,o,r,a,i,f,g,v;Re(l,fs,_=>t(25,n=_)),Re(l,Bt,_=>t(93,s=_)),Re(l,cs,_=>t(94,o=_)),Re(l,us,_=>t(95,r=_)),Re(l,ds,_=>t(26,i=_)),Re(l,ms,_=>t(27,f=_)),Re(l,Vt,_=>t(28,g=_)),Re(l,hs,_=>t(29,v=_));const{saveAs:E}=ps,D=dt("i18n");Re(l,D,_=>t(0,a=_)),He.extend(Es),He.extend(Is),He.extend(bs);async function T(_){for(const y of _)try{He.locale(y);break}catch(L){`${y}`}}let{id:p=null}=e,k=null,m=null,d=[],h=[],V=0,S=0,P=null,H=null,R=!1,K=!1,G=!1,j="chat",Q=null,te=!1,Z=!1,le=!1,se=!1,oe=!1,Ue=!1,je=!1,J=!1,X=!1,O=!1,x=null;const re=async()=>{t(20,je=!0);const _=await js(localStorage.token,p).catch(y=>(ye.error(`${y}`),null));if(t(4,h=[]),_)t(2,m=_),t(3,d=_.data.files||[]);else{jt("/");return}t(20,je=!1)};let Ce=null;const he=()=>{Ce&&clearTimeout(Ce),Ce=setTimeout(async()=>{await Ps(localStorage.token,p,{title:(m==null?void 0:m.title)===""?a.t("Untitled"):m.title,data:{files:d},access_control:m==null?void 0:m.access_control}).catch(_=>{ye.error(`${_}`)})},200)},Ve=async()=>{k&&k.commands.setContent(m.data.content.html)},Ge=async()=>{var _e,Ie;const y=`### Task:
Generate a concise, 3-5 word title with an emoji summarizing the content in the content's primary language.
### Guidelines:
- The title should clearly represent the main theme or subject of the content.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the content's primary language.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "📉 Stock Market Trends" },
- { "title": "🍪 Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "🎮 Video Game Development Insights" }
### Content:
<content>
${m.data.content.md}
</content>`,L=JSON.parse(JSON.stringify(m.title));t(2,m.title="",m),t(18,oe=!0);const ne=await Ts(localStorage.token,{model:H,stream:!1,messages:[{role:"user",content:y}]},`${zt}/api`);if(ne){const $e=((Ie=(_e=ne==null?void 0:ne.choices[0])==null?void 0:_e.message)==null?void 0:Ie.content)??"";try{const ge=$e.indexOf("{"),Ne=$e.lastIndexOf("}");if(ge!==-1&&Ne!==-1){const Me=$e.substring(ge,Ne+1),ee=JSON.parse(Me);ee&&ee.title&&t(2,m.title=ee.title.trim(),m)}}catch(ge){ye.error(a.t("Failed to generate title"))}}m.title||t(2,m.title=L,m),t(18,oe=!1),await rt(),he()};async function Xe(){if(H===""){ye.error(a.t("Please select a model."));return}const _=s.filter(y=>{var L,ne;return y.id===H&&!(((ne=(L=y==null?void 0:y.info)==null?void 0:L.meta)==null?void 0:ne.hidden)??!1)}).find(y=>y.id===H);if(!_){t(8,H="");return}t(21,J=!0),await at(_),t(21,J=!1),Ve(),t(7,P=null)}const ie=async()=>{t(23,O=!0)},fe=async _=>{var ne,_e,Ie,$e,ge,Ne;const y=Wt(),L={type:"file",file:"",id:null,url:"",name:_.name,collection_name:"",status:"uploading",size:_.size,error:"",itemId:y};if(L.size==0)return ye.error(a.t("You cannot upload an empty file.")),null;t(3,d=[...d,L]),t(12,j="settings"),G||t(11,G=!0);try{let Me=null;(_.type.startsWith("audio/")||_.type.startsWith("video/"))&&((_e=(ne=r==null?void 0:r.audio)==null?void 0:ne.stt)!=null&&_e.language)&&(Me={language:($e=(Ie=r==null?void 0:r.audio)==null?void 0:Ie.stt)==null?void 0:$e.language});const ee=await Ds(localStorage.token,_,Me);ee?(ee.id,L.name,(ge=ee==null?void 0:ee.meta)==null||ge.collection_name,ee.error&&(console.warn("File upload warning:",ee.error),ye.warning(ee.error)),L.status="uploaded",L.file=ee,L.id=ee.id,L.collection_name=((Ne=ee==null?void 0:ee.meta)==null?void 0:Ne.collection_name)||(ee==null?void 0:ee.collection_name),L.url=`${gs}/files/${ee.id}`,t(3,d)):t(3,d=d.filter(Fe=>(Fe==null?void 0:Fe.itemId)!==y))}catch(Me){ye.error(`${Me}`),t(3,d=d.filter(ee=>(ee==null?void 0:ee.itemId)!==y))}return d.length>0?t(2,m.data.files=d,m):t(2,m.data.files=null,m),t(1,k.storage.files=d,k),he(),L},ce=async(_,y={},L={})=>{var Ne,Me,ee,Fe,ot,ht;const ne=(y==null?void 0:y.imageCompression)??!1,_e=((Me=(Ne=L==null?void 0:L.file)==null?void 0:Ne.image_compression)==null?void 0:Me.width)??null,Ie=((Fe=(ee=L==null?void 0:L.file)==null?void 0:ee.image_compression)==null?void 0:Fe.height)??null;if(!ne&&!_e&&!Ie)return _;let $e=null,ge=null;return ne&&($e=((ot=y==null?void 0:y.imageCompressionSize)==null?void 0:ot.width)??null,ge=((ht=y==null?void 0:y.imageCompressionSize)==null?void 0:ht.height)??null),_e&&($e===null||$e>_e)&&($e=_e),Ie&&(ge===null||ge>Ie)&&(ge=Ie),$e||ge?await ws(_,$e,ge):_},qe=async _=>{var y,L,ne,_e;if(_.name,_.type,_.size,_.name.split(".").at(-1),(((y=o==null?void 0:o.file)==null?void 0:y.max_size)??null)!==null&&_.size>(((L=o==null?void 0:o.file)==null?void 0:L.max_size)??0)*1024*1024){_.size,(((ne=o==null?void 0:o.file)==null?void 0:ne.max_size)??0)*1024*1024,ye.error(a.t("File size should not exceed {{maxSize}} MB.",{maxSize:(_e=o==null?void 0:o.file)==null?void 0:_e.max_size}));return}return _.type.startsWith("image/")?await new Promise(async($e,ge)=>{let Ne=new FileReader;Ne.onload=async Me=>{try{let ee=Me.target.result;ee=await ce(ee,r,o);const ot={id:Wt(),type:"image",url:`${ee}`};t(3,d=[...d,ot]),t(2,m.data.files=d,m),t(1,k.storage.files=d,k),he(),$e(ot)}catch(ee){ge(ee)}},Ne.readAsDataURL(_.type==="image/heic"?await vs(_):_)}):await fe(_)},De=async _=>{if(_==="txt"){const y=new Blob([m.data.content.md],{type:"text/plain"});E(y,`${m.title}.txt`)}else if(_==="md"){const y=new Blob([m.data.content.md],{type:"text/markdown"});E(y,`${m.title}.md`)}else _==="pdf"&&await Pe(m)},Pe=async _=>{var y,L;try{const[{default:ne},{default:_e}]=await Promise.all([At(()=>import("../chunks/h22AL3a0.js"),__vite__mapDeps([0,1,2]),import.meta.url),At(()=>import("../chunks/BNVeY_Dn.js"),[],import.meta.url)]),Ie=1024,$e=1400,ge=((L=(y=_.data)==null?void 0:y.content)==null?void 0:L.html)??"";let Ne;ge instanceof HTMLElement?Ne=ge:(Ne=document.createElement("div"),Ne.innerHTML=ge,document.body.appendChild(Ne));const Me=await _e(Ne,{useCORS:!0,scale:2,width:Ie,windowWidth:Ie,windowHeight:$e});ge instanceof HTMLElement||document.body.removeChild(Ne);const ee=Me.toDataURL("image/jpeg",.7),Fe=new ne("p","mm","a4"),ot=210,ht=297,Dt=Me.height*ot/Me.width;let Tt=Dt,Mt=0;for(Fe.addImage(ee,"JPEG",0,Mt,ot,Dt),Tt-=ht;Tt>0;)Mt-=ht,Fe.addPage(),Fe.addImage(ee,"JPEG",0,Mt,ot,Dt),Tt-=ht;Fe.save(`${_.title}.pdf`)}catch(ne){ye.error(`${ne}`)}},we=async _=>{await Rs(localStorage.token,_).catch(L=>(ye.error(`${L}`),null))?(ye.success(a.t("Note deleted successfully")),jt("/notes")):ye.error(a.t("Failed to delete note"))},be=()=>{const _=document.getElementById("note-content-container");_&&(_.scrollTop=_==null?void 0:_.scrollHeight)},at=async _=>{t(23,O=!1);let y={json:null,html:"",md:""};const L=`Enhance existing notes using additional context provided from audio transcription or uploaded file content in the content's primary language. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.

Input will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.

# Output Format

Provide the enhanced notes in markdown format. Use markdown syntax for headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.
`,[ne,_e]=await vn(localStorage.token,{model:_.id,stream:!0,messages:[{role:"system",content:L},{role:"user",content:`<notes>${m.data.content.md}</notes>`+(d&&d.length>0?`
<context>${d.map(Ie=>{var $e,ge;return`${Ie.name}: ${((ge=($e=Ie==null?void 0:Ie.file)==null?void 0:$e.data)==null?void 0:ge.content)??"Could not extract content"}
`}).join("")}</context>`:"")}]},`${zt}/api`);if(await rt(),t(22,X=!0),ne&&ne.ok){const Ie=ne.body.pipeThrough(new TextDecoderStream).pipeThrough(_n(`
`)).getReader();for(;;){const{value:$e,done:ge}=await Ie.read();if(ge||O){O&&_e.abort("User: Stop Response"),t(21,J=!1),t(22,X=!1);break}try{let Ne=$e.split(`
`);for(const Me of Ne)if(Me!==""&&Me!=="data: [DONE]"){let ee=JSON.parse(Me.replace(/^data: /,""));if(ee.choices&&ee.choices.length>0){const Fe=ee.choices[0];Fe.delta&&Fe.delta.content&&(y.md+=Fe.delta.content,y.html=Ot.parse(y.md),t(2,m.data.content.md=y.md,m),t(2,m.data.content.html=y.html,m),t(2,m.data.content.json=null,m),be())}}}catch(Ne){}}}t(22,X=!1)},mt=_=>{dn(m),x==null||x.insertContent(_)},xe=async _=>{if(_.id===p){_.access_control&&_.access_control!==m.access_control&&t(2,m.access_control=_.access_control,m),_.data&&_.data.files&&(t(3,d=_.data.files),t(2,m.data.files=d,m)),_.title&&_.title&&t(2,m.title=_.title,m),t(1,k.storage.files=d,k),await rt();for(const y of d)if(y.type==="image"){const L=new CustomEvent("data",{files:d}),ne=document.getElementById(`image:${y.id}`);ne&&ne.dispatchEvent(L)}}};yt(async()=>{var _;await rt(),n==null||n.emit("join-note",{note_id:p,auth:{token:localStorage.token}}),n==null||n.on("note-events",xe),r!=null&&r.models?t(8,H=r==null?void 0:r.models[0]):o!=null&&o.default_models?t(8,H=o==null?void 0:o.default_models.split(",")[0]):t(8,H=""),H&&(s.filter(L=>{var ne,_e;return L.id===H&&!(((_e=(ne=L==null?void 0:L.info)==null?void 0:ne.meta)==null?void 0:_e.hidden)??!1)}).find(L=>L.id===H)||t(8,H="")),H||t(8,H=((_=s.at(0))==null?void 0:_.id)||""),document.getElementById("note-editor")}),mn(()=>{n==null||n.off("note-events",xe),document.getElementById("note-editor")});const bt=()=>{he()};function kt(_){Z=_,t(15,Z)}function Et(_){l.$$.not_equal(m.access_control,_)&&(m.access_control=_,t(2,m))}function M(_){te=_,t(14,te)}const F=()=>{we(m.id),t(14,te=!1)},Qe=()=>{Vt.set(!g)};function Le(){m.title=this.value,t(2,m)}const Oe=()=>{t(17,se=!0)},Te=_=>{if(le){t(16,le=!1);return}t(17,se=!1),he()},it=()=>{t(16,le=!0)},Ke=_=>{_.preventDefault(),_.stopImmediatePropagation(),_.stopPropagation(),Ge(),t(17,se=!1)},nt=()=>{k.chain().focus().undo().run()},st=()=>{k.chain().focus().redo().run()},ft=()=>{G&&j==="chat"?t(11,G=!1):(G||t(11,G=!0),t(12,j="chat"))},lt=()=>{G&&j==="settings"?t(11,G=!1):(G||t(11,G=!0),t(12,j="settings"))},It=_=>{De(_)},$t=async()=>{const _=window.location.origin;await Ut(`${_}/notes/${m.id}`)?ye.success(a.t("Copied link to clipboard")):ye.error(a.t("Failed to copy link"))},Nt=async()=>{await Ut(m.data.content.md,m.data.content.html,!0).catch(y=>(ye.error(`${y}`),null))&&ye.success(a.t("Copied to clipboard"))},Dn=()=>{t(14,te=!0)},Tn=()=>{t(15,Z=!0)},Mn=({editor:_})=>{const{from:y,to:L}=_.state.selection,ne=_.state.doc.textBetween(y,L," ");ne.length===0?t(13,Q=null):t(13,Q={text:ne,from:y,to:L})},Sn=_=>{t(2,m.data.content.html=_.html,m),t(2,m.data.content.md=_.md,m),k&&(t(5,V=k.storage.characterCount.words()),t(6,S=k.storage.characterCount.characters()))},zn=(_,y,L)=>{y.forEach(async ne=>{const _e=await qe(ne).catch(Ie=>null);_e.type==="image"&&_.chain().insertContentAt(L,{type:"image",attrs:{src:`data://${_e.id}`}}).focus().run()})};function Vn(_){pe[_?"unshift":"push"](()=>{x=_,t(24,x)})}function On(_){k=_,t(1,k)}function yn(_){l.$$.not_equal(m.data.content.json,_)&&(m.data.content.json=_,t(2,m))}const Bn=async _=>{_=_.detail.event||_;const y=_.clipboardData||window.clipboardData;if(y&&y.items){y.items;for(const L of y.items)if(L.type.indexOf("image")!==-1){const ne=L.getAsFile(),_e=await qe(ne);k&&(k==null||k.chain().insertContentAt(k.state.selection.$anchor.pos,{type:"image",attrs:{src:`data://${_e.id}`}}).focus().run())}else if((L==null?void 0:L.kind)==="file"){const ne=L.getAsFile();await qe(ne),_.preventDefault()}}},An=()=>{t(9,R=!1),t(10,K=!1)},Wn=_=>{_!=null&&_.file&&fe(_==null?void 0:_.file),t(9,R=!1),t(10,K=!1)};function Un(_){R=_,t(9,R)}const jn=async()=>{t(10,K=!1);try{let _=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(y){return ye.error(a.t("Permission denied when accessing microphone: {{error}}",{error:y})),null});_&&(t(9,R=!0),_.getTracks().forEach(L=>L.stop())),_=null}catch{ye.error(a.t("Permission denied when accessing microphone"))}},Pn=async()=>{t(10,K=!0),t(9,R=!0)},Rn=async()=>{const _=document.createElement("input");_.type="file",_.accept="audio/*",_.multiple=!1,_.click(),_.onchange=async y=>{const L=y.target.files;L&&L.length>0&&await fe(L[0])}},Hn=()=>{ie()},Ln=()=>{Xe()},Fn=()=>{t(11,G=!0),t(12,j="chat")},Jn=()=>{dn(m)};function Yn(_){G=_,t(11,G)}function qn(_){H=_,t(8,H)}function Gn(_){h=_,t(4,h)}function Zn(_){m=_,t(2,m)}function Xn(_){J=_,t(21,J)}function Qn(_){X=_,t(22,X)}function Kn(_){O=_,t(23,O)}const xn=()=>{he()};function es(_){G=_,t(11,G)}function ts(_){H=_,t(8,H)}function ns(_){d=_,t(3,d)}function ss(_){G=_,t(11,G)}return l.$$set=_=>{"id"in _&&t(42,p=_.id)},l.$$.update=()=>{l.$$.dirty[0]&1&&T(a.languages),l.$$.dirty[1]&2048&&p&&re()},[a,k,m,d,h,V,S,P,H,R,K,G,j,Q,te,Z,le,se,oe,Ue,je,J,X,O,x,n,i,f,g,v,D,he,Ve,Ge,Xe,ie,fe,qe,De,we,be,mt,p,bt,kt,Et,M,F,Qe,Le,Oe,Te,it,Ke,nt,st,ft,lt,It,$t,Nt,Dn,Tn,Mn,Sn,zn,Vn,On,yn,Bn,An,Wn,Un,jn,Pn,Rn,Hn,Ln,Fn,Jn,Yn,qn,Gn,Zn,Xn,Qn,Kn,xn,es,ts,ns,ss]}class qo extends Be{constructor(e){super(),Ae(this,e,Yo,Ho,We,{id:42},null,[-1,-1,-1,-1])}}function Go(l){let e,t,n,s;return t=new qo({props:{id:l[1].params.id}}),{c(){e=I("div"),B(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{id:!0,class:!0});var r=b(e);A(t.$$.fragment,r),r.forEach(u),this.h()},h(){c(e,"id","note-container"),c(e,"class",n="w-full h-full "+(l[0]?"md:max-w-[calc(100%-260px)]":""))},m(o,r){z(o,e,r),W(t,e,null),s=!0},p(o,[r]){const a={};r&2&&(a.id=o[1].params.id),t.$set(a),(!s||r&1&&n!==(n="w-full h-full "+(o[0]?"md:max-w-[calc(100%-260px)]":"")))&&c(e,"class",n)},i(o){s||(N(t.$$.fragment,o),s=!0)},o(o){C(t.$$.fragment,o),s=!1},d(o){o&&u(e),U(t)}}}function Zo(l,e,t){let n,s;return Re(l,Vt,o=>t(0,n=o)),Re(l,is,o=>t(1,s=o)),[n,s]}class Ur extends Be{constructor(e){super(),Ae(this,e,Zo,Go,We,{})}}export{Ur as component};
//# sourceMappingURL=25.DqDb2Gmj.js.map

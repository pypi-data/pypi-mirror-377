

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>paperap.models.document.model &mdash; Paperap 0.0.8 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="/_modules/paperap/models/document/model.html" />
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=53b53b71"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script defer="defer" src="../../../../_static/readthedocs.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Paperap
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction to Paperap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../usage.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Paperap</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">paperap.models.document.model</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for paperap.models.document.model</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Provide document models for interacting with Paperless-ngx documents.</span>

<span class="sd">This module contains the Document and DocumentNote models, which represent</span>
<span class="sd">documents and their associated notes in the Paperless-ngx system. These models</span>
<span class="sd">provide methods for retrieving, updating, and managing document metadata,</span>
<span class="sd">content, and relationships with other entities like tags, correspondents,</span>
<span class="sd">and custom fields.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">Self</span><span class="p">,</span> <span class="n">TypedDict</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">override</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pydantic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">field_serializer</span><span class="p">,</span> <span class="n">field_validator</span><span class="p">,</span> <span class="n">model_serializer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">paperap.const</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">CustomFieldTypedDict</span><span class="p">,</span>
    <span class="n">CustomFieldTypes</span><span class="p">,</span>
    <span class="n">CustomFieldValues</span><span class="p">,</span>
    <span class="n">DocumentStorageType</span><span class="p">,</span>
    <span class="n">FilteringStrategies</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paperap.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResourceNotFoundError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.abstract.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document.meta</span><span class="w"> </span><span class="kn">import</span> <span class="n">SUPPORTED_FILTERING_PARAMS</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document.queryset</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentQuerySet</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.correspondent.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correspondent</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.custom_field</span><span class="w"> </span><span class="kn">import</span> <span class="n">CustomField</span><span class="p">,</span> <span class="n">CustomFieldQuerySet</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document.download.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">DownloadedDocument</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document.metadata.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentMetadata</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document.suggestions.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentSuggestions</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.document_type.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentType</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.storage_path.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">StoragePath</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.tag</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagQuerySet</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.models.user.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">paperap.resources.documents</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentResource</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="DocumentNote">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.DocumentNote">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DocumentNote</span><span class="p">(</span><span class="n">StandardModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represent a note on a Paperless-ngx document.</span>

<span class="sd">    This class models user-created notes that can be attached to documents in the</span>
<span class="sd">    Paperless-ngx system. Notes include information about when they were created,</span>
<span class="sd">    who created them, and their content.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        deleted_at (datetime | None): Timestamp when the note was deleted, or None if not deleted.</span>
<span class="sd">        restored_at (datetime | None): Timestamp when the note was restored after deletion, or None.</span>
<span class="sd">        transaction_id (int | None): ID of the transaction that created or modified this note.</span>
<span class="sd">        note (str): The text content of the note.</span>
<span class="sd">        created (datetime): Timestamp when the note was created.</span>
<span class="sd">        document (int): ID of the document this note is attached to.</span>
<span class="sd">        user (int): ID of the user who created this note.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; note = client.document_notes().get(1)</span>
<span class="sd">        &gt;&gt;&gt; print(note.note)</span>
<span class="sd">        &#39;This is an important document&#39;</span>
<span class="sd">        &gt;&gt;&gt; print(note.created)</span>
<span class="sd">        2023-01-15 14:30:22</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">deleted_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">restored_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">transaction_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">note</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">created</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">document</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">int</span>

<div class="viewcode-block" id="DocumentNote.Meta">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.DocumentNote.Meta">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">(</span><span class="n">StandardModel</span><span class="o">.</span><span class="n">Meta</span><span class="p">):</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;deleted_at&quot;</span><span class="p">,</span> <span class="s2">&quot;restored_at&quot;</span><span class="p">,</span> <span class="s2">&quot;transaction_id&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">}</span></div>


<div class="viewcode-block" id="DocumentNote.serialize_datetime">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.DocumentNote.serialize_datetime">[docs]</a>
    <span class="nd">@field_serializer</span><span class="p">(</span><span class="s2">&quot;deleted_at&quot;</span><span class="p">,</span> <span class="s2">&quot;restored_at&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize datetime fields to ISO format.</span>

<span class="sd">        Converts datetime objects to ISO 8601 formatted strings for JSON serialization.</span>
<span class="sd">        Returns None if the input value is None.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (datetime | None): The datetime value to serialize.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str | None: The serialized datetime value as an ISO 8601 string, or None if the value is None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="DocumentNote.get_document">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.DocumentNote.get_document">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_document</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the document associated with this note.</span>

<span class="sd">        Retrieves the full Document object that this note is attached to</span>
<span class="sd">        by making an API request using the document ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Document: The document associated with this note.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; note = client.document_notes().get(1)</span>
<span class="sd">            &gt;&gt;&gt; document = note.get_document()</span>
<span class="sd">            &gt;&gt;&gt; print(document.title)</span>
<span class="sd">            &#39;Invoice #12345&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">documents</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document</span><span class="p">)</span></div>


<div class="viewcode-block" id="DocumentNote.get_user">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.DocumentNote.get_user">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;User&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the user who created this note.</span>

<span class="sd">        Retrieves the full User object for the user who created this note</span>
<span class="sd">        by making an API request using the user ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            User: The user who created this note.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; note = client.document_notes().get(1)</span>
<span class="sd">            &gt;&gt;&gt; user = note.get_user()</span>
<span class="sd">            &gt;&gt;&gt; print(user.username)</span>
<span class="sd">            &#39;admin&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">users</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Document">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Document</span><span class="p">(</span><span class="n">StandardModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represent a Paperless-ngx document.</span>

<span class="sd">    This class models documents stored in the Paperless-ngx system, providing access</span>
<span class="sd">    to document metadata, content, and related objects. It supports operations like</span>
<span class="sd">    downloading, updating metadata, and managing tags and custom fields.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        added (datetime | None): Timestamp when the document was added to the system.</span>
<span class="sd">        archive_checksum (str | None): Checksum of the archived version of the document.</span>
<span class="sd">        archive_filename (str | None): Filename of the archived version.</span>
<span class="sd">        archive_serial_number (int | None): Serial number in the archive system.</span>
<span class="sd">        archived_file_name (str | None): Original name of the archived file.</span>
<span class="sd">        checksum (str | None): Checksum of the original document.</span>
<span class="sd">        content (str): Full text content of the document.</span>
<span class="sd">        correspondent_id (int | None): ID of the associated correspondent.</span>
<span class="sd">        created (datetime | None): Timestamp when the document was created.</span>
<span class="sd">        created_date (str | None): Creation date as a string.</span>
<span class="sd">        custom_field_dicts (list[CustomFieldValues]): Custom fields associated with the document.</span>
<span class="sd">        deleted_at (datetime | None): Timestamp when the document was deleted, or None.</span>
<span class="sd">        document_type_id (int | None): ID of the document type.</span>
<span class="sd">        filename (str | None): Current filename in the system.</span>
<span class="sd">        is_shared_by_requester (bool): Whether the document is shared by the requester.</span>
<span class="sd">        notes (list[DocumentNote]): Notes attached to this document.</span>
<span class="sd">        original_filename (str | None): Original filename when uploaded.</span>
<span class="sd">        owner (int | None): ID of the document owner.</span>
<span class="sd">        page_count (int | None): Number of pages in the document.</span>
<span class="sd">        storage_path_id (int | None): ID of the storage path.</span>
<span class="sd">        storage_type (DocumentStorageType | None): Type of storage used.</span>
<span class="sd">        tag_ids (list[int]): List of tag IDs associated with this document.</span>
<span class="sd">        title (str): Title of the document.</span>
<span class="sd">        user_can_change (bool | None): Whether the current user can modify this document.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; document = client.documents().get(pk=1)</span>
<span class="sd">        &gt;&gt;&gt; document.title = &#39;Example Document&#39;</span>
<span class="sd">        &gt;&gt;&gt; document.save()</span>
<span class="sd">        &gt;&gt;&gt; document.title</span>
<span class="sd">        &#39;Example Document&#39;</span>

<span class="sd">        # Get document metadata</span>
<span class="sd">        &gt;&gt;&gt; metadata = document.get_metadata()</span>
<span class="sd">        &gt;&gt;&gt; print(metadata.original_mime_type)</span>
<span class="sd">        &#39;application/pdf&#39;</span>

<span class="sd">        # Download document</span>
<span class="sd">        &gt;&gt;&gt; download = document.download()</span>
<span class="sd">        &gt;&gt;&gt; with open(download.disposition_filename, &#39;wb&#39;) as f:</span>
<span class="sd">        ...     f.write(download.content)</span>

<span class="sd">        # Get document suggestions</span>
<span class="sd">        &gt;&gt;&gt; suggestions = document.get_suggestions()</span>
<span class="sd">        &gt;&gt;&gt; print(suggestions.tags)</span>
<span class="sd">        [&#39;Invoice&#39;, &#39;Tax&#39;, &#39;2023&#39;]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># where did this come from? It&#39;s not in sample data?</span>
    <span class="n">added</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">archive_checksum</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">archive_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">archive_serial_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">archived_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">checksum</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">correspondent_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">created</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Creation timestamp&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">created_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">custom_field_dicts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">CustomFieldValues</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)]</span>
    <span class="n">deleted_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">document_type_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_shared_by_requester</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">notes</span><span class="p">:</span> <span class="s2">&quot;list[DocumentNote]&quot;</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">original_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">owner</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">page_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">storage_path_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">storage_type</span><span class="p">:</span> <span class="n">DocumentStorageType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tag_ids</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)]</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">user_can_change</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_correspondent</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Correspondent</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_document_type</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">DocumentType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_storage_path</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">StoragePath</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_resource</span><span class="p">:</span> <span class="s2">&quot;DocumentResource&quot;</span>  <span class="c1"># type: ignore # nested generics not supported</span>
    <span class="n">__search_hit__</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Document.Meta">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.Meta">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">(</span><span class="n">StandardModel</span><span class="o">.</span><span class="n">Meta</span><span class="p">):</span>
        <span class="c1"># NOTE: Filtering appears to be disabled by paperless on page_count</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;page_count&quot;</span><span class="p">,</span> <span class="s2">&quot;deleted_at&quot;</span><span class="p">,</span> <span class="s2">&quot;is_shared_by_requester&quot;</span><span class="p">,</span> <span class="s2">&quot;archived_file_name&quot;</span><span class="p">}</span>
        <span class="n">filtering_disabled</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;page_count&quot;</span><span class="p">,</span> <span class="s2">&quot;deleted_at&quot;</span><span class="p">,</span> <span class="s2">&quot;is_shared_by_requester&quot;</span><span class="p">}</span>
        <span class="n">filtering_strategies</span> <span class="o">=</span> <span class="p">{</span><span class="n">FilteringStrategies</span><span class="o">.</span><span class="n">WHITELIST</span><span class="p">}</span>
        <span class="n">field_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;tag_ids&quot;</span><span class="p">,</span>
            <span class="s2">&quot;custom_fields&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_field_dicts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;document_type&quot;</span><span class="p">:</span> <span class="s2">&quot;document_type_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;correspondent&quot;</span><span class="p">:</span> <span class="s2">&quot;correspondent_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;storage_path&quot;</span><span class="p">:</span> <span class="s2">&quot;storage_path_id&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">supported_filtering_params</span> <span class="o">=</span> <span class="n">SUPPORTED_FILTERING_PARAMS</span></div>


<div class="viewcode-block" id="Document.serialize_datetime">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.serialize_datetime">[docs]</a>
    <span class="nd">@field_serializer</span><span class="p">(</span><span class="s2">&quot;added&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;deleted_at&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize datetime fields to ISO format.</span>

<span class="sd">        Converts datetime objects to ISO 8601 formatted strings for JSON serialization.</span>
<span class="sd">        Returns None if the input value is None.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (datetime | None): The datetime value to serialize.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str | None: The serialized datetime value as an ISO 8601 string, or None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Document.serialize_notes">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.serialize_notes">[docs]</a>
    <span class="nd">@field_serializer</span><span class="p">(</span><span class="s2">&quot;notes&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DocumentNote</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize notes to a list of dictionaries.</span>

<span class="sd">        Converts DocumentNote objects to dictionaries for JSON serialization.</span>
<span class="sd">        Returns an empty list if the input value is None or empty.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (list[DocumentNote]): The list of DocumentNote objects to serialize.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[dict[str, Any]]: A list of dictionaries representing the notes.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">note</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Document.validate_tags">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.validate_tags">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;tag_ids&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_tags</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and convert tag IDs to a list of integers.</span>

<span class="sd">        Ensures tag IDs are properly formatted as a list of integers.</span>
<span class="sd">        Handles various input formats including None, single integers, and lists.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Any): The tag IDs to validate, which can be None, an integer, or a list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[int]: A list of validated tag IDs.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, an integer, or a list.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_tags(None)</span>
<span class="sd">            []</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_tags(5)</span>
<span class="sd">            [5]</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_tags([1, 2, 3])</span>
<span class="sd">            [1, 2, 3]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for tags: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.validate_custom_fields">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.validate_custom_fields">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;custom_field_dicts&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_custom_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">CustomFieldValues</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and return custom field dictionaries.</span>

<span class="sd">        Ensures custom fields are properly formatted as a list of CustomFieldValues.</span>
<span class="sd">        Returns an empty list if the input value is None.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Any): The list of custom field dictionaries to validate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[CustomFieldValues]: A list of validated custom field dictionaries.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None or a list.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for custom fields: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.validate_text">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.validate_text">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_text</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and return a text field.</span>

<span class="sd">        Ensures text fields are properly formatted as strings.</span>
<span class="sd">        Converts integers to strings and returns an empty string if the input value is None.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Any): The value of the text field to validate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The validated text value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, a string, or an integer.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_text(None)</span>
<span class="sd">            &#39;&#39;</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_text(&quot;Hello&quot;)</span>
<span class="sd">            &#39;Hello&#39;</span>
<span class="sd">            &gt;&gt;&gt; Document.validate_text(123)</span>
<span class="sd">            &#39;123&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for text: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.validate_notes">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.validate_notes">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_notes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and return the list of notes.</span>

<span class="sd">        Ensures notes are properly formatted as a list of DocumentNote objects.</span>
<span class="sd">        Handles various input formats including None, single DocumentNote objects, and lists.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Any): The list of notes to validate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Any]: The validated list of notes.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, a DocumentNote, or a list.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">DocumentNote</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for notes: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.validate_is_shared_by_requester">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.validate_is_shared_by_requester">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;is_shared_by_requester&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_is_shared_by_requester</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and return the is_shared_by_requester flag.</span>

<span class="sd">        Ensures the is_shared_by_requester flag is properly formatted as a boolean.</span>
<span class="sd">        Returns False if the input value is None.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Any): The flag to validate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: The validated flag.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None or a boolean.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for is_shared_by_requester: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">custom_field_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the IDs of the custom fields for this document.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[int]: A list of custom field IDs associated with this document.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; field_ids = document.custom_field_ids</span>
<span class="sd">            &gt;&gt;&gt; print(field_ids)</span>
<span class="sd">            [1, 3, 5]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">field</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">custom_field_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the values of the custom fields for this document.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Any]: A list of values for the custom fields associated with this document.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; values = document.custom_field_values</span>
<span class="sd">            &gt;&gt;&gt; print(values)</span>
<span class="sd">            [&#39;2023-01-15&#39;, &#39;INV-12345&#39;, True]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tag_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the names of the tags for this document.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[str]: A list of tag names associated with this document.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; names = document.tag_names</span>
<span class="sd">            &gt;&gt;&gt; print(names)</span>
<span class="sd">            [&#39;Invoice&#39;, &#39;Tax&#39;, &#39;Important&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagQuerySet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the tags for this document.</span>

<span class="sd">        Returns a QuerySet of Tag objects associated with this document.</span>
<span class="sd">        The QuerySet is lazily loaded, so API requests are only made when</span>
<span class="sd">        the tags are actually accessed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            TagQuerySet: QuerySet of tags associated with this document.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(pk=1)</span>
<span class="sd">            &gt;&gt;&gt; for tag in document.tags:</span>
<span class="sd">            ...     print(f&#39;{tag.name} # {tag.id}&#39;)</span>
<span class="sd">            Tag 1 # 1</span>
<span class="sd">            Tag 2 # 2</span>
<span class="sd">            Tag 3 # 3</span>

<span class="sd">            &gt;&gt;&gt; if 5 in document.tags:</span>
<span class="sd">            ...     print(&#39;Tag ID #5 is associated with this document&#39;)</span>

<span class="sd">            &gt;&gt;&gt; tag = client.tags().get(pk=1)</span>
<span class="sd">            &gt;&gt;&gt; if tag in document.tags:</span>
<span class="sd">            ...     print(&#39;Tag ID #1 is associated with this document&#39;)</span>

<span class="sd">            &gt;&gt;&gt; filtered_tags = document.tags.filter(name__icontains=&#39;example&#39;)</span>
<span class="sd">            &gt;&gt;&gt; for tag in filtered_tags:</span>
<span class="sd">            ...     print(f&#39;{tag.name} # {tag.id}&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span><span class="o">.</span><span class="n">none</span><span class="p">()</span>

        <span class="c1"># Use the API&#39;s filtering capability to get only the tags with specific IDs</span>
        <span class="c1"># The paperless-ngx API supports id__in filter for retrieving multiple objects by ID</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="p">)</span>

    <span class="nd">@tags</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Iterable[Tag | int] | None&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the tags for this document.</span>

<span class="sd">        Updates the document&#39;s tag_ids list based on the provided tags.</span>
<span class="sd">        Accepts None (to clear all tags), an iterable of Tag objects,</span>
<span class="sd">        or an iterable of tag IDs.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Iterable[Tag | int] | None): The tags to set. Can be None, an iterable of Tag objects,</span>
<span class="sd">                  or an iterable of tag IDs.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, an iterable of Tag objects,</span>
<span class="sd">                      or an iterable of integers.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Set tags by ID</span>
<span class="sd">            &gt;&gt;&gt; document.tags = [1, 2, 3]</span>
<span class="sd">            &gt;&gt;&gt; # Set tags by Tag objects</span>
<span class="sd">            &gt;&gt;&gt; document.tags = client.tags().filter(name__icontains=&#39;invoice&#39;)</span>
<span class="sd">            &gt;&gt;&gt; # Clear all tags</span>
<span class="sd">            &gt;&gt;&gt; document.tags = None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="c1"># Reset tag_ids to ensure we only have the new values</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># Check against StandardModel to avoid circular imports</span>
                <span class="c1"># If it is another type of standard model, pydantic validators will complain</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for tags: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for tags: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">correspondent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Correspondent | None&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the correspondent for this document.</span>

<span class="sd">        Retrieves the Correspondent object associated with this document.</span>
<span class="sd">        Uses caching to minimize API requests when accessing the same correspondent</span>
<span class="sd">        multiple times.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Correspondent | None: The correspondent object or None if not set.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(pk=1)</span>
<span class="sd">            &gt;&gt;&gt; if document.correspondent:</span>
<span class="sd">            ...     print(document.correspondent.name)</span>
<span class="sd">            Example Correspondent</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Return cache</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correspondent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pk</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correspondent</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">value</span>

        <span class="c1"># None set to retrieve</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Retrieve it</span>
        <span class="n">correspondent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">correspondents</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correspondent</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span><span class="p">,</span> <span class="n">correspondent</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">correspondent</span>

    <span class="nd">@correspondent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">correspondent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Correspondent | int | None&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the correspondent for this document.</span>

<span class="sd">        Updates the document&#39;s correspondent_id based on the provided correspondent.</span>
<span class="sd">        Accepts None (to clear the correspondent), a Correspondent object,</span>
<span class="sd">        or a correspondent ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Correspondent | int | None): The correspondent to set. Can be None, a Correspondent object,</span>
<span class="sd">                  or a correspondent ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, a Correspondent object,</span>
<span class="sd">                      or an integer.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Set correspondent by ID</span>
<span class="sd">            &gt;&gt;&gt; document.correspondent = 5</span>
<span class="sd">            &gt;&gt;&gt; # Set correspondent by object</span>
<span class="sd">            &gt;&gt;&gt; document.correspondent = client.correspondents().get(5)</span>
<span class="sd">            &gt;&gt;&gt; # Clear correspondent</span>
<span class="sd">            &gt;&gt;&gt; document.correspondent = None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Leave cache in place in case it changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># Leave cache in place in case id is the same, or id changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>

        <span class="c1"># Check against StandardModel to avoid circular imports</span>
        <span class="c1"># If it is another type of standard model, pydantic validators will complain</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">correspondent_id</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># Pre-populate the cache</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_correspondent</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for correspondent: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">document_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DocumentType | None&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the document type for this document.</span>

<span class="sd">        Retrieves the DocumentType object associated with this document.</span>
<span class="sd">        Uses caching to minimize API requests when accessing the same document type</span>
<span class="sd">        multiple times.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DocumentType | None: The document type object or None if not set.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(pk=1)</span>
<span class="sd">            &gt;&gt;&gt; if document.document_type:</span>
<span class="sd">            ...     print(document.document_type.name)</span>
<span class="sd">            Example Document Type</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Return cache</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pk</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document_type</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">value</span>

        <span class="c1"># None set to retrieve</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Retrieve it</span>
        <span class="n">document_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">document_types</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document_type</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span><span class="p">,</span> <span class="n">document_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">document_type</span>

    <span class="nd">@document_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">document_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;DocumentType | int | None&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the document type for this document.</span>

<span class="sd">        Updates the document&#39;s document_type_id based on the provided document type.</span>
<span class="sd">        Accepts None (to clear the document type), a DocumentType object,</span>
<span class="sd">        or a document type ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (DocumentType | int | None): The document type to set. Can be None, a DocumentType object,</span>
<span class="sd">                  or a document type ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, a DocumentType object,</span>
<span class="sd">                      or an integer.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Set document type by ID</span>
<span class="sd">            &gt;&gt;&gt; document.document_type = 3</span>
<span class="sd">            &gt;&gt;&gt; # Set document type by object</span>
<span class="sd">            &gt;&gt;&gt; document.document_type = client.document_types().get(3)</span>
<span class="sd">            &gt;&gt;&gt; # Clear document type</span>
<span class="sd">            &gt;&gt;&gt; document.document_type = None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Leave cache in place in case it changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># Leave cache in place in case id is the same, or id changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>

        <span class="c1"># Check against StandardModel to avoid circular imports</span>
        <span class="c1"># If it is another type of standard model, pydantic validators will complain</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">document_type_id</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># Pre-populate the cache</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document_type</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for document_type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">storage_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StoragePath | None&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the storage path for this document.</span>

<span class="sd">        Retrieves the StoragePath object associated with this document.</span>
<span class="sd">        Uses caching to minimize API requests when accessing the same storage path</span>
<span class="sd">        multiple times.</span>

<span class="sd">        Returns:</span>
<span class="sd">            StoragePath | None: The storage path object or None if not set.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(pk=1)</span>
<span class="sd">            &gt;&gt;&gt; if document.storage_path:</span>
<span class="sd">            ...     print(document.storage_path.name)</span>
<span class="sd">            Example Storage Path</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Return cache</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pk</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage_path</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">value</span>

        <span class="c1"># None set to retrieve</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Retrieve it</span>
        <span class="n">storage_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">storage_paths</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_path</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span><span class="p">,</span> <span class="n">storage_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">storage_path</span>

    <span class="nd">@storage_path</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">storage_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;StoragePath | int | None&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the storage path for this document.</span>

<span class="sd">        Updates the document&#39;s storage_path_id based on the provided storage path.</span>
<span class="sd">        Accepts None (to clear the storage path), a StoragePath object,</span>
<span class="sd">        or a storage path ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (StoragePath | int | None): The storage path to set. Can be None, a StoragePath object,</span>
<span class="sd">                  or a storage path ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, a StoragePath object,</span>
<span class="sd">                      or an integer.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Set storage path by ID</span>
<span class="sd">            &gt;&gt;&gt; document.storage_path = 2</span>
<span class="sd">            &gt;&gt;&gt; # Set storage path by object</span>
<span class="sd">            &gt;&gt;&gt; document.storage_path = client.storage_paths().get(2)</span>
<span class="sd">            &gt;&gt;&gt; # Clear storage path</span>
<span class="sd">            &gt;&gt;&gt; document.storage_path = None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Leave cache in place in case it changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># Leave cache in place in case id is the same, or id changes again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>

        <span class="c1"># Check against StandardModel to avoid circular imports</span>
        <span class="c1"># If it is another type of standard model, pydantic validators will complain</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">storage_path_id</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># Pre-populate the cache</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_storage_path</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for storage_path: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">custom_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CustomFieldQuerySet&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the custom fields for this document.</span>

<span class="sd">        Returns a QuerySet of CustomField objects associated with this document.</span>
<span class="sd">        The QuerySet is lazily loaded, so API requests are only made when</span>
<span class="sd">        the custom fields are actually accessed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            CustomFieldQuerySet: QuerySet of custom fields associated with this document.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; for field in document.custom_fields:</span>
<span class="sd">            ...     print(f&#39;{field.name}: {field.value}&#39;)</span>
<span class="sd">            Due Date: 2023-04-15</span>
<span class="sd">            Reference: INV-12345</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">custom_fields</span><span class="p">()</span><span class="o">.</span><span class="n">none</span><span class="p">()</span>

        <span class="c1"># Use the API&#39;s filtering capability to get only the custom fields with specific IDs</span>
        <span class="c1"># The paperless-ngx API supports id__in filter for retrieving multiple objects by ID</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">custom_fields</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_field_ids</span><span class="p">)</span>

    <span class="nd">@custom_fields</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">custom_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Iterable[CustomField | CustomFieldValues | CustomFieldTypedDict] | None&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the custom fields for this document.</span>

<span class="sd">        Updates the document&#39;s custom_field_dicts list based on the provided custom fields.</span>
<span class="sd">        Accepts None (to clear all custom fields), an iterable of CustomField objects,</span>
<span class="sd">        CustomFieldValues objects, or dictionaries with field and value keys.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (Iterable[CustomField | CustomFieldValues | CustomFieldTypedDict] | None): The custom fields to set.</span>
<span class="sd">                Can be None, an iterable of CustomField objects, CustomFieldValues objects, or dictionaries.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not None, an iterable of CustomField objects,</span>
<span class="sd">                      CustomFieldValues objects, or dictionaries.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Set custom fields by dictionary</span>
<span class="sd">            &gt;&gt;&gt; document.custom_fields = [{&#39;field&#39;: 1, &#39;value&#39;: &#39;2023-04-15&#39;}, {&#39;field&#39;: 2, &#39;value&#39;: &#39;INV-12345&#39;}]</span>
<span class="sd">            &gt;&gt;&gt; # Set custom fields by CustomField objects</span>
<span class="sd">            &gt;&gt;&gt; document.custom_fields = client.custom_fields().filter(name__icontains=&#39;date&#39;)</span>
<span class="sd">            &gt;&gt;&gt; # Clear all custom fields</span>
<span class="sd">            &gt;&gt;&gt; document.custom_fields = None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="n">new_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CustomFieldValues</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">CustomFieldValues</span><span class="p">):</span>
                    <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># isinstance(field, CustomField)</span>
                <span class="c1"># Check against StandardModel (instead of CustomField) to avoid circular imports</span>
                <span class="c1"># If it is the wrong type of standard model (e.g. a User), pydantic validators will complain</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
                    <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CustomFieldValues</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)))</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CustomFieldValues</span><span class="p">(</span><span class="o">**</span><span class="n">field</span><span class="p">))</span>
                    <span class="k">continue</span>

                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for custom fields: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">field</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span> <span class="o">=</span> <span class="n">new_list</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for custom fields: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_search_hit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if this document has search hit information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if this document was returned as part of a search result</span>
<span class="sd">                 and has search hit information, False otherwise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__search_hit__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">search_hit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the search hit information for this document.</span>

<span class="sd">        When a document is returned as part of a search result, this property</span>
<span class="sd">        contains additional information about the search match.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict[str, Any] | None: Dictionary with search hit information or None</span>
<span class="sd">                                  if this document was not part of a search result.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__search_hit__</span>

<div class="viewcode-block" id="Document.custom_field_value">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.custom_field_value">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">custom_field_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">raise_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the value of a custom field by ID.</span>

<span class="sd">        Retrieves the value of a specific custom field associated with this document.</span>

<span class="sd">        Args:</span>
<span class="sd">            field_id (int): The ID of the custom field to retrieve.</span>
<span class="sd">            default (Any, optional): The value to return if the field is not found. Defaults to None.</span>
<span class="sd">            raise_errors (bool, optional): Whether to raise an error if the field is not found. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The value of the custom field or the default value if not found.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If raise_errors is True and the field is not found.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Get value with default</span>
<span class="sd">            &gt;&gt;&gt; due_date = document.custom_field_value(3, default=&quot;Not set&quot;)</span>
<span class="sd">            &gt;&gt;&gt; # Get value with error handling</span>
<span class="sd">            &gt;&gt;&gt; try:</span>
<span class="sd">            ...     reference = document.custom_field_value(5, raise_errors=True)</span>
<span class="sd">            ... except ValueError:</span>
<span class="sd">            ...     print(&quot;Reference field not found&quot;)</span>
<span class="sd">            Reference field not found</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_field_dicts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">field</span> <span class="o">==</span> <span class="n">field_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">field</span><span class="o">.</span><span class="n">value</span>

        <span class="k">if</span> <span class="n">raise_errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom field </span><span class="si">{</span><span class="n">field_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">default</span></div>


<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    def __getattr__(self, name: str) -&gt; Any:</span>
<span class="sd">        # Allow easy access to custom fields</span>
<span class="sd">        for custom_field in self.custom_fields:</span>
<span class="sd">            if custom_field[&#39;field&#39;] == name:</span>
<span class="sd">                return custom_field[&#39;value&#39;]</span>

<span class="sd">        raise AttributeError(f&quot;&#39;{self.__class__.__name__}&#39; object has no attribute &#39;{name}&#39;&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Document.add_tag">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.add_tag">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="s2">&quot;Tag | int | str&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a tag to the document.</span>

<span class="sd">        Adds a tag to the document&#39;s tag_ids list. The tag can be specified as a Tag object,</span>
<span class="sd">        a tag ID, or a tag name. If a tag name is provided, the method will look up the</span>
<span class="sd">        corresponding tag ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            tag (Tag | int | str): The tag to add. Can be a Tag object, a tag ID, or a tag name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not a Tag object, an integer, or a string.</span>
<span class="sd">            ResourceNotFoundError: If a tag name is provided but no matching tag is found.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Add tag by ID</span>
<span class="sd">            &gt;&gt;&gt; document.add_tag(5)</span>
<span class="sd">            &gt;&gt;&gt; # Add tag by object</span>
<span class="sd">            &gt;&gt;&gt; tag = client.tags().get(3)</span>
<span class="sd">            &gt;&gt;&gt; document.add_tag(tag)</span>
<span class="sd">            &gt;&gt;&gt; # Add tag by name</span>
<span class="sd">            &gt;&gt;&gt; document.add_tag(&quot;Invoice&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">instance</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="n">ResourceNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tag &#39;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for tag: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.remove_tag">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.remove_tag">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="s2">&quot;Tag | int | str&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a tag from the document.</span>

<span class="sd">        Removes a tag from the document&#39;s tag_ids list. The tag can be specified as a Tag object,</span>
<span class="sd">        a tag ID, or a tag name. If a tag name is provided, the method will look up the</span>
<span class="sd">        corresponding tag ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            tag (Tag | int | str): The tag to remove. Can be a Tag object, a tag ID, or a tag name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the input value is not a Tag object, an integer, or a string.</span>
<span class="sd">            ResourceNotFoundError: If a tag name is provided but no matching tag is found.</span>
<span class="sd">            ValueError: If the tag is not associated with this document.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; # Remove tag by ID</span>
<span class="sd">            &gt;&gt;&gt; document.remove_tag(5)</span>
<span class="sd">            &gt;&gt;&gt; # Remove tag by object</span>
<span class="sd">            &gt;&gt;&gt; tag = client.tags().get(3)</span>
<span class="sd">            &gt;&gt;&gt; document.remove_tag(tag)</span>
<span class="sd">            &gt;&gt;&gt; # Remove tag by name</span>
<span class="sd">            &gt;&gt;&gt; document.remove_tag(&quot;Invoice&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># TODO: Handle removal with consideration of &quot;tags can&#39;t be empty&quot; rule in paperless</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">StandardModel</span><span class="p">):</span>
            <span class="c1"># TODO: Handle removal with consideration of &quot;tags can&#39;t be empty&quot; rule in paperless</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># TODO: Handle removal with consideration of &quot;tags can&#39;t be empty&quot; rule in paperless</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">instance</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="n">ResourceNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tag &#39;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_ids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for tag: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Document.get_metadata">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.get_metadata">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DocumentMetadata&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the metadata for this document.</span>

<span class="sd">        Retrieves detailed metadata about the document from the Paperless-ngx API.</span>
<span class="sd">        This includes information like the original file format, creation date,</span>
<span class="sd">        modification date, and other technical details.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DocumentMetadata: The document metadata object.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; metadata = document.get_metadata()</span>
<span class="sd">            &gt;&gt;&gt; print(metadata.original_mime_type)</span>
<span class="sd">            application/pdf</span>
<span class="sd">            &gt;&gt;&gt; print(metadata.media_filename)</span>
<span class="sd">            document.pdf</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Document.download">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.download">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DownloadedDocument&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download the document file.</span>

<span class="sd">        Downloads either the archived version (default) or the original version</span>
<span class="sd">        of the document from the Paperless-ngx server.</span>

<span class="sd">        Args:</span>
<span class="sd">            original (bool, optional): Whether to download the original file instead of the archived version.</span>
<span class="sd">                     Defaults to False (download the archived version).</span>

<span class="sd">        Returns:</span>
<span class="sd">            DownloadedDocument: An object containing the downloaded document content</span>
<span class="sd">                               and metadata.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; # Download archived version</span>
<span class="sd">            &gt;&gt;&gt; download = document.download()</span>
<span class="sd">            &gt;&gt;&gt; with open(download.disposition_filename, &#39;wb&#39;) as f:</span>
<span class="sd">            ...     f.write(download.content)</span>

<span class="sd">            &gt;&gt;&gt; # Download original version</span>
<span class="sd">            &gt;&gt;&gt; original = document.download(original=True)</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Downloaded {len(original.content)} bytes&quot;)</span>
<span class="sd">            Downloaded 245367 bytes</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Document.preview">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.preview">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DownloadedDocument&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a preview of the document.</span>

<span class="sd">        Retrieves a preview version of the document from the Paperless-ngx server.</span>
<span class="sd">        This is typically a web-friendly version (e.g., PDF) that can be displayed</span>
<span class="sd">        in a browser.</span>

<span class="sd">        Args:</span>
<span class="sd">            original (bool, optional): Whether to preview the original file instead of the archived version.</span>
<span class="sd">                     Defaults to False (preview the archived version).</span>

<span class="sd">        Returns:</span>
<span class="sd">            DownloadedDocument: An object containing the preview document content</span>
<span class="sd">                               and metadata.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; preview = document.preview()</span>
<span class="sd">            &gt;&gt;&gt; with open(&#39;preview.pdf&#39;, &#39;wb&#39;) as f:</span>
<span class="sd">            ...     f.write(preview.content)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Document.thumbnail">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.thumbnail">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">thumbnail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DownloadedDocument&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the document thumbnail.</span>

<span class="sd">        Retrieves a thumbnail image of the document from the Paperless-ngx server.</span>
<span class="sd">        This is typically a small image representation of the first page.</span>

<span class="sd">        Args:</span>
<span class="sd">            original (bool, optional): Whether to get the thumbnail of the original file instead of</span>
<span class="sd">                     the archived version. Defaults to False (get thumbnail of archived version).</span>

<span class="sd">        Returns:</span>
<span class="sd">            DownloadedDocument: An object containing the thumbnail image content</span>
<span class="sd">                               and metadata.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; thumbnail = document.thumbnail()</span>
<span class="sd">            &gt;&gt;&gt; with open(&#39;thumbnail.png&#39;, &#39;wb&#39;) as f:</span>
<span class="sd">            ...     f.write(thumbnail.content)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Document.get_suggestions">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.get_suggestions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_suggestions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DocumentSuggestions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get suggestions for this document.</span>

<span class="sd">        Retrieves AI-generated suggestions for document metadata from the Paperless-ngx server.</span>
<span class="sd">        This can include suggested tags, correspondent, document type, and other metadata</span>
<span class="sd">        based on the document&#39;s content.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DocumentSuggestions: An object containing suggested metadata for the document.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; suggestions = document.get_suggestions()</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Suggested tags: {suggestions.tags}&quot;)</span>
<span class="sd">            Suggested tags: [{&#39;name&#39;: &#39;Invoice&#39;, &#39;score&#39;: 0.95}, {&#39;name&#39;: &#39;Utility&#39;, &#39;score&#39;: 0.87}]</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Suggested correspondent: {suggestions.correspondent}&quot;)</span>
<span class="sd">            Suggested correspondent: {&#39;name&#39;: &#39;Electric Company&#39;, &#39;score&#39;: 0.92}</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Suggested document type: {suggestions.document_type}&quot;)</span>
<span class="sd">            Suggested document type: {&#39;name&#39;: &#39;Bill&#39;, &#39;score&#39;: 0.89}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Document.append_content">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.append_content">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">append_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append content to the document.</span>

<span class="sd">        Adds the specified text to the end of the document&#39;s content,</span>
<span class="sd">        separated by a newline.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The content to append.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; document.append_content(&quot;Additional notes about this document&quot;)</span>
<span class="sd">            &gt;&gt;&gt; document.save()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="Document.update_locally">
<a class="viewcode-back" href="../../../../modules/models.html#paperap.models.Document.update_locally">[docs]</a>
    <span class="nd">@override</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_locally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_db</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the document locally with the provided data.</span>

<span class="sd">        Updates the document&#39;s attributes with the provided data without sending</span>
<span class="sd">        an API request. Handles special cases for notes and tags, which cannot be</span>
<span class="sd">        set to None in Paperless-ngx if they already have values.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_db (bool | None, optional): Whether the update is coming from the database. If True,</span>
<span class="sd">                    bypasses certain validation checks. Defaults to None.</span>
<span class="sd">            **kwargs: Additional data to update the document with.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If attempting to set notes or tags to None when</span>
<span class="sd">                                they are not already None and from_db is False.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; document = client.documents().get(1)</span>
<span class="sd">            &gt;&gt;&gt; document.update_locally(title=&quot;New Title&quot;, correspondent_id=5)</span>
<span class="sd">            &gt;&gt;&gt; document.save()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">from_db</span><span class="p">:</span>
            <span class="c1"># Paperless does not support setting notes or tags to None if not already None</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="s2">&quot;tag_ids&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">original</span> <span class="ow">and</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> to None. </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> currently: </span><span class="si">{</span><span class="n">original</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Handle aliases</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">[</span><span class="s2">&quot;tag_ids&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="s2">&quot;tags&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set tags to None. Tags currently: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">[</span><span class="s1">&#39;tag_ids&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_locally</span><span class="p">(</span><span class="n">from_db</span><span class="o">=</span><span class="n">from_db</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jess Mann.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
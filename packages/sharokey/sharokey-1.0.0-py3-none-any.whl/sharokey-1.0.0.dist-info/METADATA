Metadata-Version: 2.1
Name: sharokey
Version: 1.0.0
Summary: Sharokey Python SDK for secure secret sharing with Zero Knowledge encryption
Home-page: https://github.com/sharokey/python-sdk
Author: Sharokey Team
Author-email: support@sharokey.com
Project-URL: Bug Reports, https://github.com/sharokey/python-sdk/issues
Project-URL: Documentation, https://docs.sharokey.com/python
Project-URL: Source, https://github.com/sharokey/python-sdk
Keywords: secrets,encryption,security,zero-knowledge,api,sharokey
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Security :: Cryptography
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aiohttp<4.0.0,>=3.8.0
Requires-Dist: aiofiles<25.0.0,>=23.0.0
Requires-Dist: cryptography<43.0.0,>=41.0.0
Provides-Extra: dev
Requires-Dist: pytest<9.0.0,>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio<1.0.0,>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov<6.0.0,>=4.0.0; extra == "dev"
Requires-Dist: black<25.0.0,>=23.0.0; extra == "dev"
Requires-Dist: isort<6.0.0,>=5.12.0; extra == "dev"
Requires-Dist: mypy<2.0.0,>=1.5.0; extra == "dev"
Requires-Dist: flake8<8.0.0,>=6.0.0; extra == "dev"

# üêç Sharokey Python SDK

> **Zero Knowledge secret sharing** - API coh√©rente avec les commandes CLI

## üöÄ Installation

```bash
pip install sharokey
```

## ‚ö° D√©marrage rapide

```python
import asyncio
import sharokey

async def main():
    # Configuration (√©quivalent: sharokey config --token xxx)
    client = sharokey.SharokeyClient(token="votre-token")
    
    # Cr√©er un secret (√©quivalent: sharokey create "secret" --hours 24 --views 1)
    secret = await client.create("Mon secret confidentiel", 24, 1)
    print(f"URL de partage: {secret.share_url}")
    
    # Lister les secrets (√©quivalent: sharokey list)
    secrets = await client.list()
    print(f"Total: {secrets.count} secrets")

asyncio.run(main())
```

---

## üìö API - Coh√©rente avec CLI

### Configuration

```python
import sharokey

# Configuration de base
client = sharokey.SharokeyClient(
    token="votre-token-api",           # REQUIS
    api_url="https://...",             # Optionnel (d√©faut: production)
    timeout=30                         # Optionnel (d√©faut: 30s)
)
```

### Cr√©er un secret

```python
# Secret simple (√©quivalent: sharokey create "message" --hours 24 --views 1)
secret = await client.create("Mon mot de passe secret", 24, 1)
print(f"URL: {secret.share_url}")
print(f"Expire le: {secret.expiration}")

# Avec toutes les options (√©quivalent: sharokey create --description ... --otp-email ...)
secret = await client.create(
    "Informations critiques",
    hours=2,
    views=3,
    description="Acc√®s serveur production",
    message="√Ä utiliser dans les 2 heures",
    password="protection-additionnelle",
    otp_email="admin@entreprise.com"  # OTP par email
)

# Avec OTP SMS
secret = await client.create(
    "Code d'acc√®s",
    hours=1,
    views=1,
    otp_phone="+33674747474"  # OTP par SMS
)

# Avec pi√®ces jointes (√©quivalent: sharokey create --attach fichier1 --attach fichier2)
secret = await client.create(
    "Documents confidentiels",
    hours=48,
    views=5,
    description="Contrat et annexes",
    attachments=["contrat.pdf", "conditions.docx"],  # Chemins vers fichiers
    password="protection2024"
)
```

### Lister les secrets

```python
# Lister tous (√©quivalent: sharokey list)
secrets = await client.list()
print(f"{secrets.count} secrets trouv√©s")

# Avec filtres (√©quivalent: sharokey list --status active --limit 10)
secrets = await client.list(
    status='active',
    limit=10,
    creator='admin@example.com',
    search='serveur'
)

# Parcourir les r√©sultats
for secret in secrets.data:
    vues_restantes = secret.maximum_views - secret.current_views
    print(f"{secret.slug}: {secret.description} ({vues_restantes} vues restantes)")
```

### D√©tails d'un secret

```python
# Obtenir les d√©tails (√©quivalent: sharokey get ABC123)
secret = await client.get("ABC123XYZ")

print(f"Description: {secret.description}")
print(f"Cr√©ateur: {secret.creator}")
print(f"Vues: {secret.current_views}/{secret.maximum_views}")
print(f"Expire le: {secret.expiration}")
print(f"Pi√®ces jointes: {secret.has_attachments}")
```

### Supprimer un secret

```python
# Supprimer (√©quivalent: sharokey delete ABC123)
success = await client.delete("ABC123XYZ")
if success:
    print("Secret supprim√© avec succ√®s")
```

### Statistiques

```python
# Obtenir les stats (√©quivalent: sharokey stats)
stats = await client.stats()

print(f"Total secrets: {stats.total_secrets}")
print(f"Secrets actifs: {stats.active_secrets}")
print(f"Secrets expir√©s: {stats.expired_secrets}")
print(f"Total vues: {stats.total_views}")
```

---

## üîß Fonctions utilitaires

### Tester la connectivit√©

```python
# Tester la connexion API
connected = await client.test_connection()
if not connected:
    print("Impossible de se connecter √† Sharokey")
```

---

## üí° Exemples pratiques

### Script d'automatisation

```python
#!/usr/bin/env python3
import asyncio
import sharokey
from pathlib import Path

async def deploy_credentials():
    """D√©ployer des identifiants de mani√®re s√©curis√©e."""
    
    client = sharokey.SharokeyClient(token="votre-token")
    
    # Cr√©er un secret pour les identifiants de d√©ploiement
    secret = await client.create(
        "DB_PASSWORD=super_secret_pwd",
        hours=1,  # Expire dans 1 heure
        views=1,  # Une seule vue
        description="Identifiants base de donn√©es - d√©ploiement",
        otp_email="devops@entreprise.com"
    )
    
    print(f"üîê Identifiants cr√©√©s: {secret.share_url}")
    return secret.share_url

# Utilisation
if __name__ == "__main__":
    url = asyncio.run(deploy_credentials())
    print(f"Envoyez cette URL √† l'√©quipe: {url}")
```

### Partage de fichiers s√©curis√©

```python
import asyncio
import sharokey
from pathlib import Path

async def share_files():
    """Partager des fichiers de mani√®re s√©curis√©e."""
    
    client = sharokey.SharokeyClient(token="votre-token")
    
    # Fichiers √† partager
    files = [
        "documents/contrat.pdf",
        "documents/specifications.docx", 
        "documents/budget.xlsx"
    ]
    
    # Cr√©er le secret avec attachments
    secret = await client.create(
        "Dossier client ABC - documents contractuels",
        hours=72,  # 3 jours
        views=10,  # 10 consultations max
        description="Documents contrat client ABC Corp",
        attachments=files,
        password="ContratABC2024",
        otp_email="commercial@entreprise.com"
    )
    
    print(f"üìé Dossier partag√©: {secret.share_url}")
    print(f"üìÑ {len(files)} fichiers joints")
    print(f"üîí Prot√©g√© par mot de passe et OTP email")
    
    return secret

# Utilisation
asyncio.run(share_files())
```

### Dashboard de monitoring

```python
import asyncio
import sharokey

async def dashboard():
    """Dashboard simple des secrets."""
    
    client = sharokey.SharokeyClient(token="votre-token")
    
    # Obtenir les statistiques
    stats = await client.stats()
    
    print("üìä DASHBOARD SHAROKEY")
    print("=" * 40)
    print(f"Total secrets:     {stats.total_secrets:>8}")
    print(f"Secrets actifs:    {stats.active_secrets:>8}")
    print(f"Secrets expir√©s:   {stats.expired_secrets:>8}")
    print(f"Total vues:        {stats.total_views:>8}")
    print()
    
    # Lister les secrets r√©cents
    recent = await client.list(limit=5)
    print("üîê SECRETS R√âCENTS")
    print("=" * 40)
    
    for secret in recent.data:
        status = "üü¢ Actif" if secret.current_views < secret.maximum_views else "üî¥ √âpuis√©"
        print(f"{secret.slug} | {status} | {secret.description or 'Sans description'}")
    
    print(f"\n‚è±Ô∏è  Mis √† jour √†: {asyncio.get_event_loop().time()}")

# Lancer le dashboard
asyncio.run(dashboard())
```

---

## üö® Gestion d'erreurs

### Erreurs courantes

```python
import sharokey

async def handle_errors():
    client = sharokey.SharokeyClient(token="votre-token")
    
    try:
        # Tentative de cr√©ation avec param√®tres invalides
        await client.create("", -1, 0)
        
    except sharokey.ValidationError as e:
        print(f"‚ùå Erreur de validation: {e}")
        # Exemple: "Content is required and must be non-empty"
        
    except sharokey.AuthenticationError as e:
        print(f"‚ùå Erreur d'authentification: {e}")
        # Token invalide ou expir√©
        
    except sharokey.NotFoundError as e:
        print(f"‚ùå Secret non trouv√©: {e}")
        # Secret n'existe pas ou a expir√©
        
    except sharokey.AttachmentError as e:
        print(f"‚ùå Erreur fichier: {e}")
        # Fichier trop gros, introuvable, etc.
        
    except sharokey.NetworkError as e:
        print(f"‚ùå Erreur r√©seau: {e}")
        # Timeout, rate limiting, etc.
        
    except sharokey.SharokeyError as e:
        print(f"‚ùå Erreur g√©n√©rale: {e}")
        # Toutes autres erreurs API
```

### Validation locale

```python
# Le SDK valide automatiquement :
# - Contenu non vide
# - Heures entre 1 et 8760  
# - Vues entre 1 et 1000
# - Token configur√©
# - Attachments : max 10 fichiers, 10MB total
# - OTP : email et phone mutuellement exclusifs

try:
    await client.create("", -1, 0)  # Plusieurs erreurs
except sharokey.ValidationError as e:
    print(e)  # "Content is required and must be non-empty"

# Erreur attachments
try:
    files = ["huge_file.zip"]  # > 10MB
    await client.create("test", 24, 1, attachments=files)
except sharokey.AttachmentError as e:
    print(e)  # "Total attachments size too large: 25.3MB. Maximum 10MB allowed"
```

---

## üîê S√©curit√©

### Chiffrement Zero Knowledge

- **Algorithmes** : AES-GCM-256 + PBKDF2 (10,000 it√©rations)
- **Chiffrement c√¥t√© client** : Vos secrets ne quittent jamais votre machine en clair
- **Double cl√©** : keyA (serveur) + keyB (fragment URL)
- **Compatibilit√© totale** : Secrets cr√©√©s par Python d√©chiffrables partout (CLI, web, etc.)

### Bonnes pratiques

```python
# ‚úÖ Recommand√©
secret = await client.create(
    "mot-de-passe-super-secret", 
    hours=1,        # Courte dur√©e
    views=1,        # Une seule vue
    password="protection-additionnelle",
    otp_email="admin@secure.com"
)

# ‚ùå √Ä √©viter  
secret = await client.create(
    "mot-de-passe-super-secret",
    hours=8760,     # 1 an = trop long
    views=1000      # Trop de vues possibles
)
```

---

## üÜö Comparaison avec CLI

| Fonctionnalit√© | CLI C# | Python SDK |
|---------------|--------|------------|
| **Configuration** | `sharokey config --token xxx` | `SharokeyClient(token='xxx')` |
| **Cr√©ation** | `sharokey create "secret" --hours 24` | `client.create("secret", 24, 1)` |
| **Liste** | `sharokey list --limit 10` | `client.list(limit=10)` |
| **D√©tails** | `sharokey get ABC123` | `client.get('ABC123')` |
| **Suppression** | `sharokey delete ABC123` | `client.delete('ABC123')` |
| **Stats** | `sharokey stats` | `client.stats()` |
| **Pi√®ces jointes** | `--attach file1 --attach file2` | `attachments=['file1', 'file2']` |
| **OTP Email** | `--otp-email user@domain.com` | `otp_email='user@domain.com'` |
| **OTP SMS** | `--otp-phone +33123456789` | `otp_phone='+33123456789'` |
| **Chiffrement** | ‚úÖ Zero Knowledge | ‚úÖ Identique |

---

## üì¶ Installation d√©veloppement

```bash
# Cloner le repo
git clone https://github.com/sharokey/python-sdk.git
cd python-sdk

# Installer en mode d√©veloppement
pip install -e .[dev]

# Lancer les tests
pytest

# Linting
black sharokey/
isort sharokey/
mypy sharokey/
```

---

## üêõ Support

- **Issues GitHub** : https://github.com/sharokey/python-sdk/issues
- **Documentation** : https://docs.sharokey.com/python
- **Examples** : [examples/](examples/)

---

## ‚ö° Pr√™t √† l'usage !

**Votre SDK Python Sharokey est pr√™t !**

1. ‚úÖ **Installez** : `pip install sharokey`
2. ‚úÖ **Configurez** : `client = SharokeyClient(token='...')`
3. ‚úÖ **Utilisez** : API coh√©rente avec le CLI !

*Python SDK 1.0.0 - Compatible avec Sharokey API*

/*! For license information please see deposit.812dc08d8d7ad74d20f8.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.swh=e():(t.swh=t.swh||{},t.swh.deposit=e())}(self,(function(){return function(){var t={887:function(t,e,n){var r=n(16993),o=n(11791);t.exports=function(t,e,n,i,a){return new o(r().w(t,e,n,i),a||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},4373:function(t){t.exports=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},4633:function(t,e,n){var r=n(25172),o=n(16993),i=n(55869),a=n(887),s=n(11791),u=n(4373),c=n(30579);function l(){"use strict";var e=o(),n=e.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function d(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))}var p={throw:1,return:2,break:3,continue:3};function h(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,p[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,c(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(t.exports=l=function(){return{wrap:function(t,n,r,o){return e.w(h(t),n,r,o&&o.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(t,e){return new r(t,e)},AsyncIterator:s,async:function(t,e,n,r,o){return(d(e)?a:i)(h(t),e,n,r,o)},keys:u,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},8545:function(t,e,n){"use strict";n.d(e,{Eb:function(){return o},jt:function(){return i},lY:function(){return r}});n(54756),n(18987);function r(t,e){var n="/static/"+t;return n.startsWith("/")&&e&&(n=e+n),n}function o(t){return new Date(t).toLocaleString()}function i(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=""),"display"===e&&t){var o=encodeURI(t);r||(r=o);var i="";return n&&(i='target="_blank" rel="noopener noreferrer"'),'<a href="'+o+'" '+i+">"+r+"</a>"}return t}},11791:function(t,e,n){var r=n(25172),o=n(75546);t.exports=function t(e,n){function i(t,o,a,s){try{var u=e[t](o),c=u.value;return c instanceof r?n.resolve(c.v).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):n.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,s)}))}catch(t){s(t)}}var a;this.next||(o(t.prototype),o(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(t,e,r){function o(){return new n((function(e,n){i(t,r,e,n)}))}return a=a?a.then(o,o):o()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},16099:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(86308));function i(t){if(!t.options.indentation&&!t.options.lineSeparator)return;let e;for(t.content+=t.options.lineSeparator,e=0;e<t.level;e++)t.content+=t.options.indentation}function a(t,e){t.content+=e}function s(t,e,n){if("string"==typeof t.content)!function(t,e,n){if(!n){const n=t.trim();(e.options.lineSeparator||0===n.length)&&(t=n)}t.length>0&&(!n&&e.content.length>0&&i(e),a(e,t))}(t.content,e,n);else if("Element"===t.type)!function(t,e,n){e.path.push(t.name),!n&&e.content.length>0&&i(e);if(a(e,"<"+t.name),u(e,t.attributes),null===t.children||e.options.forceSelfClosingEmptyTag&&0===t.children.length){const t=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(e,t)}else if(0===t.children.length)a(e,"></"+t.name+">");else{const r=t.children;a(e,">"),e.level++;let o="preserve"===t.attributes["xml:space"]||n,u=!1;if(!o&&e.options.ignoredPaths&&(u=function(t,e){const n="/"+t.join("/"),r=t[t.length-1];return e.includes(r)||e.includes(n)}(e.path,e.options.ignoredPaths),o=u),!o&&e.options.collapseContent){let t=!1,e=!1,i=!1;r.forEach((function(o,a){"Text"===o.type?(o.content.includes("\n")?(e=!0,o.content=o.content.trim()):0!==a&&a!==r.length-1||n||0===o.content.trim().length&&(o.content=""),(o.content.trim().length>0||1===r.length)&&(t=!0)):"CDATA"===o.type?t=!0:i=!0})),!t||i&&e||(o=!0)}r.forEach((function(t){s(t,e,n||o)})),e.level--,n||o||i(e),u&&function(t){let e;for(t.content=t.content.replace(/ +$/,""),e=0;e<t.level;e++)t.content+=t.options.indentation}(e),a(e,"</"+t.name+">")}e.path.pop()}(t,e,n);else{if("ProcessingInstruction"!==t.type)throw new Error("Unknown node type: "+t.type);c(t,e)}}function u(t,e){Object.keys(e).forEach((function(n){const r=e[n].replace(/"/g,"&quot;");a(t," "+n+'="'+r+'"')}))}function c(t,e){e.content.length>0&&i(e),a(e,"<?"+t.name),u(e,t.attributes),a(e,"?>")}function l(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=!0===e.collapseContent,e.lineSeparator="lineSeparator"in e?e.lineSeparator:"\r\n",e.whiteSpaceAtEndOfSelfclosingTag=!0===e.whiteSpaceAtEndOfSelfclosingTag,e.throwOnFailure=!1!==e.throwOnFailure;try{const n=(0,o.default)(t,{filter:e.filter,strictMode:e.strictMode}),r={content:"",level:0,options:e,path:[]};return n.declaration&&c(n.declaration,r),n.children.forEach((function(t){s(t,r,!1)})),e.lineSeparator?r.content.replace(/\r\n/g,"\n").replace(/\n/g,e.lineSeparator):r.content}catch(n){if(e.throwOnFailure)throw n;return t}}l.minify=(t,e={})=>l(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),t.exports=l,e.default=l},16993:function(t,e,n){var r=n(75546);function o(){var e,n,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.toStringTag||"@@toStringTag";function u(t,o,i,a){var s=o&&o.prototype instanceof l?o:l,u=Object.create(s.prototype);return r(u,"_invoke",function(t,r,o){var i,a,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,s=e,d.n=n,c}};function p(t,r){for(a=t,s=r,n=0;!f&&u&&!o&&n<l.length;n++){var o,i=l[n],p=d.p,h=i[2];t>3?(o=h===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=t<3||i[0]>r||r>h)&&(i[4]=t,i[5]=r,d.n=h,a=0))}if(o||t>1)return c;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),a=l,s=h;(n=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,s)):d.n=s:d.v=s);try{if(u=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((n=(f=d.n<0)?s:t.call(r,d))!==c)break}catch(t){i=e,a=1,s=t}finally{u=1}}return{value:n,done:f}}}(t,i,a),!0),u}var c={};function l(){}function f(){}function d(){}n=Object.getPrototypeOf;var p=[][a]?n(n([][a]())):(r(n={},a,(function(){return this})),n),h=d.prototype=l.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,r(t,s,"GeneratorFunction")),t.prototype=Object.create(h),t}return f.prototype=d,r(h,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(h),r(h,s,"Generator"),r(h,a,(function(){return this})),r(h,"toString",(function(){return"[object Generator]"})),(t.exports=o=function(){return{w:u,m:m}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},18987:function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}(function t(e,n){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+a}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=e.read(a,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){o(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})})({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},23717:function(t,e,n){"use strict";n.d(e,{_k:function(){return r}});var r={serverSide:!0,processing:!0,language:{processing:'<img src="'+(0,n(8545).lY)("img/swh-spinner.gif")+'"></img>'},fixedHeader:!0,lengthMenu:[10,25,50,100,1e3],scrollCollapse:!0,searchDelay:1e3}},25172:function(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},30579:function(t,e,n){var r=n(73738).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},54756:function(t,e,n){var r=n(4633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},55869:function(t,e,n){var r=n(887);t.exports=function(t,e,n,o,i){var a=r(t,e,n,o,i);return a.next().then((function(t){return t.done?t.value:a.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},58168:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(null,arguments)}n.d(e,{A:function(){return r}})},73738:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},75546:function(t){function e(n,r,o,i){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}t.exports=e=function(t,n,r,o){function i(n,r){e(t,n,(function(t){return this._invoke(n,r,t)}))}n?a?a(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r:(i("next",0),i("throw",1),i("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,o,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},86308:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingError=void 0;class n extends Error{constructor(t,e){super(t),this.cause=e}}let r;function o(){return s(!1)||function(){const t=l(/^([^<]+)/);if(t){const e={type:"Text",content:t[1]};return{excluded:!1===r.options.filter(e),node:e}}}()||u()||function(){if(r.xml.startsWith("<![CDATA[")){const t=r.xml.indexOf("]]>");if(t>-1){const e=t+3,n={type:"CDATA",content:r.xml.substring(0,e)};return r.xml=r.xml.slice(e),{excluded:!1===r.options.filter(n),node:n}}}}()||a(!1)}function i(){return l(/\s*/),s(!0)||u()||function(){const t=l(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||l(/^<!DOCTYPE\s+\S+\s*>/);if(t){const e={type:"DocumentType",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}()||a(!1)}function a(t){const e=l(t?/^<\?(xml(-stylesheet)?)\s*/:/^<\?([\w-:.]+)\s*/);if(!e)return;const n={name:e[1],type:"ProcessingInstruction",attributes:{}};for(;!f()&&!d("?>");){const t=c();if(!t)return;n.attributes[t.name]=t.value}return l(/\?>/),{excluded:!t&&!1===r.options.filter(n),node:n}}function s(t){const e=l(/^<([^?!</>\s]+)\s*/);if(!e)return;const i={type:"Element",name:e[1],attributes:{},children:[]},a=!t&&!1===r.options.filter(i);for(;!(f()||d(">")||d("?>")||d("/>"));){const t=c();if(!t)return;i.attributes[t.name]=t.value}if(l(/^\s*\/>/))return i.children=null,{excluded:a,node:i};l(/\??>/);let s=o();for(;s;)s.excluded||i.children.push(s.node),s=o();if(r.options.strictMode){const t=`</${i.name}>`;if(!r.xml.startsWith(t))throw new n("Failed to parse XML",`Closing tag not matching "${t}"`);r.xml=r.xml.slice(t.length)}else l(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:a,node:i}}function u(){const t=l(/^<!--[\s\S]*?-->/);if(t){const e={type:"Comment",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}function c(){const t=l(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(t)return{name:t[1].trim(),value:(e=t[2].trim(),e.replace(/^['"]|['"]$/g,""))};var e}function l(t){const e=r.xml.match(t);if(e)return r.xml=r.xml.slice(e[0].length),e}function f(){return 0===r.xml.length}function d(t){return 0===r.xml.indexOf(t)}function p(t,e={}){t=t.trim();const o=e.filter||(()=>!0);return r={xml:t,options:Object.assign(Object.assign({},e),{filter:o,strictMode:!0===e.strictMode})},function(){const t=a(!0),e=[];let o,s=i();for(;s;){if("Element"===s.node.type){if(o)throw new Error("Found multiple root nodes");o=s.node}s.excluded||e.push(s.node),s=i()}if(!o)throw new n("Failed to parse XML","Root Element not found");if(0!==r.xml.length)throw new n("Failed to parse XML","Not Well-Formed XML");return{declaration:t?t.node:null,root:o,children:e}}()}e.ParsingError=n,t.exports=p,e.default=p}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{initDepositAdmin:function(){return u}});var t=n(58168),e=n(16099),o=n.n(e),i=n(8545),a=n(23717);function s(t,e,n){if(void 0===n&&(n=""),"display"===e&&t&&t.startsWith("swh")){var r=Urls.browse_swhid(t),o=t.replace(/;/g,";<br/>");return n||(n=o),'<a href="'+r+'">'+n+"</a>"}return t}function u(e,n){var r;$(document).ready((function(){$.fn.dataTable.ext.errMode="none",r=$("#swh-admin-deposit-list").on("error.dt",(function(t,e,n,r){$("#swh-admin-deposit-list-error").text(r)})).DataTable((0,t.A)({},a._k,{dom:'<<"d-flex justify-content-between align-items-center"f<"#list-exclude">l>rt<"row mt-2"<"col-sm-5"i><"col-sm-7"p>>',ajax:{url:Urls.admin_deposit_list(),data:function(t){t.excludePattern=$("#swh-admin-deposit-list-exclude-filter").val()}},columns:[{data:"id",name:"id"},{data:"type",name:"type"},{data:"uri",name:"uri",render:function(t,e,n){var r=$.fn.dataTable.render.text().display(t),o="",a="";return n.swhid_context&&t?o=s(n.swhid_context,e,r):t&&(o=r),t&&(a=(0,i.jt)(r,e,!0,'<i class="mdi mdi-open-in-new" aria-hidden="true"></i>')),o+"&nbsp;"+a}},{data:"reception_date",name:"reception_date",render:i.Eb},{data:"status",name:"status"},{data:"raw_metadata",name:"raw_metadata",render:function(t,e,n){return"display"===e&&n.raw_metadata?'<button class="btn btn-secondary metadata">display</button>':t}},{data:"status_detail",name:"status_detail",render:function(t,e,n){if("display"===e&&t){var r=t;return"object"==typeof t&&(r=JSON.stringify(t,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+r+"</div>"}return t},orderable:!1,visible:!1},{data:"swhid",name:"swhid",render:function(t,e,n){return s(t,e)},orderable:!1,visible:!1},{data:"swhid_context",name:"swhid_context",render:function(t,e,n){return s(t,e)},orderable:!1,visible:!1}],scrollX:!0,order:[[0,"desc"]]})),$("div#list-exclude").html('\n      <div id="swh-admin-deposit-list-exclude-div-wrapper" class="dataTables_filter">\n        <label for="swh-admin-deposit-list-exclude-filter">\n          Exclude:\n        </label>\n        <input id="swh-admin-deposit-list-exclude-filter"\n              type="search"\n              value="check-deposit"\n              class="form-control form-control-sm mb-2"\n              placeholder="exclude-pattern" aria-controls="swh-admin-deposit-list">\n        </input>\n      </div>'),$("#swh-admin-deposit-list tbody").on("click","tr button.metadata",(function(){var t=r.row(this.parentNode.parentNode).data(),e=o()(t.raw_metadata,{indentation:"  ",collapseContent:!0,lineSeparator:"\n"}),n=$("<div/>").text(e).html();swh.webapp.showModalHtml("Metadata of deposit "+t.id,'<pre style="max-height: 75vh;"><code class="xml">'+n+"</code></pre>","90%"),swh.webapp.highlightCode()})),$("#swh-admin-deposit-list-exclude-filter").keyup((function(){r.draw()})),r.draw()})),$("a.toggle-col").on("click",(function(t){t.preventDefault();var e=r.column($(this).attr("data-column"));e.visible(!e.visible()),e.visible()?$(this).removeClass("col-hidden"):$(this).addClass("col-hidden")}))}}(),r}()}));
//# sourceMappingURL=deposit.812dc08d8d7ad74d20f8.js.map